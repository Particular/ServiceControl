import{e as U,i as V,aL as z,aM as K,m as a,n as s,q as l,p as J,t as n,N as O,K as R,L as Q,a7 as C,aN as j,B as _,v as r,y as d,z as o,aO as g,_ as u,J as m,aP as G,ac as w,a6 as k,an as H,aQ as W,aC as v,ai as X,k as Y,U as Z}from"./index-C-3C3fiy.js";const ee={class:"row"},te={class:"col-sm-12"},se=["for","onClick"],ae=["disabled","onUpdate:modelValue","value","id"],le={class:"col-11 failed-message-data"},ne={class:"row"},oe={class:"col-12"},ie={class:"row box-header"},re=["onClick"],de={class:"lead break"},ce={class:"metadata"},ue={key:0,title:"Message was submitted for retrying",class:"label sidebar-label label-info metadata-label"},pe={key:1,title:"Message is being retried",class:"label sidebar-label label-info metadata-label metadata in-progress"},be={key:2,title:"Message is being retried",class:"label sidebar-label label-info metadata-label metadata in-progress"},_e={key:3,class:"label sidebar-label label-info metadata-label"},fe={key:4,title:"Message is being deleted",class:"label sidebar-label label-info metadata-label metadata in-progress"},ye={key:5,title:"Message is being deleted",class:"label sidebar-label label-info metadata-label metadata in-progress"},me=["title"],he={key:7,class:"label sidebar-label label-warning metadata-label metadata in-progress"},ge={key:8,title:"Message was edited",class:"label sidebar-label label-info metadata-label"},ke={class:"metadata"},ve={class:"metadata"},Me={class:"metadata"},Re={key:9,class:"metadata"},Ce={key:10,class:"metadata"},we={key:11,class:"metadata danger"},xe={key:12,class:"metadata danger"},Se=["onClick"],Ee={class:"stacktrace-preview"},Ie=U({__name:"MessageList",props:{messages:{},showRequestRetry:{type:Boolean,default:!1}},emits:["retryRequested"],setup(x,{expose:S,emit:E}){let b;const M=V(),I=E,c=x;function P(){return c.messages.filter(i=>i.selected)}function T(){c.messages.forEach(i=>i.selected=!0)}function A(){c.messages.forEach(i=>i.selected=!1)}function D(){c.messages.forEach(i=>i.resolved=!0)}function L(){return c.messages.find(i=>i.selected)}function q(){return c.messages.length>0}function F(){return c.messages.length}function N(i,t){if(i.shiftKey&&b!=null){const h=(t<b?t:b)+1,e=(t<b?b:t)+1,f=c.messages;for(let y=h;y<e;y++)f[y].selected=!f[y].selected;const p=document.getSelection();p&&p.empty()}b=t}function $(i){M.push({path:Y.messages.failedMessage.link(i),query:{back:M.currentRoute.value.fullPath}})}S({getSelectedMessages:P,selectAll:T,deselectAll:A,resolveAll:D,isAnythingSelected:L,isAnythingDisplayed:q,numberDisplayed:F});const B=z("#929E9E").filter;return(i,t)=>{const h=K("tippy");return s(),a(R,null,[l("div",ee,[l("div",te,[c.messages.length===0?(s(),J(O,{key:0,title:"message",message:"There are currently no messages"})):n("",!0)])]),(s(!0),a(R,null,Q(c.messages,(e,f)=>(s(),a("div",{class:"row box repeat-item failed-message",key:e.id},[l("label",{class:"check col-auto",for:`checkbox${e.id}`,onClick:p=>N(p,f)},[C(l("input",{type:"checkbox",disabled:e.retryInProgress||e.submittedForRetrial||e.deleteInProgress||e.restoreInProgress,class:"checkbox","onUpdate:modelValue":p=>e.selected=p,value:e.id,id:`checkbox${e.id}`},null,8,ae),[[j,e.selected]])],8,se),l("div",le,[l("div",ne,[l("div",oe,[l("div",ie,[l("div",{class:"col-12 no-side-padding",onClick:p=>$(e.id)},[l("p",de,_(e.message_type||"Message Type Unknown - missing metadata EnclosedMessageTypes"),1),l("p",ce,[e.submittedForRetrial?(s(),a("span",ue,"To retry")):n("",!0),e.retryInProgress?(s(),a("span",pe,[r(u,{icon:o(g)},null,8,["icon"]),t[0]||(t[0]=d(" Retry in progress",-1))])):n("",!0),e.retried?(s(),a("span",be,[r(u,{icon:o(g)},null,8,["icon"]),t[1]||(t[1]=d(" Retried",-1))])):n("",!0),e.resolved?(s(),a("span",_e,"Resolved")):n("",!0),e.deleteInProgress?(s(),a("span",fe,[r(u,{icon:o(m),class:"icon"},null,8,["icon"]),t[2]||(t[2]=d(" Scheduled for deletion",-1))])):n("",!0),e.archived?(s(),a("span",ye,[r(u,{icon:o(m),class:"icon"},null,8,["icon"]),t[3]||(t[3]=d(" Deleted",-1))])):n("",!0),e.number_of_processing_attempts>1?(s(),a("span",{key:6,title:`This message has already failed ${e.number_of_processing_attempts} times`,class:"label sidebar-label label-important metadata-label"},_(e.number_of_processing_attempts===10?"9+":e.number_of_processing_attempts-1)+" Retry Failures",9,me)):n("",!0),e.restoreInProgress?C((s(),a("span",he,[r(u,{icon:o(G),class:"icon"},null,8,["icon"]),t[4]||(t[4]=d(" Restore in progress",-1))])),[[h,"Message is being restored"]]):n("",!0),e.edited?(s(),a("span",ge,"Edited")):n("",!0),l("span",ke,[r(u,{icon:o(w),class:"icon"},null,8,["icon"]),t[5]||(t[5]=d(" Failed: ",-1)),r(k,{dateUtc:e.time_of_failure},null,8,["dateUtc"])]),l("span",ve,[l("i",{class:"fa pa-endpoint",style:H({filter:o(B)})},null,4),d(" Endpoint: "+_(e.receiving_endpoint.name),1)]),l("span",Me,[r(u,{icon:o(W),class:"icon"},null,8,["icon"]),d(" Machine: "+_(e.receiving_endpoint.host),1)]),e.redirect?(s(),a("span",Re,[t[6]||(t[6]=l("i",{class:"fa pa-redirect-source pa-redirect-small"},null,-1)),d(" Redirect: "+_(e.redirect),1)])):n("",!0),e.status===o(v).Archived?(s(),a("span",Ce,[r(u,{icon:o(w),class:"icon"},null,8,["icon"]),t[7]||(t[7]=d(" Deleted: ",-1)),r(k,{"date-utc":e.last_modified},null,8,["date-utc"])])):n("",!0),e.status===o(v).Archived&&e.delete_soon?(s(),a("span",we,[r(u,{icon:o(m),class:"danger"},null,8,["icon"]),t[8]||(t[8]=d(" Scheduled for deletion: immediately",-1))])):n("",!0),e.status===o(v).Archived&&!e.delete_soon?(s(),a("span",xe,[r(u,{icon:o(m),class:"danger"},null,8,["icon"]),t[9]||(t[9]=d(" Scheduled for deletion: ",-1)),r(k,{class:"danger","date-utc":e.deleted_in},null,8,["date-utc"])])):n("",!0),!e.retryInProgress&&c.showRequestRetry?(s(),a("button",{key:13,type:"button",name:"retryMessage",class:"btn btn-link btn-sm",onClick:X(p=>I("retryRequested",e.id),["stop"])},[r(u,{icon:o(g),class:"no-link-underline"},null,8,["icon"]),t[10]||(t[10]=d(" Request retry ",-1))],8,Se)):n("",!0)]),l("pre",Ee,_(e.exception.message),1)],8,re)])])])])]))),128))],64)}}}),Te=Z(Ie,[["__scopeId","data-v-e5cb2875"]]);export{Te as M};
//# sourceMappingURL=MessageList-DnOFCH0O.js.map
