import{e as E,X as N,p as u,n as a,Y as R,z as e,x as h,Z as A,q as t,y as o,B as V,$ as B,U as w,V as O,s as W,r as k,T as H,t as U,C as z,v as d,_ as S,E as y,a0 as F,a1 as P,R as q,m as v,N as K,W as f,K as C,P as g,Q as m}from"./index-C-3C3fiy.js";import{O as L}from"./OnOffSwitch-CdRopK6h.js";import{H as Y}from"./HeartbeatsList-Bgrugo45.js";import"./LastHeartbeat.vue_vue_type_script_setup_true_lang-DscQ87Ez.js";const Q={class:"container not-supported"},X={class:"row"},Z={class:"col-sm-12"},j={class:"text-center message"},G=E({__name:"EndpointSettingsSupported",setup(T){const i=N();return(c,s)=>(a(),u(R,{supported:e(i)},{unsupported:h(()=>[t("div",Q,[t("div",X,[t("div",Z,[t("div",j,[t("p",null,[s[0]||(s[0]=o(" The minimum version of ServiceControl required to enable configuring tracking of endpoints is ",-1)),t("span",null,V(e(B)),1),s[1]||(s[1]=o(". ",-1))]),s[2]||(s[2]=t("div",null,[t("a",{class:"btn btn-default btn-primary",href:"https://particular.net/downloads",target:"_blank"},"Update ServiceControl to latest version")],-1))])])])])]),default:h(()=>[A(c.$slots,"default",{},void 0,!0)]),_:3},8,["supported"]))}}),J=w(G,[["__scopeId","data-v-20766df1"]]),M={class:"row filters"},tt={class:"col-sm-12"},et={class:"buttonsContainer"},st=["disabled"],nt=["disabled"],at={class:"row"},ot={name:"endpoint_configuration","aria-label":"Endpoint Configuration"},it={class:"row"},lt={class:"col-9 no-side-padding"},rt={key:1,class:"row no-side-padding"},dt={class:"col-3 instructions"},ut={class:"defaultSetting"},ct={class:"switch"},pt=E({__name:"HeartbeatConfiguration",setup(T){const{store:i}=O(),{sortedEndpoints:c,filteredEndpoints:s,defaultTrackingInstancesValue:_}=W(i),p=k(!1),l=k("track");function b(r){l.value=r,p.value=!0}function $(){p.value=!1}async function I(){p.value=!1;try{await i.updateEndpointSettings(s.value.filter(r=>l.value==="track"&&!r.track_instances||l.value==="do not track"&&r.track_instances)),g(m.SUCCESS,`All endpoints set to '${l.value}'`,"",!1,{timeout:1e3})}catch{g(m.ERROR,"Save failed","",!1,{timeout:3e3})}}async function D(){try{await i.updateEndpointSettings([{name:"",track_instances:_.value}]),g(m.SUCCESS,"Default setting updated","",!1,{timeout:3e3})}catch{g(m.ERROR,"Failed to update default setting","",!1,{timeout:3e3})}}return(r,n)=>(a(),u(J,null,{default:h(()=>[(a(),u(H,{to:"#modalDisplay"},[p.value?(a(),u(z,{key:0,heading:"Proceed with bulk operation",body:`Are you sure you want to set ${e(s).length} endpoint(s) to be '${l.value}'?`,onCancel:$,onConfirm:I},null,8,["body"])):U("",!0)])),t("div",M,[t("div",tt,[t("span",et,[t("button",{type:"button",class:"btn btn-default btn-sm",disabled:e(s).length===0,onClick:n[0]||(n[0]=x=>b("track"))},[d(S,{icon:e(F),class:y(["icon",{"text-black":e(s).length>0}])},null,8,["icon","class"]),n[2]||(n[2]=o(" Track Instances on All Endpoints ",-1))],8,st),t("button",{type:"button",class:"btn btn-default btn-sm",disabled:e(s).length===0,onClick:n[1]||(n[1]=x=>b("do not track"))},[d(S,{icon:e(P),class:y(["icon",{"text-black":e(s).length>0}])},null,8,["icon","class"]),n[3]||(n[3]=o(" Do Not Track Instances on All Endpoints ",-1))],8,nt)])])]),t("div",at,[d(q,{displayed:e(s).length,total:e(c).length},null,8,["displayed","total"])]),t("section",ot,[t("div",it,[t("div",lt,[e(c).length===0?(a(),u(K,{key:0,message:"Nothing to configure"})):(a(),v("div",rt,[d(Y,{data:e(s),columns:[e(f).Name,e(f).InstancesTotal,e(f).LastHeartbeat,e(f).TrackToggle]},null,8,["data","columns"])]))]),t("div",dt,[t("div",ut,[n[4]||(n[4]=t("label",null,"Track Instances by default on new endpoints",-1)),t("div",ct,[d(L,{id:"defaultTIV",onToggle:D,value:e(_)},null,8,["value"])])]),t("p",null,[e(_)?(a(),v(C,{key:0},[o("If most of your endpoints are auto-scaled, consider changing this setting.")],64)):(a(),v(C,{key:1},[o("If most of your endpoint are hosted in physical infrastructure, consider changing this setting.")],64))]),n[5]||(n[5]=t("p",null,[t("code",null,"Track Instances"),o(" is the best setting for endpoints where all instances are hosted in physical infrastructure that is not auto-scaled. Example, physical or virtual servers.")],-1)),n[6]||(n[6]=t("p",null,[t("code",null,"Do Not Track Instances"),o(" is the best setting for endpoints that are hosted in infrastructure with autoscalers. Example, Kubernetes, Azure Container Apps and AWS Elastic Container Service.")],-1))])])])]),_:1}))}}),vt=w(pt,[["__scopeId","data-v-30a3cd88"]]);export{vt as default};
//# sourceMappingURL=HeartbeatConfiguration-BLMzeWEb.js.map
