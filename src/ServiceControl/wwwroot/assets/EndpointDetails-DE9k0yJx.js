import{d as Ne,bx as $e,by as Se,u as oe,r as A,bz as Ve,bA as N,e as z,s as j,l as Ee,m as a,n as i,q as t,bB as Ie,y as r,B as d,z as e,v as y,k as ee,x as V,U as O,c as C,bC as pe,bh as R,bD as ge,E as G,t as o,K as te,L as se,an as ve,br as le,aM as J,p as H,bE as re,a7 as h,bF as me,bG as Y,bH as U,bI as B,bJ as q,bK as F,i as ce,o as xe,I as L,bL as _e,_ as ie,ab as ke,bt as Me,bM as K,bN as W,bO as ae,J as Ae,N as we,f as De,w as Te,bP as Ge,bQ as he,a5 as Pe,ad as Le,aq as Ue,bR as Be,D as ne,ax as qe}from"./index-Cy3_77ur.js";import{c as Fe}from"./messageGroupClient-DZ-B7N8O.js";function be(m){return m.split(".").pop()??m}function Re(m){if(m.typeName.indexOf(";")>0){const _=m.typeName.split(";").map(p=>{const g=p.split(","),v={typeName:g[0],assemblyName:g[1],assemblyVersion:g[2].substring(g[2].indexOf("=")+1)};return g[4]?.endsWith("=null")||(v.culture=g[3],v.publicKeyToken=g[4]),v});return{...m,messageTypeHierarchy:_,typeName:_.map(p=>p.typeName).join(", "),shortName:_.map(p=>be(p.typeName)).join(", "),containsTypeHierarchy:!0,tooltipText:_.reduce((p,g)=>(p?`${p}
 `:"")+`${g.typeName} |${g.assemblyName}-${g.assemblyVersion}`+(g.culture?` |${g.culture}`:"")+(g.publicKeyToken?` |${g.publicKeyToken}`:""),"")}}const s=m.culture&&m.culture!=="null"?` | Culture=${m.culture}`:"",u=m.publicKeyToken&&m.publicKeyToken!=="null"?` | PublicKeyToken=${m.publicKeyToken}`:"";return{...m,shortName:be(m.typeName),tooltipText:`${m.typeName} | ${m.assemblyName}-${m.assemblyVersion}${s}${u}`}}class ye{totalItems;data;constructor(s){this.totalItems=s.length,this.data=s.filter(u=>u.id&&u.typeName).map(u=>Re(u)).sort((u,_)=>u.typeName.localeCompare(_.typeName))}}function Ke(m){return m.error!==void 0}const Z={points:[],average:0},fe={...Z,timeAxisValues:[]},We=()=>({queueLength:Z,throughput:Z,retries:Z,processingTime:fe,criticalTime:fe}),X={},He=()=>({queueLength:X,throughput:X,retries:X,processingTime:X,criticalTime:X}),ze=()=>({instances:[],digest:{metrics:He()},metricDetails:{metrics:We()},isScMonitoringDisconnected:!1,serviceControlId:"",errorCount:0,isStale:!1,messageTypes:[]}),de=Ne("MonitoringEndpointDetailsStore",()=>{const m=$e(),{store:s}=Se(),u=oe(),_=Fe(),p=Ve((S,f=1)=>{const $=A(null);return{data:$,refresh:async()=>{if(u.isMonitoringEnabled)try{const[,x]=await u.fetchTypedFromMonitoring(`monitored-endpoints/${S}?history=${f}`);$.value=x}catch(x){console.error(x),x instanceof Error&&($.value={error:x.message})}}}}),g=A(""),v=A(ze()),M=A(null),D=A(null),w=A(!1),b=A([]),c=A(!1);async function n(S){const{data:f,refresh:$}=p(S,m.historyPeriod.pVal);if(s.monitoringConnectionState.unableToConnect||await $(),f.value==null||Ke(f.value))v.value.instances.forEach(I=>I.isScMonitoringDisconnected=!0),v.value.isScMonitoringDisconnected=!0,M.value=f.value;else{M.value=null;const I=f.value;v.value.isScMonitoringDisconnected=!1;const E=await Promise.all(I.instances.map(async P=>{const{serviceControlId:Q,errorCount:Ce}=await l("Endpoint Instance",P.id);return{...P,serviceControlId:Q,errorCount:Ce,isScMonitoringDisconnected:!1}}));if(E.sort((P,Q)=>P.id.localeCompare(Q.id)),v.value.isStale=E.every(P=>P.isStale),S===g.value&&v.value.messageTypes.length>0&&v.value.messageTypes.length!==I.messageTypes.length){const{messageTypes:P,...Q}=I;v.value={...v.value,...Q,instances:E},w.value=!0,b.value=P}else v.value={...v.value,...f.value,instances:E};g.value=S,D.value=new ye(v.value.messageTypes),c.value=v.value.instances.some(P=>parseInt(N(P.metrics.criticalTime).value)<0)}const{serviceControlId:x,errorCount:k}=await l("Endpoint Name",g.value);v.value.serviceControlId=x,v.value.errorCount=k}async function l(S,f){const x=(await _.getExceptionGroupsForEndpoint(S,f))[0];return{serviceControlId:x?.id??"",errorCount:x?.count??0}}function T(){w.value&&(w.value=!1,v.value.messageTypes=b.value,b.value=[],D.value=new ye(v.value.messageTypes))}return{endpointName:g,endpointDetails:v,endpointError:M,messageTypes:D,messageTypesAvailable:w,messageTypesUpdatedSet:b,negativeCriticalTimeIsPresent:c,updateMessageTypes:T,getEndpointDetails:n}}),Oe={class:"row"},Ye={class:"col-sm-12"},je={class:"row"},Je={class:"col-sm-12"},Qe={class:"row"},Xe={class:"col-sm-12"},Ze={class:"text-center monitoring-no-data"},et={class:"action-toolbar"},tt=z({__name:"MonitoringNotAvailable",setup(m){const s=oe(),{monitoringUrl:u}=j(s);return(_,p)=>{const g=Ee("RouterLink");return i(),a("div",Oe,[t("div",Ye,[t("div",je,[t("div",Je,[t("div",Qe,[t("div",Xe,[t("div",Ze,[p[2]||(p[2]=t("h1",null,"No monitoring connectivity",-1)),t("p",null,[p[0]||(p[0]=r(" Monitoring is not available at ",-1)),t("strong",null,d(e(u)),1)]),p[3]||(p[3]=Ie('<p data-v-ba14b6d4>This may be due to one or more of the following causes:</p><div class="monitoring-no-data-content" data-v-ba14b6d4><ol class="monitoring-no-data-list" data-v-ba14b6d4><li data-v-ba14b6d4><strong data-v-ba14b6d4>Monitoring</strong> has been disabled</li><li data-v-ba14b6d4><strong data-v-ba14b6d4>Monitoring server</strong> is not running.</li><li data-v-ba14b6d4><strong data-v-ba14b6d4>Monitoring server address</strong> is incorrect.</li><li data-v-ba14b6d4><strong data-v-ba14b6d4>Monitoring server</strong> not accessible. You may need to validate the configured hostname in the ServiceControl Management Utility.</li></ol></div>',2)),t("div",et,[y(g,{to:e(ee).configuration.connections.link,class:"btn btn-default btn-primary"},{default:V(()=>[...p[1]||(p[1]=[r("View connection details",-1)])]),_:1},8,["to"])])])])])])])])])}}}),st=O(tt,[["__scopeId","data-v-ba14b6d4"]]),it={class:"padding"},at={class:"y-axis"},ot={height:"calc(100% - 10px)",transform:"translate(60, 5)",fill:"none","font-size":"10","font-family":"sans-serif","text-anchor":"end"},nt=["transform"],lt={fill:"#828282",x:"-4",dy:"0.32em"},rt=["viewBox"],ct=["d"],dt=["d"],ut=["d"],pt=["d"],gt=["d"],vt=["d"],mt={class:"value"},_t={class:"value"},ht=z({__name:"LargeGraph",props:{isdurationgraph:{type:Boolean},metricsuffix:{},firstdataseries:{},seconddataseries:{},minimumyaxis:{},avgdecimals:{},firstseriestype:{},secondseriestype:{}},setup(m){const s=m,u=A(!1),_=C(()=>Math.max(s.firstdataseries.points.length,s.seconddataseries?.points?.length??0,10)),p=pe(()=>s.firstdataseries,()=>s.minimumyaxis,()=>_.value),g=pe(()=>s.seconddataseries,()=>s.minimumyaxis,()=>_.value),v=C(()=>D(Math.max(p.maxYaxis.value,g?.maxYaxis.value??0))),M=C(()=>{const S=[0,v.value*1/4,v.value*1/2,v.value*3/4,v.value],f=$=>{const x=R($);return`${x.value} ${x.unit}`};return s.isdurationgraph?S.map($=>f($)):S});function D(S){if(!S)return 10;let $=10;for(;S>$;)$*=10;return $/=10,Math.floor(S/$)*$+$}const w=C(()=>s.isdurationgraph?R(p.average.value).value:ge(p.average.value,2)),b=C(()=>s.isdurationgraph?R(g.average.value).value:ge(g.average.value,2)),c=C(()=>s.isdurationgraph?R(p.average.value).unit.toUpperCase():s.metricsuffix??""),n=C(()=>s.isdurationgraph?R(g.average.value).unit.toUpperCase():s.metricsuffix??""),l=C(()=>`calc(${p.average.value/v.value*190}px - 1em)`),T=C(()=>`calc(${g.average.value/v.value*190}px - 1em)`);return(S,f)=>(i(),a("div",{class:G(["graph large-graph pull-left",{hover:u.value}]),onMouseover:f[0]||(f[0]=$=>u.value=!0),onMouseout:f[1]||(f[1]=$=>u.value=!1)},[t("div",it,[(i(),a("svg",at,[f[3]||(f[3]=t("rect",{height:"calc(100% - 10px)",transform:"translate(60, 5)",fill:"#F2F6F7",width:"100%"},null,-1)),t("g",ot,[(i(!0),a(te,null,se(M.value,($,x)=>(i(),a("g",{class:"tick",opacity:"1",key:$,transform:`translate(0,${(4-x)*(190/4)})`},[f[2]||(f[2]=t("rect",{height:"1.75px",fill:"black",width:"100%",opacity:"0.1"},null,-1)),t("text",lt,d($),1)],8,nt))),128))])])),(i(),a("svg",{class:"data",viewBox:`0 0 100 ${v.value}`,preserveAspectRatio:"none"},[t("g",{class:G(s.firstseriestype)},[t("path",{d:e(p).valuesArea.value,class:"graph-data-fill"},null,8,ct),t("path",{d:e(p).valuesPath.value,"vector-effect":"non-scaling-stroke",class:"graph-data-line"},null,8,dt),t("path",{d:e(p).averageLine.value,"vector-effect":"non-scaling-stroke",class:"graph-avg-line"},null,8,ut)],2),t("g",{class:G(s.secondseriestype)},[t("path",{d:e(g).valuesArea.value,class:"graph-data-fill"},null,8,pt),t("path",{d:e(g).valuesPath.value,"vector-effect":"non-scaling-stroke",class:"graph-data-line"},null,8,gt),t("path",{d:e(g).averageLine.value,"vector-effect":"non-scaling-stroke",class:"graph-avg-line"},null,8,vt)],2)],8,rt))]),t("div",{class:G(["avg-tooltip",m.firstseriestype]),style:ve({bottom:l.value})},[f[4]||(f[4]=t("div",null,"AVG",-1)),t("div",mt,[r(d(w.value)+" ",1),t("span",null,d(c.value),1)])],6),s.seconddataseries?(i(),a("div",{key:0,class:G(["avg-tooltip left",m.secondseriestype]),style:ve({bottom:T.value})},[f[5]||(f[5]=t("div",null,"AVG",-1)),t("div",_t,[r(d(b.value)+" ",1),t("span",null,d(n.value),1)])],6)):o("",!0)],34))}}),ue=O(ht,[["__scopeId","data-v-7c95dbae"]]),bt={role:"gridcell","aria-label":"backlog-data",class:"col-xs-4 no-side-padding list-section graph-area graph-queue-length"},yt={class:"no-side-padding graph-values"},ft={"aria-label":"queue-length-values",class:"queue-length-values"},$t={"aria-label":"metric-header"},St={class:"metric-digest-header"},xt={"aria-label":"metric-current-value",class:"metric-digest-value current"},kt={key:0},Mt={key:0,class:"metric-digest-value-suffix"},wt={key:1},Dt={"aria-label":"metric-average-value",class:"metric-digest-value average"},Tt={key:0,"aria-label":"graph-average"},Ct={key:1},Nt=z({__name:"EndpointBacklog",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(m){const s=le(m,"modelValue");return(u,_)=>{const p=J("tippy");return i(),a("div",bt,[s.value.metricDetails.metrics.queueLength?(i(),H(ue,{key:0,isdurationgraph:!1,firstdataseries:s.value.metricDetails.metrics.queueLength,minimumyaxis:e(re).queueLength,firstseriestype:"queue-length",avgdecimals:0,metricsuffix:"MSGS"},null,8,["firstdataseries","minimumyaxis"])):o("",!0),t("div",yt,[t("div",ft,[t("div",$t,[h((i(),a("span",St,[r(d(e(me).label),1)])),[[p,e(me).tooltip]])]),t("div",xt,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",kt,[r(d(e(Y)(s.value.digest.metrics.queueLength?.latest,0))+" ",1),!s.value.isStale||!s.value.isScMonitoringDisconnected?(i(),a("span",Mt,"MSGS")):o("",!0)])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",wt,"?")):o("",!0)]),t("div",Dt,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",Tt,[r(d(e(Y)(s.value.digest.metrics.queueLength?.average,0))+" ",1),_[0]||(_[0]=t("span",{class:"metric-digest-value-suffix"},"MSGS AVG",-1))])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",Ct,"?")):o("",!0)])])])])}}}),Vt=O(Nt,[["__scopeId","data-v-501d7e5b"]]),Et={role:"gridcell","aria-label":"workload-data",class:"col-xs-4 no-side-padding list-section graph-area graph-message-retries-throughputs"},It={class:"no-side-padding graph-values"},At={"aria-label":"throughput-values",class:"no-side-padding throughput-values"},Gt={"aria-label":"metric-header"},Pt={class:"metric-digest-header"},Lt={"aria-label":"metric-current-value",class:"metric-digest-value current"},Ut={key:0},Bt={key:1},qt={"aria-label":"metric-average-value",class:"metric-digest-value average"},Ft={key:0},Rt={key:1},Kt={"aria-label":"scheduled-retry-values",class:"no-side-padding scheduled-retries-rate-values"},Wt={"aria-label":"metric-header"},Ht={class:"metric-digest-header"},zt={"aria-label":"metric-current-value",class:"metric-digest-value current"},Ot={key:0},Yt={key:1},jt={"aria-label":"metric-average-value",class:"metric-digest-value average"},Jt={key:0},Qt={key:1},Xt=z({__name:"EndpointWorkload",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(m){const s=le(m,"modelValue");return(u,_)=>{const p=J("tippy");return i(),a("div",Et,[s.value.metricDetails.metrics.throughput?(i(),H(ue,{key:0,isdurationgraph:!1,firstdataseries:s.value.metricDetails.metrics.throughput,seconddataseries:s.value.metricDetails.metrics.retries,minimumyaxis:e(re).throughputRetries,firstseriestype:"throughput",secondseriestype:"retries",avgdecimals:0,metricsuffix:"MSGS/S"},null,8,["firstdataseries","seconddataseries","minimumyaxis"])):o("",!0),t("div",It,[t("div",At,[t("div",Gt,[h((i(),a("span",Pt,[r(d(e(U).label),1)])),[[p,e(U).tooltip]])]),t("div",Lt,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",Ut,[r(d(e(Y)(s.value.digest.metrics.throughput?.latest,2))+" ",1),_[0]||(_[0]=t("span",{class:"metric-digest-value-suffix"},"MSGS/S",-1))])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",Bt,"?")):o("",!0)]),t("div",qt,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",Ft,[r(d(e(Y)(s.value.digest.metrics.throughput?.average,2))+" ",1),_[1]||(_[1]=t("span",{class:"metric-digest-value-suffix"},"MSGS/S AVG",-1))])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",Rt,"?")):o("",!0)])]),t("div",Kt,[t("div",Wt,[h((i(),a("span",Ht,[r(d(e(B).label),1)])),[[p,e(B).tooltip]])]),t("div",zt,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",Ot,[r(d(e(Y)(s.value.digest.metrics.retries?.latest,2))+" ",1),_[2]||(_[2]=t("span",{class:"metric-digest-value-suffix"},"MSGS/S",-1))])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",Yt,"?")):o("",!0)]),t("div",jt,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",Jt,[r(d(e(Y)(s.value.digest.metrics.retries?.average,2))+" ",1),_[3]||(_[3]=t("span",{class:"metric-digest-value-suffix"},"MSGS/S AVG",-1))])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",Qt,"?")):o("",!0)])])])])}}}),Zt=O(Xt,[["__scopeId","data-v-efb8f3c0"]]),es={role:"gridcell","aria-label":"timings-data",class:"col-xs-4 no-side-padding list-section graph-area graph-critical-processing-times"},ts={class:"no-side-padding graph-values"},ss={"aria-label":"processing-time-values",class:"no-side-padding processing-time-values"},is={"aria-label":"metric-header"},as={class:"metric-digest-header"},os={"aria-label":"metric-current-value",class:"metric-digest-value current"},ns={key:0},ls={class:"metric-digest-value-suffix"},rs={key:1},cs={"aria-label":"metric-average-value",class:"metric-digest-value average"},ds={key:0},us={class:"metric-digest-value-suffix"},ps={key:1},gs={"aria-label":"critical-time-values",class:"no-side-padding critical-time-values"},vs={"aria-label":"metric-header"},ms={class:"metric-digest-header"},_s={"aria-label":"metric-current-value",class:"metric-digest-value current"},hs={key:0},bs={class:"metric-digest-value-suffix"},ys={key:1},fs={"aria-label":"metric-average-value",class:"metric-digest-value average"},$s={key:0},Ss={class:"metric-digest-value-suffix"},xs={key:1},ks=z({__name:"EndpointTimings",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(m){const s=le(m,"modelValue"),u=C(()=>R(s.value.digest.metrics.processingTime?.latest)),_=C(()=>R(s.value.digest.metrics.processingTime?.average)),p=C(()=>R(s.value.digest.metrics.criticalTime?.latest)),g=C(()=>R(s.value.digest.metrics.criticalTime?.average));return(v,M)=>{const D=J("tippy");return i(),a("div",es,[s.value.metricDetails.metrics.criticalTime?(i(),H(ue,{key:0,isdurationgraph:!0,firstdataseries:s.value.metricDetails.metrics.criticalTime,seconddataseries:s.value.metricDetails.metrics.processingTime,minimumyaxis:e(re).processingCritical,firstseriestype:"critical-time",secondseriestype:"processing-time",avgdecimals:0},null,8,["firstdataseries","seconddataseries","minimumyaxis"])):o("",!0),t("div",ts,[t("div",ss,[t("div",is,[h((i(),a("span",as,[r(d(e(q).label),1)])),[[D,e(q).tooltip]])]),t("div",os,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",ns,[r(d(u.value.value)+" ",1),t("span",ls,d(u.value.unit),1)])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",rs,"?")):o("",!0)]),t("div",cs,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",ds,[r(d(_.value.value)+" ",1),t("span",us,d(_.value.unit)+" AVG",1)])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",ps,"?")):o("",!0)])]),t("div",gs,[t("div",vs,[h((i(),a("span",ms,[r(d(e(F).label),1)])),[[D,e(F).tooltip]])]),t("div",_s,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",hs,[t("span",{class:G({negative:parseFloat(p.value.value)<0})},d(p.value.value),3),t("span",bs,"  "+d(p.value.unit),1)])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",ys,"?")):o("",!0)]),t("div",fs,[!s.value.isStale&&!s.value.isScMonitoringDisconnected?(i(),a("div",$s,[t("span",{class:G({negative:parseFloat(g.value.value)<0})},d(g.value.value),3),t("span",Ss,"  "+d(g.value.unit)+" AVG ",1)])):o("",!0),s.value.isStale||s.value.isScMonitoringDisconnected?(i(),a("strong",xs,"?")):o("",!0)])])])])}}}),Ms=O(ks,[["__scopeId","data-v-59e2edb8"]]),ws={class:"row"},Ds={role:"table","aria-label":"instances",class:"col-xs-12 no-side-padding"},Ts={role:"row","aria-label":"instances-column-headers",class:"row box box-no-click table-head-row"},Cs={role:"rowgroup",class:"row endpoint-instances"},Ns={class:"col-xs-12 no-side-padding"},Vs={class:"col-xs-12 no-side-padding"},Es=["aria-label"],Is={role:"cell","aria-label":"instance-name",class:"col-xs-4 col-xl-8 endpoint-name"},As={class:"box-header with-status"},Gs={role:"instance-name","aria-label":"instance-name",class:"no-side-padding lead righ-side-ellipsis"},Ps={class:"no-side-padding endpoint-status"},Ls={key:0,role:"status","aria-label":"negative-critical-time-warning",class:"warning"},Us={class:"fa pa-warning"},Bs={key:1,role:"status","aria-label":"disconnected-warning",class:"warning"},qs={class:"fa pa-monitoring-lost endpoint-details"},Fs={key:2,role:"status","aria-label":"stale-warning",class:"warning"},Rs={class:"fa pa-endpoint-lost endpoint-details"},Ks={key:3,role:"status","aria-label":"error-count-warning",class:"warning"},Ws={"aria-label":"error-count",class:"badge badge-important cursorpointer"},Hs={role:"cell","aria-label":"throughput",class:"col-xs-2 col-xl-1 no-side-padding"},zs={class:"row box-header"},Os={class:"no-side-padding"},Ys={class:"no-side-padding sparkline-value"},js={key:0},Js={key:1},Qs={role:"cell","aria-label":"retries",class:"col-xs-2 col-xl-1 no-side-padding"},Xs={class:"row box-header"},Zs={class:"no-side-padding"},ei={class:"no-side-padding sparkline-value"},ti={key:0},si={key:1},ii={role:"cell","aria-label":"processing-time",class:"col-xs-2 col-xl-1 no-side-padding"},ai={class:"row box-header"},oi={class:"no-side-padding"},ni={class:"no-side-padding sparkline-value"},li={key:0},ri={key:1},ci={key:2,class:"unit"},di={role:"cell","aria-label":"critical-time",class:"col-xs-2 col-xl-1 no-side-padding"},ui={class:"row box-header"},pi={class:"no-side-padding"},gi={key:0},vi={key:1},mi={key:2,class:"unit"},_i={class:"col-xs-2 col-xl-1 no-side-padding"},hi=["onClick"],bi=z({__name:"EndpointInstances",setup(m){const s=A(!1),u=ce(),_=de(),{endpointDetails:p,endpointName:g}=j(_),v=oe();async function M(w,b){try{await v.deleteFromMonitoring("monitored-instance/"+w+"/"+b.id),p.value.instances.splice(p.value.instances.indexOf(b),1),p.value.instances.length===0&&u.push(ee.monitoring.root)}catch(c){return console.log(c),!1}}async function D(){try{const w=await v.optionsFromMonitoring();if(w){const c=w.headers.get("Allow");if(c)return c.indexOf("DELETE")>=0}}catch(w){console.log(w)}return!1}return xe(async()=>{s.value=await D()}),(w,b)=>{const c=J("tippy");return i(),a("div",ws,[t("div",Ds,[t("div",Ts,[y(L,{name:e(_e).name,label:e(_e).label,class:"col-xs-4 col-xl-8"},null,8,["name","label"]),y(L,{name:e(U).name,label:e(U).label,unit:e(U).unit,class:"col-xs-2 col-xl-1 no-side-padding"},{help:V(()=>[r(d(e(U).tooltip),1)]),_:1},8,["name","label","unit"]),y(L,{name:e(B).name,label:e(B).label,unit:e(B).unit,class:"col-xs-2 col-xl-1 no-side-padding"},{help:V(()=>[r(d(e(B).tooltip),1)]),_:1},8,["name","label","unit"]),y(L,{name:e(q).name,label:e(q).label,unit:e(q).unit,class:"col-xs-2 col-xl-1 no-side-padding"},{help:V(()=>[r(d(e(q).tooltip),1)]),_:1},8,["name","label","unit"]),y(L,{name:e(F).name,label:e(F).label,unit:e(F).unit,class:"col-xs-2 col-xl-1 no-side-padding"},{help:V(()=>[r(d(e(F).tooltip),1)]),_:1},8,["name","label","unit"])]),e(p)?.instances?.length?o("",!0):(i(),H(we,{key:0,title:"No messages",message:"No messages processed in this period of time"})),t("div",Cs,[t("div",Ns,[(i(!0),a(te,null,se(e(p).instances,(n,l)=>(i(),a("div",{class:"row box endpoint-row",key:l},[t("div",Vs,[t("div",{role:"row","aria-label":n.name,class:"row"},[t("div",Is,[t("div",As,[h((i(),a("div",Gs,[r(d(n.name),1)])),[[c,n.name]]),t("div",Ps,[parseFloat(e(N)(n.metrics.criticalTime).value)<0?(i(),a("span",Ls,[h(t("i",Us,null,512),[[c,"Warning: instance currently has negative critical time, possibly because of a clock drift."]])])):o("",!0),n.isScMonitoringDisconnected?(i(),a("span",Bs,[h(t("i",qs,null,512),[[c,"Unable to connect to monitoring server"]])])):o("",!0),n.isStale?(i(),a("span",Fs,[h(t("i",Rs,null,512),[[c,"Not receiving metrics from this instance. Instance will be removed automatically."]])])):o("",!0),n.errorCount?h((i(),a("span",Ks,[n.errorCount?(i(),H(e(Me),{key:0,to:e(ee).failedMessage.group.link(n.serviceControlId),class:"warning cursorpointer"},{default:V(()=>[y(ie,{icon:e(ke),class:"endpoint-status-icon"},null,8,["icon"]),t("span",Ws,d(n.errorCount),1)]),_:2},1032,["to"])):o("",!0)])),[[c,`${n.errorCount} failed messages associated with this endpoint. Click to see list.`]]):o("",!0)])])]),t("div",Hs,[t("div",zs,[t("div",Os,[y(K,{type:"throughput",isdurationgraph:!1,plotdata:n.metrics.throughput,minimumyaxis:e(W).throughput,metricsuffix:"MSGS/S"},null,8,["plotdata","minimumyaxis"]),t("span",Ys,[r(d(n.isStale==!0||n.isScMonitoringDisconnected==!0?"":e(ae)(n.metrics.throughput))+" ",1),n.isStale&&!n.isScMonitoringDisconnected?h((i(),a("strong",js,[...b[0]||(b[0]=[r("?",-1)])])),[[c,"No metrics received or instance is not configured to send metrics"]]):o("",!0),n.isScMonitoringDisconnected?h((i(),a("strong",Js,[...b[1]||(b[1]=[r("?",-1)])])),[[c,"Unable to connect to monitoring server"]]):o("",!0)])])])]),t("div",Qs,[t("div",Xs,[t("div",Zs,[y(K,{type:"retries",isdurationgraph:!1,plotdata:n.metrics.retries,minimumyaxis:e(W).retries,metricsuffix:"MSGS/S"},null,8,["plotdata","minimumyaxis"]),t("span",ei,[r(d(n.isStale==!0||n.isScMonitoringDisconnected==!0?"":e(ae)(n.metrics.retries))+" ",1),n.isStale&&!n.isScMonitoringDisconnected?h((i(),a("strong",ti,[...b[2]||(b[2]=[r("?",-1)])])),[[c,"No metrics received or instance is not configured to send metrics"]]):o("",!0),n.isScMonitoringDisconnected?h((i(),a("strong",si,[...b[3]||(b[3]=[r("?",-1)])])),[[c,"Unable to connect to monitoring server"]]):o("",!0)])])])]),t("div",ii,[t("div",ai,[t("div",oi,[y(K,{type:"processing-time",isdurationgraph:!0,plotdata:n.metrics.processingTime,minimumyaxis:e(W).processingTime},null,8,["plotdata","minimumyaxis"]),t("span",ni,[r(d(n.isStale==!0||n.isScMonitoringDisconnected==!0?"":e(N)(n.metrics.processingTime).value)+" ",1),n.isStale&&!n.isScMonitoringDisconnected?h((i(),a("strong",li,[...b[4]||(b[4]=[r("?",-1)])])),[[c,"No metrics received or instance is not configured to send metrics"]]):o("",!0),n.isScMonitoringDisconnected?h((i(),a("strong",ri,[...b[5]||(b[5]=[r("?",-1)])])),[[c,"Unable to connect to monitoring server"]]):o("",!0),!n.isStale&&!n.isScMonitoringDisconnected?(i(),a("span",ci,d(e(N)(n.metrics.processingTime).unit),1)):o("",!0)])])])]),t("div",di,[t("div",ui,[t("div",pi,[y(K,{type:"critical-time",isdurationgraph:!0,plotdata:n.metrics.criticalTime,minimumyaxis:e(W).criticalTime},null,8,["plotdata","minimumyaxis"]),t("span",{class:G(["no-side-padding sparkline-value",{negative:parseFloat(e(N)(n.metrics.criticalTime).value)<0}])},[r(d(n.isStale==!0||n.isScMonitoringDisconnected==!0?"":e(N)(n.metrics.criticalTime).value)+" ",1),n.isStale&&!n.isScMonitoringDisconnected?h((i(),a("strong",gi,[...b[6]||(b[6]=[r("?",-1)])])),[[c,"No metrics received or instance is not configured to send metrics"]]):o("",!0),n.isScMonitoringDisconnected?h((i(),a("strong",vi,[...b[7]||(b[7]=[r("?",-1)])])),[[c,"Unable to connect to monitoring server"]]):o("",!0),!n.isStale&&!n.isScMonitoringDisconnected?(i(),a("span",mi,d(e(N)(n.metrics.criticalTime).unit),1)):o("",!0)],2)])])]),t("div",_i,[s.value&&n.isStale?(i(),a("a",{key:0,class:"remove-endpoint",onClick:T=>M(e(g),n)},[h(y(ie,{icon:e(Ae)},null,8,["icon"]),[[c,"Remove endpoint"]])],8,hi)):o("",!0)])],8,Es)])]))),128))])])])])}}}),yi=O(bi,[["__scopeId","data-v-86c8a7d6"]]),fi={class:"row"},$i={role:"table","aria-label":"message-types",class:"col-xs-12 no-side-padding"},Si={key:0,class:"alert alert-warning endpoint-data-changed"},xi={role:"row","aria-label":"message-type-column-headers",class:"row box box-no-click table-head-row"},ki={role:"rowgroup","aria-label":"message-type-rows",class:"row"},Mi={class:"col-xs-12 no-side-padding"},wi={class:"col-xs-12 no-side-padding"},Di=["aria-label"],Ti=["title"],Ci={class:"box-header with-status"},Ni={role:"message-type-name","aria-label":"message-type-name",class:"col-lg-max-9 no-side-padding lead message-type-label righ-side-ellipsis"},Vi={class:"lead"},Ei={class:"no-side-padding endpoint-status message-type-status"},Ii={key:0,class:"warning"},Ai={class:"fa pa-warning"},Gi={key:1,class:"warning"},Pi={class:"fa pa-monitoring-lost endpoint-details"},Li={"aria-label":"message-type-properties",class:"row message-type-properties"},Ui={key:0,class:"message-type-part"},Bi={key:0},qi={key:1,class:"message-type-part"},Fi={key:2,class:"message-type-part"},Ri={role:"cell","aria-label":"throughput",class:"col-xs-2 col-xl-1 no-side-padding"},Ki={class:"row box-header"},Wi={class:"no-side-padding"},Hi={class:"no-side-padding sparkline-value"},zi={key:0},Oi={key:1},Yi={role:"cell","aria-label":"retries",class:"col-xs-2 col-xl-1 no-side-padding"},ji={class:"row box-header"},Ji={class:"no-side-padding"},Qi={class:"no-side-padding sparkline-value"},Xi={key:0},Zi={key:1},ea={role:"cell","aria-label":"processing-time",class:"col-xs-2 col-xl-1 no-side-padding"},ta={class:"row box-header"},sa={class:"no-side-padding"},ia={class:"no-side-padding sparkline-value"},aa={key:0},oa={key:1},na={key:2,class:"unit"},la={role:"cell","aria-label":"critical-time",class:"col-xs-2 col-xl-1 no-side-padding"},ra={class:"row box-header"},ca={class:"no-side-padding"},da={key:0},ua={key:1},pa={key:2,class:"unit"},ga=z({__name:"EndpointMessageTypes",props:{perPage:{type:Number,default:10}},setup(m){const s=de(),{endpointDetails:u,messageTypes:_,messageTypesAvailable:p}=j(s),g=De(),v=ce(),M=A(Number(g?.query?.pageNo??"1"));Te(M,()=>{v.replace({query:{...g.query,pageNo:M.value}})});const D=m,w=C(()=>{const b=(M.value-1)*D.perPage,c=M.value*D.perPage;return _.value?_.value.data.slice(b,c):[]});return(b,c)=>{const n=J("tippy");return i(),a("div",fi,[t("div",$i,[e(p)?(i(),a("div",Si,[y(ie,{icon:e(Ge)},null,8,["icon"]),c[2]||(c[2]=r()),c[3]||(c[3]=t("strong",null,"Warning:",-1)),c[4]||(c[4]=r(" The number of available message types has changed. ",-1)),t("a",{onClick:c[0]||(c[0]=l=>e(s).updateMessageTypes()),class:"alink"},"Click here to reload the view")])):o("",!0),t("div",xi,[y(L,{name:e(he).name,label:e(he).label,class:"col-xs-4 col-xl-8"},null,8,["name","label"]),y(L,{name:e(U).name,label:e(U).label,unit:e(U).unit,class:"col-xs-2 col-xl-1 no-side-padding"},{help:V(()=>[r(d(e(U).tooltip),1)]),_:1},8,["name","label","unit"]),y(L,{name:e(B).name,label:e(B).label,unit:e(B).unit,class:"col-xs-2 col-xl-1 no-side-padding"},{help:V(()=>[r(d(e(B).tooltip),1)]),_:1},8,["name","label","unit"]),y(L,{name:e(q).name,label:e(q).label,unit:e(q).unit,class:"col-xs-2 col-xl-1 no-side-padding"},{help:V(()=>[r(d(e(q).tooltip),1)]),_:1},8,["name","label","unit"]),y(L,{name:e(F).name,label:e(F).label,unit:e(F).unit,class:"col-xs-2 col-xl-1 no-side-padding"},{help:V(()=>[r(d(e(F).tooltip),1)]),_:1},8,["name","label","unit"])]),e(u)?.messageTypes?.length?o("",!0):(i(),H(we,{key:1,message:"No messages processed in this period of time."})),t("div",ki,[t("div",Mi,[(i(!0),a(te,null,se(w.value,l=>(i(),a("div",{class:"row box endpoint-row",key:l.id},[t("div",wi,[t("div",{role:"row","aria-label":l.shortName,class:"row"},[t("div",{role:"cell",class:"col-xs-4 col-xl-8 endpoint-name",title:l?.tooltipText},[t("div",Ci,[t("div",Ni,[t("div",Vi,d(l?.shortName||"Unknown"),1)]),t("div",Ei,[l.metrics!=null&&parseFloat(e(N)(l.metrics.criticalTime).value)<0?(i(),a("span",Ii,[h(t("i",Ai,null,512),[[n,"Warning: message type currently has negative critical time, possibly because of a clock drift."]])])):o("",!0),e(u).isScMonitoringDisconnected?(i(),a("span",Gi,[h(t("i",Pi,null,512),[[n,"Unable to connect to monitoring server"]])])):o("",!0)])]),t("div",Li,[l.typeName&&l.typeName!="null"&&!l.containsTypeHierarchy?(i(),a("div",Ui,d(l.assemblyName+"-"+l.assemblyVersion),1)):o("",!0),(i(!0),a(te,null,se(l.messageTypeHierarchy,(T,S)=>(i(),a("div",{class:"message-type-part",key:S},[l.typeName&&l.typeName!="null"&&l.containsTypeHierarchy?(i(),a("span",Bi,d(T.assemblyName+"-"+T.assemblyVersion),1)):o("",!0)]))),128)),l.culture&&l.culture!="null"?(i(),a("div",qi,d("Culture="+l.culture),1)):o("",!0),l.publicKeyToken&&l.publicKeyToken!="null"?(i(),a("div",Fi,d("PublicKeyToken="+l.publicKeyToken),1)):o("",!0)])],8,Ti),t("div",Ri,[t("div",Ki,[t("div",Wi,[y(K,{type:"throughput",isdurationgraph:!1,plotdata:l.metrics.throughput,minimumyaxis:e(W).throughput,metricsuffix:"MSGS/S"},null,8,["plotdata","minimumyaxis"]),t("span",Hi,[r(d(e(u).isStale==!0||e(u).isScMonitoringDisconnected==!0?"":e(ae)(l.metrics.throughput,2))+" ",1),e(u).isStale&&!e(u).isScMonitoringDisconnected?h((i(),a("strong",zi,[...c[5]||(c[5]=[r("?",-1)])])),[[n,"No metrics received or endpoint is not configured to send metrics"]]):o("",!0),e(u).isScMonitoringDisconnected?h((i(),a("strong",Oi,[...c[6]||(c[6]=[r("?",-1)])])),[[n,"Unable to connect to monitoring server"]]):o("",!0)])])])]),t("div",Yi,[t("div",ji,[t("div",Ji,[y(K,{type:"retries",isdurationgraph:!1,plotdata:l.metrics.retries,minimumyaxis:e(W).retries,metricsuffix:"MSGS/S"},null,8,["plotdata","minimumyaxis"]),t("span",Qi,[r(d(e(u).isStale==!0||e(u).isScMonitoringDisconnected==!0?"":e(ae)(l.metrics.retries,2))+" ",1),e(u).isStale&&!e(u).isScMonitoringDisconnected?h((i(),a("strong",Xi,[...c[7]||(c[7]=[r("?",-1)])])),[[n,"No metrics received or endpoint is not configured to send metrics"]]):o("",!0),e(u).isScMonitoringDisconnected?h((i(),a("strong",Zi,[...c[8]||(c[8]=[r("?",-1)])])),[[n,"Unable to connect to monitoring server"]]):o("",!0)])])])]),t("div",ea,[t("div",ta,[t("div",sa,[y(K,{type:"processing-time",isdurationgraph:!0,plotdata:l.metrics.processingTime,minimumyaxis:e(W).processingTime},null,8,["plotdata","minimumyaxis"]),t("span",ia,[r(d(e(u).isStale==!0||e(u).isScMonitoringDisconnected==!0?"":e(N)(l.metrics.processingTime).value)+" ",1),e(u).isStale&&!e(u).isScMonitoringDisconnected?h((i(),a("strong",aa,[...c[9]||(c[9]=[r("?",-1)])])),[[n,"No metrics received or endpoint is not configured to send metrics"]]):o("",!0),e(u).isScMonitoringDisconnected?h((i(),a("strong",oa,[...c[10]||(c[10]=[r("?",-1)])])),[[n,"Unable to connect to monitoring server"]]):o("",!0),!e(u).isStale&&!e(u).isScMonitoringDisconnected?(i(),a("span",na,d(e(N)(l.metrics.processingTime).unit),1)):o("",!0)])])])]),t("div",la,[t("div",ra,[t("div",ca,[y(K,{type:"critical-time",isdurationgraph:!0,plotdata:l.metrics.criticalTime,minimumyaxis:e(W).criticalTime},null,8,["plotdata","minimumyaxis"]),t("span",{class:G(["no-side-padding sparkline-value",{negative:parseFloat(e(N)(l.metrics.criticalTime).value)<0}])},[r(d(e(u).isStale==!0||e(u).isScMonitoringDisconnected==!0?"":e(N)(l.metrics.criticalTime).value)+" ",1),e(u).isStale&&!e(u).isScMonitoringDisconnected?h((i(),a("strong",da,[...c[11]||(c[11]=[r("?",-1)])])),[[n,"No metrics received or endpoint is not configured to send metrics"]]):o("",!0),e(u).isScMonitoringDisconnected?h((i(),a("strong",ua,[...c[12]||(c[12]=[r("?",-1)])])),[[n,"Unable to connect to monitoring server"]]):o("",!0),!e(u).isStale&&!e(u).isScMonitoringDisconnected?(i(),a("span",pa,d(e(N)(l.metrics.criticalTime).unit),1)):o("",!0)],2)])])])],8,Di)])]))),128))])]),y(Pe,{modelValue:M.value,"onUpdate:modelValue":c[1]||(c[1]=l=>M.value=l),itemsPerPage:m.perPage,totalCount:e(_)?.data?.length??0},null,8,["modelValue","itemsPerPage","totalCount"])])])}}}),va=O(ga,[["__scopeId","data-v-89363883"]]),ma={class:"container monitoring-view"},_a={class:"row"},ha={class:"col-sm-12"},ba={class:"monitoring-head"},ya={class:"endpoint-title no-side-padding list-section"},fa={"aria-label":"endpoint-title","aria-level":"1",class:"righ-side-ellipsis"},$a={class:"endpoint-status"},Sa={key:0,role:"status","aria-label":"negative-critical-time-warning",class:"warning"},xa={class:"fa pa-warning"},ka={key:1,role:"status","aria-label":"stale-warning",class:"warning"},Ma={class:"fa pa-endpoint-lost endpoint-details"},wa={key:2,role:"status","aria-label":"disconnected-warning",class:"warning"},Da={class:"fa pa-monitoring-lost endpoint-details"},Ta={key:3,role:"status","aria-label":"error-count-warning",class:"warning"},Ca={"aria-label":"error-count",class:"badge badge-important ng-binding cursorpointer"},Na={class:"no-side-padding toolbar-menus"},Va={class:"filter-monitoring"},Ea={role:"grid","aria-label":"detail-graphs-data",class:"large-graphs"},Ia={class:"container"},Aa={role:"row",class:"row"},Ga={class:"tabs"},Pa={"aria-label":"message-types-count"},La={"aria-label":"instances-count"},Ua={key:0,class:"endpoint-instances"},Ba={key:1,class:"endpoint-message-types"},qa=z({__name:"EndpointDetails",setup(m){const{store:s}=Se(),u=s.monitoringConnectionState,_=De(),p=ce(),g=_.params.endpointName.toString();let v;const M=de(),D=$e(),w=oe(),{isMonitoringDisabled:b}=j(w),{historyPeriod:c}=j(D),{negativeCriticalTimeIsPresent:n,endpointDetails:l}=j(M);Te(c,x=>{$(x.refreshIntervalVal)});const T=Object.freeze({messageTypeBreakdown:"messageTypeBreakdown",instancesBreakdown:"instancesBreakdown"}),S=C({get(){return _?.query?.tab??T.messageTypeBreakdown},set(x){p.replace({query:{..._.query,tab:x}})}});async function f(){await M.getEndpointDetails(g)}function $(x){typeof v<"u"&&clearInterval(v),f(),v=window.setInterval(()=>{f()},x)}return Le(()=>{typeof v<"u"&&clearInterval(v)}),xe(()=>{$(c.value.refreshIntervalVal)}),(x,k)=>{const I=J("tippy");return i(),a("div",ma,[y(qe,null,{default:V(()=>[y(Ue,null,{default:V(()=>[t("div",_a,[t("div",ha,[e(u).unableToConnect||e(b)?(i(),H(st,{key:0})):o("",!0)])]),t("div",ba,[t("div",ya,[h((i(),a("h1",fa,[r(d(e(g)),1)])),[[I,e(g)]]),t("div",$a,[e(n)?(i(),a("span",Sa,[h(t("i",xa,null,512),[[I,"Warning: endpoint currently has negative critical time, possibly because of a clock drift."]])])):o("",!0),e(l).isStale?(i(),a("span",ka,[h(t("i",Ma,null,512),[[I,"Unable to connect to endpoint"]])])):o("",!0),e(l).isScMonitoringDisconnected?(i(),a("span",wa,[h(t("i",Da,null,512),[[I,"Unable to connect to monitoring server"]])])):o("",!0),e(l).errorCount?h((i(),a("span",Ta,[e(l).errorCount?(i(),H(e(Me),{key:0,to:e(ee).failedMessage.group.link(e(l).serviceControlId),class:"warning cursorpointer"},{default:V(()=>[y(ie,{icon:e(ke),class:"endpoint-status-icon"},null,8,["icon"]),t("span",Ca,d(e(l).errorCount),1)]),_:1},8,["to"])):o("",!0)])),[[I,e(l).errorCount+" failed messages associated with this endpoint. Click to see list."]]):o("",!0)])]),t("div",Na,[t("div",Va,[y(Be)])])]),t("div",Ea,[t("div",Ia,[t("div",Aa,[y(Vt,{modelValue:e(l),"onUpdate:modelValue":k[0]||(k[0]=E=>ne(l)?l.value=E:null)},null,8,["modelValue"]),y(Zt,{modelValue:e(l),"onUpdate:modelValue":k[1]||(k[1]=E=>ne(l)?l.value=E:null)},null,8,["modelValue"]),y(Ms,{modelValue:e(l),"onUpdate:modelValue":k[2]||(k[2]=E=>ne(l)?l.value=E:null)},null,8,["modelValue"])])])]),t("div",null,[t("div",Ga,[t("h5",{class:G({active:S.value===e(T).messageTypeBreakdown})},[t("a",{onClick:k[3]||(k[3]=E=>S.value=e(T).messageTypeBreakdown),class:"cursorpointer ng-binding"},[k[5]||(k[5]=r("Message Types (",-1)),t("span",Pa,d(e(l).messageTypes.length),1),k[6]||(k[6]=r(")",-1))])],2),t("h5",{class:G({active:S.value===e(T).instancesBreakdown})},[t("a",{onClick:k[4]||(k[4]=E=>S.value=e(T).instancesBreakdown),class:"cursorpointer ng-binding"},[k[7]||(k[7]=r("Instances (",-1)),t("span",La,d(e(l).instances.length),1),k[8]||(k[8]=r(")",-1))])],2)]),S.value===e(T).instancesBreakdown?(i(),a("section",Ua,[y(yi)])):o("",!0),S.value===e(T).messageTypeBreakdown?(i(),a("section",Ba,[y(va)])):o("",!0)])]),_:1})]),_:1})])}}}),Ka=O(qa,[["__scopeId","data-v-1ea9666e"]]);export{Ka as default};
//# sourceMappingURL=EndpointDetails-DE9k0yJx.js.map
