{"version":3,"file":"HealthCheckNotifications-DxnGQy31.js","sources":["../../../../frontend/src/components/configuration/HealthCheckNotifications_ConfigureEmail.vue","../../../../frontend/src/stores/HealthChecksStore.ts","../../../../frontend/src/components/configuration/HealthCheckNotifications.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\nimport type EmailSettings from \"@/components/configuration/EmailSettings\";\nimport type UpdateEmailNotificationsSettingsRequest from \"@/resources/UpdateEmailNotificationsSettingsRequest\";\n\nconst emit = defineEmits<{\n  save: [settings: UpdateEmailNotificationsSettingsRequest];\n  cancel: [];\n}>();\n\nconst settings = defineProps<EmailSettings>();\n\nconst smtp_server = ref(settings.smtp_server);\nconst smtp_port = ref(settings.smtp_port);\nconst authentication_account = ref(settings.authentication_account);\nconst authentication_password = ref(settings.authentication_password);\nconst enable_tls = ref(settings.enable_tls);\nconst from = ref(settings.from);\nconst to = ref(settings.to);\n\nconst emailRe = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nconst smtpServerIsValid = computed(() => {\n  return !!smtp_server.value;\n});\nconst smtpPortIsValid = computed(() => {\n  return !!(smtp_port.value ?? 0 > 0);\n});\nconst fromIsValid = computed(() => {\n  return !!(from.value && emailRe.test(from.value));\n});\nconst toIsValid = computed(() => {\n  return !!(to.value && validateMultipleEmailsCommaSeparated(to.value));\n});\nconst formIsValid = computed(() => {\n  return smtpServerIsValid.value && smtpPortIsValid.value && fromIsValid.value && toIsValid.value;\n});\n\nfunction validateMultipleEmailsCommaSeparated(value: string) {\n  const result = value.split(\",\");\n  return result.every((address) => emailRe.test(address));\n}\n\nfunction save() {\n  const updatedSettings: UpdateEmailNotificationsSettingsRequest = {\n    smtp_server: smtp_server.value,\n    smtp_port: smtp_port.value ?? 0,\n    authorization_account: authentication_account.value,\n    authorization_password: authentication_password.value,\n    enable_tls: enable_tls.value ?? false,\n    from: from.value,\n    to: to.value,\n  };\n  emit(\"save\", updatedSettings);\n}\n\nfunction close() {\n  emit(\"cancel\");\n}\n</script>\n\n<template>\n  <div class=\"modal-mask\">\n    <div class=\"modal-wrapper\">\n      <div class=\"modal-container modal-content\">\n        <div class=\"modal-header\">\n          <h3 class=\"modal-title\">Email configuration</h3>\n        </div>\n\n        <form name=\"notificationsForm\" class=\"notificationsForm\" novalidate @submit.prevent=\"save\">\n          <div class=\"modal-body\">\n            <div class=\"row\">\n              <div class=\"form-group\" :class=\"{ 'has-error': !smtpServerIsValid }\">\n                <label for=\"smtpServerAddress\">SMTP server address</label>\n                <input type=\"text\" id=\"smtpServerAddress\" name=\"smtpServerAddress\" v-model=\"smtp_server\" class=\"form-control\" required />\n              </div>\n              <div class=\"row\"></div>\n              <div class=\"form-group\" :class=\"{ 'has-error': !smtpPortIsValid }\">\n                <label for=\"smtpServerPort\">SMTP server port</label>\n                <input type=\"number\" id=\"smtpServerPort\" name=\"smtpServerPort\" v-model=\"smtp_port\" class=\"form-control\" required />\n              </div>\n              <div class=\"row\"></div>\n              <div class=\"form-group\">\n                <label for=\"account\">Authentication account</label>\n                <input type=\"text\" id=\"account\" name=\"account\" v-model=\"authentication_account\" class=\"form-control\" />\n              </div>\n              <div class=\"row\"></div>\n              <div class=\"form-group\">\n                <label for=\"password\">Authentication password</label>\n                <input type=\"password\" id=\"password\" name=\"password\" v-model=\"authentication_password\" class=\"form-control\" />\n              </div>\n              <div class=\"row\"></div>\n              <div class=\"form-group\">\n                <input type=\"checkbox\" id=\"enableTLS\" name=\"enableTLS\" v-model=\"enable_tls\" class=\"check-label\" />\n                <label for=\"enableTLS\">Use TLS</label>\n              </div>\n              <div class=\"row\"></div>\n              <div class=\"form-group\" :class=\"{ 'has-error': !fromIsValid }\">\n                <label for=\"from\">From address</label>\n                <input type=\"email\" id=\"from\" name=\"from\" v-model=\"from\" class=\"form-control\" required />\n              </div>\n              <div class=\"row\"></div>\n              <div class=\"form-group\" :class=\"{ 'has-error': !toIsValid }\">\n                <label for=\"to\">To address <br />(Separate multiple email address with a comma. E.g. testing@test.com,testing2@test.com)</label>\n                <input type=\"email\" id=\"to\" name=\"to\" v-model=\"to\" class=\"form-control\" required />\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-primary\" type=\"submit\" :disabled=\"!formIsValid\">Save</button>\n            <button type=\"button\" class=\"btn btn-default\" @click=\"close\">Cancel</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n@import \"@/components/modal.css\";\n\n.modal-container {\n  width: 800px;\n  display: flex;\n  flex-direction: column;\n}\n\n.notificationsForm {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n}\n</style>\n","import EmailSettings from \"@/components/configuration/EmailSettings\";\nimport { acceptHMRUpdate, defineStore } from \"pinia\";\nimport { ref } from \"vue\";\nimport { useServiceControlStore } from \"./ServiceControlStore\";\nimport EmailNotifications from \"@/resources/EmailNotifications\";\nimport UpdateEmailNotificationsSettingsRequest from \"@/resources/UpdateEmailNotificationsSettingsRequest\";\nimport { useEnvironmentAndVersionsStore } from \"./EnvironmentAndVersionsStore\";\n\nexport const useHealthChecksStore = defineStore(\"HealthChecksStore\", () => {\n  const emailNotifications = ref<EmailSettings>({\n    enabled: null,\n    enable_tls: null,\n    smtp_server: \"\",\n    smtp_port: null,\n    authentication_account: \"\",\n    authentication_password: \"\",\n    from: \"\",\n    to: \"\",\n  });\n\n  const serviceControlStore = useServiceControlStore();\n  const environmentStore = useEnvironmentAndVersionsStore();\n  const hasResponseStatusInHeaders = environmentStore.serviceControlIsGreaterThan(\"5.2\");\n\n  async function refresh() {\n    let result: EmailNotifications | null = null;\n    try {\n      const [, data] = await serviceControlStore.fetchTypedFromServiceControl<EmailNotifications>(\"notifications/email\");\n      result = data;\n    } catch (err) {\n      console.error(err);\n      result = {\n        enabled: false,\n        enable_tls: false,\n      };\n    }\n\n    emailNotifications.value = {\n      enabled: result.enabled,\n      enable_tls: result.enable_tls,\n      smtp_server: result.smtp_server ? result.smtp_server : \"\",\n      smtp_port: result.smtp_port ? result.smtp_port : null,\n      authentication_account: result.authentication_account ? result.authentication_account : \"\",\n      authentication_password: result.authentication_password ? result.authentication_password : \"\",\n      from: result.from ? result.from : \"\",\n      to: result.to ? result.to : \"\",\n    };\n  }\n\n  async function toggleEmailNotifications() {\n    const result = await getResponseOrError(() =>\n      serviceControlStore.postToServiceControl(\"notifications/email/toggle\", {\n        enabled: !(emailNotifications.value.enabled ?? true),\n      })\n    );\n    if (result.message === \"success\") return true;\n    else {\n      console.error(result.message);\n      //set it back to what it was\n      emailNotifications.value.enabled = !emailNotifications.value.enabled;\n      return false;\n    }\n  }\n\n  async function testEmailNotifications() {\n    const result = await getResponseOrError(\n      () => serviceControlStore.postToServiceControl(\"notifications/email/test\"),\n      (response) => (hasResponseStatusInHeaders.value ? (response.headers.get(\"X-Particular-Reason\") ?? response.statusText) : response.statusText)\n    );\n    if (result.message === \"success\") return true;\n    else {\n      console.error(result.message);\n      return false;\n    }\n  }\n\n  async function saveEmailNotifications(newSettings: UpdateEmailNotificationsSettingsRequest) {\n    const result = await getResponseOrError(() => serviceControlStore.postToServiceControl(\"notifications/email\", newSettings));\n    if (result.message === \"success\") {\n      emailNotifications.value = {\n        enabled: emailNotifications.value.enabled,\n        enable_tls: newSettings.enable_tls,\n        smtp_server: newSettings.smtp_server,\n        smtp_port: newSettings.smtp_port,\n        authentication_account: newSettings.authorization_account,\n        authentication_password: newSettings.authorization_password,\n        from: newSettings.from,\n        to: newSettings.to,\n      };\n      return true;\n    } else {\n      console.error(result.message);\n      return false;\n    }\n  }\n\n  async function getResponseOrError(action: () => Promise<Response>, responseStatusTextOverride?: (response: Response) => string) {\n    const responseStatusTextDefault = (response: Response) => response.statusText;\n    const responseStatusText = responseStatusTextOverride ?? responseStatusTextDefault;\n    try {\n      const response = await action();\n      return {\n        message: response.ok ? \"success\" : `error:${responseStatusText(response)}`,\n      };\n    } catch (err) {\n      return {\n        message: (err as Error).message ?? err,\n      };\n    }\n  }\n\n  return {\n    refresh,\n    emailNotifications,\n    toggleEmailNotifications,\n    saveEmailNotifications,\n    testEmailNotifications,\n  };\n});\n\nif (import.meta.hot) {\n  import.meta.hot.accept(acceptHMRUpdate(useHealthChecksStore, import.meta.hot));\n}\n\nexport type HealthChecksStore = ReturnType<typeof useHealthChecksStore>;\n","<script setup lang=\"ts\">\nimport { onMounted, ref } from \"vue\";\nimport LicenseNotExpired from \"../LicenseNotExpired.vue\";\nimport ServiceControlAvailable from \"../ServiceControlAvailable.vue\";\nimport HealthCheckNotifications_EmailConfiguration from \"./HealthCheckNotifications_ConfigureEmail.vue\";\nimport { useShowToast } from \"@/composables/toast\";\nimport { TYPE } from \"vue-toastification\";\nimport type UpdateEmailNotificationsSettingsRequest from \"@/resources/UpdateEmailNotificationsSettingsRequest\";\nimport OnOffSwitch from \"../OnOffSwitch.vue\";\nimport FAIcon from \"@/components/FAIcon.vue\";\nimport ActionButton from \"@/components/ActionButton.vue\";\nimport { faCheck, faEdit, faEnvelope, faExclamationTriangle } from \"@fortawesome/free-solid-svg-icons\";\nimport { useHealthChecksStore } from \"@/stores/HealthChecksStore\";\nimport { storeToRefs } from \"pinia\";\n\nconst healthChecksStore = useHealthChecksStore();\nconst { emailNotifications } = storeToRefs(healthChecksStore);\n\nconst emailTestSuccessful = ref<boolean | null>(null);\nconst emailTestInProgress = ref<boolean | null>(null);\nconst emailToggleSuccessful = ref<boolean | null>(null);\nconst emailUpdateSuccessful = ref<boolean | null>(null);\nconst showEmailConfiguration = ref(false);\n\nasync function toggleEmailNotifications() {\n  emailTestSuccessful.value = null;\n  emailUpdateSuccessful.value = null;\n  emailToggleSuccessful.value = await healthChecksStore.toggleEmailNotifications();\n}\n\nfunction editEmailNotifications() {\n  emailToggleSuccessful.value = null;\n  emailTestSuccessful.value = null;\n  emailUpdateSuccessful.value = null;\n  showEmailConfiguration.value = true;\n}\n\nasync function saveEditedEmailNotifications(newSettings: UpdateEmailNotificationsSettingsRequest) {\n  emailUpdateSuccessful.value = null;\n  showEmailConfiguration.value = false;\n  const saveSuccessful = await healthChecksStore.saveEmailNotifications(newSettings);\n  if (saveSuccessful) {\n    emailUpdateSuccessful.value = true;\n    useShowToast(TYPE.INFO, \"Info\", \"Email settings updated.\");\n  } else {\n    emailUpdateSuccessful.value = false;\n    useShowToast(TYPE.ERROR, \"Error\", \"Failed to update the email settings.\");\n  }\n}\n\nasync function testEmailNotifications() {\n  emailTestInProgress.value = true;\n  emailToggleSuccessful.value = null;\n  emailUpdateSuccessful.value = null;\n  emailTestSuccessful.value = await healthChecksStore.testEmailNotifications();\n  emailTestInProgress.value = false;\n}\n\nonMounted(async () => {\n  await healthChecksStore.refresh();\n});\n</script>\n\n<template>\n  <section name=\"notifications\">\n    <ServiceControlAvailable>\n      <LicenseNotExpired>\n        <section>\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <p class=\"screen-intro\">Configure notifications for health checks built into ServiceControl (low disk space, stale database indexes, audit ingestion, etc.).</p>\n            </div>\n          </div>\n          <div class=\"notifications row\">\n            <div class=\"col-12\">\n              <div class=\"row box box-no-click\">\n                <div class=\"col-12 no-side-padding\">\n                  <div class=\"row\">\n                    <div class=\"col-auto\">\n                      <OnOffSwitch id=\"emailNotifications\" @toggle=\"toggleEmailNotifications\" :value=\"emailNotifications.enabled\" />\n                      <div>\n                        <span class=\"connection-test connection-failed\">\n                          <template v-if=\"emailToggleSuccessful === false\"> <FAIcon :icon=\"faExclamationTriangle\" /> Update failed </template>\n                        </span>\n                      </div>\n                    </div>\n                    <div class=\"col-xs-9 col-sm-10 col-lg-11\">\n                      <div class=\"row box-header\">\n                        <div class=\"col-12\">\n                          <p class=\"lead\">Email notifications</p>\n                          <p class=\"endpoint-metadata\">\n                            <ActionButton variant=\"link\" size=\"sm\" :icon=\"faEdit\" @click=\"editEmailNotifications\">Configure</ActionButton>\n                          </p>\n                          <p class=\"endpoint-metadata\">\n                            <ActionButton variant=\"link\" size=\"sm\" :icon=\"faEnvelope\" @click=\"testEmailNotifications\" :disabled=\"!!emailTestInProgress\">Send test notification</ActionButton>\n                            <span class=\"connection-test connection-testing\">\n                              <template v-if=\"emailTestInProgress\">\n                                <i class=\"glyphicon glyphicon-refresh rotate\"></i>\n                                Testing\n                              </template>\n                            </span>\n                            <span class=\"connection-test connection-successful\">\n                              <template v-if=\"emailTestSuccessful === true\"><FAIcon :icon=\"faCheck\" /> Test email sent successfully </template>\n                            </span>\n                            <span class=\"connection-test connection-failed\">\n                              <template v-if=\"emailTestSuccessful === false\"><FAIcon :icon=\"faExclamationTriangle\" /> Test failed </template>\n                            </span>\n                            <span class=\"connection-test connection-successful\">\n                              <template v-if=\"emailUpdateSuccessful === true\"><FAIcon :icon=\"faCheck\" /> Update successful </template>\n                            </span>\n                            <span class=\"connection-test connection-failed\">\n                              <template v-if=\"emailUpdateSuccessful === false\">\n                                <FAIcon :icon=\"faExclamationTriangle\" />\n                                Update failed\n                              </template>\n                            </span>\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      </LicenseNotExpired>\n\n      <Teleport to=\"#modalDisplay\">\n        <!-- use the modal component, pass in the prop -->\n        <HealthCheckNotifications_EmailConfiguration v-if=\"showEmailConfiguration\" v-bind=\"emailNotifications\" @cancel=\"showEmailConfiguration = false\" @save=\"saveEditedEmailNotifications\"> </HealthCheckNotifications_EmailConfiguration>\n      </Teleport>\n    </ServiceControlAvailable>\n  </section>\n</template>\n\n<style scoped>\n@import \"../list.css\";\n\n.screen-intro {\n  margin: 30px 0;\n}\n\n.box-header {\n  padding-bottom: 3px;\n  padding-top: 2px;\n}\n\n.box-header ul {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\n\np.endpoint-metadata {\n  display: inline-block;\n  margin-top: 4px;\n  padding-right: 30px;\n}\n\n.endpoint-metadata button i {\n  color: var(--sp-blue);\n  margin-right: 4px;\n}\n\n.btn-sm {\n  color: var(--sp-blue);\n  font-size: 14px;\n  font-weight: bold;\n  padding: 0 36px 10px 0;\n  text-decoration: none;\n}\n\n.notifications .btn-sm {\n  padding: 0;\n}\n\n.notifications .connection-test {\n  top: 2px;\n}\n</style>\n"],"names":["emit","__emit","settings","__props","smtp_server","ref","smtp_port","authentication_account","authentication_password","enable_tls","from","to","emailRe","smtpServerIsValid","computed","smtpPortIsValid","fromIsValid","toIsValid","validateMultipleEmailsCommaSeparated","formIsValid","value","address","save","updatedSettings","close","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_normalizeClass","_cache","$event","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","useHealthChecksStore","defineStore","emailNotifications","serviceControlStore","useServiceControlStore","hasResponseStatusInHeaders","useEnvironmentAndVersionsStore","refresh","result","data","err","toggleEmailNotifications","getResponseOrError","testEmailNotifications","response","saveEmailNotifications","newSettings","action","responseStatusTextOverride","responseStatusText","healthChecksStore","storeToRefs","emailTestSuccessful","emailTestInProgress","emailToggleSuccessful","emailUpdateSuccessful","showEmailConfiguration","editEmailNotifications","saveEditedEmailNotifications","useShowToast","TYPE","onMounted","_createVNode","ServiceControlAvailable","LicenseNotExpired","OnOffSwitch","_unref","_Fragment","FAIcon","faExclamationTriangle","_hoisted_11","_hoisted_12","ActionButton","faEdit","_hoisted_13","faEnvelope","_hoisted_14","_hoisted_15","faCheck","_hoisted_16","_hoisted_17","_hoisted_18","_createBlock","_Teleport","HealthCheckNotifications_EmailConfiguration","_mergeProps"],"mappings":"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"}