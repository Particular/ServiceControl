import{e as J,r as y,u as he,o as se,m as i,n as a,q as t,a7 as L,a8 as U,v as r,z as d,a9 as Le,_ as f,aa as Te,p as u,t as n,N as be,K as te,L as me,B as k,y as c,ab as j,ac as T,a6 as O,U as K,ad as $e,ae as ze,E as V,af as Be,a3 as Pe,Z as Ue,i as Ve,ag as ye,ah as Y,ai as I,x as G,J as We,aj as He,ak as Ze,al as Qe,am as X,an as re,ao as Ye,T as ke,C as de,P as M,Q as R,k as je,ap as Je,aq as Ke,ar as Xe,as as et,at as tt,au as st,av as ce,aw as ue,ax as ot,g as at,S as nt,ay as ge}from"./index-tFZp7u44.js";import{c as it}from"./messageGroupClient-MAkYdcH-.js";import{O as lt}from"./OrderBy-Bnnuz_3H.js";const rt={class:"lasttenoperations"},dt={class:"row"},ct={class:"col-sm-12 list-section"},ut={class:"no-link-underline","aria-hidden":"true"},mt={class:"fake-link","aria-hidden":"true"},vt={class:"row"},ft={class:"col-sm-12 no-mobile-side-padding"},_t={class:"col-sm-12 no-mobile-side-padding"},pt={class:"row"},wt={class:"col-sm-12 no-side-padding"},yt={class:"row box-header"},kt={class:"col-sm-12 no-side-padding"},gt={class:"lead break"},ht={class:"row"},bt={class:"col-sm-12 no-side-padding"},$t={class:"metadata"},Ct={class:"metadata"},Nt={class:"metadata"},xt={class:"metadata"},Gt=J({__name:"LastTenOperations",setup(E){const _=y([]),p=y(!1),g=he();async function v(){const[,h]=await g.fetchTypedFromServiceControl("recoverability/history");_.value=h.historic_operations}return se(()=>{v()}),(h,$)=>(a(),i("div",rt,[t("div",dt,[t("div",ct,[t("h6",null,[L(t("span",ut,[r(f,{icon:d(Le),size:"xs",class:"icon"},null,8,["icon"])],512),[[U,p.value]]),L(t("span",mt,[r(f,{icon:d(Te),size:"xs",class:"icon"},null,8,["icon"])],512),[[U,!p.value]]),t("a",{class:"lastTenHeading",onClick:$[0]||($[0]=N=>p.value=!p.value)}," Last 10 completed retry requests")])])]),t("div",vt,[L(t("div",ft,[_.value.length===0?(a(),u(be,{key:0,title:"message group retries",message:"No group retry requests have ever been completed"})):n("",!0),(a(!0),i(te,null,me(_.value,(N,b)=>L((a(),i("div",{class:"row box extra-box-padding repeat-modify",key:b},[t("div",_t,[t("div",pt,[t("div",wt,[t("div",yt,[t("div",kt,[t("p",gt,k(N.originator||"Selection of individual message(s)"),1)])]),t("div",ht,[t("div",bt,[t("p",$t,[t("span",Ct,[r(f,{icon:d(j),class:"icon"},null,8,["icon"]),c(" Messages sent: "+k(N.number_of_messages_processed),1)]),t("span",Nt,[r(f,{icon:d(T),class:"icon"},null,8,["icon"]),$[1]||($[1]=c(" Retry request started: ",-1)),r(O,{"date-utc":N.start_time},null,8,["date-utc"])]),t("span",xt,[r(f,{icon:d(T),class:"icon"},null,8,["icon"]),$[2]||($[2]=c(" Retry request completed: ",-1)),r(O,{"date-utc":N.completion_time},null,8,["date-utc"])])])])])])])])])),[[U,_.value.length]])),128)),L(t("span",{class:"short-group-history"},"There is only "+k(_.value.length)+" completed group retry",513),[[U,_.value.length===1]]),L(t("span",{class:"short-group-history"},"There are only "+k(_.value.length)+" completed group retries",513),[[U,_.value.length<10&&_.value.length>1]])],512),[[U,p.value]])])]))}}),Mt=K(Gt,[["__scopeId","data-v-1a921240"]]),Rt={class:"modal-mask"},Et={class:"modal-wrapper"},Ft={class:"modal-container"},Dt={class:"modal-header"},At={key:0,class:"modal-title"},St={key:1,class:"modal-title"},It={name:"commentNoteForm",novalidate:""},Ot={class:"modal-body"},qt={class:"row"},Lt={class:"form-group"},Tt={class:"modal-footer"},zt=["disabled"],Bt=["disabled"],Pt=J({__name:"FailedMessageGroupNoteEdit",props:{groupid:{},comment:{}},emits:["createNoteConfirmed","editNoteConfirmed","cancelEditNote"],setup(E,{emit:_}){const p=_,g=E,v=y(g.comment);function h(){const b={groupid:g.groupid,comment:v.value};p("createNoteConfirmed",b)}function $(){const b={groupid:g.groupid,comment:v.value};p("editNoteConfirmed",b)}function N(){p("cancelEditNote")}return $e(()=>{document.getElementsByTagName("body")[0].className=""}),se(()=>{document.getElementsByTagName("body")[0].className="modal-open"}),(b,F)=>(a(),i("div",Rt,[t("div",Et,[t("div",Ft,[t("div",Dt,[g.comment?(a(),i("h3",At,"Modify Note")):n("",!0),g.comment?n("",!0):(a(),i("h3",St,"Create Note"))]),t("form",It,[t("div",Ot,[t("div",qt,[t("div",Lt,[F[1]||(F[1]=t("label",{for:"comment"},"Note",-1)),L(t("textarea",{type:"text",id:"txtcomment",name:"txtcomment","onUpdate:modelValue":F[0]||(F[0]=w=>v.value=w),placeholder:"Comment",minInputLength:1,class:"form-control",required:""},null,512),[[ze,v.value,void 0,{trim:!0}]])])])]),t("div",Tt,[g.comment?(a(),i("button",{key:0,disabled:!v.value,class:"btn btn-primary",onClick:$},"Modify",8,zt)):n("",!0),g.comment?n("",!0):(a(),i("button",{key:1,disabled:!v.value,class:"btn btn-primary",onClick:h},"Create",8,Bt)),t("button",{class:"btn btn-default",onClick:N},"Cancel")])])])])]))}}),Ut=K(Pt,[["__scopeId","data-v-7bcf9b0c"]]),Vt={class:"slot"},Wt=J({__name:"ProgressMessage",props:{"left-to-do":{type:Boolean},active:{type:Boolean},completed:{type:Boolean}},setup(E){const _=E;return(p,g)=>(a(),i("li",{class:V(["progress-status",_])},[E.active?(a(),u(f,{key:0,icon:d(Be),class:"icon"},null,8,["icon"])):n("",!0),E.completed?(a(),u(f,{key:1,icon:d(Pe),class:"icon"},null,8,["icon"])):n("",!0),t("div",Vt,[Ue(p.$slots,"default",{},void 0,!0)])],2))}}),ee=K(Wt,[["__scopeId","data-v-e98dcd30"]]),Ht={class:"messagegrouplist"},Zt={class:"row"},Qt={class:"col-sm-12"},Yt={class:"row"},jt={class:"col-sm-12 no-mobile-side-padding"},Jt={key:0},Kt=["disabled","onMouseenter","onMouseleave","onClick"],Xt={class:"col-sm-12 no-mobile-side-padding"},es={class:"row"},ts={class:"col-sm-12 no-side-padding"},ss={class:"row box-header"},os={class:"col-sm-12 no-side-padding"},as={key:0,class:"metadata"},ns={class:"metadata"},is={key:0},ls={key:1},rs={class:"metadata"},ds={class:"metadata"},cs={class:"metadata"},us={key:0,class:"row"},ms={class:"col-sm-12 no-side-padding"},vs={key:0,class:"note"},fs={key:1,class:"row"},_s={class:"col-sm-12 no-side-padding"},ps={key:2,class:"row"},ws={class:"col-sm-12 no-side-padding"},ys={class:"panel panel-default panel-retry"},ks={class:"panel-body"},gs={class:"retry-request-progress"},hs={class:"row"},bs={class:"col-xs-12 col-sm-6"},$s={key:0,class:"progress bulk-retry-progress"},Cs={class:"row"},Ns={key:0,class:"col-xs-3 col-sm-3 retry-op-queued"},xs={class:"col-xs-12 col-sm-6"},Gs={key:0,class:"progress bulk-retry-progress"},Ms=["onClick"],Rs={key:1,class:"danger sc-restart-warning"},Es={class:"op-metadata"},Fs={class:"metadata"},Ds={class:"metadata"},As={key:0,class:"metadata"},Ss={key:3,class:"row"},Is={class:"col-sm-12 no-side-padding"},Os={class:"panel panel-default panel-retry"},qs={class:"panel-body"},Ls={class:"retry-request-progress"},Ts={class:"row"},zs={class:"col-xs-12 col-sm-6"},Bs={key:0,class:"progress bulk-retry-progress"},Ps={key:3},Us=["onClick"],Vs={class:"op-metadata"},Ws={class:"metadata"},Hs={class:"metadata"},Zs={class:"metadata"},Qs=J({__name:"MessageGroupList",props:{sortFunction:{type:Function}},emits:["InitialLoadComplete","ExceptionGroupCountUpdated"],setup(E,{expose:_,emit:p}){const g=p;let v=!1,h;const $=E,N=Ve();let b=[],F;const w=y(),D=y([]),l=y(!0),C=y(!1),S=y(!1),z=y(!1),B=y(!1),W=y(!1),q=y(null),oe=y(null),ae=y(null),x=it();async function Ce(o){const s=await x.getExceptionGroups(o);$.sortFunction&&s.sort($.sortFunction),b.forEach(e=>{const A=s.find(m=>m.id===e.groupId);A&&!A.comment?A.comment=e.comment:e.alreadySaved=!0}),D.value=s.map(Ne),b=b.filter(e=>!e.alreadySaved)}function Ne(o,s){let e=(o.operation_status?o.operation_status.toLowerCase():null)||"none";return e==="preparing"&&o.operation_progress===1&&(e="queued"),{...o,workflow_state:De(e,o.operation_progress,o.operation_failed),index:s}}async function H(o){l.value=!0,o&&(F=o),await Ce(F),l.value=!1,C.value=!0,g("InitialLoadComplete")}function xe(o){q.value=null,w.value=o,S.value=!0}async function ne(o,s){if(S.value=!1,o){const e=await x.deleteNote(o.id);x.isError(e)?(q.value=!1,s||M(R.ERROR,"Error",`Failed to delete a Note: ${e.message}`)):(q.value=!0,s||M(R.INFO,"Info","Note deleted successfully"),H())}}async function ve(o,s){q.value=null,z.value=!1,b.push({groupId:o.id,comment:s});const e=await x.editOrCreateNote(o.id,s);x.isError(e)?(q.value=!1,M(R.ERROR,"Error",`Failed to update Note: ${e.message}`)):(q.value=!0,M(R.INFO,"Info","Note updated successfully"),H())}function Ge(o,s){ve(o,s)}function Me(o,s){ve(o,s)}function fe(o){q.value=null,w.value=o,z.value=!0}const Re=["archivestarted","archiveprogressing","archivefinalizing","archivecompleted"];function Ee(o){oe.value=null,w.value=o,B.value=!0}async function Fe(o){if(B.value=!1,o){o.workflow_state={status:"archivestarted",message:"Delete request initiated..."},Q(1e3),ne(o,!0);const s=await x.archiveExceptionGroup(o.id);x.isError(s)?(oe.value=!1,M(R.ERROR,"Error",`Failed to delete the group: ${s.message}`)):(oe.value=!0,M(R.INFO,"info","Group delete started..."))}}function De(o,s,e){return s&&s<=1&&(s=s*100),{status:o||"working",total:Math.round(s||0),failed:e||!1}}const _e=function(o,s,e){const A=e.indexOf(o),m=e.indexOf(s);return{"left-to-do":A>m,active:A===m,completed:A<m}};function ie(o,s){return _e(o,s,Re)}function Ae(o){ae.value=null,w.value=o,W.value=!0}async function Se(o){if(W.value=!1,o){o.workflow_state={status:"waiting",message:"Retry Group Request Enqueued..."},Q(1e3),ne(o,!0);const s=await x.retryExceptionGroup(o.id);x.isError(s)?(ae.value=!1,M(R.ERROR,"Error",`Failed to retry the group: ${s.message}`)):ae.value=!0}}const Ie=["waiting","preparing","queued","forwarding"];function le(o,s){return s==="queued"&&(s="forwarding"),_e(o,s,Ie)}const pe=async function(o){const s=await x.acknowledgeArchiveGroup(o.id);x.isError(s)?M(R.ERROR,"Error",`Acknowledging Group Failed: ${s.message}`):(o.operation_status==="ArchiveCompleted"?M(R.INFO,"Info","Group deleted successfully"):M(R.INFO,"Info","Group retried successfully"),H())};function Z(o){return o==="archivestarted"||o==="archiveprogressing"||o==="archivefinalizing"||o==="archivecompleted"}function P(o){return o.workflow_state.status!=="none"&&(o.workflow_state.status!=="completed"||o.need_user_acknowledgement===!0)&&!Z(o.workflow_state.status)}function Oe(){b=[]}function qe(o){N.push(je.failedMessage.group.link(o))}function we(){return D.value.some(o=>o.operation_status!=="None"&&o.operation_status!=="ArchiveCompleted"&&o.operation_status!=="Completed")}function Q(o){h&&clearInterval(h),h=window.setInterval(()=>{!v&&we()?(Q(1e3),v=!0):v&&!we()&&(Q(5e3),v=!1),H()},o)}return $e(()=>{h&&clearInterval(h)}),se(()=>{Q(5e3)}),_({loadFailedMessageGroups:H,clearInMemoryData:Oe}),(o,s)=>(a(),i(te,null,[t("div",Ht,[t("div",Zt,[t("div",Qt,[D.value.length===0&&!l.value?(a(),u(be,{key:0,title:"message groups",message:"There are currently no grouped message failures"})):n("",!0)])]),t("div",Yt,[t("div",jt,[D.value.length>0?(a(),i("div",Jt,[(a(!0),i(te,null,me(D.value,(e,A)=>(a(),i("div",{class:V(`row box box-group wf-${e.workflow_state.status} failed-message-group repeat-modify`),key:A,disabled:e.count==0,onMouseenter:m=>e.hover2=!0,onMouseleave:m=>e.hover2=!1,onClick:m=>qe(e.id)},[t("div",Xt,[t("div",es,[t("div",ts,[t("div",ss,[t("div",os,[t("p",{class:V(["lead break",{"msg-type-hover":e.hover2,"msg-type-hover-off":e.hover3}])},k(e.title),3),!P(e)&&!Z(e.workflow_state.status)?(a(),i("p",as,[t("span",ns,[r(f,{class:"icon",icon:d(j)},null,8,["icon"]),c(" "+k(e.count)+" message",1),e.count>1?(a(),i("span",is,"s")):n("",!0),e.operation_remaining_count?(a(),i("span",ls," (currently retrying "+k(e.operation_remaining_count),1)):n("",!0)]),t("span",rs,[r(f,{class:"icon",icon:d(T)},null,8,["icon"]),s[9]||(s[9]=c(" First failed: ",-1)),r(O,{"date-utc":e.first},null,8,["date-utc"])]),t("span",ds,[r(f,{class:"icon",icon:d(T)},null,8,["icon"]),s[10]||(s[10]=c(" Last failed: ",-1)),r(O,{"date-utc":e.last},null,8,["date-utc"])]),t("span",cs,[r(f,{class:"icon",icon:d(ye)},null,8,["icon"]),s[11]||(s[11]=c(" Last retried: ",-1)),r(O,{"date-utc":e.operation_completion_time},null,8,["date-utc"])])])):n("",!0)])]),!P(e)&&!Z(e.workflow_state.status)?(a(),i("div",us,[t("div",ms,[e.comment?(a(),i("div",vs,[t("span",null,[s[12]||(s[12]=t("strong",null,"NOTE:",-1)),c(" "+k(e.comment),1)])])):n("",!0)])])):n("",!0),!P(e)&&!Z(e.workflow_state.status)?(a(),i("div",fs,[t("div",_s,[D.value.length>0?(a(),u(Y,{key:0,variant:"link",size:"sm",icon:d(ye),disabled:e.count==0||P(e),onMouseenter:m=>e.hover3=!0,onMouseleave:m=>e.hover3=!1,onClick:I(m=>Ae(e),["stop"])},{default:G(()=>[...s[13]||(s[13]=[t("span",null,"Request retry",-1)])]),_:1},8,["icon","disabled","onMouseenter","onMouseleave","onClick"])):n("",!0),D.value.length>0?(a(),u(Y,{key:1,variant:"link",size:"sm",icon:d(We),disabled:e.count==0||P(e),onMouseenter:m=>e.hover3=!0,onMouseleave:m=>e.hover3=!1,onClick:I(m=>Ee(e),["stop"])},{default:G(()=>[...s[14]||(s[14]=[t("span",null,"Delete group",-1)])]),_:1},8,["icon","disabled","onMouseenter","onMouseleave","onClick"])):n("",!0),e.comment?n("",!0):(a(),u(Y,{key:2,variant:"link",size:"sm",icon:d(He),onClick:I(m=>fe(e),["stop"])},{default:G(()=>[...s[15]||(s[15]=[c("Add note",-1)])]),_:1},8,["icon","onClick"])),e.comment?(a(),u(Y,{key:3,variant:"link",size:"sm",icon:d(Ze),onClick:I(m=>fe(e),["stop"])},{default:G(()=>[...s[16]||(s[16]=[c("Edit note",-1)])]),_:1},8,["icon","onClick"])):n("",!0),e.comment?(a(),u(Y,{key:4,variant:"link",size:"sm",icon:d(Qe),onClick:I(m=>xe(e),["stop"])},{default:G(()=>[...s[17]||(s[17]=[c("Remove note",-1)])]),_:1},8,["icon","onClick"])):n("",!0)])])):n("",!0),P(e)?(a(),i("div",ps,[t("div",ws,[t("div",ys,[t("div",ks,[t("ul",gs,[e.workflow_state.status!=="completed"?(a(),u(ee,X({key:0,ref_for:!0},le("waiting",e.workflow_state.status)),{default:G(()=>[...s[18]||(s[18]=[c("Initialize retry request...",-1)])]),_:1},16)):n("",!0),e.workflow_state.status!=="completed"?(a(),u(ee,X({key:1,ref_for:!0},le("preparing",e.workflow_state.status),{class:"inset"}),{default:G(()=>[t("div",hs,[s[19]||(s[19]=t("div",{class:"col-xs-12 col-sm-4 col-md-3 no-side-padding"},[t("span",{class:"bulk-retry-progress-status"},"Prepare messages...")],-1)),t("div",bs,[e.workflow_state.status==="preparing"?(a(),i("div",$s,[t("div",{class:"progress-bar progress-bar-striped active",role:"progressbar","aria-valuenow":"{{group.workflow_state.total}}","aria-valuemin":"0","aria-valuemax":"100",style:re({"min-width":"2em",width:e.workflow_state.total+"%"})},k(e.workflow_state.total)+"% ",5)])):n("",!0)])])]),_:2},1040)):n("",!0),e.workflow_state.status!=="completed"?(a(),u(ee,X({key:2,ref_for:!0},le("forwarding",e.workflow_state.status),{class:"inset"}),{default:G(()=>[t("div",Cs,[s[20]||(s[20]=t("div",{class:"col-xs-9 col-sm-4 col-md-3 no-side-padding"},[t("div",{class:"bulk-retry-progress-status"},"Send messages to retry...")],-1)),e.workflow_state.status==="queued"?(a(),i("div",Ns,"(Queued)")):n("",!0),t("div",xs,[e.workflow_state.status==="forwarding"?(a(),i("div",Gs,[t("div",{class:"progress-bar progress-bar-striped active",role:"progressbar","aria-valuenow":"{{group.workflow_state.total}}","aria-valuemin":"0","aria-valuemax":"100",style:re({"min-width":"2em",width:e.workflow_state.total+"%"})},k(e.workflow_state.total)+"% ",5)])):n("",!0)])])]),_:2},1040)):n("",!0),e.workflow_state.status==="completed"?(a(),u(ee,X({key:3,ref_for:!0},{"left-to-do":!1,active:!1,completed:!1}),{default:G(()=>[s[24]||(s[24]=t("div",{class:"retry-completed bulk-retry-progress-status"},"Retry request completed",-1)),e.need_user_acknowledgement==!0?(a(),i("button",{key:0,type:"button",class:"btn btn-default btn-primary btn-xs btn-retry-dismiss",onClick:I(m=>pe(e),["stop"])},"Dismiss",8,Ms)):n("",!0),e.workflow_state.failed?(a(),i("div",Rs,[r(f,{icon:d(Ye),class:"icon danger"},null,8,["icon"]),s[21]||(s[21]=c()),s[22]||(s[22]=t("strong",null,"WARNING: ",-1)),s[23]||(s[23]=c("Not all messages will be retried because ServiceControl had to restart. You need to request retrying the remaining messages. ",-1))])):n("",!0)]),_:2},1040)):n("",!0)]),t("div",Es,[t("span",Fs,[r(f,{icon:d(j),class:"icon"},null,8,["icon"]),c(" "+k(e.workflow_state.status==="completed"?"Messages sent:":"Messages to send:")+" "+k(e.operation_remaining_count||e.count),1)]),t("span",Ds,[r(f,{icon:d(T),class:"icon"},null,8,["icon"]),s[25]||(s[25]=c(" Retry request started: ",-1)),r(O,{"date-utc":e.operation_start_time},null,8,["date-utc"])]),e.workflow_state.status==="completed"?(a(),i("span",As,[r(f,{icon:d(T),class:"icon"},null,8,["icon"]),s[26]||(s[26]=c(" Retry request completed: ",-1)),r(O,{"date-utc":e.operation_completion_time},null,8,["date-utc"])])):n("",!0)])])])])])):n("",!0),Z(e.workflow_state.status)?(a(),i("div",Ss,[t("div",Is,[t("div",Os,[t("div",qs,[t("ul",Ls,[e.workflow_state.status!=="archivecompleted"?(a(),i("li",{key:0,class:V(ie("archivestarted",e.workflow_state.status))},[...s[27]||(s[27]=[t("div",{class:"bulk-retry-progress-status"},"Initialize delete request...",-1)])],2)):n("",!0),e.workflow_state.status!=="archivecompleted"?(a(),i("li",{key:1,class:V(ie("archiveprogressing",e.workflow_state.status))},[t("div",Ts,[s[28]||(s[28]=t("div",{class:"col-xs-12 col-sm-4 col-md-3 no-side-padding"},[t("div",{class:"bulk-retry-progress-status"},"Delete request in progress...")],-1)),t("div",zs,[e.workflow_state.status==="archiveprogressing"?(a(),i("div",Bs,[t("div",{class:"progress-bar progress-bar-striped active",role:"progressbar","aria-valuenow":"{{group.workflow_state.total}}","aria-valuemin":"0","aria-valuemax":"100",style:re({"min-width":"2em",width:e.workflow_state.total+"%"})},k(e.workflow_state.total)+" % ",5)])):n("",!0)])])],2)):n("",!0),e.workflow_state.status!=="archivecompleted"?(a(),i("li",{key:2,class:V(ie("archivefinalizing",e.workflow_state.status))},[...s[29]||(s[29]=[t("div",{class:"row"},[t("div",{class:"col-xs-12 col-sm-4 col-md-3 no-side-padding"},[t("div",{class:"bulk-retry-progress-status"},"Cleaning up...")])],-1)])],2)):n("",!0),e.workflow_state.status==="archivecompleted"?(a(),i("li",Ps,[s[30]||(s[30]=t("div",{class:"retry-completed bulk-retry-progress-status"},"Delete request completed",-1)),e.need_user_acknowledgement==!0?(a(),i("button",{key:0,type:"button",class:"btn btn-default btn-primary btn-xs btn-retry-dismiss",onClick:I(m=>pe(e),["stop"])},"Dismiss",8,Us)):n("",!0)])):n("",!0)]),t("div",Vs,[t("span",Ws,[r(f,{icon:d(T),class:"icon"},null,8,["icon"]),s[31]||(s[31]=c(" Delete request started: ",-1)),r(O,{"date-utc":e.operation_start_time},null,8,["date-utc"])]),t("span",Hs,[r(f,{icon:d(j),class:"icon"},null,8,["icon"]),c(" Messages left to delete: "+k(e.operation_remaining_count||0),1)]),t("span",Zs,[r(f,{icon:d(j),class:"icon"},null,8,["icon"]),c(" Messages deleted: "+k(e.operation_messages_completed_count||0),1)])])])])])])):n("",!0)])])])],42,Kt))),128))])):n("",!0)])])]),(a(),u(ke,{to:"#modalDisplay"},[z.value===!0&&w.value?(a(),u(Ut,{key:0,groupid:w.value.id,comment:w.value.comment,onCancelEditNote:s[0]||(s[0]=e=>z.value=!1),onCreateNoteConfirmed:s[1]||(s[1]=e=>Ge(w.value,e.comment)),onEditNoteConfirmed:s[2]||(s[2]=e=>Me(w.value,e.comment))},null,8,["groupid","comment"])):n("",!0)])),(a(),u(ke,{to:"#modalDisplay"},[B.value?(a(),u(de,{key:0,onCancel:s[3]||(s[3]=e=>B.value=!1),onConfirm:s[4]||(s[4]=e=>{B.value=!1,Fe(w.value)}),heading:"Are you sure you want to delete this group?",body:"Messages that are deleted will be cleaned up according to the ServiceControl retention policy, and aren't available for retrying unless they're restored."})):n("",!0),W.value?(a(),u(de,{key:1,onCancel:s[5]||(s[5]=e=>W.value=!1),onConfirm:s[6]||(s[6]=e=>{W.value=!1,Se(w.value)}),heading:"Are you sure you want to retry this group?",body:`Retrying a whole group can take some time and put extra load on your system. Are you sure you want to retry this group of ${w.value?.count??0} messages?`},null,8,["body"])):n("",!0),S.value?(a(),u(de,{key:2,onCancel:s[7]||(s[7]=e=>S.value=!1),onConfirm:s[8]||(s[8]=e=>{S.value=!1,ne(w.value)}),heading:"Are you sure you want to delete this note?",body:"Deleted note will not be available."})):n("",!0)]))],64))}}),Ys=K(Qs,[["__scopeId","data-v-c4db5aee"]]),js={name:"message_groups"},Js={class:"row"},Ks={class:"col-6 toolbar-menus no-side-padding"},Xs={class:"msg-group-menu dropdown"},eo={type:"button",class:"btn btn-default dropdown-toggle sp-btn-menu","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},to={class:"dropdown-menu"},so=["onClick"],oo={key:0,class:"box-container"},ao={class:"row"},no={class:"col-12"},io={class:"list-section"},lo={class:"col-12 form-group"},ro=J({__name:"FailedMessageGroups",setup(E){const _=he(),p=y(""),g=y([]),v=Je("messageGroupList"),h=y();function $(l){h.value=l.sort??at(l.selector,nt.Ascending),v.value?.loadFailedMessageGroups()}const N=[{description:"Name",selector:l=>l.title,iconAsc:et,iconDesc:Xe},{description:"Number of messages",selector:l=>l.count,iconAsc:st,iconDesc:tt},{description:"First Failed Time",selector:l=>l.first,iconAsc:ue,iconDesc:ce},{description:"Last Failed Time",selector:l=>l.last,iconAsc:ue,iconDesc:ce},{description:"Last Retried Time",selector:l=>l.last_operation_completion_time,iconAsc:ue,iconDesc:ce}];async function b(){const[,l]=await _.fetchTypedFromServiceControl("recoverability/classifiers");g.value=l}function F(l){ge().cookies.set("failed_groups_classification",l)}function w(l){p.value=l,F(l),v.value?.loadFailedMessageGroups(l)}function D(){const C=ge().cookies.get("failed_groups_classification");return C||null}return se(async()=>{await b();let l=D();l||(l=g.value[0]),p.value=l,v.value?.loadFailedMessageGroups(l)}),(l,C)=>(a(),u(ot,null,{default:G(()=>[r(Ke,null,{default:G(()=>[t("section",js,[r(Mt),t("div",Js,[C[2]||(C[2]=t("div",{class:"col-6 list-section"},[t("h3",null,"Failed message group")],-1)),t("div",Ks,[t("div",Xs,[C[1]||(C[1]=t("label",{class:"control-label"},"Group by:",-1)),t("button",eo,[c(k(p.value)+" ",1),C[0]||(C[0]=t("span",{class:"caret"},null,-1))]),t("ul",to,[(a(!0),i(te,null,me(g.value,(S,z)=>(a(),i("li",{key:z},[t("a",{onClick:I(B=>w(S),["prevent"])},k(S),9,so)]))),128))])]),r(lt,{onSortUpdated:$,sortOptions:N})])]),h.value?(a(),i("div",oo,[t("div",ao,[t("div",no,[t("div",io,[t("div",lo,[r(Ys,{sortFunction:h.value,ref_key:"messageGroupList",ref:v},null,8,["sortFunction"])])])])])])):n("",!0)])]),_:1})]),_:1}))}}),vo=K(ro,[["__scopeId","data-v-a6c4c394"]]);export{vo as default};
//# sourceMappingURL=FailedMessageGroups-Bhk9iJUQ.js.map
