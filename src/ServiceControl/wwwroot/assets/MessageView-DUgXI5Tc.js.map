{"version":3,"file":"MessageView-DUgXI5Tc.js","sources":["../../../../frontend/node_modules/@vue-flow/core/dist/vue-flow-core.mjs","../../../../frontend/src/resources/Header.ts","../../../../frontend/node_modules/@vue-flow/controls/dist/vue-flow-controls.mjs","../../../../frontend/src/components/TextEllipses.vue","../../../../frontend/src/components/TypeNameDisplay.vue","../../../../frontend/src/components/SagaName.vue","../../../../frontend/node_modules/@dagrejs/graphlib/lib/graph.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/version.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/index.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/json.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/components.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/data/priority-queue.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/dijkstra.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/dijkstra-all.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/tarjan.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/find-cycles.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/floyd-warshall.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/topsort.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/is-acyclic.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/dfs.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/postorder.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/preorder.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/prim.js","../../../../frontend/node_modules/@dagrejs/graphlib/lib/alg/index.js","../../../../frontend/node_modules/@dagrejs/graphlib/index.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/data/list.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/greedy-fas.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/util.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/acyclic.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/normalize.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/rank/util.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/rank/feasible-tree.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/rank/network-simplex.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/rank/index.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/parent-dummy-chains.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/nesting-graph.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/add-border-segments.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/coordinate-system.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/order/init-order.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/order/cross-count.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/order/barycenter.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/order/resolve-conflicts.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/order/sort.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/order/sort-subgraph.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/order/build-layer-graph.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/order/add-subgraph-constraints.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/order/index.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/position/bk.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/position/index.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/layout.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/debug.js","../../../../frontend/node_modules/@dagrejs/dagre/lib/version.js","../../../../frontend/node_modules/@dagrejs/dagre/index.js","../../../../frontend/src/components/messages/FlowDiagram/useLayout.ts","../../../../frontend/src/components/messages/FlowDiagram/FlowDiagram.vue","../../../../frontend/src/resources/SequenceDiagram/RoutedMessage.ts","../../../../frontend/src/resources/SequenceDiagram/Endpoint.ts","../../../../frontend/src/resources/SequenceDiagram/Handler.ts","../../../../frontend/src/resources/SequenceDiagram/SequenceModel.ts","../../../../frontend/src/stores/SequenceDiagramStore.ts","../../../../frontend/src/components/messages/SequenceDiagram/EndpointsComponent.vue","../../../../frontend/src/components/messages/SequenceDiagram/TimelineComponent.vue","../../../../frontend/src/components/messages/SequenceDiagram/HandlersComponent.vue","../../../../frontend/src/components/messages/SequenceDiagram/RoutesComponent.vue","../../../../frontend/src/components/messages/SequenceDiagram/EndpointTooltip.vue","../../../../frontend/src/components/messages/SequenceDiagram/HandlerTooltip.vue","../../../../frontend/src/components/messages/SequenceDiagram/RouteTooltip.vue","../../../../frontend/src/components/messages/SequenceDiagram/tooltipOverlay.ts","../../../../frontend/src/components/messages/SequenceDiagram.vue","../../../../frontend/src/composables/contentTypeParser.ts","../../../../frontend/src/components/messages/BodyView.vue","../../../../frontend/src/components/messages/HeadersView.vue","../../../../frontend/src/components/messages/StacktraceFormatter.vue","../../../../frontend/src/components/messages/StacktraceView.vue","../../../../frontend/src/components/messages/DeleteMessageButton.vue","../../../../frontend/src/components/messages/RestoreMessageButton.vue","../../../../frontend/src/components/messages/RetryMessageButton.vue","../../../../frontend/src/components/failedmessages/EditMessageHeader.vue","../../../../frontend/src/components/failedmessages/EditRetryDialog.vue","../../../../frontend/src/components/failedmessages/EditIgnoredDialog.vue","../../../../frontend/src/components/messages/EditAndRetryButton.vue","../../../../frontend/src/components/messages/ExportMessageButton.vue","../../../../frontend/src/components/TabsLayout.vue","../../../../frontend/src/components/messages/MetadataLabel.vue","../../../../frontend/src/stores/SagaDiagramStore.ts","../../../../frontend/src/composables/typeHumanizer.ts","../../../../frontend/src/composables/deliveryDelayParser.ts","../../../../frontend/src/components/messages/SagaDiagram/SagaDiagramParser.ts","../../../../frontend/src/assets/NoSaga.svg","../../../../frontend/src/components/messages/SagaDiagram/NoSagaData.vue","../../../../frontend/src/components/messages/SagaDiagram/SagaPluginNeeded.vue","../../../../frontend/src/components/messages/SagaDiagram/SagaHeader.vue","../../../../frontend/src/assets/diff-maximize.svg","../../../../frontend/src/assets/diff-close.svg","../../../../frontend/src/components/MaximizableCodeEditor.vue","../../../../frontend/src/components/messages/SagaDiagram/MessageDataBox.vue","../../../../frontend/src/assets/TimeoutIcon.svg","../../../../frontend/src/assets/SagaTimeoutIcon.svg","../../../../frontend/src/components/messages/SagaDiagram/SagaOutgoingTimeoutMessage.vue","../../../../frontend/src/assets/command.svg","../../../../frontend/src/assets/event.svg","../../../../frontend/src/components/messages/SagaDiagram/SagaOutgoingMessage.vue","../../../../frontend/node_modules/diff/libesm/diff/base.js","../../../../frontend/node_modules/diff/libesm/diff/character.js","../../../../frontend/node_modules/diff/libesm/util/string.js","../../../../frontend/node_modules/diff/libesm/diff/word.js","../../../../frontend/node_modules/diff/libesm/util/params.js","../../../../frontend/node_modules/diff/libesm/diff/line.js","../../../../frontend/node_modules/diff/libesm/diff/sentence.js","../../../../frontend/node_modules/diff/libesm/diff/css.js","../../../../frontend/src/components/messages/DiffContent.vue","../../../../frontend/src/components/messages/DiffViewer.vue","../../../../frontend/src/assets/SagaInitiatedIcon.svg","../../../../frontend/src/assets/SagaUpdatedIcon.svg","../../../../frontend/src/assets/timeout.svg","../../../../frontend/src/components/messages/SagaDiagram/SagaUpdateNode.vue","../../../../frontend/src/assets/SagaCompletedIcon.svg","../../../../frontend/src/components/messages/SagaDiagram/SagaCompletedNode.vue","../../../../frontend/src/components/messages/SagaDiagram.vue","../../../../frontend/src/components/messages/MessageView.vue"],"sourcesContent":["import { getCurrentScope, onScopeDispose, isRef, reactive, unref, toRefs as toRefs$1, customRef, ref, readonly, watch, getCurrentInstance, nextTick, computed, toValue as toValue$1, shallowRef, markRaw, inject, effectScope, toRef, onBeforeMount, defineComponent, createPropsRestProxy, onMounted, openBlock, createElementBlock, normalizeClass, renderSlot, h, Fragment, normalizeStyle, createCommentVNode, createElementVNode, mergeProps, createBlock, resolveDynamicComponent, createTextVNode, toDisplayString, useAttrs, provide, onBeforeUnmount, createVNode, withCtx, resolveComponent, renderList, Teleport, isMemoSame, useSlots, onUnmounted } from \"vue\";\nfunction tryOnScopeDispose(fn) {\n  if (getCurrentScope()) {\n    onScopeDispose(fn);\n    return true;\n  }\n  return false;\n}\nfunction toValue(r) {\n  return typeof r === \"function\" ? r() : unref(r);\n}\nfunction toReactive(objectRef) {\n  if (!isRef(objectRef))\n    return reactive(objectRef);\n  const proxy = new Proxy({}, {\n    get(_, p, receiver) {\n      return unref(Reflect.get(objectRef.value, p, receiver));\n    },\n    set(_, p, value) {\n      if (isRef(objectRef.value[p]) && !isRef(value))\n        objectRef.value[p].value = value;\n      else\n        objectRef.value[p] = value;\n      return true;\n    },\n    deleteProperty(_, p) {\n      return Reflect.deleteProperty(objectRef.value, p);\n    },\n    has(_, p) {\n      return Reflect.has(objectRef.value, p);\n    },\n    ownKeys() {\n      return Object.keys(objectRef.value);\n    },\n    getOwnPropertyDescriptor() {\n      return {\n        enumerable: true,\n        configurable: true\n      };\n    }\n  });\n  return reactive(proxy);\n}\nconst isClient = typeof window !== \"undefined\" && typeof document !== \"undefined\";\nconst isDef$1 = (val) => typeof val !== \"undefined\";\nconst toString = Object.prototype.toString;\nconst isObject = (val) => toString.call(val) === \"[object Object]\";\nconst noop$3 = () => {\n};\nfunction createFilterWrapper(filter2, fn) {\n  function wrapper(...args) {\n    return new Promise((resolve, reject) => {\n      Promise.resolve(filter2(() => fn.apply(this, args), { fn, thisArg: this, args })).then(resolve).catch(reject);\n    });\n  }\n  return wrapper;\n}\nconst bypassFilter = (invoke) => {\n  return invoke();\n};\nfunction pausableFilter(extendFilter = bypassFilter) {\n  const isActive = ref(true);\n  function pause() {\n    isActive.value = false;\n  }\n  function resume() {\n    isActive.value = true;\n  }\n  const eventFilter = (...args) => {\n    if (isActive.value)\n      extendFilter(...args);\n  };\n  return { isActive: readonly(isActive), pause, resume, eventFilter };\n}\nfunction promiseTimeout(ms, throwOnTimeout = false, reason = \"Timeout\") {\n  return new Promise((resolve, reject) => {\n    if (throwOnTimeout)\n      setTimeout(() => reject(reason), ms);\n    else\n      setTimeout(resolve, ms);\n  });\n}\nfunction watchWithFilter(source, cb, options = {}) {\n  const {\n    eventFilter = bypassFilter,\n    ...watchOptions\n  } = options;\n  return watch(\n    source,\n    createFilterWrapper(\n      eventFilter,\n      cb\n    ),\n    watchOptions\n  );\n}\nfunction watchPausable(source, cb, options = {}) {\n  const {\n    eventFilter: filter2,\n    ...watchOptions\n  } = options;\n  const { eventFilter, pause, resume, isActive } = pausableFilter(filter2);\n  const stop = watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter\n    }\n  );\n  return { stop, pause, resume, isActive };\n}\nfunction toRefs(objectRef, options = {}) {\n  if (!isRef(objectRef))\n    return toRefs$1(objectRef);\n  const result = Array.isArray(objectRef.value) ? Array.from({ length: objectRef.value.length }) : {};\n  for (const key in objectRef.value) {\n    result[key] = customRef(() => ({\n      get() {\n        return objectRef.value[key];\n      },\n      set(v) {\n        var _a;\n        const replaceRef = (_a = toValue(options.replaceRef)) != null ? _a : true;\n        if (replaceRef) {\n          if (Array.isArray(objectRef.value)) {\n            const copy = [...objectRef.value];\n            copy[key] = v;\n            objectRef.value = copy;\n          } else {\n            const newObject = { ...objectRef.value, [key]: v };\n            Object.setPrototypeOf(newObject, Object.getPrototypeOf(objectRef.value));\n            objectRef.value = newObject;\n          }\n        } else {\n          objectRef.value[key] = v;\n        }\n      }\n    }));\n  }\n  return result;\n}\nfunction createUntil(r, isNot = false) {\n  function toMatch(condition, { flush = \"sync\", deep = false, timeout: timeout2, throwOnTimeout } = {}) {\n    let stop = null;\n    const watcher = new Promise((resolve) => {\n      stop = watch(\n        r,\n        (v) => {\n          if (condition(v) !== isNot) {\n            stop == null ? void 0 : stop();\n            resolve(v);\n          }\n        },\n        {\n          flush,\n          deep,\n          immediate: true\n        }\n      );\n    });\n    const promises = [watcher];\n    if (timeout2 != null) {\n      promises.push(\n        promiseTimeout(timeout2, throwOnTimeout).then(() => toValue(r)).finally(() => stop == null ? void 0 : stop())\n      );\n    }\n    return Promise.race(promises);\n  }\n  function toBe(value, options) {\n    if (!isRef(value))\n      return toMatch((v) => v === value, options);\n    const { flush = \"sync\", deep = false, timeout: timeout2, throwOnTimeout } = options != null ? options : {};\n    let stop = null;\n    const watcher = new Promise((resolve) => {\n      stop = watch(\n        [r, value],\n        ([v1, v2]) => {\n          if (isNot !== (v1 === v2)) {\n            stop == null ? void 0 : stop();\n            resolve(v1);\n          }\n        },\n        {\n          flush,\n          deep,\n          immediate: true\n        }\n      );\n    });\n    const promises = [watcher];\n    if (timeout2 != null) {\n      promises.push(\n        promiseTimeout(timeout2, throwOnTimeout).then(() => toValue(r)).finally(() => {\n          stop == null ? void 0 : stop();\n          return toValue(r);\n        })\n      );\n    }\n    return Promise.race(promises);\n  }\n  function toBeTruthy(options) {\n    return toMatch((v) => Boolean(v), options);\n  }\n  function toBeNull(options) {\n    return toBe(null, options);\n  }\n  function toBeUndefined(options) {\n    return toBe(void 0, options);\n  }\n  function toBeNaN(options) {\n    return toMatch(Number.isNaN, options);\n  }\n  function toContains(value, options) {\n    return toMatch((v) => {\n      const array2 = Array.from(v);\n      return array2.includes(value) || array2.includes(toValue(value));\n    }, options);\n  }\n  function changed(options) {\n    return changedTimes(1, options);\n  }\n  function changedTimes(n = 1, options) {\n    let count = -1;\n    return toMatch(() => {\n      count += 1;\n      return count >= n;\n    }, options);\n  }\n  if (Array.isArray(toValue(r))) {\n    const instance = {\n      toMatch,\n      toContains,\n      changed,\n      changedTimes,\n      get not() {\n        return createUntil(r, !isNot);\n      }\n    };\n    return instance;\n  } else {\n    const instance = {\n      toMatch,\n      toBe,\n      toBeTruthy,\n      toBeNull,\n      toBeNaN,\n      toBeUndefined,\n      changed,\n      changedTimes,\n      get not() {\n        return createUntil(r, !isNot);\n      }\n    };\n    return instance;\n  }\n}\nfunction until(r) {\n  return createUntil(r);\n}\nfunction unrefElement(elRef) {\n  var _a;\n  const plain = toValue(elRef);\n  return (_a = plain == null ? void 0 : plain.$el) != null ? _a : plain;\n}\nconst defaultWindow = isClient ? window : void 0;\nfunction useEventListener(...args) {\n  let target;\n  let events;\n  let listeners;\n  let options;\n  if (typeof args[0] === \"string\" || Array.isArray(args[0])) {\n    [events, listeners, options] = args;\n    target = defaultWindow;\n  } else {\n    [target, events, listeners, options] = args;\n  }\n  if (!target)\n    return noop$3;\n  if (!Array.isArray(events))\n    events = [events];\n  if (!Array.isArray(listeners))\n    listeners = [listeners];\n  const cleanups = [];\n  const cleanup = () => {\n    cleanups.forEach((fn) => fn());\n    cleanups.length = 0;\n  };\n  const register = (el, event, listener, options2) => {\n    el.addEventListener(event, listener, options2);\n    return () => el.removeEventListener(event, listener, options2);\n  };\n  const stopWatch = watch(\n    () => [unrefElement(target), toValue(options)],\n    ([el, options2]) => {\n      cleanup();\n      if (!el)\n        return;\n      const optionsClone = isObject(options2) ? { ...options2 } : options2;\n      cleanups.push(\n        ...events.flatMap((event) => {\n          return listeners.map((listener) => register(el, event, listener, optionsClone));\n        })\n      );\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  const stop = () => {\n    stopWatch();\n    cleanup();\n  };\n  tryOnScopeDispose(stop);\n  return stop;\n}\nfunction createKeyPredicate$1(keyFilter) {\n  if (typeof keyFilter === \"function\")\n    return keyFilter;\n  else if (typeof keyFilter === \"string\")\n    return (event) => event.key === keyFilter;\n  else if (Array.isArray(keyFilter))\n    return (event) => keyFilter.includes(event.key);\n  return () => true;\n}\nfunction onKeyStroke(...args) {\n  let key;\n  let handler;\n  let options = {};\n  if (args.length === 3) {\n    key = args[0];\n    handler = args[1];\n    options = args[2];\n  } else if (args.length === 2) {\n    if (typeof args[1] === \"object\") {\n      key = true;\n      handler = args[0];\n      options = args[1];\n    } else {\n      key = args[0];\n      handler = args[1];\n    }\n  } else {\n    key = true;\n    handler = args[0];\n  }\n  const {\n    target = defaultWindow,\n    eventName = \"keydown\",\n    passive = false,\n    dedupe = false\n  } = options;\n  const predicate = createKeyPredicate$1(key);\n  const listener = (e) => {\n    if (e.repeat && toValue(dedupe))\n      return;\n    if (predicate(e))\n      handler(e);\n  };\n  return useEventListener(target, eventName, listener, passive);\n}\nfunction cloneFnJSON(source) {\n  return JSON.parse(JSON.stringify(source));\n}\nfunction useVModel(props, key, emit, options = {}) {\n  var _a, _b, _c;\n  const {\n    clone = false,\n    passive = false,\n    eventName,\n    deep = false,\n    defaultValue,\n    shouldEmit\n  } = options;\n  const vm = getCurrentInstance();\n  const _emit = emit || (vm == null ? void 0 : vm.emit) || ((_a = vm == null ? void 0 : vm.$emit) == null ? void 0 : _a.bind(vm)) || ((_c = (_b = vm == null ? void 0 : vm.proxy) == null ? void 0 : _b.$emit) == null ? void 0 : _c.bind(vm == null ? void 0 : vm.proxy));\n  let event = eventName;\n  if (!key) {\n    {\n      key = \"modelValue\";\n    }\n  }\n  event = event || `update:${key.toString()}`;\n  const cloneFn = (val) => !clone ? val : typeof clone === \"function\" ? clone(val) : cloneFnJSON(val);\n  const getValue = () => isDef$1(props[key]) ? cloneFn(props[key]) : defaultValue;\n  const triggerEmit = (value) => {\n    if (shouldEmit) {\n      if (shouldEmit(value))\n        _emit(event, value);\n    } else {\n      _emit(event, value);\n    }\n  };\n  if (passive) {\n    const initialValue = getValue();\n    const proxy = ref(initialValue);\n    let isUpdating = false;\n    watch(\n      () => props[key],\n      (v) => {\n        if (!isUpdating) {\n          isUpdating = true;\n          proxy.value = cloneFn(v);\n          nextTick(() => isUpdating = false);\n        }\n      }\n    );\n    watch(\n      proxy,\n      (v) => {\n        if (!isUpdating && (v !== props[key] || deep))\n          triggerEmit(v);\n      },\n      { deep }\n    );\n    return proxy;\n  } else {\n    return computed({\n      get() {\n        return getValue();\n      },\n      set(value) {\n        triggerEmit(value);\n      }\n    });\n  }\n}\nvar noop$2 = { value: () => {\n} };\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || t in _ || /[\\s.]/.test(t))\n      throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\nfunction Dispatch(_) {\n  this._ = _;\n}\nfunction parseTypenames$1(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0)\n      name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t))\n      throw new Error(\"unknown type: \" + t);\n    return { type: t, name };\n  });\n}\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._, T = parseTypenames$1(typename + \"\", _), t, i = -1, n = T.length;\n    if (arguments.length < 2) {\n      while (++i < n)\n        if ((t = (typename = T[i]).type) && (t = get$1(_[t], typename.name)))\n          return t;\n      return;\n    }\n    if (callback != null && typeof callback !== \"function\")\n      throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type)\n        _[t] = set$1(_[t], typename.name, callback);\n      else if (callback == null)\n        for (t in _)\n          _[t] = set$1(_[t], typename.name, null);\n    }\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _)\n      copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0)\n      for (var args = new Array(n), i = 0, n, t; i < n; ++i)\n        args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type))\n      throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i)\n      t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type))\n      throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i)\n      t[i].value.apply(that, args);\n  }\n};\nfunction get$1(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\nfunction set$1(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop$2, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null)\n    type.push({ name, value: callback });\n  return type;\n}\nvar xhtml = \"http://www.w3.org/1999/xhtml\";\nconst namespaces = {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\nfunction namespace(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\")\n    name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? { space: namespaces[prefix], local: name } : name;\n}\nfunction creatorInherit(name) {\n  return function() {\n    var document2 = this.ownerDocument, uri = this.namespaceURI;\n    return uri === xhtml && document2.documentElement.namespaceURI === xhtml ? document2.createElement(name) : document2.createElementNS(uri, name);\n  };\n}\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\nfunction creator(name) {\n  var fullname = namespace(name);\n  return (fullname.local ? creatorFixed : creatorInherit)(fullname);\n}\nfunction none() {\n}\nfunction selector(selector2) {\n  return selector2 == null ? none : function() {\n    return this.querySelector(selector2);\n  };\n}\nfunction selection_select(select2) {\n  if (typeof select2 !== \"function\")\n    select2 = selector(select2);\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select2.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node)\n          subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n  return new Selection$1(subgroups, this._parents);\n}\nfunction array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\nfunction empty() {\n  return [];\n}\nfunction selectorAll(selector2) {\n  return selector2 == null ? empty : function() {\n    return this.querySelectorAll(selector2);\n  };\n}\nfunction arrayAll(select2) {\n  return function() {\n    return array(select2.apply(this, arguments));\n  };\n}\nfunction selection_selectAll(select2) {\n  if (typeof select2 === \"function\")\n    select2 = arrayAll(select2);\n  else\n    select2 = selectorAll(select2);\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select2.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n  return new Selection$1(subgroups, parents);\n}\nfunction matcher(selector2) {\n  return function() {\n    return this.matches(selector2);\n  };\n}\nfunction childMatcher(selector2) {\n  return function(node) {\n    return node.matches(selector2);\n  };\n}\nvar find = Array.prototype.find;\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\nfunction childFirst() {\n  return this.firstElementChild;\n}\nfunction selection_selectChild(match) {\n  return this.select(match == null ? childFirst : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\nvar filter = Array.prototype.filter;\nfunction children() {\n  return Array.from(this.children);\n}\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\nfunction selection_selectChildren(match) {\n  return this.selectAll(match == null ? children : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\nfunction selection_filter(match) {\n  if (typeof match !== \"function\")\n    match = matcher(match);\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n  return new Selection$1(subgroups, this._parents);\n}\nfunction sparse(update) {\n  return new Array(update.length);\n}\nfunction selection_enter() {\n  return new Selection$1(this._enter || this._groups.map(sparse), this._parents);\n}\nfunction EnterNode(parent, datum2) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum2;\n}\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) {\n    return this._parent.insertBefore(child, this._next);\n  },\n  insertBefore: function(child, next) {\n    return this._parent.insertBefore(child, next);\n  },\n  querySelector: function(selector2) {\n    return this._parent.querySelector(selector2);\n  },\n  querySelectorAll: function(selector2) {\n    return this._parent.querySelectorAll(selector2);\n  }\n};\nfunction constant$3(x) {\n  return function() {\n    return x;\n  };\n}\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0, node, groupLength = group.length, dataLength = data.length;\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i, node, nodeByKeyValue = /* @__PURE__ */ new Map(), groupLength = group.length, dataLength = data.length, keyValues = new Array(groupLength), keyValue;\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && nodeByKeyValue.get(keyValues[i]) === node) {\n      exit[i] = node;\n    }\n  }\n}\nfunction datum(node) {\n  return node.__data__;\n}\nfunction selection_data(value, key) {\n  if (!arguments.length)\n    return Array.from(this, datum);\n  var bind = key ? bindKey : bindIndex, parents = this._parents, groups = this._groups;\n  if (typeof value !== \"function\")\n    value = constant$3(value);\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j], group = groups[j], groupLength = group.length, data = arraylike(value.call(parent, parent && parent.__data__, j, parents)), dataLength = data.length, enterGroup = enter[j] = new Array(dataLength), updateGroup = update[j] = new Array(dataLength), exitGroup = exit[j] = new Array(groupLength);\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1)\n          i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength)\n          ;\n        previous._next = next || null;\n      }\n    }\n  }\n  update = new Selection$1(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data ? data : Array.from(data);\n}\nfunction selection_exit() {\n  return new Selection$1(this._exit || this._groups.map(sparse), this._parents);\n}\nfunction selection_join(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter)\n      enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update)\n      update = update.selection();\n  }\n  if (onexit == null)\n    exit.remove();\n  else\n    onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\nfunction selection_merge(context) {\n  var selection2 = context.selection ? context.selection() : context;\n  for (var groups0 = this._groups, groups1 = selection2._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n  return new Selection$1(merges, this._parents);\n}\nfunction selection_order() {\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m; ) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0; ) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4)\n          next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n  return this;\n}\nfunction selection_sort(compare) {\n  if (!compare)\n    compare = ascending;\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n  return new Selection$1(sortgroups, this._parents).order();\n}\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\nfunction selection_call() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\nfunction selection_nodes() {\n  return Array.from(this);\n}\nfunction selection_node() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node)\n        return node;\n    }\n  }\n  return null;\n}\nfunction selection_size() {\n  let size = 0;\n  for (const node of this)\n    ++size;\n  return size;\n}\nfunction selection_empty() {\n  return !this.node();\n}\nfunction selection_each(callback) {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i])\n        callback.call(node, node.__data__, i, group);\n    }\n  }\n  return this;\n}\nfunction attrRemove$1(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\nfunction attrRemoveNS$1(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\nfunction attrConstant$1(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\nfunction attrConstantNS$1(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\nfunction attrFunction$1(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null)\n      this.removeAttribute(name);\n    else\n      this.setAttribute(name, v);\n  };\n}\nfunction attrFunctionNS$1(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null)\n      this.removeAttributeNS(fullname.space, fullname.local);\n    else\n      this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\nfunction selection_attr(name, value) {\n  var fullname = namespace(name);\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local ? node.getAttributeNS(fullname.space, fullname.local) : node.getAttribute(fullname);\n  }\n  return this.each((value == null ? fullname.local ? attrRemoveNS$1 : attrRemove$1 : typeof value === \"function\" ? fullname.local ? attrFunctionNS$1 : attrFunction$1 : fullname.local ? attrConstantNS$1 : attrConstant$1)(fullname, value));\n}\nfunction defaultView(node) {\n  return node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView;\n}\nfunction styleRemove$1(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\nfunction styleConstant$1(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\nfunction styleFunction$1(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null)\n      this.style.removeProperty(name);\n    else\n      this.style.setProperty(name, v, priority);\n  };\n}\nfunction selection_style(name, value, priority) {\n  return arguments.length > 1 ? this.each((value == null ? styleRemove$1 : typeof value === \"function\" ? styleFunction$1 : styleConstant$1)(name, value, priority == null ? \"\" : priority)) : styleValue(this.node(), name);\n}\nfunction styleValue(node, name) {\n  return node.style.getPropertyValue(name) || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\nfunction propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null)\n      delete this[name];\n    else\n      this[name] = v;\n  };\n}\nfunction selection_property(name, value) {\n  return arguments.length > 1 ? this.each((value == null ? propertyRemove : typeof value === \"function\" ? propertyFunction : propertyConstant)(name, value)) : this.node()[name];\n}\nfunction classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n)\n    list.add(names[i]);\n}\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n)\n    list.remove(names[i]);\n}\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\nfunction selection_classed(name, value) {\n  var names = classArray(name + \"\");\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n)\n      if (!list.contains(names[i]))\n        return false;\n    return true;\n  }\n  return this.each((typeof value === \"function\" ? classedFunction : value ? classedTrue : classedFalse)(names, value));\n}\nfunction textRemove() {\n  this.textContent = \"\";\n}\nfunction textConstant$1(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\nfunction textFunction$1(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\nfunction selection_text(value) {\n  return arguments.length ? this.each(value == null ? textRemove : (typeof value === \"function\" ? textFunction$1 : textConstant$1)(value)) : this.node().textContent;\n}\nfunction htmlRemove() {\n  this.innerHTML = \"\";\n}\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\nfunction selection_html(value) {\n  return arguments.length ? this.each(value == null ? htmlRemove : (typeof value === \"function\" ? htmlFunction : htmlConstant)(value)) : this.node().innerHTML;\n}\nfunction raise() {\n  if (this.nextSibling)\n    this.parentNode.appendChild(this);\n}\nfunction selection_raise() {\n  return this.each(raise);\n}\nfunction lower() {\n  if (this.previousSibling)\n    this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\nfunction selection_lower() {\n  return this.each(lower);\n}\nfunction selection_append(name) {\n  var create2 = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create2.apply(this, arguments));\n  });\n}\nfunction constantNull() {\n  return null;\n}\nfunction selection_insert(name, before) {\n  var create2 = typeof name === \"function\" ? name : creator(name), select2 = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create2.apply(this, arguments), select2.apply(this, arguments) || null);\n  });\n}\nfunction remove() {\n  var parent = this.parentNode;\n  if (parent)\n    parent.removeChild(this);\n}\nfunction selection_remove() {\n  return this.each(remove);\n}\nfunction selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\nfunction selection_clone(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\nfunction selection_datum(value) {\n  return arguments.length ? this.property(\"__data__\", value) : this.node().__data__;\n}\nfunction contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0)\n      name = t.slice(i + 1), t = t.slice(0, i);\n    return { type: t, name };\n  });\n}\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on)\n      return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i)\n      on.length = i;\n    else\n      delete this.__on;\n  };\n}\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on)\n      for (var j = 0, m = on.length; j < m; ++j) {\n        if ((o = on[j]).type === typename.type && o.name === typename.name) {\n          this.removeEventListener(o.type, o.listener, o.options);\n          this.addEventListener(o.type, o.listener = listener, o.options = options);\n          o.value = value;\n          return;\n        }\n      }\n    this.addEventListener(typename.type, listener, options);\n    o = { type: typename.type, name: typename.name, value, listener, options };\n    if (!on)\n      this.__on = [o];\n    else\n      on.push(o);\n  };\n}\nfunction selection_on(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on)\n      for (var j = 0, m = on.length, o; j < m; ++j) {\n        for (i = 0, o = on[j]; i < n; ++i) {\n          if ((t = typenames[i]).type === o.type && t.name === o.name) {\n            return o.value;\n          }\n        }\n      }\n    return;\n  }\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i)\n    this.each(on(typenames[i], value, options));\n  return this;\n}\nfunction dispatchEvent(node, type, params) {\n  var window2 = defaultView(node), event = window2.CustomEvent;\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window2.document.createEvent(\"Event\");\n    if (params)\n      event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else\n      event.initEvent(type, false, false);\n  }\n  node.dispatchEvent(event);\n}\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\nfunction selection_dispatch(type, params) {\n  return this.each((typeof params === \"function\" ? dispatchFunction : dispatchConstant)(type, params));\n}\nfunction* selection_iterator() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i])\n        yield node;\n    }\n  }\n}\nvar root = [null];\nfunction Selection$1(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\nfunction selection() {\n  return new Selection$1([[document.documentElement]], root);\n}\nfunction selection_selection() {\n  return this;\n}\nSelection$1.prototype = selection.prototype = {\n  constructor: Selection$1,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\nfunction select(selector2) {\n  return typeof selector2 === \"string\" ? new Selection$1([[document.querySelector(selector2)]], [document.documentElement]) : new Selection$1([[selector2]], root);\n}\nfunction sourceEvent(event) {\n  let sourceEvent2;\n  while (sourceEvent2 = event.sourceEvent)\n    event = sourceEvent2;\n  return event;\n}\nfunction pointer(event, node) {\n  event = sourceEvent(event);\n  if (node === void 0)\n    node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\nconst nonpassive = { passive: false };\nconst nonpassivecapture = { capture: true, passive: false };\nfunction nopropagation$1(event) {\n  event.stopImmediatePropagation();\n}\nfunction noevent$1(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\nfunction dragDisable(view) {\n  var root2 = view.document.documentElement, selection2 = select(view).on(\"dragstart.drag\", noevent$1, nonpassivecapture);\n  if (\"onselectstart\" in root2) {\n    selection2.on(\"selectstart.drag\", noevent$1, nonpassivecapture);\n  } else {\n    root2.__noselect = root2.style.MozUserSelect;\n    root2.style.MozUserSelect = \"none\";\n  }\n}\nfunction yesdrag(view, noclick) {\n  var root2 = view.document.documentElement, selection2 = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection2.on(\"click.drag\", noevent$1, nonpassivecapture);\n    setTimeout(function() {\n      selection2.on(\"click.drag\", null);\n    }, 0);\n  }\n  if (\"onselectstart\" in root2) {\n    selection2.on(\"selectstart.drag\", null);\n  } else {\n    root2.style.MozUserSelect = root2.__noselect;\n    delete root2.__noselect;\n  }\n}\nconst constant$2 = (x) => () => x;\nfunction DragEvent(type, {\n  sourceEvent: sourceEvent2,\n  subject,\n  target,\n  identifier,\n  active,\n  x,\n  y,\n  dx,\n  dy,\n  dispatch: dispatch2\n}) {\n  Object.defineProperties(this, {\n    type: { value: type, enumerable: true, configurable: true },\n    sourceEvent: { value: sourceEvent2, enumerable: true, configurable: true },\n    subject: { value: subject, enumerable: true, configurable: true },\n    target: { value: target, enumerable: true, configurable: true },\n    identifier: { value: identifier, enumerable: true, configurable: true },\n    active: { value: active, enumerable: true, configurable: true },\n    x: { value: x, enumerable: true, configurable: true },\n    y: { value: y, enumerable: true, configurable: true },\n    dx: { value: dx, enumerable: true, configurable: true },\n    dy: { value: dy, enumerable: true, configurable: true },\n    _: { value: dispatch2 }\n  });\n}\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\nfunction defaultFilter$1(event) {\n  return !event.ctrlKey && !event.button;\n}\nfunction defaultContainer() {\n  return this.parentNode;\n}\nfunction defaultSubject(event, d) {\n  return d == null ? { x: event.x, y: event.y } : d;\n}\nfunction defaultTouchable$1() {\n  return navigator.maxTouchPoints || \"ontouchstart\" in this;\n}\nfunction drag() {\n  var filter2 = defaultFilter$1, container = defaultContainer, subject = defaultSubject, touchable = defaultTouchable$1, gestures = {}, listeners = dispatch(\"start\", \"drag\", \"end\"), active = 0, mousedownx, mousedowny, mousemoving, touchending, clickDistance2 = 0;\n  function drag2(selection2) {\n    selection2.on(\"mousedown.drag\", mousedowned).filter(touchable).on(\"touchstart.drag\", touchstarted).on(\"touchmove.drag\", touchmoved, nonpassive).on(\"touchend.drag touchcancel.drag\", touchended).style(\"touch-action\", \"none\").style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n  function mousedowned(event, d) {\n    if (touchending || !filter2.call(this, event, d))\n      return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture)\n      return;\n    select(event.view).on(\"mousemove.drag\", mousemoved, nonpassivecapture).on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    dragDisable(event.view);\n    nopropagation$1(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n  function mousemoved(event) {\n    noevent$1(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent$1(event);\n    gestures.mouse(\"end\", event);\n  }\n  function touchstarted(event, d) {\n    if (!filter2.call(this, event, d))\n      return;\n    var touches = event.changedTouches, c = container.call(this, event, d), n = touches.length, i, gesture;\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation$1(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n  function touchmoved(event) {\n    var touches = event.changedTouches, n = touches.length, i, gesture;\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent$1(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n  function touchended(event) {\n    var touches = event.changedTouches, n = touches.length, i, gesture;\n    if (touchending)\n      clearTimeout(touchending);\n    touchending = setTimeout(function() {\n      touchending = null;\n    }, 500);\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation$1(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n  function beforestart(that, container2, event, d, identifier, touch) {\n    var dispatch2 = listeners.copy(), p = pointer(touch || event, container2), dx, dy, s;\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n      sourceEvent: event,\n      target: drag2,\n      identifier,\n      active,\n      x: p[0],\n      y: p[1],\n      dx: 0,\n      dy: 0,\n      dispatch: dispatch2\n    }), d)) == null)\n      return;\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n    return function gesture(type, event2, touch2) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\":\n          gestures[identifier] = gesture, n = active++;\n          break;\n        case \"end\":\n          delete gestures[identifier], --active;\n        case \"drag\":\n          p = pointer(touch2 || event2, container2), n = active;\n          break;\n      }\n      dispatch2.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event2,\n          subject: s,\n          target: drag2,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch: dispatch2\n        }),\n        d\n      );\n    };\n  }\n  drag2.filter = function(_) {\n    return arguments.length ? (filter2 = typeof _ === \"function\" ? _ : constant$2(!!_), drag2) : filter2;\n  };\n  drag2.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant$2(_), drag2) : container;\n  };\n  drag2.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant$2(_), drag2) : subject;\n  };\n  drag2.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant$2(!!_), drag2) : touchable;\n  };\n  drag2.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag2 : value;\n  };\n  drag2.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag2) : Math.sqrt(clickDistance2);\n  };\n  return drag2;\n}\nfunction define(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\nfunction extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition)\n    prototype[key] = definition[key];\n  return prototype;\n}\nfunction Color() {\n}\nvar darker = 0.7;\nvar brighter = 1 / darker;\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\", reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\", reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\", reHex = /^#([0-9a-f]{3,8})$/, reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`), reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`), reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`), reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`), reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`), reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\nvar named = {\n  aliceblue: 15792383,\n  antiquewhite: 16444375,\n  aqua: 65535,\n  aquamarine: 8388564,\n  azure: 15794175,\n  beige: 16119260,\n  bisque: 16770244,\n  black: 0,\n  blanchedalmond: 16772045,\n  blue: 255,\n  blueviolet: 9055202,\n  brown: 10824234,\n  burlywood: 14596231,\n  cadetblue: 6266528,\n  chartreuse: 8388352,\n  chocolate: 13789470,\n  coral: 16744272,\n  cornflowerblue: 6591981,\n  cornsilk: 16775388,\n  crimson: 14423100,\n  cyan: 65535,\n  darkblue: 139,\n  darkcyan: 35723,\n  darkgoldenrod: 12092939,\n  darkgray: 11119017,\n  darkgreen: 25600,\n  darkgrey: 11119017,\n  darkkhaki: 12433259,\n  darkmagenta: 9109643,\n  darkolivegreen: 5597999,\n  darkorange: 16747520,\n  darkorchid: 10040012,\n  darkred: 9109504,\n  darksalmon: 15308410,\n  darkseagreen: 9419919,\n  darkslateblue: 4734347,\n  darkslategray: 3100495,\n  darkslategrey: 3100495,\n  darkturquoise: 52945,\n  darkviolet: 9699539,\n  deeppink: 16716947,\n  deepskyblue: 49151,\n  dimgray: 6908265,\n  dimgrey: 6908265,\n  dodgerblue: 2003199,\n  firebrick: 11674146,\n  floralwhite: 16775920,\n  forestgreen: 2263842,\n  fuchsia: 16711935,\n  gainsboro: 14474460,\n  ghostwhite: 16316671,\n  gold: 16766720,\n  goldenrod: 14329120,\n  gray: 8421504,\n  green: 32768,\n  greenyellow: 11403055,\n  grey: 8421504,\n  honeydew: 15794160,\n  hotpink: 16738740,\n  indianred: 13458524,\n  indigo: 4915330,\n  ivory: 16777200,\n  khaki: 15787660,\n  lavender: 15132410,\n  lavenderblush: 16773365,\n  lawngreen: 8190976,\n  lemonchiffon: 16775885,\n  lightblue: 11393254,\n  lightcoral: 15761536,\n  lightcyan: 14745599,\n  lightgoldenrodyellow: 16448210,\n  lightgray: 13882323,\n  lightgreen: 9498256,\n  lightgrey: 13882323,\n  lightpink: 16758465,\n  lightsalmon: 16752762,\n  lightseagreen: 2142890,\n  lightskyblue: 8900346,\n  lightslategray: 7833753,\n  lightslategrey: 7833753,\n  lightsteelblue: 11584734,\n  lightyellow: 16777184,\n  lime: 65280,\n  limegreen: 3329330,\n  linen: 16445670,\n  magenta: 16711935,\n  maroon: 8388608,\n  mediumaquamarine: 6737322,\n  mediumblue: 205,\n  mediumorchid: 12211667,\n  mediumpurple: 9662683,\n  mediumseagreen: 3978097,\n  mediumslateblue: 8087790,\n  mediumspringgreen: 64154,\n  mediumturquoise: 4772300,\n  mediumvioletred: 13047173,\n  midnightblue: 1644912,\n  mintcream: 16121850,\n  mistyrose: 16770273,\n  moccasin: 16770229,\n  navajowhite: 16768685,\n  navy: 128,\n  oldlace: 16643558,\n  olive: 8421376,\n  olivedrab: 7048739,\n  orange: 16753920,\n  orangered: 16729344,\n  orchid: 14315734,\n  palegoldenrod: 15657130,\n  palegreen: 10025880,\n  paleturquoise: 11529966,\n  palevioletred: 14381203,\n  papayawhip: 16773077,\n  peachpuff: 16767673,\n  peru: 13468991,\n  pink: 16761035,\n  plum: 14524637,\n  powderblue: 11591910,\n  purple: 8388736,\n  rebeccapurple: 6697881,\n  red: 16711680,\n  rosybrown: 12357519,\n  royalblue: 4286945,\n  saddlebrown: 9127187,\n  salmon: 16416882,\n  sandybrown: 16032864,\n  seagreen: 3050327,\n  seashell: 16774638,\n  sienna: 10506797,\n  silver: 12632256,\n  skyblue: 8900331,\n  slateblue: 6970061,\n  slategray: 7372944,\n  slategrey: 7372944,\n  snow: 16775930,\n  springgreen: 65407,\n  steelblue: 4620980,\n  tan: 13808780,\n  teal: 32896,\n  thistle: 14204888,\n  tomato: 16737095,\n  turquoise: 4251856,\n  violet: 15631086,\n  wheat: 16113331,\n  white: 16777215,\n  whitesmoke: 16119285,\n  yellow: 16776960,\n  yellowgreen: 10145074\n};\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor(), this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\nfunction color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) : l === 3 ? new Rgb(m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, (m & 15) << 4 | m & 15, 1) : l === 8 ? rgba(m >> 24 & 255, m >> 16 & 255, m >> 8 & 255, (m & 255) / 255) : l === 4 ? rgba(m >> 12 & 15 | m >> 8 & 240, m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, ((m & 15) << 4 | m & 15) / 255) : null) : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) : named.hasOwnProperty(format) ? rgbn(named[format]) : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0) : null;\n}\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 255, n >> 8 & 255, n & 255, 1);\n}\nfunction rgba(r, g, b, a) {\n  if (a <= 0)\n    r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\nfunction rgbConvert(o) {\n  if (!(o instanceof Color))\n    o = color(o);\n  if (!o)\n    return new Rgb();\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\nfunction rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\nfunction Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return -0.5 <= this.r && this.r < 255.5 && (-0.5 <= this.g && this.g < 255.5) && (-0.5 <= this.b && this.b < 255.5) && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex,\n  // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\nfunction hsla(h2, s, l, a) {\n  if (a <= 0)\n    h2 = s = l = NaN;\n  else if (l <= 0 || l >= 1)\n    h2 = s = NaN;\n  else if (s <= 0)\n    h2 = NaN;\n  return new Hsl(h2, s, l, a);\n}\nfunction hslConvert(o) {\n  if (o instanceof Hsl)\n    return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color))\n    o = color(o);\n  if (!o)\n    return new Hsl();\n  if (o instanceof Hsl)\n    return o;\n  o = o.rgb();\n  var r = o.r / 255, g = o.g / 255, b = o.b / 255, min = Math.min(r, g, b), max = Math.max(r, g, b), h2 = NaN, s = max - min, l = (max + min) / 2;\n  if (s) {\n    if (r === max)\n      h2 = (g - b) / s + (g < b) * 6;\n    else if (g === max)\n      h2 = (b - r) / s + 2;\n    else\n      h2 = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h2 *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h2;\n  }\n  return new Hsl(h2, s, l, o.opacity);\n}\nfunction hsl(h2, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h2) : new Hsl(h2, s, l, opacity == null ? 1 : opacity);\n}\nfunction Hsl(h2, s, l, opacity) {\n  this.h = +h2;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h2 = this.h % 360 + (this.h < 0) * 360, s = isNaN(h2) || isNaN(this.s) ? 0 : this.s, l = this.l, m2 = l + (l < 0.5 ? l : 1 - l) * s, m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h2 >= 240 ? h2 - 240 : h2 + 120, m1, m2),\n      hsl2rgb(h2, m1, m2),\n      hsl2rgb(h2 < 120 ? h2 + 240 : h2 - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && (0 <= this.l && this.l <= 1) && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\nfunction hsl2rgb(h2, m1, m2) {\n  return (h2 < 60 ? m1 + (m2 - m1) * h2 / 60 : h2 < 180 ? m2 : h2 < 240 ? m1 + (m2 - m1) * (240 - h2) / 60 : m1) * 255;\n}\nconst constant$1 = (x) => () => x;\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\nfunction gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant$1(isNaN(a) ? b : a);\n  };\n}\nfunction nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant$1(isNaN(a) ? b : a);\n}\nconst interpolateRgb = function rgbGamma(y) {\n  var color2 = gamma(y);\n  function rgb$1(start2, end) {\n    var r = color2((start2 = rgb(start2)).r, (end = rgb(end)).r), g = color2(start2.g, end.g), b = color2(start2.b, end.b), opacity = nogamma(start2.opacity, end.opacity);\n    return function(t) {\n      start2.r = r(t);\n      start2.g = g(t);\n      start2.b = b(t);\n      start2.opacity = opacity(t);\n      return start2 + \"\";\n    };\n  }\n  rgb$1.gamma = rgbGamma;\n  return rgb$1;\n}(1);\nfunction numberArray(a, b) {\n  if (!b)\n    b = [];\n  var n = a ? Math.min(b.length, a.length) : 0, c = b.slice(), i;\n  return function(t) {\n    for (i = 0; i < n; ++i)\n      c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\nfunction isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\nfunction genericArray(a, b) {\n  var nb = b ? b.length : 0, na = a ? Math.min(nb, a.length) : 0, x = new Array(na), c = new Array(nb), i;\n  for (i = 0; i < na; ++i)\n    x[i] = interpolate$1(a[i], b[i]);\n  for (; i < nb; ++i)\n    c[i] = b[i];\n  return function(t) {\n    for (i = 0; i < na; ++i)\n      c[i] = x[i](t);\n    return c;\n  };\n}\nfunction date(a, b) {\n  var d = /* @__PURE__ */ new Date();\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\nfunction interpolateNumber(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\nfunction object(a, b) {\n  var i = {}, c = {}, k;\n  if (a === null || typeof a !== \"object\")\n    a = {};\n  if (b === null || typeof b !== \"object\")\n    b = {};\n  for (k in b) {\n    if (k in a) {\n      i[k] = interpolate$1(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n  return function(t) {\n    for (k in i)\n      c[k] = i[k](t);\n    return c;\n  };\n}\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g, reB = new RegExp(reA.source, \"g\");\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\nfunction interpolateString(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, am, bm, bs, i = -1, s = [], q = [];\n  a = a + \"\", b = b + \"\";\n  while ((am = reA.exec(a)) && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) {\n      bs = b.slice(bi, bs);\n      if (s[i])\n        s[i] += bs;\n      else\n        s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) {\n      if (s[i])\n        s[i] += bm;\n      else\n        s[++i] = bm;\n    } else {\n      s[++i] = null;\n      q.push({ i, x: interpolateNumber(am, bm) });\n    }\n    bi = reB.lastIndex;\n  }\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i])\n      s[i] += bs;\n    else\n      s[++i] = bs;\n  }\n  return s.length < 2 ? q[0] ? one(q[0].x) : zero(b) : (b = q.length, function(t) {\n    for (var i2 = 0, o; i2 < b; ++i2)\n      s[(o = q[i2]).i] = o.x(t);\n    return s.join(\"\");\n  });\n}\nfunction interpolate$1(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant$1(b) : (t === \"number\" ? interpolateNumber : t === \"string\" ? (c = color(b)) ? (b = c, interpolateRgb) : interpolateString : b instanceof color ? interpolateRgb : b instanceof Date ? date : isNumberArray(b) ? numberArray : Array.isArray(b) ? genericArray : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object : interpolateNumber)(a, b);\n}\nvar degrees = 180 / Math.PI;\nvar identity$1 = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\nfunction decompose(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b))\n    a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d)\n    c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d))\n    c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c)\n    a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX,\n    scaleY\n  };\n}\nvar svgNode;\nfunction parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity$1 : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\nfunction parseSvg(value) {\n  if (value == null)\n    return identity$1;\n  if (!svgNode)\n    svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate()))\n    return identity$1;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({ i: i - 4, x: interpolateNumber(xa, xb) }, { i: i - 2, x: interpolateNumber(ya, yb) });\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180)\n        b += 360;\n      else if (b - a > 180)\n        a += 360;\n      q.push({ i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: interpolateNumber(a, b) });\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({ i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: interpolateNumber(a, b) });\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({ i: i - 4, x: interpolateNumber(xa, xb) }, { i: i - 2, x: interpolateNumber(ya, yb) });\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n  return function(a, b) {\n    var s = [], q = [];\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null;\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n)\n        s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\nvar interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nvar interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\nvar epsilon2 = 1e-12;\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\nconst interpolateZoom = function zoomRho(rho, rho2, rho4) {\n  function zoom2(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2], ux1 = p1[0], uy1 = p1[1], w1 = p1[2], dx = ux1 - ux0, dy = uy1 - uy0, d2 = dx * dx + dy * dy, i, S;\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      };\n    } else {\n      var d1 = Math.sqrt(d2), b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1), b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1), r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0), r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S, coshr0 = cosh(r0), u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      };\n    }\n    i.duration = S * 1e3 * rho / Math.SQRT2;\n    return i;\n  }\n  zoom2.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n  return zoom2;\n}(Math.SQRT2, 2, 4);\nvar frame = 0, timeout$1 = 0, interval = 0, pokeDelay = 1e3, taskHead, taskTail, clockLast = 0, clockNow = 0, clockSkew = 0, clock = typeof performance === \"object\" && performance.now ? performance : Date, setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) {\n  setTimeout(f, 17);\n};\nfunction now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\nfunction clearNow() {\n  clockNow = 0;\n}\nfunction Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\")\n      throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail)\n        taskTail._next = this;\n      else\n        taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nfunction timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nfunction timerFlush() {\n  now();\n  ++frame;\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0)\n      t._call.call(void 0, e);\n    t = t._next;\n  }\n  --frame;\n}\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout$1 = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\nfunction poke() {\n  var now2 = clock.now(), delay = now2 - clockLast;\n  if (delay > pokeDelay)\n    clockSkew -= delay, clockLast = now2;\n}\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time)\n        time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\nfunction sleep(time) {\n  if (frame)\n    return;\n  if (timeout$1)\n    timeout$1 = clearTimeout(timeout$1);\n  var delay = time - clockNow;\n  if (delay > 24) {\n    if (time < Infinity)\n      timeout$1 = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval)\n      interval = clearInterval(interval);\n  } else {\n    if (!interval)\n      clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\nfunction timeout(callback, delay, time) {\n  var t = new Timer();\n  delay = delay == null ? 0 : +delay;\n  t.restart((elapsed) => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\nvar CREATED = 0;\nvar SCHEDULED = 1;\nvar STARTING = 2;\nvar STARTED = 3;\nvar RUNNING = 4;\nvar ENDING = 5;\nvar ENDED = 6;\nfunction schedule(node, name, id2, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules)\n    node.__transition = {};\n  else if (id2 in schedules)\n    return;\n  create(node, id2, {\n    name,\n    index,\n    // For context during callback.\n    group,\n    // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\nfunction init(node, id2) {\n  var schedule2 = get(node, id2);\n  if (schedule2.state > CREATED)\n    throw new Error(\"too late; already scheduled\");\n  return schedule2;\n}\nfunction set(node, id2) {\n  var schedule2 = get(node, id2);\n  if (schedule2.state > STARTED)\n    throw new Error(\"too late; already running\");\n  return schedule2;\n}\nfunction get(node, id2) {\n  var schedule2 = node.__transition;\n  if (!schedule2 || !(schedule2 = schedule2[id2]))\n    throw new Error(\"transition not found\");\n  return schedule2;\n}\nfunction create(node, id2, self) {\n  var schedules = node.__transition, tween;\n  schedules[id2] = self;\n  self.timer = timer(schedule2, 0, self.time);\n  function schedule2(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start2, self.delay, self.time);\n    if (self.delay <= elapsed)\n      start2(elapsed - self.delay);\n  }\n  function start2(elapsed) {\n    var i, j, n, o;\n    if (self.state !== SCHEDULED)\n      return stop();\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name)\n        continue;\n      if (o.state === STARTED)\n        return timeout(start2);\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      } else if (+i < id2) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING)\n      return;\n    self.state = STARTED;\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1), i = -1, n = tween.length;\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id2];\n    for (var i in schedules)\n      return;\n    delete node.__transition;\n  }\n}\nfunction interrupt(node, name) {\n  var schedules = node.__transition, schedule2, active, empty2 = true, i;\n  if (!schedules)\n    return;\n  name = name == null ? null : name + \"\";\n  for (i in schedules) {\n    if ((schedule2 = schedules[i]).name !== name) {\n      empty2 = false;\n      continue;\n    }\n    active = schedule2.state > STARTING && schedule2.state < ENDING;\n    schedule2.state = ENDED;\n    schedule2.timer.stop();\n    schedule2.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule2.index, schedule2.group);\n    delete schedules[i];\n  }\n  if (empty2)\n    delete node.__transition;\n}\nfunction selection_interrupt(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\nfunction tweenRemove(id2, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule2 = set(this, id2), tween = schedule2.tween;\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n    schedule2.tween = tween1;\n  };\n}\nfunction tweenFunction(id2, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\")\n    throw new Error();\n  return function() {\n    var schedule2 = set(this, id2), tween = schedule2.tween;\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = { name, value }, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n)\n        tween1.push(t);\n    }\n    schedule2.tween = tween1;\n  };\n}\nfunction transition_tween(name, value) {\n  var id2 = this._id;\n  name += \"\";\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id2).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n  return this.each((value == null ? tweenRemove : tweenFunction)(id2, name, value));\n}\nfunction tweenValue(transition, name, value) {\n  var id2 = transition._id;\n  transition.each(function() {\n    var schedule2 = set(this, id2);\n    (schedule2.value || (schedule2.value = {}))[name] = value.apply(this, arguments);\n  });\n  return function(node) {\n    return get(node, id2).value[name];\n  };\n}\nfunction interpolate(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber : b instanceof color ? interpolateRgb : (c = color(b)) ? (b = c, interpolateRgb) : interpolateString)(a, b);\n}\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\nfunction attrConstant(name, interpolate2, value1) {\n  var string00, string1 = value1 + \"\", interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate2(string00 = string0, value1);\n  };\n}\nfunction attrConstantNS(fullname, interpolate2, value1) {\n  var string00, string1 = value1 + \"\", interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate2(string00 = string0, value1);\n  };\n}\nfunction attrFunction(name, interpolate2, value) {\n  var string00, string10, interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null)\n      return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate2(string00 = string0, value1));\n  };\n}\nfunction attrFunctionNS(fullname, interpolate2, value) {\n  var string00, string10, interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null)\n      return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate2(string00 = string0, value1));\n  };\n}\nfunction transition_attr(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransformSvg : interpolate;\n  return this.attrTween(name, typeof value === \"function\" ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value)) : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname) : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0)\n      t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0)\n      t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\nfunction transition_attrTween(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2)\n    return (key = this.tween(key)) && key._value;\n  if (value == null)\n    return this.tween(key, null);\n  if (typeof value !== \"function\")\n    throw new Error();\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\nfunction delayFunction(id2, value) {\n  return function() {\n    init(this, id2).delay = +value.apply(this, arguments);\n  };\n}\nfunction delayConstant(id2, value) {\n  return value = +value, function() {\n    init(this, id2).delay = value;\n  };\n}\nfunction transition_delay(value) {\n  var id2 = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? delayFunction : delayConstant)(id2, value)) : get(this.node(), id2).delay;\n}\nfunction durationFunction(id2, value) {\n  return function() {\n    set(this, id2).duration = +value.apply(this, arguments);\n  };\n}\nfunction durationConstant(id2, value) {\n  return value = +value, function() {\n    set(this, id2).duration = value;\n  };\n}\nfunction transition_duration(value) {\n  var id2 = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? durationFunction : durationConstant)(id2, value)) : get(this.node(), id2).duration;\n}\nfunction easeConstant(id2, value) {\n  if (typeof value !== \"function\")\n    throw new Error();\n  return function() {\n    set(this, id2).ease = value;\n  };\n}\nfunction transition_ease(value) {\n  var id2 = this._id;\n  return arguments.length ? this.each(easeConstant(id2, value)) : get(this.node(), id2).ease;\n}\nfunction easeVarying(id2, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\")\n      throw new Error();\n    set(this, id2).ease = v;\n  };\n}\nfunction transition_easeVarying(value) {\n  if (typeof value !== \"function\")\n    throw new Error();\n  return this.each(easeVarying(this._id, value));\n}\nfunction transition_filter(match) {\n  if (typeof match !== \"function\")\n    match = matcher(match);\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\nfunction transition_merge(transition) {\n  if (transition._id !== this._id)\n    throw new Error();\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n  return new Transition(merges, this._parents, this._name, this._id);\n}\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0)\n      t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\nfunction onFunction(id2, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule2 = sit(this, id2), on = schedule2.on;\n    if (on !== on0)\n      (on1 = (on0 = on).copy()).on(name, listener);\n    schedule2.on = on1;\n  };\n}\nfunction transition_on(name, listener) {\n  var id2 = this._id;\n  return arguments.length < 2 ? get(this.node(), id2).on.on(name) : this.each(onFunction(id2, name, listener));\n}\nfunction removeFunction(id2) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition)\n      if (+i !== id2)\n        return;\n    if (parent)\n      parent.removeChild(this);\n  };\n}\nfunction transition_remove() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\nfunction transition_select(select2) {\n  var name = this._name, id2 = this._id;\n  if (typeof select2 !== \"function\")\n    select2 = selector(select2);\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select2.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node)\n          subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id2, i, subgroup, get(node, id2));\n      }\n    }\n  }\n  return new Transition(subgroups, this._parents, name, id2);\n}\nfunction transition_selectAll(select2) {\n  var name = this._name, id2 = this._id;\n  if (typeof select2 !== \"function\")\n    select2 = selectorAll(select2);\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children2 = select2.call(node, node.__data__, i, group), child, inherit2 = get(node, id2), k = 0, l = children2.length; k < l; ++k) {\n          if (child = children2[k]) {\n            schedule(child, name, id2, k, children2, inherit2);\n          }\n        }\n        subgroups.push(children2);\n        parents.push(node);\n      }\n    }\n  }\n  return new Transition(subgroups, parents, name, id2);\n}\nvar Selection = selection.prototype.constructor;\nfunction transition_selection() {\n  return new Selection(this._groups, this._parents);\n}\nfunction styleNull(name, interpolate2) {\n  var string00, string10, interpolate0;\n  return function() {\n    var string0 = styleValue(this, name), string1 = (this.style.removeProperty(name), styleValue(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate2(string00 = string0, string10 = string1);\n  };\n}\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\nfunction styleConstant(name, interpolate2, value1) {\n  var string00, string1 = value1 + \"\", interpolate0;\n  return function() {\n    var string0 = styleValue(this, name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate2(string00 = string0, value1);\n  };\n}\nfunction styleFunction(name, interpolate2, value) {\n  var string00, string10, interpolate0;\n  return function() {\n    var string0 = styleValue(this, name), value1 = value(this), string1 = value1 + \"\";\n    if (value1 == null)\n      string1 = value1 = (this.style.removeProperty(name), styleValue(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate2(string00 = string0, value1));\n  };\n}\nfunction styleMaybeRemove(id2, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove2;\n  return function() {\n    var schedule2 = set(this, id2), on = schedule2.on, listener = schedule2.value[key] == null ? remove2 || (remove2 = styleRemove(name)) : void 0;\n    if (on !== on0 || listener0 !== listener)\n      (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n    schedule2.on = on1;\n  };\n}\nfunction transition_style(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransformCss : interpolate;\n  return value == null ? this.styleTween(name, styleNull(name, i)).on(\"end.style.\" + name, styleRemove(name)) : typeof value === \"function\" ? this.styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant(name, i, value), priority).on(\"end.style.\" + name, null);\n}\nfunction styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0)\n      t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\nfunction transition_styleTween(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2)\n    return (key = this.tween(key)) && key._value;\n  if (value == null)\n    return this.tween(key, null);\n  if (typeof value !== \"function\")\n    throw new Error();\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\nfunction transition_text(value) {\n  return this.tween(\"text\", typeof value === \"function\" ? textFunction(tweenValue(this, \"text\", value)) : textConstant(value == null ? \"\" : value + \"\"));\n}\nfunction textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0)\n      t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\nfunction transition_textTween(value) {\n  var key = \"text\";\n  if (arguments.length < 1)\n    return (key = this.tween(key)) && key._value;\n  if (value == null)\n    return this.tween(key, null);\n  if (typeof value !== \"function\")\n    throw new Error();\n  return this.tween(key, textTween(value));\n}\nfunction transition_transition() {\n  var name = this._name, id0 = this._id, id1 = newId();\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit2 = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit2.time + inherit2.delay + inherit2.duration,\n          delay: 0,\n          duration: inherit2.duration,\n          ease: inherit2.ease\n        });\n      }\n    }\n  }\n  return new Transition(groups, this._parents, name, id1);\n}\nfunction transition_end() {\n  var on0, on1, that = this, id2 = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = { value: reject }, end = { value: function() {\n      if (--size === 0)\n        resolve();\n    } };\n    that.each(function() {\n      var schedule2 = set(this, id2), on = schedule2.on;\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n      schedule2.on = on1;\n    });\n    if (size === 0)\n      resolve();\n  });\n}\nvar id = 0;\nfunction Transition(groups, parents, name, id2) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id2;\n}\nfunction newId() {\n  return ++id;\n}\nvar selection_prototype = selection.prototype;\nTransition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\nfunction cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\nvar defaultTiming = {\n  time: null,\n  // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: cubicInOut\n};\nfunction inherit(node, id2) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id2])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id2} not found`);\n    }\n  }\n  return timing;\n}\nfunction selection_transition(name) {\n  var id2, timing;\n  if (name instanceof Transition) {\n    id2 = name._id, name = name._name;\n  } else {\n    id2 = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id2, i, group, timing || inherit(node, id2));\n      }\n    }\n  }\n  return new Transition(groups, this._parents, name, id2);\n}\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\nconst constant = (x) => () => x;\nfunction ZoomEvent(type, {\n  sourceEvent: sourceEvent2,\n  target,\n  transform,\n  dispatch: dispatch2\n}) {\n  Object.defineProperties(this, {\n    type: { value: type, enumerable: true, configurable: true },\n    sourceEvent: { value: sourceEvent2, enumerable: true, configurable: true },\n    target: { value: target, enumerable: true, configurable: true },\n    transform: { value: transform, enumerable: true, configurable: true },\n    _: { value: dispatch2 }\n  });\n}\nfunction Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\nvar identity = new Transform(1, 0, 0);\nTransform.prototype;\nfunction nopropagation(event) {\n  event.stopImmediatePropagation();\n}\nfunction noevent(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === \"wheel\") && !event.button;\n}\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 2e-3) * (event.ctrlKey ? 10 : 1);\n}\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || \"ontouchstart\" in this;\n}\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0], dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0], dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1], dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\nfunction zoom() {\n  var filter2 = defaultFilter, extent = defaultExtent, constrain = defaultConstrain, wheelDelta2 = defaultWheelDelta, touchable = defaultTouchable, scaleExtent = [0, Infinity], translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]], duration = 250, interpolate2 = interpolateZoom, listeners = dispatch(\"start\", \"zoom\", \"end\"), touchstarting, touchfirst, touchending, touchDelay = 500, wheelDelay = 150, clickDistance2 = 0, tapDistance = 10;\n  function zoom2(selection2) {\n    selection2.property(\"__zoom\", defaultTransform).on(\"wheel.zoom\", wheeled, { passive: false }).on(\"mousedown.zoom\", mousedowned).on(\"dblclick.zoom\", dblclicked).filter(touchable).on(\"touchstart.zoom\", touchstarted).on(\"touchmove.zoom\", touchmoved).on(\"touchend.zoom touchcancel.zoom\", touchended).style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n  zoom2.transform = function(collection, transform, point, event) {\n    var selection2 = collection.selection ? collection.selection() : collection;\n    selection2.property(\"__zoom\", defaultTransform);\n    if (collection !== selection2) {\n      schedule2(collection, transform, point, event);\n    } else {\n      selection2.interrupt().each(function() {\n        gesture(this, arguments).event(event).start().zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform).end();\n      });\n    }\n  };\n  zoom2.scaleBy = function(selection2, k, p, event) {\n    zoom2.scaleTo(selection2, function() {\n      var k0 = this.__zoom.k, k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n  zoom2.scaleTo = function(selection2, k, p, event) {\n    zoom2.transform(selection2, function() {\n      var e = extent.apply(this, arguments), t0 = this.__zoom, p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p, p1 = t0.invert(p0), k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n  zoom2.translateBy = function(selection2, x, y, event) {\n    zoom2.transform(selection2, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n  zoom2.translateTo = function(selection2, x, y, p, event) {\n    zoom2.transform(selection2, function() {\n      var e = extent.apply(this, arguments), t = this.__zoom, p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n  function centroid(extent2) {\n    return [(+extent2[0][0] + +extent2[1][0]) / 2, (+extent2[0][1] + +extent2[1][1]) / 2];\n  }\n  function schedule2(transition, transform, point, event) {\n    transition.on(\"start.zoom\", function() {\n      gesture(this, arguments).event(event).start();\n    }).on(\"interrupt.zoom end.zoom\", function() {\n      gesture(this, arguments).event(event).end();\n    }).tween(\"zoom\", function() {\n      var that = this, args = arguments, g = gesture(that, args).event(event), e = extent.apply(that, args), p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point, w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]), a = that.__zoom, b = typeof transform === \"function\" ? transform.apply(that, args) : transform, i = interpolate2(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n      return function(t) {\n        if (t === 1)\n          t = b;\n        else {\n          var l = i(t), k = w / l[2];\n          t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k);\n        }\n        g.zoom(null, t);\n      };\n    });\n  }\n  function gesture(that, args, clean) {\n    return !clean && that.__zooming || new Gesture(that, args);\n  }\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n  Gesture.prototype = {\n    event: function(event) {\n      if (event)\n        this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\")\n        this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\")\n        this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\")\n        this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom2,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n  function wheeled(event, ...args) {\n    if (!filter2.apply(this, arguments))\n      return;\n    var g = gesture(this, args).event(event), t = this.__zoom, k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta2.apply(this, arguments)))), p = pointer(event);\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    } else if (t.k === k)\n      return;\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n  function mousedowned(event, ...args) {\n    if (touchending || !filter2.apply(this, arguments))\n      return;\n    var currentTarget = event.currentTarget, g = gesture(this, args, true).event(event), v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true), p = pointer(event, currentTarget), x0 = event.clientX, y0 = event.clientY;\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n    function mousemoved(event2) {\n      noevent(event2);\n      if (!g.moved) {\n        var dx = event2.clientX - x0, dy = event2.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event2).zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event2, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n    function mouseupped(event2) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      yesdrag(event2.view, g.moved);\n      noevent(event2);\n      g.event(event2).end();\n    }\n  }\n  function dblclicked(event, ...args) {\n    if (!filter2.apply(this, arguments))\n      return;\n    var t0 = this.__zoom, p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this), p1 = t0.invert(p0), k1 = t0.k * (event.shiftKey ? 0.5 : 2), t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n    noevent(event);\n    if (duration > 0)\n      select(this).transition().duration(duration).call(schedule2, t1, p0, event);\n    else\n      select(this).call(zoom2.transform, t1, p0, event);\n  }\n  function touchstarted(event, ...args) {\n    if (!filter2.apply(this, arguments))\n      return;\n    var touches = event.touches, n = touches.length, g = gesture(this, args, event.changedTouches.length === n).event(event), started, i, t, p;\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0)\n        g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2])\n        g.touch1 = p, g.taps = 0;\n    }\n    if (touchstarting)\n      touchstarting = clearTimeout(touchstarting);\n    if (started) {\n      if (g.taps < 2)\n        touchfirst = p[0], touchstarting = setTimeout(function() {\n          touchstarting = null;\n        }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n  function touchmoved(event, ...args) {\n    if (!this.__zooming)\n      return;\n    var g = gesture(this, args).event(event), touches = event.changedTouches, n = touches.length, i, t, p, l;\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier)\n        g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier)\n        g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1], p1 = g.touch1[0], l1 = g.touch1[1], dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp, dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    } else if (g.touch0)\n      p = g.touch0[0], l = g.touch0[1];\n    else\n      return;\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n  function touchended(event, ...args) {\n    if (!this.__zooming)\n      return;\n    var g = gesture(this, args).event(event), touches = event.changedTouches, n = touches.length, i, t;\n    nopropagation(event);\n    if (touchending)\n      clearTimeout(touchending);\n    touchending = setTimeout(function() {\n      touchending = null;\n    }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier)\n        delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier)\n        delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0)\n      g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0)\n      g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p)\n            p.apply(this, arguments);\n        }\n      }\n    }\n  }\n  zoom2.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta2 = typeof _ === \"function\" ? _ : constant(+_), zoom2) : wheelDelta2;\n  };\n  zoom2.filter = function(_) {\n    return arguments.length ? (filter2 = typeof _ === \"function\" ? _ : constant(!!_), zoom2) : filter2;\n  };\n  zoom2.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom2) : touchable;\n  };\n  zoom2.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom2) : extent;\n  };\n  zoom2.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom2) : [scaleExtent[0], scaleExtent[1]];\n  };\n  zoom2.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom2) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n  zoom2.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom2) : constrain;\n  };\n  zoom2.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom2) : duration;\n  };\n  zoom2.interpolate = function(_) {\n    return arguments.length ? (interpolate2 = _, zoom2) : interpolate2;\n  };\n  zoom2.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom2 : value;\n  };\n  zoom2.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom2) : Math.sqrt(clickDistance2);\n  };\n  zoom2.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom2) : tapDistance;\n  };\n  return zoom2;\n}\nvar Position = /* @__PURE__ */ ((Position2) => {\n  Position2[\"Left\"] = \"left\";\n  Position2[\"Top\"] = \"top\";\n  Position2[\"Right\"] = \"right\";\n  Position2[\"Bottom\"] = \"bottom\";\n  return Position2;\n})(Position || {});\nvar SelectionMode = /* @__PURE__ */ ((SelectionMode2) => {\n  SelectionMode2[\"Partial\"] = \"partial\";\n  SelectionMode2[\"Full\"] = \"full\";\n  return SelectionMode2;\n})(SelectionMode || {});\nvar ConnectionLineType = /* @__PURE__ */ ((ConnectionLineType2) => {\n  ConnectionLineType2[\"Bezier\"] = \"default\";\n  ConnectionLineType2[\"SimpleBezier\"] = \"simple-bezier\";\n  ConnectionLineType2[\"Straight\"] = \"straight\";\n  ConnectionLineType2[\"Step\"] = \"step\";\n  ConnectionLineType2[\"SmoothStep\"] = \"smoothstep\";\n  return ConnectionLineType2;\n})(ConnectionLineType || {});\nvar ConnectionMode = /* @__PURE__ */ ((ConnectionMode2) => {\n  ConnectionMode2[\"Strict\"] = \"strict\";\n  ConnectionMode2[\"Loose\"] = \"loose\";\n  return ConnectionMode2;\n})(ConnectionMode || {});\nvar MarkerType = /* @__PURE__ */ ((MarkerType2) => {\n  MarkerType2[\"Arrow\"] = \"arrow\";\n  MarkerType2[\"ArrowClosed\"] = \"arrowclosed\";\n  return MarkerType2;\n})(MarkerType || {});\nvar PanOnScrollMode = /* @__PURE__ */ ((PanOnScrollMode2) => {\n  PanOnScrollMode2[\"Free\"] = \"free\";\n  PanOnScrollMode2[\"Vertical\"] = \"vertical\";\n  PanOnScrollMode2[\"Horizontal\"] = \"horizontal\";\n  return PanOnScrollMode2;\n})(PanOnScrollMode || {});\nvar PanelPosition = /* @__PURE__ */ ((PanelPosition2) => {\n  PanelPosition2[\"TopLeft\"] = \"top-left\";\n  PanelPosition2[\"TopCenter\"] = \"top-center\";\n  PanelPosition2[\"TopRight\"] = \"top-right\";\n  PanelPosition2[\"BottomLeft\"] = \"bottom-left\";\n  PanelPosition2[\"BottomCenter\"] = \"bottom-center\";\n  PanelPosition2[\"BottomRight\"] = \"bottom-right\";\n  return PanelPosition2;\n})(PanelPosition || {});\nconst inputTags = [\"INPUT\", \"SELECT\", \"TEXTAREA\"];\nconst defaultDoc = typeof document !== \"undefined\" ? document : null;\nfunction isInputDOMNode(event) {\n  var _a, _b;\n  const target = ((_b = (_a = event.composedPath) == null ? void 0 : _a.call(event)) == null ? void 0 : _b[0]) || event.target;\n  const hasAttribute = typeof (target == null ? void 0 : target.hasAttribute) === \"function\" ? target.hasAttribute(\"contenteditable\") : false;\n  const closest = typeof (target == null ? void 0 : target.closest) === \"function\" ? target.closest(\".nokey\") : null;\n  return inputTags.includes(target == null ? void 0 : target.nodeName) || hasAttribute || !!closest;\n}\nfunction wasModifierPressed(event) {\n  return event.ctrlKey || event.metaKey || event.shiftKey || event.altKey;\n}\nfunction isKeyMatch(pressedKey, keyToMatch, pressedKeys, isKeyUp) {\n  const keyCombination = keyToMatch.replace(\"+\", \"\\n\").replace(\"\\n\\n\", \"\\n+\").split(\"\\n\").map((k) => k.trim().toLowerCase());\n  if (keyCombination.length === 1) {\n    return pressedKey.toLowerCase() === keyToMatch.toLowerCase();\n  }\n  if (!isKeyUp) {\n    pressedKeys.add(pressedKey.toLowerCase());\n  }\n  const isMatch = keyCombination.every(\n    (key, index) => pressedKeys.has(key) && Array.from(pressedKeys.values())[index] === keyCombination[index]\n  );\n  if (isKeyUp) {\n    pressedKeys.delete(pressedKey.toLowerCase());\n  }\n  return isMatch;\n}\nfunction createKeyPredicate(keyFilter, pressedKeys) {\n  return (event) => {\n    if (!event.code && !event.key) {\n      return false;\n    }\n    const keyOrCode = useKeyOrCode(event.code, keyFilter);\n    if (Array.isArray(keyFilter)) {\n      return keyFilter.some((key) => isKeyMatch(event[keyOrCode], key, pressedKeys, event.type === \"keyup\"));\n    }\n    return isKeyMatch(event[keyOrCode], keyFilter, pressedKeys, event.type === \"keyup\");\n  };\n}\nfunction useKeyOrCode(code, keysToWatch) {\n  return keysToWatch.includes(code) ? \"code\" : \"key\";\n}\nfunction useKeyPress(keyFilter, options) {\n  const target = computed(() => toValue$1(options == null ? void 0 : options.target) ?? defaultDoc);\n  const isPressed = shallowRef(toValue$1(keyFilter) === true);\n  let modifierPressed = false;\n  const pressedKeys = /* @__PURE__ */ new Set();\n  let currentFilter = createKeyFilterFn(toValue$1(keyFilter));\n  watch(\n    () => toValue$1(keyFilter),\n    (nextKeyFilter, previousKeyFilter) => {\n      if (typeof previousKeyFilter === \"boolean\" && typeof nextKeyFilter !== \"boolean\") {\n        reset();\n      }\n      currentFilter = createKeyFilterFn(nextKeyFilter);\n    },\n    {\n      immediate: true\n    }\n  );\n  useEventListener([\"blur\", \"contextmenu\"], reset);\n  onKeyStroke(\n    (...args) => currentFilter(...args),\n    (e) => {\n      var _a, _b;\n      const actInsideInputWithModifier = toValue$1(options == null ? void 0 : options.actInsideInputWithModifier) ?? true;\n      const preventDefault = toValue$1(options == null ? void 0 : options.preventDefault) ?? false;\n      modifierPressed = wasModifierPressed(e);\n      const preventAction = (!modifierPressed || modifierPressed && !actInsideInputWithModifier) && isInputDOMNode(e);\n      if (preventAction) {\n        return;\n      }\n      const target2 = ((_b = (_a = e.composedPath) == null ? void 0 : _a.call(e)) == null ? void 0 : _b[0]) || e.target;\n      const isInteractiveElement = (target2 == null ? void 0 : target2.nodeName) === \"BUTTON\" || (target2 == null ? void 0 : target2.nodeName) === \"A\";\n      if (!preventDefault && (modifierPressed || !isInteractiveElement)) {\n        e.preventDefault();\n      }\n      isPressed.value = true;\n    },\n    { eventName: \"keydown\", target }\n  );\n  onKeyStroke(\n    (...args) => currentFilter(...args),\n    (e) => {\n      const actInsideInputWithModifier = toValue$1(options == null ? void 0 : options.actInsideInputWithModifier) ?? true;\n      if (isPressed.value) {\n        const preventAction = (!modifierPressed || modifierPressed && !actInsideInputWithModifier) && isInputDOMNode(e);\n        if (preventAction) {\n          return;\n        }\n        modifierPressed = false;\n        isPressed.value = false;\n      }\n    },\n    { eventName: \"keyup\", target }\n  );\n  function reset() {\n    modifierPressed = false;\n    pressedKeys.clear();\n    isPressed.value = toValue$1(keyFilter) === true;\n  }\n  function createKeyFilterFn(keyFilter2) {\n    if (keyFilter2 === null) {\n      reset();\n      return () => false;\n    }\n    if (typeof keyFilter2 === \"boolean\") {\n      reset();\n      isPressed.value = keyFilter2;\n      return () => false;\n    }\n    if (Array.isArray(keyFilter2) || typeof keyFilter2 === \"string\") {\n      return createKeyPredicate(keyFilter2, pressedKeys);\n    }\n    return keyFilter2;\n  }\n  return isPressed;\n}\nconst ARIA_NODE_DESC_KEY = \"vue-flow__node-desc\";\nconst ARIA_EDGE_DESC_KEY = \"vue-flow__edge-desc\";\nconst ARIA_LIVE_MESSAGE = \"vue-flow__aria-live\";\nconst elementSelectionKeys = [\"Enter\", \" \", \"Escape\"];\nconst arrowKeyDiffs = {\n  ArrowUp: { x: 0, y: -1 },\n  ArrowDown: { x: 0, y: 1 },\n  ArrowLeft: { x: -1, y: 0 },\n  ArrowRight: { x: 1, y: 0 }\n};\nfunction nodeToRect(node) {\n  return {\n    ...node.computedPosition || { x: 0, y: 0 },\n    width: node.dimensions.width || 0,\n    height: node.dimensions.height || 0\n  };\n}\nfunction getOverlappingArea(rectA, rectB) {\n  const xOverlap = Math.max(0, Math.min(rectA.x + rectA.width, rectB.x + rectB.width) - Math.max(rectA.x, rectB.x));\n  const yOverlap = Math.max(0, Math.min(rectA.y + rectA.height, rectB.y + rectB.height) - Math.max(rectA.y, rectB.y));\n  return Math.ceil(xOverlap * yOverlap);\n}\nfunction getDimensions(node) {\n  return {\n    width: node.offsetWidth,\n    height: node.offsetHeight\n  };\n}\nfunction clamp(val, min = 0, max = 1) {\n  return Math.min(Math.max(val, min), max);\n}\nfunction clampPosition(position, extent) {\n  return {\n    x: clamp(position.x, extent[0][0], extent[1][0]),\n    y: clamp(position.y, extent[0][1], extent[1][1])\n  };\n}\nfunction getHostForElement(element) {\n  const doc = element.getRootNode();\n  if (\"elementFromPoint\" in doc) {\n    return doc;\n  }\n  return window.document;\n}\nfunction isEdge(element) {\n  return element && typeof element === \"object\" && \"id\" in element && \"source\" in element && \"target\" in element;\n}\nfunction isGraphEdge(element) {\n  return isEdge(element) && \"sourceNode\" in element && \"targetNode\" in element;\n}\nfunction isNode(element) {\n  return element && typeof element === \"object\" && \"id\" in element && \"position\" in element && !isEdge(element);\n}\nfunction isGraphNode(element) {\n  return isNode(element) && \"computedPosition\" in element;\n}\nfunction isNumeric(n) {\n  return !Number.isNaN(n) && Number.isFinite(n);\n}\nfunction isRect(obj) {\n  return isNumeric(obj.width) && isNumeric(obj.height) && isNumeric(obj.x) && isNumeric(obj.y);\n}\nfunction parseNode(node, existingNode, parentNode) {\n  const initialState = {\n    id: node.id.toString(),\n    type: node.type ?? \"default\",\n    dimensions: markRaw({\n      width: 0,\n      height: 0\n    }),\n    computedPosition: markRaw({\n      z: 0,\n      ...node.position\n    }),\n    // todo: shouldn't be defined initially, as we want to use handleBounds to check if a node was actually initialized or not\n    handleBounds: {\n      source: [],\n      target: []\n    },\n    draggable: void 0,\n    selectable: void 0,\n    connectable: void 0,\n    focusable: void 0,\n    selected: false,\n    dragging: false,\n    resizing: false,\n    initialized: false,\n    isParent: false,\n    position: {\n      x: 0,\n      y: 0\n    },\n    data: isDef(node.data) ? node.data : {},\n    events: markRaw(isDef(node.events) ? node.events : {})\n  };\n  return Object.assign(existingNode ?? initialState, node, { id: node.id.toString(), parentNode });\n}\nfunction parseEdge(edge, existingEdge, defaultEdgeOptions) {\n  var _a, _b;\n  const initialState = {\n    id: edge.id.toString(),\n    type: edge.type ?? (existingEdge == null ? void 0 : existingEdge.type) ?? \"default\",\n    source: edge.source.toString(),\n    target: edge.target.toString(),\n    sourceHandle: (_a = edge.sourceHandle) == null ? void 0 : _a.toString(),\n    targetHandle: (_b = edge.targetHandle) == null ? void 0 : _b.toString(),\n    updatable: edge.updatable ?? (defaultEdgeOptions == null ? void 0 : defaultEdgeOptions.updatable),\n    selectable: edge.selectable ?? (defaultEdgeOptions == null ? void 0 : defaultEdgeOptions.selectable),\n    focusable: edge.focusable ?? (defaultEdgeOptions == null ? void 0 : defaultEdgeOptions.focusable),\n    data: isDef(edge.data) ? edge.data : {},\n    events: markRaw(isDef(edge.events) ? edge.events : {}),\n    label: edge.label ?? \"\",\n    interactionWidth: edge.interactionWidth ?? (defaultEdgeOptions == null ? void 0 : defaultEdgeOptions.interactionWidth),\n    ...defaultEdgeOptions ?? {}\n  };\n  return Object.assign(existingEdge ?? initialState, edge, { id: edge.id.toString() });\n}\nfunction getConnectedElements(nodeOrId, nodes, edges, dir) {\n  const id2 = typeof nodeOrId === \"string\" ? nodeOrId : nodeOrId.id;\n  const connectedIds = /* @__PURE__ */ new Set();\n  const origin = dir === \"source\" ? \"target\" : \"source\";\n  for (const edge of edges) {\n    if (edge[origin] === id2) {\n      connectedIds.add(edge[dir]);\n    }\n  }\n  return nodes.filter((n) => connectedIds.has(n.id));\n}\nfunction getOutgoers(...args) {\n  if (args.length === 3) {\n    const [nodeOrId2, nodes, edges] = args;\n    return getConnectedElements(nodeOrId2, nodes, edges, \"target\");\n  }\n  const [nodeOrId, elements] = args;\n  const nodeId = typeof nodeOrId === \"string\" ? nodeOrId : nodeOrId.id;\n  const outgoers = elements.filter((el) => isEdge(el) && el.source === nodeId);\n  return outgoers.map((edge) => elements.find((el) => isNode(el) && el.id === edge.target));\n}\nfunction getIncomers(...args) {\n  if (args.length === 3) {\n    const [nodeOrId2, nodes, edges] = args;\n    return getConnectedElements(nodeOrId2, nodes, edges, \"source\");\n  }\n  const [nodeOrId, elements] = args;\n  const nodeId = typeof nodeOrId === \"string\" ? nodeOrId : nodeOrId.id;\n  const incomers = elements.filter((el) => isEdge(el) && el.target === nodeId);\n  return incomers.map((edge) => elements.find((el) => isNode(el) && el.id === edge.source));\n}\nfunction getEdgeId({ source, sourceHandle, target, targetHandle }) {\n  return `vueflow__edge-${source}${sourceHandle ?? \"\"}-${target}${targetHandle ?? \"\"}`;\n}\nfunction connectionExists(edge, elements) {\n  return elements.some(\n    (el) => isEdge(el) && el.source === edge.source && el.target === edge.target && (el.sourceHandle === edge.sourceHandle || !el.sourceHandle && !edge.sourceHandle) && (el.targetHandle === edge.targetHandle || !el.targetHandle && !edge.targetHandle)\n  );\n}\nfunction addEdge(edgeParams, elements, defaults) {\n  if (!edgeParams.source || !edgeParams.target) {\n    warn(\"Can't create edge. An edge needs a source and a target.\");\n    return elements;\n  }\n  let edge;\n  if (isEdge(edgeParams)) {\n    edge = { ...edgeParams };\n  } else {\n    edge = {\n      ...edgeParams,\n      id: getEdgeId(edgeParams)\n    };\n  }\n  edge = parseEdge(edge, void 0, defaults);\n  if (connectionExists(edge, elements)) {\n    return elements;\n  }\n  elements.push(edge);\n  return elements;\n}\nfunction updateEdge(oldEdge, newConnection, elements) {\n  if (!newConnection.source || !newConnection.target) {\n    warn(\"Can't create new edge. An edge needs a source and a target.\");\n    return elements;\n  }\n  const foundEdge = elements.find((e) => isEdge(e) && e.id === oldEdge.id);\n  if (!foundEdge) {\n    warn(`The old edge with id=${oldEdge.id} does not exist.`);\n    return elements;\n  }\n  const edge = {\n    ...oldEdge,\n    id: getEdgeId(newConnection),\n    source: newConnection.source,\n    target: newConnection.target,\n    sourceHandle: newConnection.sourceHandle,\n    targetHandle: newConnection.targetHandle\n  };\n  elements.splice(elements.indexOf(foundEdge), 1, edge);\n  return elements.filter((e) => e.id !== oldEdge.id);\n}\nfunction rendererPointToPoint({ x, y }, { x: tx, y: ty, zoom: tScale }) {\n  return {\n    x: x * tScale + tx,\n    y: y * tScale + ty\n  };\n}\nfunction pointToRendererPoint({ x, y }, { x: tx, y: ty, zoom: tScale }, snapToGrid = false, snapGrid = [1, 1]) {\n  const position = {\n    x: (x - tx) / tScale,\n    y: (y - ty) / tScale\n  };\n  return snapToGrid ? snapPosition(position, snapGrid) : position;\n}\nfunction getBoundsOfBoxes(box1, box2) {\n  return {\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2)\n  };\n}\nfunction rectToBox({ x, y, width, height }) {\n  return {\n    x,\n    y,\n    x2: x + width,\n    y2: y + height\n  };\n}\nfunction boxToRect({ x, y, x2, y2 }) {\n  return {\n    x,\n    y,\n    width: x2 - x,\n    height: y2 - y\n  };\n}\nfunction getBoundsofRects(rect1, rect2) {\n  return boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\n}\nfunction getRectOfNodes(nodes) {\n  let box = {\n    x: Number.POSITIVE_INFINITY,\n    y: Number.POSITIVE_INFINITY,\n    x2: Number.NEGATIVE_INFINITY,\n    y2: Number.NEGATIVE_INFINITY\n  };\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    box = getBoundsOfBoxes(\n      box,\n      rectToBox({\n        ...node.computedPosition,\n        ...node.dimensions\n      })\n    );\n  }\n  return boxToRect(box);\n}\nfunction getNodesInside(nodes, rect, viewport = { x: 0, y: 0, zoom: 1 }, partially = false, excludeNonSelectableNodes = false) {\n  const paneRect = {\n    ...pointToRendererPoint(rect, viewport),\n    width: rect.width / viewport.zoom,\n    height: rect.height / viewport.zoom\n  };\n  const visibleNodes = [];\n  for (const node of nodes) {\n    const { dimensions, selectable = true, hidden = false } = node;\n    const width = dimensions.width ?? node.width ?? null;\n    const height = dimensions.height ?? node.height ?? null;\n    if (excludeNonSelectableNodes && !selectable || hidden) {\n      continue;\n    }\n    const overlappingArea = getOverlappingArea(paneRect, nodeToRect(node));\n    const notInitialized = width === null || height === null;\n    const partiallyVisible = partially && overlappingArea > 0;\n    const area = (width ?? 0) * (height ?? 0);\n    const isVisible = notInitialized || partiallyVisible || overlappingArea >= area;\n    if (isVisible || node.dragging) {\n      visibleNodes.push(node);\n    }\n  }\n  return visibleNodes;\n}\nfunction getConnectedEdges(nodesOrId, edges) {\n  const nodeIds = /* @__PURE__ */ new Set();\n  if (typeof nodesOrId === \"string\") {\n    nodeIds.add(nodesOrId);\n  } else if (nodesOrId.length >= 1) {\n    for (const n of nodesOrId) {\n      nodeIds.add(n.id);\n    }\n  }\n  return edges.filter((edge) => nodeIds.has(edge.source) || nodeIds.has(edge.target));\n}\nfunction parsePadding(padding, viewport) {\n  if (typeof padding === \"number\") {\n    return Math.floor((viewport - viewport / (1 + padding)) * 0.5);\n  }\n  if (typeof padding === \"string\" && padding.endsWith(\"px\")) {\n    const paddingValue = Number.parseFloat(padding);\n    if (!Number.isNaN(paddingValue)) {\n      return Math.floor(paddingValue);\n    }\n  }\n  if (typeof padding === \"string\" && padding.endsWith(\"%\")) {\n    const paddingValue = Number.parseFloat(padding);\n    if (!Number.isNaN(paddingValue)) {\n      return Math.floor(viewport * paddingValue * 0.01);\n    }\n  }\n  warn(`The padding value \"${padding}\" is invalid. Please provide a number or a string with a valid unit (px or %).`);\n  return 0;\n}\nfunction parsePaddings(padding, width, height) {\n  if (typeof padding === \"string\" || typeof padding === \"number\") {\n    const paddingY = parsePadding(padding, height);\n    const paddingX = parsePadding(padding, width);\n    return {\n      top: paddingY,\n      right: paddingX,\n      bottom: paddingY,\n      left: paddingX,\n      x: paddingX * 2,\n      y: paddingY * 2\n    };\n  }\n  if (typeof padding === \"object\") {\n    const top = parsePadding(padding.top ?? padding.y ?? 0, height);\n    const bottom = parsePadding(padding.bottom ?? padding.y ?? 0, height);\n    const left = parsePadding(padding.left ?? padding.x ?? 0, width);\n    const right = parsePadding(padding.right ?? padding.x ?? 0, width);\n    return { top, right, bottom, left, x: left + right, y: top + bottom };\n  }\n  return { top: 0, right: 0, bottom: 0, left: 0, x: 0, y: 0 };\n}\nfunction calculateAppliedPaddings(bounds, x, y, zoom2, width, height) {\n  const { x: left, y: top } = rendererPointToPoint(bounds, { x, y, zoom: zoom2 });\n  const { x: boundRight, y: boundBottom } = rendererPointToPoint(\n    { x: bounds.x + bounds.width, y: bounds.y + bounds.height },\n    {\n      x,\n      y,\n      zoom: zoom2\n    }\n  );\n  const right = width - boundRight;\n  const bottom = height - boundBottom;\n  return {\n    left: Math.floor(left),\n    top: Math.floor(top),\n    right: Math.floor(right),\n    bottom: Math.floor(bottom)\n  };\n}\nfunction getTransformForBounds(bounds, width, height, minZoom, maxZoom, padding = 0.1) {\n  const p = parsePaddings(padding, width, height);\n  const xZoom = (width - p.x) / bounds.width;\n  const yZoom = (height - p.y) / bounds.height;\n  const zoom2 = Math.min(xZoom, yZoom);\n  const clampedZoom = clamp(zoom2, minZoom, maxZoom);\n  const boundsCenterX = bounds.x + bounds.width / 2;\n  const boundsCenterY = bounds.y + bounds.height / 2;\n  const x = width / 2 - boundsCenterX * clampedZoom;\n  const y = height / 2 - boundsCenterY * clampedZoom;\n  const newPadding = calculateAppliedPaddings(bounds, x, y, clampedZoom, width, height);\n  const offset = {\n    left: Math.min(newPadding.left - p.left, 0),\n    top: Math.min(newPadding.top - p.top, 0),\n    right: Math.min(newPadding.right - p.right, 0),\n    bottom: Math.min(newPadding.bottom - p.bottom, 0)\n  };\n  return {\n    x: x - offset.left + offset.right,\n    y: y - offset.top + offset.bottom,\n    zoom: clampedZoom\n  };\n}\nfunction getXYZPos(parentPos, computedPosition) {\n  return {\n    x: computedPosition.x + parentPos.x,\n    y: computedPosition.y + parentPos.y,\n    z: (parentPos.z > computedPosition.z ? parentPos.z : computedPosition.z) + 1\n  };\n}\nfunction isParentSelected(node, nodeLookup) {\n  if (!node.parentNode) {\n    return false;\n  }\n  const parent = nodeLookup.get(node.parentNode);\n  if (!parent) {\n    return false;\n  }\n  if (parent.selected) {\n    return true;\n  }\n  return isParentSelected(parent, nodeLookup);\n}\nfunction getMarkerId(marker, vueFlowId) {\n  if (typeof marker === \"undefined\") {\n    return \"\";\n  }\n  if (typeof marker === \"string\") {\n    return marker;\n  }\n  const idPrefix = vueFlowId ? `${vueFlowId}__` : \"\";\n  return `${idPrefix}${Object.keys(marker).sort().map((key) => `${key}=${marker[key]}`).join(\"&\")}`;\n}\nfunction wheelDelta(event) {\n  const factor = event.ctrlKey && isMacOs() ? 10 : 1;\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 2e-3) * factor;\n}\nfunction calcAutoPanVelocity(value, min, max) {\n  if (value < min) {\n    return clamp(Math.abs(value - min), 1, min) / min;\n  }\n  if (value > max) {\n    return -clamp(Math.abs(value - max), 1, min) / min;\n  }\n  return 0;\n}\nfunction calcAutoPan(pos, bounds, speed = 15, distance2 = 40) {\n  const xMovement = calcAutoPanVelocity(pos.x, distance2, bounds.width - distance2) * speed;\n  const yMovement = calcAutoPanVelocity(pos.y, distance2, bounds.height - distance2) * speed;\n  return [xMovement, yMovement];\n}\nfunction handleParentExpand(updateItem, parent) {\n  if (parent) {\n    const extendWidth = updateItem.position.x + updateItem.dimensions.width - parent.dimensions.width;\n    const extendHeight = updateItem.position.y + updateItem.dimensions.height - parent.dimensions.height;\n    if (extendWidth > 0 || extendHeight > 0 || updateItem.position.x < 0 || updateItem.position.y < 0) {\n      let parentStyles = {};\n      if (typeof parent.style === \"function\") {\n        parentStyles = { ...parent.style(parent) };\n      } else if (parent.style) {\n        parentStyles = { ...parent.style };\n      }\n      parentStyles.width = parentStyles.width ?? `${parent.dimensions.width}px`;\n      parentStyles.height = parentStyles.height ?? `${parent.dimensions.height}px`;\n      if (extendWidth > 0) {\n        if (typeof parentStyles.width === \"string\") {\n          const currWidth = Number(parentStyles.width.replace(\"px\", \"\"));\n          parentStyles.width = `${currWidth + extendWidth}px`;\n        } else {\n          parentStyles.width += extendWidth;\n        }\n      }\n      if (extendHeight > 0) {\n        if (typeof parentStyles.height === \"string\") {\n          const currWidth = Number(parentStyles.height.replace(\"px\", \"\"));\n          parentStyles.height = `${currWidth + extendHeight}px`;\n        } else {\n          parentStyles.height += extendHeight;\n        }\n      }\n      if (updateItem.position.x < 0) {\n        const xDiff = Math.abs(updateItem.position.x);\n        parent.position.x = parent.position.x - xDiff;\n        if (typeof parentStyles.width === \"string\") {\n          const currWidth = Number(parentStyles.width.replace(\"px\", \"\"));\n          parentStyles.width = `${currWidth + xDiff}px`;\n        } else {\n          parentStyles.width += xDiff;\n        }\n        updateItem.position.x = 0;\n      }\n      if (updateItem.position.y < 0) {\n        const yDiff = Math.abs(updateItem.position.y);\n        parent.position.y = parent.position.y - yDiff;\n        if (typeof parentStyles.height === \"string\") {\n          const currWidth = Number(parentStyles.height.replace(\"px\", \"\"));\n          parentStyles.height = `${currWidth + yDiff}px`;\n        } else {\n          parentStyles.height += yDiff;\n        }\n        updateItem.position.y = 0;\n      }\n      parent.dimensions.width = Number(parentStyles.width.toString().replace(\"px\", \"\"));\n      parent.dimensions.height = Number(parentStyles.height.toString().replace(\"px\", \"\"));\n      if (typeof parent.style === \"function\") {\n        parent.style = (p) => {\n          const styleFunc = parent.style;\n          return {\n            ...styleFunc(p),\n            ...parentStyles\n          };\n        };\n      } else {\n        parent.style = {\n          ...parent.style,\n          ...parentStyles\n        };\n      }\n    }\n  }\n}\nfunction applyChanges(changes, elements) {\n  var _a, _b;\n  const addRemoveChanges = changes.filter((c) => c.type === \"add\" || c.type === \"remove\");\n  for (const change of addRemoveChanges) {\n    if (change.type === \"add\") {\n      const index = elements.findIndex((el) => el.id === change.item.id);\n      if (index === -1) {\n        elements.push(change.item);\n      }\n    } else if (change.type === \"remove\") {\n      const index = elements.findIndex((el) => el.id === change.id);\n      if (index !== -1) {\n        elements.splice(index, 1);\n      }\n    }\n  }\n  const elementIds = elements.map((el) => el.id);\n  for (const element of elements) {\n    for (const currentChange of changes) {\n      if (currentChange.id !== element.id) {\n        continue;\n      }\n      switch (currentChange.type) {\n        case \"select\":\n          element.selected = currentChange.selected;\n          break;\n        case \"position\":\n          if (isGraphNode(element)) {\n            if (typeof currentChange.position !== \"undefined\") {\n              element.position = currentChange.position;\n            }\n            if (typeof currentChange.dragging !== \"undefined\") {\n              element.dragging = currentChange.dragging;\n            }\n            if (element.expandParent && element.parentNode) {\n              const parent = elements[elementIds.indexOf(element.parentNode)];\n              if (parent && isGraphNode(parent)) {\n                handleParentExpand(element, parent);\n              }\n            }\n          }\n          break;\n        case \"dimensions\":\n          if (isGraphNode(element)) {\n            if (typeof currentChange.dimensions !== \"undefined\") {\n              element.dimensions = currentChange.dimensions;\n            }\n            if (typeof currentChange.updateStyle !== \"undefined\" && currentChange.updateStyle) {\n              element.style = {\n                ...element.style || {},\n                width: `${(_a = currentChange.dimensions) == null ? void 0 : _a.width}px`,\n                height: `${(_b = currentChange.dimensions) == null ? void 0 : _b.height}px`\n              };\n            }\n            if (typeof currentChange.resizing !== \"undefined\") {\n              element.resizing = currentChange.resizing;\n            }\n            if (element.expandParent && element.parentNode) {\n              const parent = elements[elementIds.indexOf(element.parentNode)];\n              if (parent && isGraphNode(parent)) {\n                const parentInit = !!parent.dimensions.width && !!parent.dimensions.height;\n                if (!parentInit) {\n                  nextTick(() => {\n                    handleParentExpand(element, parent);\n                  });\n                } else {\n                  handleParentExpand(element, parent);\n                }\n              }\n            }\n          }\n          break;\n      }\n    }\n  }\n  return elements;\n}\nfunction applyEdgeChanges(changes, edges) {\n  return applyChanges(changes, edges);\n}\nfunction applyNodeChanges(changes, nodes) {\n  return applyChanges(changes, nodes);\n}\nfunction createSelectionChange(id2, selected) {\n  return {\n    id: id2,\n    type: \"select\",\n    selected\n  };\n}\nfunction createAdditionChange(item) {\n  return {\n    item,\n    type: \"add\"\n  };\n}\nfunction createNodeRemoveChange(id2) {\n  return {\n    id: id2,\n    type: \"remove\"\n  };\n}\nfunction createEdgeRemoveChange(id2, source, target, sourceHandle, targetHandle) {\n  return {\n    id: id2,\n    source,\n    target,\n    sourceHandle: sourceHandle || null,\n    targetHandle: targetHandle || null,\n    type: \"remove\"\n  };\n}\nfunction getSelectionChanges(items, selectedIds = /* @__PURE__ */ new Set(), mutateItem = false) {\n  const changes = [];\n  for (const [id2, item] of items) {\n    const willBeSelected = selectedIds.has(id2);\n    if (!(item.selected === void 0 && !willBeSelected) && item.selected !== willBeSelected) {\n      if (mutateItem) {\n        item.selected = willBeSelected;\n      }\n      changes.push(createSelectionChange(item.id, willBeSelected));\n    }\n  }\n  return changes;\n}\nconst noop$1 = () => {\n};\nfunction createExtendedEventHook(defaultHandler) {\n  const listeners = /* @__PURE__ */ new Set();\n  let emitter = noop$1;\n  let hasEmitListeners = () => false;\n  const hasListeners = () => listeners.size > 0 || hasEmitListeners();\n  const setEmitter = (fn) => {\n    emitter = fn;\n  };\n  const removeEmitter = () => {\n    emitter = noop$1;\n  };\n  const setHasEmitListeners = (fn) => {\n    hasEmitListeners = fn;\n  };\n  const removeHasEmitListeners = () => {\n    hasEmitListeners = () => false;\n  };\n  const off = (fn) => {\n    listeners.delete(fn);\n  };\n  const on = (fn) => {\n    listeners.add(fn);\n    const offFn = () => off(fn);\n    tryOnScopeDispose(offFn);\n    return { off: offFn };\n  };\n  const trigger = (param) => {\n    const queue = [emitter];\n    if (hasListeners()) {\n      queue.push(...listeners);\n    } else if (defaultHandler) {\n      queue.push(defaultHandler);\n    }\n    return Promise.allSettled(queue.map((fn) => fn(param)));\n  };\n  return {\n    on,\n    off,\n    trigger,\n    hasListeners,\n    listeners,\n    setEmitter,\n    removeEmitter,\n    setHasEmitListeners,\n    removeHasEmitListeners\n  };\n}\nfunction hasSelector(target, selector2, node) {\n  let current = target;\n  do {\n    if (current && current.matches(selector2)) {\n      return true;\n    } else if (current === node) {\n      return false;\n    }\n    current = current.parentElement;\n  } while (current);\n  return false;\n}\nfunction getDragItems(nodeLookup, nodesDraggable, mousePos, nodeId) {\n  var _a, _b;\n  const dragItems = /* @__PURE__ */ new Map();\n  for (const [id2, node] of nodeLookup) {\n    if ((node.selected || node.id === nodeId) && (!node.parentNode || !isParentSelected(node, nodeLookup)) && (node.draggable || nodesDraggable && typeof node.draggable === \"undefined\")) {\n      const internalNode = nodeLookup.get(id2);\n      if (internalNode) {\n        dragItems.set(id2, {\n          id: node.id,\n          position: node.position || { x: 0, y: 0 },\n          distance: {\n            x: mousePos.x - ((_a = node.computedPosition) == null ? void 0 : _a.x) || 0,\n            y: mousePos.y - ((_b = node.computedPosition) == null ? void 0 : _b.y) || 0\n          },\n          from: { x: node.computedPosition.x, y: node.computedPosition.y },\n          extent: node.extent,\n          parentNode: node.parentNode,\n          dimensions: { ...node.dimensions },\n          expandParent: node.expandParent\n        });\n      }\n    }\n  }\n  return Array.from(dragItems.values());\n}\nfunction getEventHandlerParams({\n  id: id2,\n  dragItems,\n  findNode\n}) {\n  const extendedDragItems = [];\n  for (const dragItem of dragItems) {\n    const node = findNode(dragItem.id);\n    if (node) {\n      extendedDragItems.push(node);\n    }\n  }\n  return [id2 ? extendedDragItems.find((n) => n.id === id2) : extendedDragItems[0], extendedDragItems];\n}\nfunction getExtentPadding(padding) {\n  if (Array.isArray(padding)) {\n    switch (padding.length) {\n      case 1:\n        return [padding[0], padding[0], padding[0], padding[0]];\n      case 2:\n        return [padding[0], padding[1], padding[0], padding[1]];\n      case 3:\n        return [padding[0], padding[1], padding[2], padding[1]];\n      case 4:\n        return padding;\n      default:\n        return [0, 0, 0, 0];\n    }\n  }\n  return [padding, padding, padding, padding];\n}\nfunction getParentExtent(currentExtent, node, parent) {\n  const [top, right, bottom, left] = typeof currentExtent !== \"string\" ? getExtentPadding(currentExtent.padding) : [0, 0, 0, 0];\n  if (parent && typeof parent.computedPosition.x !== \"undefined\" && typeof parent.computedPosition.y !== \"undefined\" && typeof parent.dimensions.width !== \"undefined\" && typeof parent.dimensions.height !== \"undefined\") {\n    return [\n      [parent.computedPosition.x + left, parent.computedPosition.y + top],\n      [\n        parent.computedPosition.x + parent.dimensions.width - right,\n        parent.computedPosition.y + parent.dimensions.height - bottom\n      ]\n    ];\n  }\n  return false;\n}\nfunction getExtent(item, triggerError, extent, parent) {\n  let currentExtent = item.extent || extent;\n  if ((currentExtent === \"parent\" || !Array.isArray(currentExtent) && (currentExtent == null ? void 0 : currentExtent.range) === \"parent\") && !item.expandParent) {\n    if (item.parentNode && parent && item.dimensions.width && item.dimensions.height) {\n      const parentExtent = getParentExtent(currentExtent, item, parent);\n      if (parentExtent) {\n        currentExtent = parentExtent;\n      }\n    } else {\n      triggerError(new VueFlowError(ErrorCode.NODE_EXTENT_INVALID, item.id));\n      currentExtent = extent;\n    }\n  } else if (Array.isArray(currentExtent)) {\n    const parentX = (parent == null ? void 0 : parent.computedPosition.x) || 0;\n    const parentY = (parent == null ? void 0 : parent.computedPosition.y) || 0;\n    currentExtent = [\n      [currentExtent[0][0] + parentX, currentExtent[0][1] + parentY],\n      [currentExtent[1][0] + parentX, currentExtent[1][1] + parentY]\n    ];\n  } else if (currentExtent !== \"parent\" && (currentExtent == null ? void 0 : currentExtent.range) && Array.isArray(currentExtent.range)) {\n    const [top, right, bottom, left] = getExtentPadding(currentExtent.padding);\n    const parentX = (parent == null ? void 0 : parent.computedPosition.x) || 0;\n    const parentY = (parent == null ? void 0 : parent.computedPosition.y) || 0;\n    currentExtent = [\n      [currentExtent.range[0][0] + parentX + left, currentExtent.range[0][1] + parentY + top],\n      [currentExtent.range[1][0] + parentX - right, currentExtent.range[1][1] + parentY - bottom]\n    ];\n  }\n  return currentExtent === \"parent\" ? [\n    [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n    [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY]\n  ] : currentExtent;\n}\nfunction clampNodeExtent({ width, height }, extent) {\n  return [extent[0], [extent[1][0] - (width || 0), extent[1][1] - (height || 0)]];\n}\nfunction calcNextPosition(node, nextPosition, triggerError, nodeExtent, parentNode) {\n  const extent = clampNodeExtent(node.dimensions, getExtent(node, triggerError, nodeExtent, parentNode));\n  const clampedPos = clampPosition(nextPosition, extent);\n  return {\n    position: {\n      x: clampedPos.x - ((parentNode == null ? void 0 : parentNode.computedPosition.x) || 0),\n      y: clampedPos.y - ((parentNode == null ? void 0 : parentNode.computedPosition.y) || 0)\n    },\n    computedPosition: clampedPos\n  };\n}\nfunction getHandlePosition(node, handle, fallbackPosition = Position.Left, center = false) {\n  const x = ((handle == null ? void 0 : handle.x) ?? 0) + node.computedPosition.x;\n  const y = ((handle == null ? void 0 : handle.y) ?? 0) + node.computedPosition.y;\n  const { width, height } = handle ?? getNodeDimensions(node);\n  if (center) {\n    return { x: x + width / 2, y: y + height / 2 };\n  }\n  const position = (handle == null ? void 0 : handle.position) ?? fallbackPosition;\n  switch (position) {\n    case Position.Top:\n      return { x: x + width / 2, y };\n    case Position.Right:\n      return { x: x + width, y: y + height / 2 };\n    case Position.Bottom:\n      return { x: x + width / 2, y: y + height };\n    case Position.Left:\n      return { x, y: y + height / 2 };\n  }\n}\nfunction getEdgeHandle(bounds, handleId) {\n  if (!bounds) {\n    return null;\n  }\n  return (!handleId ? bounds[0] : bounds.find((d) => d.id === handleId)) || null;\n}\nfunction isEdgeVisible({\n  sourcePos,\n  targetPos,\n  sourceWidth,\n  sourceHeight,\n  targetWidth,\n  targetHeight,\n  width,\n  height,\n  viewport\n}) {\n  const edgeBox = {\n    x: Math.min(sourcePos.x, targetPos.x),\n    y: Math.min(sourcePos.y, targetPos.y),\n    x2: Math.max(sourcePos.x + sourceWidth, targetPos.x + targetWidth),\n    y2: Math.max(sourcePos.y + sourceHeight, targetPos.y + targetHeight)\n  };\n  if (edgeBox.x === edgeBox.x2) {\n    edgeBox.x2 += 1;\n  }\n  if (edgeBox.y === edgeBox.y2) {\n    edgeBox.y2 += 1;\n  }\n  const viewBox = rectToBox({\n    x: (0 - viewport.x) / viewport.zoom,\n    y: (0 - viewport.y) / viewport.zoom,\n    width: width / viewport.zoom,\n    height: height / viewport.zoom\n  });\n  const xOverlap = Math.max(0, Math.min(viewBox.x2, edgeBox.x2) - Math.max(viewBox.x, edgeBox.x));\n  const yOverlap = Math.max(0, Math.min(viewBox.y2, edgeBox.y2) - Math.max(viewBox.y, edgeBox.y));\n  const overlappingArea = Math.ceil(xOverlap * yOverlap);\n  return overlappingArea > 0;\n}\nfunction getEdgeZIndex(edge, findNode, elevateEdgesOnSelect = false) {\n  const hasZIndex = typeof edge.zIndex === \"number\";\n  let z = hasZIndex ? edge.zIndex : 0;\n  const source = findNode(edge.source);\n  const target = findNode(edge.target);\n  if (!source || !target) {\n    return 0;\n  }\n  if (elevateEdgesOnSelect) {\n    z = hasZIndex ? edge.zIndex : Math.max(source.computedPosition.z || 0, target.computedPosition.z || 0);\n  }\n  return z;\n}\nvar ErrorCode = /* @__PURE__ */ ((ErrorCode2) => {\n  ErrorCode2[\"MISSING_STYLES\"] = \"MISSING_STYLES\";\n  ErrorCode2[\"MISSING_VIEWPORT_DIMENSIONS\"] = \"MISSING_VIEWPORT_DIMENSIONS\";\n  ErrorCode2[\"NODE_INVALID\"] = \"NODE_INVALID\";\n  ErrorCode2[\"NODE_NOT_FOUND\"] = \"NODE_NOT_FOUND\";\n  ErrorCode2[\"NODE_MISSING_PARENT\"] = \"NODE_MISSING_PARENT\";\n  ErrorCode2[\"NODE_TYPE_MISSING\"] = \"NODE_TYPE_MISSING\";\n  ErrorCode2[\"NODE_EXTENT_INVALID\"] = \"NODE_EXTENT_INVALID\";\n  ErrorCode2[\"EDGE_INVALID\"] = \"EDGE_INVALID\";\n  ErrorCode2[\"EDGE_NOT_FOUND\"] = \"EDGE_NOT_FOUND\";\n  ErrorCode2[\"EDGE_SOURCE_MISSING\"] = \"EDGE_SOURCE_MISSING\";\n  ErrorCode2[\"EDGE_TARGET_MISSING\"] = \"EDGE_TARGET_MISSING\";\n  ErrorCode2[\"EDGE_TYPE_MISSING\"] = \"EDGE_TYPE_MISSING\";\n  ErrorCode2[\"EDGE_SOURCE_TARGET_SAME\"] = \"EDGE_SOURCE_TARGET_SAME\";\n  ErrorCode2[\"EDGE_SOURCE_TARGET_MISSING\"] = \"EDGE_SOURCE_TARGET_MISSING\";\n  ErrorCode2[\"EDGE_ORPHANED\"] = \"EDGE_ORPHANED\";\n  ErrorCode2[\"USEVUEFLOW_OPTIONS\"] = \"USEVUEFLOW_OPTIONS\";\n  return ErrorCode2;\n})(ErrorCode || {});\nconst messages = {\n  [\n    \"MISSING_STYLES\"\n    /* MISSING_STYLES */\n  ]: () => `It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly`,\n  [\n    \"MISSING_VIEWPORT_DIMENSIONS\"\n    /* MISSING_VIEWPORT_DIMENSIONS */\n  ]: () => \"The Vue Flow parent container needs a width and a height to render the graph\",\n  [\n    \"NODE_INVALID\"\n    /* NODE_INVALID */\n  ]: (id2) => `Node is invalid\nNode: ${id2}`,\n  [\n    \"NODE_NOT_FOUND\"\n    /* NODE_NOT_FOUND */\n  ]: (id2) => `Node not found\nNode: ${id2}`,\n  [\n    \"NODE_MISSING_PARENT\"\n    /* NODE_MISSING_PARENT */\n  ]: (id2, parentId) => `Node is missing a parent\nNode: ${id2}\nParent: ${parentId}`,\n  [\n    \"NODE_TYPE_MISSING\"\n    /* NODE_TYPE_MISSING */\n  ]: (type) => `Node type is missing\nType: ${type}`,\n  [\n    \"NODE_EXTENT_INVALID\"\n    /* NODE_EXTENT_INVALID */\n  ]: (id2) => `Only child nodes can use a parent extent\nNode: ${id2}`,\n  [\n    \"EDGE_INVALID\"\n    /* EDGE_INVALID */\n  ]: (id2) => `An edge needs a source and a target\nEdge: ${id2}`,\n  [\n    \"EDGE_SOURCE_MISSING\"\n    /* EDGE_SOURCE_MISSING */\n  ]: (id2, source) => `Edge source is missing\nEdge: ${id2} \nSource: ${source}`,\n  [\n    \"EDGE_TARGET_MISSING\"\n    /* EDGE_TARGET_MISSING */\n  ]: (id2, target) => `Edge target is missing\nEdge: ${id2} \nTarget: ${target}`,\n  [\n    \"EDGE_TYPE_MISSING\"\n    /* EDGE_TYPE_MISSING */\n  ]: (type) => `Edge type is missing\nType: ${type}`,\n  [\n    \"EDGE_SOURCE_TARGET_SAME\"\n    /* EDGE_SOURCE_TARGET_SAME */\n  ]: (id2, source, target) => `Edge source and target are the same\nEdge: ${id2} \nSource: ${source} \nTarget: ${target}`,\n  [\n    \"EDGE_SOURCE_TARGET_MISSING\"\n    /* EDGE_SOURCE_TARGET_MISSING */\n  ]: (id2, source, target) => `Edge source or target is missing\nEdge: ${id2} \nSource: ${source} \nTarget: ${target}`,\n  [\n    \"EDGE_ORPHANED\"\n    /* EDGE_ORPHANED */\n  ]: (id2) => `Edge was orphaned (suddenly missing source or target) and has been removed\nEdge: ${id2}`,\n  [\n    \"EDGE_NOT_FOUND\"\n    /* EDGE_NOT_FOUND */\n  ]: (id2) => `Edge not found\nEdge: ${id2}`,\n  // deprecation errors\n  [\n    \"USEVUEFLOW_OPTIONS\"\n    /* USEVUEFLOW_OPTIONS */\n  ]: () => `The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead`\n};\nclass VueFlowError extends Error {\n  constructor(code, ...args) {\n    var _a;\n    super((_a = messages[code]) == null ? void 0 : _a.call(messages, ...args));\n    this.name = \"VueFlowError\";\n    this.code = code;\n    this.args = args;\n  }\n}\nfunction isErrorOfType(error, code) {\n  return error.code === code;\n}\nfunction isMouseEvent(event) {\n  return \"clientX\" in event;\n}\nfunction isUseDragEvent(event) {\n  return \"sourceEvent\" in event;\n}\nfunction getEventPosition(event, bounds) {\n  const isMouse = isMouseEvent(event);\n  let evtX;\n  let evtY;\n  if (isMouse) {\n    evtX = event.clientX;\n    evtY = event.clientY;\n  } else if (\"touches\" in event && event.touches.length > 0) {\n    evtX = event.touches[0].clientX;\n    evtY = event.touches[0].clientY;\n  } else if (\"changedTouches\" in event && event.changedTouches.length > 0) {\n    evtX = event.changedTouches[0].clientX;\n    evtY = event.changedTouches[0].clientY;\n  } else {\n    evtX = 0;\n    evtY = 0;\n  }\n  return {\n    x: evtX - ((bounds == null ? void 0 : bounds.left) ?? 0),\n    y: evtY - ((bounds == null ? void 0 : bounds.top) ?? 0)\n  };\n}\nconst isMacOs = () => {\n  var _a;\n  return typeof navigator !== \"undefined\" && ((_a = navigator == null ? void 0 : navigator.userAgent) == null ? void 0 : _a.indexOf(\"Mac\")) >= 0;\n};\nfunction getNodeDimensions(node) {\n  var _a, _b;\n  return {\n    width: ((_a = node.dimensions) == null ? void 0 : _a.width) ?? node.width ?? 0,\n    height: ((_b = node.dimensions) == null ? void 0 : _b.height) ?? node.height ?? 0\n  };\n}\nfunction snapPosition(position, snapGrid = [1, 1]) {\n  return {\n    x: snapGrid[0] * Math.round(position.x / snapGrid[0]),\n    y: snapGrid[1] * Math.round(position.y / snapGrid[1])\n  };\n}\nconst alwaysValid$1 = () => true;\nfunction resetRecentHandle(handleDomNode) {\n  handleDomNode == null ? void 0 : handleDomNode.classList.remove(\"valid\", \"connecting\", \"vue-flow__handle-valid\", \"vue-flow__handle-connecting\");\n}\nfunction getNodesWithinDistance(position, nodeLookup, distance2) {\n  const nodes = [];\n  const rect = {\n    x: position.x - distance2,\n    y: position.y - distance2,\n    width: distance2 * 2,\n    height: distance2 * 2\n  };\n  for (const node of nodeLookup.values()) {\n    if (getOverlappingArea(rect, nodeToRect(node)) > 0) {\n      nodes.push(node);\n    }\n  }\n  return nodes;\n}\nconst ADDITIONAL_DISTANCE = 250;\nfunction getClosestHandle(position, connectionRadius, nodeLookup, fromHandle) {\n  var _a, _b;\n  let closestHandles = [];\n  let minDistance = Number.POSITIVE_INFINITY;\n  const closeNodes = getNodesWithinDistance(position, nodeLookup, connectionRadius + ADDITIONAL_DISTANCE);\n  for (const node of closeNodes) {\n    const allHandles = [...((_a = node.handleBounds) == null ? void 0 : _a.source) ?? [], ...((_b = node.handleBounds) == null ? void 0 : _b.target) ?? []];\n    for (const handle of allHandles) {\n      if (fromHandle.nodeId === handle.nodeId && fromHandle.type === handle.type && fromHandle.id === handle.id) {\n        continue;\n      }\n      const { x, y } = getHandlePosition(node, handle, handle.position, true);\n      const distance2 = Math.sqrt((x - position.x) ** 2 + (y - position.y) ** 2);\n      if (distance2 > connectionRadius) {\n        continue;\n      }\n      if (distance2 < minDistance) {\n        closestHandles = [{ ...handle, x, y }];\n        minDistance = distance2;\n      } else if (distance2 === minDistance) {\n        closestHandles.push({ ...handle, x, y });\n      }\n    }\n  }\n  if (!closestHandles.length) {\n    return null;\n  }\n  if (closestHandles.length > 1) {\n    const oppositeHandleType = fromHandle.type === \"source\" ? \"target\" : \"source\";\n    return closestHandles.find((handle) => handle.type === oppositeHandleType) ?? closestHandles[0];\n  }\n  return closestHandles[0];\n}\nfunction isValidHandle(event, {\n  handle,\n  connectionMode,\n  fromNodeId,\n  fromHandleId,\n  fromType,\n  doc,\n  lib,\n  flowId,\n  isValidConnection = alwaysValid$1\n}, edges, nodes, findNode, nodeLookup) {\n  const isTarget = fromType === \"target\";\n  const handleDomNode = handle ? doc.querySelector(`.${lib}-flow__handle[data-id=\"${flowId}-${handle == null ? void 0 : handle.nodeId}-${handle == null ? void 0 : handle.id}-${handle == null ? void 0 : handle.type}\"]`) : null;\n  const { x, y } = getEventPosition(event);\n  const handleBelow = doc.elementFromPoint(x, y);\n  const handleToCheck = (handleBelow == null ? void 0 : handleBelow.classList.contains(`${lib}-flow__handle`)) ? handleBelow : handleDomNode;\n  const result = {\n    handleDomNode: handleToCheck,\n    isValid: false,\n    connection: null,\n    toHandle: null\n  };\n  if (handleToCheck) {\n    const handleType = getHandleType(void 0, handleToCheck);\n    const handleNodeId = handleToCheck.getAttribute(\"data-nodeid\");\n    const handleId = handleToCheck.getAttribute(\"data-handleid\");\n    const connectable = handleToCheck.classList.contains(\"connectable\");\n    const connectableEnd = handleToCheck.classList.contains(\"connectableend\");\n    if (!handleNodeId || !handleType) {\n      return result;\n    }\n    const connection = {\n      source: isTarget ? handleNodeId : fromNodeId,\n      sourceHandle: isTarget ? handleId : fromHandleId,\n      target: isTarget ? fromNodeId : handleNodeId,\n      targetHandle: isTarget ? fromHandleId : handleId\n    };\n    result.connection = connection;\n    const isConnectable = connectable && connectableEnd;\n    const isValid = isConnectable && (connectionMode === ConnectionMode.Strict ? isTarget && handleType === \"source\" || !isTarget && handleType === \"target\" : handleNodeId !== fromNodeId || handleId !== fromHandleId);\n    result.isValid = isValid && isValidConnection(connection, {\n      nodes,\n      edges,\n      sourceNode: findNode(connection.source),\n      targetNode: findNode(connection.target)\n    });\n    result.toHandle = getHandle(handleNodeId, handleType, handleId, nodeLookup, connectionMode, true);\n  }\n  return result;\n}\nfunction getHandleType(edgeUpdaterType, handleDomNode) {\n  if (edgeUpdaterType) {\n    return edgeUpdaterType;\n  } else if (handleDomNode == null ? void 0 : handleDomNode.classList.contains(\"target\")) {\n    return \"target\";\n  } else if (handleDomNode == null ? void 0 : handleDomNode.classList.contains(\"source\")) {\n    return \"source\";\n  }\n  return null;\n}\nfunction getConnectionStatus(isInsideConnectionRadius, isHandleValid) {\n  let connectionStatus = null;\n  if (isHandleValid) {\n    connectionStatus = \"valid\";\n  } else if (isInsideConnectionRadius && !isHandleValid) {\n    connectionStatus = \"invalid\";\n  }\n  return connectionStatus;\n}\nfunction isConnectionValid(isInsideConnectionRadius, isHandleValid) {\n  let isValid = null;\n  if (isHandleValid) {\n    isValid = true;\n  } else if (isInsideConnectionRadius && !isHandleValid) {\n    isValid = false;\n  }\n  return isValid;\n}\nfunction getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode, withAbsolutePosition = false) {\n  var _a, _b, _c;\n  const node = nodeLookup.get(nodeId);\n  if (!node) {\n    return null;\n  }\n  const handles = connectionMode === ConnectionMode.Strict ? (_a = node.handleBounds) == null ? void 0 : _a[handleType] : [...((_b = node.handleBounds) == null ? void 0 : _b.source) ?? [], ...((_c = node.handleBounds) == null ? void 0 : _c.target) ?? []];\n  const handle = (handleId ? handles == null ? void 0 : handles.find((h2) => h2.id === handleId) : handles == null ? void 0 : handles[0]) ?? null;\n  return handle && withAbsolutePosition ? { ...handle, ...getHandlePosition(node, handle, handle.position, true) } : handle;\n}\nconst oppositePosition = {\n  [Position.Left]: Position.Right,\n  [Position.Right]: Position.Left,\n  [Position.Top]: Position.Bottom,\n  [Position.Bottom]: Position.Top\n};\nconst productionEnvs = [\"production\", \"prod\"];\nfunction warn(message, ...args) {\n  if (isDev()) {\n    console.warn(`[Vue Flow]: ${message}`, ...args);\n  }\n}\nfunction isDev() {\n  return !productionEnvs.includes(process.env.NODE_ENV || \"\");\n}\nfunction getHandleBounds(type, nodeElement, nodeBounds, zoom2, nodeId) {\n  const handles = nodeElement.querySelectorAll(`.vue-flow__handle.${type}`);\n  if (!(handles == null ? void 0 : handles.length)) {\n    return null;\n  }\n  return Array.from(handles).map((handle) => {\n    const handleBounds = handle.getBoundingClientRect();\n    return {\n      id: handle.getAttribute(\"data-handleid\"),\n      type,\n      nodeId,\n      position: handle.getAttribute(\"data-handlepos\"),\n      x: (handleBounds.left - nodeBounds.left) / zoom2,\n      y: (handleBounds.top - nodeBounds.top) / zoom2,\n      ...getDimensions(handle)\n    };\n  });\n}\nfunction handleNodeClick(node, multiSelectionActive, addSelectedNodes, removeSelectedNodes, nodesSelectionActive, unselect = false, nodeEl) {\n  nodesSelectionActive.value = false;\n  if (!node.selected) {\n    addSelectedNodes([node]);\n  } else if (unselect || node.selected && multiSelectionActive) {\n    removeSelectedNodes([node]);\n    nextTick(() => {\n      nodeEl.blur();\n    });\n  }\n}\nfunction isDef(val) {\n  const unrefVal = unref(val);\n  return typeof unrefVal !== \"undefined\";\n}\nfunction addEdgeToStore(edgeParams, edges, triggerError, defaultEdgeOptions) {\n  if (!edgeParams || !edgeParams.source || !edgeParams.target) {\n    triggerError(new VueFlowError(ErrorCode.EDGE_INVALID, (edgeParams == null ? void 0 : edgeParams.id) ?? `[ID UNKNOWN]`));\n    return false;\n  }\n  let edge;\n  if (isEdge(edgeParams)) {\n    edge = edgeParams;\n  } else {\n    edge = {\n      ...edgeParams,\n      id: getEdgeId(edgeParams)\n    };\n  }\n  edge = parseEdge(edge, void 0, defaultEdgeOptions);\n  if (connectionExists(edge, edges)) {\n    return false;\n  }\n  return edge;\n}\nfunction updateEdgeAction(edge, newConnection, prevEdge, shouldReplaceId, triggerError) {\n  if (!newConnection.source || !newConnection.target) {\n    triggerError(new VueFlowError(ErrorCode.EDGE_INVALID, edge.id));\n    return false;\n  }\n  if (!prevEdge) {\n    triggerError(new VueFlowError(ErrorCode.EDGE_NOT_FOUND, edge.id));\n    return false;\n  }\n  const { id: id2, ...rest } = edge;\n  return {\n    ...rest,\n    id: shouldReplaceId ? getEdgeId(newConnection) : id2,\n    source: newConnection.source,\n    target: newConnection.target,\n    sourceHandle: newConnection.sourceHandle,\n    targetHandle: newConnection.targetHandle\n  };\n}\nfunction createGraphNodes(nodes, findNode, triggerError) {\n  const parentNodes = {};\n  const nextNodes = [];\n  for (let i = 0; i < nodes.length; ++i) {\n    const node = nodes[i];\n    if (!isNode(node)) {\n      triggerError(\n        new VueFlowError(ErrorCode.NODE_INVALID, node == null ? void 0 : node.id) || `[ID UNKNOWN|INDEX ${i}]`\n      );\n      continue;\n    }\n    const parsed = parseNode(node, findNode(node.id), node.parentNode);\n    if (node.parentNode) {\n      parentNodes[node.parentNode] = true;\n    }\n    nextNodes[i] = parsed;\n  }\n  for (const node of nextNodes) {\n    const parentNode = findNode(node.parentNode) || nextNodes.find((n) => n.id === node.parentNode);\n    if (node.parentNode && !parentNode) {\n      triggerError(new VueFlowError(ErrorCode.NODE_MISSING_PARENT, node.id, node.parentNode));\n    }\n    if (node.parentNode || parentNodes[node.id]) {\n      if (parentNodes[node.id]) {\n        node.isParent = true;\n      }\n      if (parentNode) {\n        parentNode.isParent = true;\n      }\n    }\n  }\n  return nextNodes;\n}\nfunction addConnectionToLookup(type, connection, connectionKey, connectionLookup, nodeId, handleId) {\n  let key = nodeId;\n  const nodeMap = connectionLookup.get(key) || /* @__PURE__ */ new Map();\n  connectionLookup.set(key, nodeMap.set(connectionKey, connection));\n  key = `${nodeId}-${type}`;\n  const typeMap = connectionLookup.get(key) || /* @__PURE__ */ new Map();\n  connectionLookup.set(key, typeMap.set(connectionKey, connection));\n  if (handleId) {\n    key = `${nodeId}-${type}-${handleId}`;\n    const handleMap = connectionLookup.get(key) || /* @__PURE__ */ new Map();\n    connectionLookup.set(key, handleMap.set(connectionKey, connection));\n  }\n}\nfunction updateConnectionLookup(connectionLookup, edgeLookup, edges) {\n  connectionLookup.clear();\n  for (const edge of edges) {\n    const { source: sourceNode, target: targetNode, sourceHandle = null, targetHandle = null } = edge;\n    const connection = { edgeId: edge.id, source: sourceNode, target: targetNode, sourceHandle, targetHandle };\n    const sourceKey = `${sourceNode}-${sourceHandle}--${targetNode}-${targetHandle}`;\n    const targetKey = `${targetNode}-${targetHandle}--${sourceNode}-${sourceHandle}`;\n    addConnectionToLookup(\"source\", connection, targetKey, connectionLookup, sourceNode, sourceHandle);\n    addConnectionToLookup(\"target\", connection, sourceKey, connectionLookup, targetNode, targetHandle);\n  }\n}\nfunction handleConnectionChange(a, b, cb) {\n  if (!cb) {\n    return;\n  }\n  const diff = [];\n  for (const key of a.keys()) {\n    if (!b.has(key)) {\n      diff.push(a.get(key));\n    }\n  }\n  if (diff.length) {\n    cb(diff);\n  }\n}\nfunction areConnectionMapsEqual(a, b) {\n  if (!a && !b) {\n    return true;\n  }\n  if (!a || !b || a.size !== b.size) {\n    return false;\n  }\n  if (!a.size && !b.size) {\n    return true;\n  }\n  for (const key of a.keys()) {\n    if (!b.has(key)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction areSetsEqual(a, b) {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const item of a) {\n    if (!b.has(item)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction createGraphEdges(nextEdges, isValidConnection, findNode, findEdge, onError, defaultEdgeOptions, nodes, edges) {\n  const validEdges = [];\n  for (const edgeOrConnection of nextEdges) {\n    const edge = isEdge(edgeOrConnection) ? edgeOrConnection : addEdgeToStore(edgeOrConnection, edges, onError, defaultEdgeOptions);\n    if (!edge) {\n      continue;\n    }\n    const sourceNode = findNode(edge.source);\n    const targetNode = findNode(edge.target);\n    if (!sourceNode || !targetNode) {\n      onError(new VueFlowError(ErrorCode.EDGE_SOURCE_TARGET_MISSING, edge.id, edge.source, edge.target));\n      continue;\n    }\n    if (!sourceNode) {\n      onError(new VueFlowError(ErrorCode.EDGE_SOURCE_MISSING, edge.id, edge.source));\n      continue;\n    }\n    if (!targetNode) {\n      onError(new VueFlowError(ErrorCode.EDGE_TARGET_MISSING, edge.id, edge.target));\n      continue;\n    }\n    if (isValidConnection) {\n      const isValid = isValidConnection(edge, {\n        edges,\n        nodes,\n        sourceNode,\n        targetNode\n      });\n      if (!isValid) {\n        onError(new VueFlowError(ErrorCode.EDGE_INVALID, edge.id));\n        continue;\n      }\n    }\n    const existingEdge = findEdge(edge.id);\n    validEdges.push({\n      ...parseEdge(edge, existingEdge, defaultEdgeOptions),\n      sourceNode,\n      targetNode\n    });\n  }\n  return validEdges;\n}\nconst VueFlow = Symbol(\"vueFlow\");\nconst NodeId = Symbol(\"nodeId\");\nconst NodeRef = Symbol(\"nodeRef\");\nconst EdgeId = Symbol(\"edgeId\");\nconst EdgeRef = Symbol(\"edgeRef\");\nconst Slots = Symbol(\"slots\");\nfunction useDrag(params) {\n  const {\n    vueFlowRef,\n    snapToGrid,\n    snapGrid,\n    noDragClassName,\n    nodeLookup,\n    nodeExtent,\n    nodeDragThreshold,\n    viewport,\n    autoPanOnNodeDrag,\n    autoPanSpeed,\n    nodesDraggable,\n    panBy,\n    findNode,\n    multiSelectionActive,\n    nodesSelectionActive,\n    selectNodesOnDrag,\n    removeSelectedElements,\n    addSelectedNodes,\n    updateNodePositions,\n    emits\n  } = useVueFlow();\n  const { onStart, onDrag, onStop, onClick, el, disabled, id: id2, selectable, dragHandle } = params;\n  const dragging = shallowRef(false);\n  let dragItems = [];\n  let dragHandler;\n  let containerBounds = null;\n  let lastPos = { x: void 0, y: void 0 };\n  let mousePosition = { x: 0, y: 0 };\n  let dragEvent = null;\n  let dragStarted = false;\n  let nodePositionsChanged = false;\n  let autoPanId = 0;\n  let autoPanStarted = false;\n  const getPointerPosition = useGetPointerPosition();\n  const updateNodes = ({ x, y }) => {\n    lastPos = { x, y };\n    let hasChange = false;\n    dragItems = dragItems.map((n) => {\n      const nextPosition = { x: x - n.distance.x, y: y - n.distance.y };\n      const { computedPosition } = calcNextPosition(\n        n,\n        snapToGrid.value ? snapPosition(nextPosition, snapGrid.value) : nextPosition,\n        emits.error,\n        nodeExtent.value,\n        n.parentNode ? findNode(n.parentNode) : void 0\n      );\n      hasChange = hasChange || n.position.x !== computedPosition.x || n.position.y !== computedPosition.y;\n      n.position = computedPosition;\n      return n;\n    });\n    nodePositionsChanged = nodePositionsChanged || hasChange;\n    if (!hasChange) {\n      return;\n    }\n    updateNodePositions(dragItems, true, true);\n    dragging.value = true;\n    if (dragEvent) {\n      const [currentNode, nodes] = getEventHandlerParams({\n        id: id2,\n        dragItems,\n        findNode\n      });\n      onDrag({ event: dragEvent, node: currentNode, nodes });\n    }\n  };\n  const autoPan = () => {\n    if (!containerBounds) {\n      return;\n    }\n    const [xMovement, yMovement] = calcAutoPan(mousePosition, containerBounds, autoPanSpeed.value);\n    if (xMovement !== 0 || yMovement !== 0) {\n      const nextPos = {\n        x: (lastPos.x ?? 0) - xMovement / viewport.value.zoom,\n        y: (lastPos.y ?? 0) - yMovement / viewport.value.zoom\n      };\n      if (panBy({ x: xMovement, y: yMovement })) {\n        updateNodes(nextPos);\n      }\n    }\n    autoPanId = requestAnimationFrame(autoPan);\n  };\n  const startDrag = (event, nodeEl) => {\n    dragStarted = true;\n    const node = findNode(id2);\n    if (!selectNodesOnDrag.value && !multiSelectionActive.value && node) {\n      if (!node.selected) {\n        removeSelectedElements();\n      }\n    }\n    if (node && toValue$1(selectable) && selectNodesOnDrag.value) {\n      handleNodeClick(\n        node,\n        multiSelectionActive.value,\n        addSelectedNodes,\n        removeSelectedElements,\n        nodesSelectionActive,\n        false,\n        nodeEl\n      );\n    }\n    const pointerPos = getPointerPosition(event.sourceEvent);\n    lastPos = pointerPos;\n    dragItems = getDragItems(nodeLookup.value, nodesDraggable.value, pointerPos, id2);\n    if (dragItems.length) {\n      const [currentNode, nodes] = getEventHandlerParams({\n        id: id2,\n        dragItems,\n        findNode\n      });\n      onStart({ event: event.sourceEvent, node: currentNode, nodes });\n    }\n  };\n  const eventStart = (event, nodeEl) => {\n    var _a;\n    if (event.sourceEvent.type === \"touchmove\" && event.sourceEvent.touches.length > 1) {\n      return;\n    }\n    nodePositionsChanged = false;\n    if (nodeDragThreshold.value === 0) {\n      startDrag(event, nodeEl);\n    }\n    lastPos = getPointerPosition(event.sourceEvent);\n    containerBounds = ((_a = vueFlowRef.value) == null ? void 0 : _a.getBoundingClientRect()) || null;\n    mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n  };\n  const eventDrag = (event, nodeEl) => {\n    const pointerPos = getPointerPosition(event.sourceEvent);\n    if (!autoPanStarted && dragStarted && autoPanOnNodeDrag.value) {\n      autoPanStarted = true;\n      autoPan();\n    }\n    if (!dragStarted) {\n      const x = pointerPos.xSnapped - (lastPos.x ?? 0);\n      const y = pointerPos.ySnapped - (lastPos.y ?? 0);\n      const distance2 = Math.sqrt(x * x + y * y);\n      if (distance2 > nodeDragThreshold.value) {\n        startDrag(event, nodeEl);\n      }\n    }\n    if ((lastPos.x !== pointerPos.xSnapped || lastPos.y !== pointerPos.ySnapped) && dragItems.length && dragStarted) {\n      dragEvent = event.sourceEvent;\n      mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n      updateNodes(pointerPos);\n    }\n  };\n  const eventEnd = (event) => {\n    let isClick = false;\n    if (!dragStarted && !dragging.value && !multiSelectionActive.value) {\n      const evt = event.sourceEvent;\n      const pointerPos = getPointerPosition(evt);\n      const x = pointerPos.xSnapped - (lastPos.x ?? 0);\n      const y = pointerPos.ySnapped - (lastPos.y ?? 0);\n      const distance2 = Math.sqrt(x * x + y * y);\n      if (distance2 !== 0 && distance2 <= nodeDragThreshold.value) {\n        onClick == null ? void 0 : onClick(evt);\n        isClick = true;\n      }\n    }\n    if (dragItems.length && !isClick) {\n      if (nodePositionsChanged) {\n        updateNodePositions(dragItems, false, false);\n        nodePositionsChanged = false;\n      }\n      const [currentNode, nodes] = getEventHandlerParams({\n        id: id2,\n        dragItems,\n        findNode\n      });\n      onStop({ event: event.sourceEvent, node: currentNode, nodes });\n    }\n    dragItems = [];\n    dragging.value = false;\n    autoPanStarted = false;\n    dragStarted = false;\n    lastPos = { x: void 0, y: void 0 };\n    cancelAnimationFrame(autoPanId);\n  };\n  watch([() => toValue$1(disabled), el], ([isDisabled, nodeEl], _, onCleanup) => {\n    if (nodeEl) {\n      const selection2 = select(nodeEl);\n      if (!isDisabled) {\n        dragHandler = drag().on(\"start\", (event) => eventStart(event, nodeEl)).on(\"drag\", (event) => eventDrag(event, nodeEl)).on(\"end\", (event) => eventEnd(event)).filter((event) => {\n          const target = event.target;\n          const unrefDragHandle = toValue$1(dragHandle);\n          return !event.button && (!noDragClassName.value || !hasSelector(target, `.${noDragClassName.value}`, nodeEl) && (!unrefDragHandle || hasSelector(target, unrefDragHandle, nodeEl)));\n        });\n        selection2.call(dragHandler);\n      }\n      onCleanup(() => {\n        selection2.on(\".drag\", null);\n        if (dragHandler) {\n          dragHandler.on(\"start\", null);\n          dragHandler.on(\"drag\", null);\n          dragHandler.on(\"end\", null);\n        }\n      });\n    }\n  });\n  return dragging;\n}\nfunction useEdge(id2) {\n  const edgeId = id2 ?? inject(EdgeId, \"\");\n  const edgeEl = inject(EdgeRef, ref(null));\n  const { findEdge, emits } = useVueFlow();\n  const edge = findEdge(edgeId);\n  if (!edge) {\n    emits.error(new VueFlowError(ErrorCode.EDGE_NOT_FOUND, edgeId));\n  }\n  return {\n    id: edgeId,\n    edge,\n    edgeEl\n  };\n}\nfunction createEdgeHooks() {\n  return {\n    doubleClick: createExtendedEventHook(),\n    click: createExtendedEventHook(),\n    mouseEnter: createExtendedEventHook(),\n    mouseMove: createExtendedEventHook(),\n    mouseLeave: createExtendedEventHook(),\n    contextMenu: createExtendedEventHook(),\n    updateStart: createExtendedEventHook(),\n    update: createExtendedEventHook(),\n    updateEnd: createExtendedEventHook()\n  };\n}\nfunction useEdgeHooks(edge, emits) {\n  const edgeHooks = createEdgeHooks();\n  edgeHooks.doubleClick.on((event) => {\n    var _a, _b;\n    emits.edgeDoubleClick(event);\n    (_b = (_a = edge.events) == null ? void 0 : _a.doubleClick) == null ? void 0 : _b.call(_a, event);\n  });\n  edgeHooks.click.on((event) => {\n    var _a, _b;\n    emits.edgeClick(event);\n    (_b = (_a = edge.events) == null ? void 0 : _a.click) == null ? void 0 : _b.call(_a, event);\n  });\n  edgeHooks.mouseEnter.on((event) => {\n    var _a, _b;\n    emits.edgeMouseEnter(event);\n    (_b = (_a = edge.events) == null ? void 0 : _a.mouseEnter) == null ? void 0 : _b.call(_a, event);\n  });\n  edgeHooks.mouseMove.on((event) => {\n    var _a, _b;\n    emits.edgeMouseMove(event);\n    (_b = (_a = edge.events) == null ? void 0 : _a.mouseMove) == null ? void 0 : _b.call(_a, event);\n  });\n  edgeHooks.mouseLeave.on((event) => {\n    var _a, _b;\n    emits.edgeMouseLeave(event);\n    (_b = (_a = edge.events) == null ? void 0 : _a.mouseLeave) == null ? void 0 : _b.call(_a, event);\n  });\n  edgeHooks.contextMenu.on((event) => {\n    var _a, _b;\n    emits.edgeContextMenu(event);\n    (_b = (_a = edge.events) == null ? void 0 : _a.contextMenu) == null ? void 0 : _b.call(_a, event);\n  });\n  edgeHooks.updateStart.on((event) => {\n    var _a, _b;\n    emits.edgeUpdateStart(event);\n    (_b = (_a = edge.events) == null ? void 0 : _a.updateStart) == null ? void 0 : _b.call(_a, event);\n  });\n  edgeHooks.update.on((event) => {\n    var _a, _b;\n    emits.edgeUpdate(event);\n    (_b = (_a = edge.events) == null ? void 0 : _a.update) == null ? void 0 : _b.call(_a, event);\n  });\n  edgeHooks.updateEnd.on((event) => {\n    var _a, _b;\n    emits.edgeUpdateEnd(event);\n    (_b = (_a = edge.events) == null ? void 0 : _a.updateEnd) == null ? void 0 : _b.call(_a, event);\n  });\n  return Object.entries(edgeHooks).reduce(\n    (hooks, [key, value]) => {\n      hooks.emit[key] = value.trigger;\n      hooks.on[key] = value.on;\n      return hooks;\n    },\n    { emit: {}, on: {} }\n  );\n}\nfunction useGetPointerPosition() {\n  const { viewport, snapGrid, snapToGrid, vueFlowRef } = useVueFlow();\n  return (event) => {\n    var _a;\n    const containerBounds = ((_a = vueFlowRef.value) == null ? void 0 : _a.getBoundingClientRect()) ?? { left: 0, top: 0 };\n    const evt = isUseDragEvent(event) ? event.sourceEvent : event;\n    const { x, y } = getEventPosition(evt, containerBounds);\n    const pointerPos = pointToRendererPoint({ x, y }, viewport.value);\n    const { x: xSnapped, y: ySnapped } = snapToGrid.value ? snapPosition(pointerPos, snapGrid.value) : pointerPos;\n    return {\n      xSnapped,\n      ySnapped,\n      ...pointerPos\n    };\n  };\n}\nfunction alwaysValid() {\n  return true;\n}\nfunction useHandle({\n  handleId,\n  nodeId,\n  type,\n  isValidConnection,\n  edgeUpdaterType,\n  onEdgeUpdate,\n  onEdgeUpdateEnd\n}) {\n  const {\n    id: flowId,\n    vueFlowRef,\n    connectionMode,\n    connectionRadius,\n    connectOnClick,\n    connectionClickStartHandle,\n    nodesConnectable,\n    autoPanOnConnect,\n    autoPanSpeed,\n    findNode,\n    panBy,\n    startConnection,\n    updateConnection,\n    endConnection,\n    emits,\n    viewport,\n    edges,\n    nodes,\n    isValidConnection: isValidConnectionProp,\n    nodeLookup\n  } = useVueFlow();\n  let connection = null;\n  let isValid = false;\n  let handleDomNode = null;\n  function handlePointerDown(event) {\n    var _a;\n    const isTarget = toValue$1(type) === \"target\";\n    const isMouseTriggered = isMouseEvent(event);\n    const doc = getHostForElement(event.target);\n    const clickedHandle = event.currentTarget;\n    if (clickedHandle && (isMouseTriggered && event.button === 0 || !isMouseTriggered)) {\n      let onPointerMove = function(event2) {\n        connectionPosition = getEventPosition(event2, containerBounds);\n        closestHandle = getClosestHandle(\n          pointToRendererPoint(connectionPosition, viewport.value, false, [1, 1]),\n          connectionRadius.value,\n          nodeLookup.value,\n          fromHandle\n        );\n        if (!autoPanStarted) {\n          autoPan();\n          autoPanStarted = true;\n        }\n        const result = isValidHandle(\n          event2,\n          {\n            handle: closestHandle,\n            connectionMode: connectionMode.value,\n            fromNodeId: toValue$1(nodeId),\n            fromHandleId: toValue$1(handleId),\n            fromType: isTarget ? \"target\" : \"source\",\n            isValidConnection: isValidConnectionHandler,\n            doc,\n            lib: \"vue\",\n            flowId,\n            nodeLookup: nodeLookup.value\n          },\n          edges.value,\n          nodes.value,\n          findNode,\n          nodeLookup.value\n        );\n        handleDomNode = result.handleDomNode;\n        connection = result.connection;\n        isValid = isConnectionValid(!!closestHandle, result.isValid);\n        const newConnection2 = {\n          // from stays the same\n          ...previousConnection,\n          isValid,\n          to: result.toHandle && isValid ? rendererPointToPoint({ x: result.toHandle.x, y: result.toHandle.y }, viewport.value) : connectionPosition,\n          toHandle: result.toHandle,\n          toPosition: isValid && result.toHandle ? result.toHandle.position : oppositePosition[fromHandle.position],\n          toNode: result.toHandle ? nodeLookup.value.get(result.toHandle.nodeId) : null\n        };\n        if (isValid && closestHandle && (previousConnection == null ? void 0 : previousConnection.toHandle) && newConnection2.toHandle && previousConnection.toHandle.type === newConnection2.toHandle.type && previousConnection.toHandle.nodeId === newConnection2.toHandle.nodeId && previousConnection.toHandle.id === newConnection2.toHandle.id && previousConnection.to.x === newConnection2.to.x && previousConnection.to.y === newConnection2.to.y) {\n          return;\n        }\n        const connectingHandle = closestHandle ?? result.toHandle;\n        updateConnection(\n          connectingHandle && isValid ? rendererPointToPoint(\n            {\n              x: connectingHandle.x,\n              y: connectingHandle.y\n            },\n            viewport.value\n          ) : connectionPosition,\n          result.toHandle,\n          getConnectionStatus(!!connectingHandle, isValid)\n        );\n        previousConnection = newConnection2;\n        if (!closestHandle && !isValid && !handleDomNode) {\n          return resetRecentHandle(prevActiveHandle);\n        }\n        if (connection && connection.source !== connection.target && handleDomNode) {\n          resetRecentHandle(prevActiveHandle);\n          prevActiveHandle = handleDomNode;\n          handleDomNode.classList.add(\"connecting\", \"vue-flow__handle-connecting\");\n          handleDomNode.classList.toggle(\"valid\", !!isValid);\n          handleDomNode.classList.toggle(\"vue-flow__handle-valid\", !!isValid);\n        }\n      }, onPointerUp = function(event2) {\n        if (\"touches\" in event2 && event2.touches.length > 0) {\n          return;\n        }\n        if ((closestHandle || handleDomNode) && connection && isValid) {\n          if (!onEdgeUpdate) {\n            emits.connect(connection);\n          } else {\n            onEdgeUpdate(event2, connection);\n          }\n        }\n        emits.connectEnd(event2);\n        if (edgeUpdaterType) {\n          onEdgeUpdateEnd == null ? void 0 : onEdgeUpdateEnd(event2);\n        }\n        resetRecentHandle(prevActiveHandle);\n        cancelAnimationFrame(autoPanId);\n        endConnection(event2);\n        autoPanStarted = false;\n        isValid = false;\n        connection = null;\n        handleDomNode = null;\n        doc.removeEventListener(\"mousemove\", onPointerMove);\n        doc.removeEventListener(\"mouseup\", onPointerUp);\n        doc.removeEventListener(\"touchmove\", onPointerMove);\n        doc.removeEventListener(\"touchend\", onPointerUp);\n      };\n      const node = findNode(toValue$1(nodeId));\n      let isValidConnectionHandler = toValue$1(isValidConnection) || isValidConnectionProp.value || alwaysValid;\n      if (!isValidConnectionHandler && node) {\n        isValidConnectionHandler = (!isTarget ? node.isValidTargetPos : node.isValidSourcePos) || alwaysValid;\n      }\n      let closestHandle;\n      let autoPanId = 0;\n      const { x, y } = getEventPosition(event);\n      const handleType = getHandleType(toValue$1(edgeUpdaterType), clickedHandle);\n      const containerBounds = (_a = vueFlowRef.value) == null ? void 0 : _a.getBoundingClientRect();\n      if (!containerBounds || !handleType) {\n        return;\n      }\n      const fromHandleInternal = getHandle(toValue$1(nodeId), handleType, toValue$1(handleId), nodeLookup.value, connectionMode.value);\n      if (!fromHandleInternal) {\n        return;\n      }\n      let prevActiveHandle;\n      let connectionPosition = getEventPosition(event, containerBounds);\n      let autoPanStarted = false;\n      const autoPan = () => {\n        if (!autoPanOnConnect.value) {\n          return;\n        }\n        const [xMovement, yMovement] = calcAutoPan(connectionPosition, containerBounds, autoPanSpeed.value);\n        panBy({ x: xMovement, y: yMovement });\n        autoPanId = requestAnimationFrame(autoPan);\n      };\n      const fromHandle = {\n        ...fromHandleInternal,\n        nodeId: toValue$1(nodeId),\n        type: handleType,\n        position: fromHandleInternal.position\n      };\n      const fromNodeInternal = nodeLookup.value.get(toValue$1(nodeId));\n      const from = getHandlePosition(fromNodeInternal, fromHandle, Position.Left, true);\n      const newConnection = {\n        inProgress: true,\n        isValid: null,\n        from,\n        fromHandle,\n        fromPosition: fromHandle.position,\n        fromNode: fromNodeInternal,\n        to: connectionPosition,\n        toHandle: null,\n        toPosition: oppositePosition[fromHandle.position],\n        toNode: null\n      };\n      startConnection(\n        {\n          nodeId: toValue$1(nodeId),\n          id: toValue$1(handleId),\n          type: handleType,\n          position: (clickedHandle == null ? void 0 : clickedHandle.getAttribute(\"data-handlepos\")) || Position.Top,\n          ...connectionPosition\n        },\n        {\n          x: x - containerBounds.left,\n          y: y - containerBounds.top\n        }\n      );\n      emits.connectStart({ event, nodeId: toValue$1(nodeId), handleId: toValue$1(handleId), handleType });\n      let previousConnection = newConnection;\n      doc.addEventListener(\"mousemove\", onPointerMove);\n      doc.addEventListener(\"mouseup\", onPointerUp);\n      doc.addEventListener(\"touchmove\", onPointerMove);\n      doc.addEventListener(\"touchend\", onPointerUp);\n    }\n  }\n  function handleClick(event) {\n    var _a, _b;\n    if (!connectOnClick.value) {\n      return;\n    }\n    const isTarget = toValue$1(type) === \"target\";\n    if (!connectionClickStartHandle.value) {\n      emits.clickConnectStart({ event, nodeId: toValue$1(nodeId), handleId: toValue$1(handleId) });\n      startConnection(\n        {\n          nodeId: toValue$1(nodeId),\n          type: toValue$1(type),\n          id: toValue$1(handleId),\n          position: Position.Top,\n          ...getEventPosition(event)\n        },\n        void 0,\n        true\n      );\n      return;\n    }\n    let isValidConnectionHandler = toValue$1(isValidConnection) || isValidConnectionProp.value || alwaysValid;\n    const node = findNode(toValue$1(nodeId));\n    if (!isValidConnectionHandler && node) {\n      isValidConnectionHandler = (!isTarget ? node.isValidTargetPos : node.isValidSourcePos) || alwaysValid;\n    }\n    if (node && (typeof node.connectable === \"undefined\" ? nodesConnectable.value : node.connectable) === false) {\n      return;\n    }\n    const doc = getHostForElement(event.target);\n    const result = isValidHandle(\n      event,\n      {\n        handle: {\n          nodeId: toValue$1(nodeId),\n          id: toValue$1(handleId),\n          type: toValue$1(type),\n          position: Position.Top,\n          ...getEventPosition(event)\n        },\n        connectionMode: connectionMode.value,\n        fromNodeId: connectionClickStartHandle.value.nodeId,\n        fromHandleId: connectionClickStartHandle.value.id ?? null,\n        fromType: connectionClickStartHandle.value.type,\n        isValidConnection: isValidConnectionHandler,\n        doc,\n        lib: \"vue\",\n        flowId,\n        nodeLookup: nodeLookup.value\n      },\n      edges.value,\n      nodes.value,\n      findNode,\n      nodeLookup.value\n    );\n    const isOwnHandle = ((_a = result.connection) == null ? void 0 : _a.source) === ((_b = result.connection) == null ? void 0 : _b.target);\n    if (result.isValid && result.connection && !isOwnHandle) {\n      emits.connect(result.connection);\n    }\n    emits.clickConnectEnd(event);\n    endConnection(event, true);\n  }\n  return {\n    handlePointerDown,\n    handleClick\n  };\n}\nfunction useNodeId() {\n  return inject(NodeId, \"\");\n}\nfunction useNode(id2) {\n  const nodeId = id2 ?? useNodeId() ?? \"\";\n  const nodeEl = inject(NodeRef, ref(null));\n  const { findNode, edges, emits } = useVueFlow();\n  const node = findNode(nodeId);\n  if (!node) {\n    emits.error(new VueFlowError(ErrorCode.NODE_NOT_FOUND, nodeId));\n  }\n  return {\n    id: nodeId,\n    nodeEl,\n    node,\n    parentNode: computed(() => findNode(node.parentNode)),\n    connectedEdges: computed(() => getConnectedEdges([node], edges.value))\n  };\n}\nfunction createNodeHooks() {\n  return {\n    doubleClick: createExtendedEventHook(),\n    click: createExtendedEventHook(),\n    mouseEnter: createExtendedEventHook(),\n    mouseMove: createExtendedEventHook(),\n    mouseLeave: createExtendedEventHook(),\n    contextMenu: createExtendedEventHook(),\n    dragStart: createExtendedEventHook(),\n    drag: createExtendedEventHook(),\n    dragStop: createExtendedEventHook()\n  };\n}\nfunction useNodeHooks(node, emits) {\n  const nodeHooks = createNodeHooks();\n  nodeHooks.doubleClick.on((event) => {\n    var _a, _b;\n    emits.nodeDoubleClick(event);\n    (_b = (_a = node.events) == null ? void 0 : _a.doubleClick) == null ? void 0 : _b.call(_a, event);\n  });\n  nodeHooks.click.on((event) => {\n    var _a, _b;\n    emits.nodeClick(event);\n    (_b = (_a = node.events) == null ? void 0 : _a.click) == null ? void 0 : _b.call(_a, event);\n  });\n  nodeHooks.mouseEnter.on((event) => {\n    var _a, _b;\n    emits.nodeMouseEnter(event);\n    (_b = (_a = node.events) == null ? void 0 : _a.mouseEnter) == null ? void 0 : _b.call(_a, event);\n  });\n  nodeHooks.mouseMove.on((event) => {\n    var _a, _b;\n    emits.nodeMouseMove(event);\n    (_b = (_a = node.events) == null ? void 0 : _a.mouseMove) == null ? void 0 : _b.call(_a, event);\n  });\n  nodeHooks.mouseLeave.on((event) => {\n    var _a, _b;\n    emits.nodeMouseLeave(event);\n    (_b = (_a = node.events) == null ? void 0 : _a.mouseLeave) == null ? void 0 : _b.call(_a, event);\n  });\n  nodeHooks.contextMenu.on((event) => {\n    var _a, _b;\n    emits.nodeContextMenu(event);\n    (_b = (_a = node.events) == null ? void 0 : _a.contextMenu) == null ? void 0 : _b.call(_a, event);\n  });\n  nodeHooks.dragStart.on((event) => {\n    var _a, _b;\n    emits.nodeDragStart(event);\n    (_b = (_a = node.events) == null ? void 0 : _a.dragStart) == null ? void 0 : _b.call(_a, event);\n  });\n  nodeHooks.drag.on((event) => {\n    var _a, _b;\n    emits.nodeDrag(event);\n    (_b = (_a = node.events) == null ? void 0 : _a.drag) == null ? void 0 : _b.call(_a, event);\n  });\n  nodeHooks.dragStop.on((event) => {\n    var _a, _b;\n    emits.nodeDragStop(event);\n    (_b = (_a = node.events) == null ? void 0 : _a.dragStop) == null ? void 0 : _b.call(_a, event);\n  });\n  return Object.entries(nodeHooks).reduce(\n    (hooks, [key, value]) => {\n      hooks.emit[key] = value.trigger;\n      hooks.on[key] = value.on;\n      return hooks;\n    },\n    { emit: {}, on: {} }\n  );\n}\nfunction useUpdateNodePositions() {\n  const { getSelectedNodes, nodeExtent, updateNodePositions, findNode, snapGrid, snapToGrid, nodesDraggable, emits } = useVueFlow();\n  return (positionDiff, isShiftPressed = false) => {\n    const xVelo = snapToGrid.value ? snapGrid.value[0] : 5;\n    const yVelo = snapToGrid.value ? snapGrid.value[1] : 5;\n    const factor = isShiftPressed ? 4 : 1;\n    const positionDiffX = positionDiff.x * xVelo * factor;\n    const positionDiffY = positionDiff.y * yVelo * factor;\n    const nodeUpdates = [];\n    for (const node of getSelectedNodes.value) {\n      if (node.draggable || nodesDraggable && typeof node.draggable === \"undefined\") {\n        const nextPosition = { x: node.computedPosition.x + positionDiffX, y: node.computedPosition.y + positionDiffY };\n        const { computedPosition } = calcNextPosition(\n          node,\n          nextPosition,\n          emits.error,\n          nodeExtent.value,\n          node.parentNode ? findNode(node.parentNode) : void 0\n        );\n        nodeUpdates.push({\n          id: node.id,\n          position: computedPosition,\n          from: node.position,\n          distance: { x: positionDiff.x, y: positionDiff.y },\n          dimensions: node.dimensions\n        });\n      }\n    }\n    updateNodePositions(nodeUpdates, true, false);\n  };\n}\nconst DEFAULT_PADDING = 0.1;\nconst defaultEase = (t) => ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\nfunction noop() {\n  warn(\"Viewport not initialized yet.\");\n  return Promise.resolve(false);\n}\nconst initialViewportHelper = {\n  zoomIn: noop,\n  zoomOut: noop,\n  zoomTo: noop,\n  fitView: noop,\n  setCenter: noop,\n  fitBounds: noop,\n  project: (position) => position,\n  screenToFlowCoordinate: (position) => position,\n  flowToScreenCoordinate: (position) => position,\n  setViewport: noop,\n  setTransform: noop,\n  getViewport: () => ({ x: 0, y: 0, zoom: 1 }),\n  getTransform: () => ({ x: 0, y: 0, zoom: 1 }),\n  viewportInitialized: false\n};\nfunction useViewportHelper(state) {\n  function zoom2(scale, transitionOptions) {\n    return new Promise((resolve) => {\n      if (state.d3Selection && state.d3Zoom) {\n        state.d3Zoom.interpolate((transitionOptions == null ? void 0 : transitionOptions.interpolate) === \"linear\" ? interpolate$1 : interpolateZoom).scaleBy(\n          getD3Transition(state.d3Selection, transitionOptions == null ? void 0 : transitionOptions.duration, transitionOptions == null ? void 0 : transitionOptions.ease, () => {\n            resolve(true);\n          }),\n          scale\n        );\n      } else {\n        resolve(false);\n      }\n    });\n  }\n  function transformViewport(x, y, zoom22, transitionOptions) {\n    return new Promise((resolve) => {\n      var _a;\n      const { x: clampedX, y: clampedY } = clampPosition({ x: -x, y: -y }, state.translateExtent);\n      const nextTransform = identity.translate(-clampedX, -clampedY).scale(zoom22);\n      if (state.d3Selection && state.d3Zoom) {\n        (_a = state.d3Zoom) == null ? void 0 : _a.interpolate((transitionOptions == null ? void 0 : transitionOptions.interpolate) === \"linear\" ? interpolate$1 : interpolateZoom).transform(\n          getD3Transition(state.d3Selection, transitionOptions == null ? void 0 : transitionOptions.duration, transitionOptions == null ? void 0 : transitionOptions.ease, () => {\n            resolve(true);\n          }),\n          nextTransform\n        );\n      } else {\n        resolve(false);\n      }\n    });\n  }\n  return computed(() => {\n    const isInitialized = state.d3Zoom && state.d3Selection && state.dimensions.width && state.dimensions.height;\n    if (!isInitialized) {\n      return initialViewportHelper;\n    }\n    return {\n      viewportInitialized: true,\n      // todo: allow passing scale as option\n      zoomIn: (options) => {\n        return zoom2(1.2, options);\n      },\n      zoomOut: (options) => {\n        return zoom2(1 / 1.2, options);\n      },\n      zoomTo: (zoomLevel, options) => {\n        return new Promise((resolve) => {\n          if (state.d3Selection && state.d3Zoom) {\n            state.d3Zoom.interpolate((options == null ? void 0 : options.interpolate) === \"linear\" ? interpolate$1 : interpolateZoom).scaleTo(\n              getD3Transition(state.d3Selection, options == null ? void 0 : options.duration, options == null ? void 0 : options.ease, () => {\n                resolve(true);\n              }),\n              zoomLevel\n            );\n          } else {\n            resolve(false);\n          }\n        });\n      },\n      setViewport: (transform, options) => {\n        return transformViewport(transform.x, transform.y, transform.zoom, options);\n      },\n      setTransform: (transform, options) => {\n        return transformViewport(transform.x, transform.y, transform.zoom, options);\n      },\n      getViewport: () => ({\n        x: state.viewport.x,\n        y: state.viewport.y,\n        zoom: state.viewport.zoom\n      }),\n      getTransform: () => {\n        return {\n          x: state.viewport.x,\n          y: state.viewport.y,\n          zoom: state.viewport.zoom\n        };\n      },\n      fitView: (options = {\n        padding: DEFAULT_PADDING,\n        includeHiddenNodes: false,\n        duration: 0\n      }) => {\n        var _a, _b;\n        const nodesToFit = [];\n        for (const node of state.nodes) {\n          const isVisible = node.dimensions.width && node.dimensions.height && ((options == null ? void 0 : options.includeHiddenNodes) || !node.hidden);\n          if (isVisible) {\n            if (!((_a = options.nodes) == null ? void 0 : _a.length) || ((_b = options.nodes) == null ? void 0 : _b.length) && options.nodes.includes(node.id)) {\n              nodesToFit.push(node);\n            }\n          }\n        }\n        if (!nodesToFit.length) {\n          return Promise.resolve(false);\n        }\n        const bounds = getRectOfNodes(nodesToFit);\n        const { x, y, zoom: zoom22 } = getTransformForBounds(\n          bounds,\n          state.dimensions.width,\n          state.dimensions.height,\n          options.minZoom ?? state.minZoom,\n          options.maxZoom ?? state.maxZoom,\n          options.padding ?? DEFAULT_PADDING\n        );\n        return transformViewport(x, y, zoom22, options);\n      },\n      setCenter: (x, y, options) => {\n        const nextZoom = typeof (options == null ? void 0 : options.zoom) !== \"undefined\" ? options.zoom : state.maxZoom;\n        const centerX = state.dimensions.width / 2 - x * nextZoom;\n        const centerY = state.dimensions.height / 2 - y * nextZoom;\n        return transformViewport(centerX, centerY, nextZoom, options);\n      },\n      fitBounds: (bounds, options = { padding: DEFAULT_PADDING }) => {\n        const { x, y, zoom: zoom22 } = getTransformForBounds(\n          bounds,\n          state.dimensions.width,\n          state.dimensions.height,\n          state.minZoom,\n          state.maxZoom,\n          options.padding ?? DEFAULT_PADDING\n        );\n        return transformViewport(x, y, zoom22, options);\n      },\n      project: (position) => pointToRendererPoint(position, state.viewport, state.snapToGrid, state.snapGrid),\n      screenToFlowCoordinate: (position) => {\n        if (state.vueFlowRef) {\n          const { x: domX, y: domY } = state.vueFlowRef.getBoundingClientRect();\n          const correctedPosition = {\n            x: position.x - domX,\n            y: position.y - domY\n          };\n          return pointToRendererPoint(correctedPosition, state.viewport, state.snapToGrid, state.snapGrid);\n        }\n        return { x: 0, y: 0 };\n      },\n      flowToScreenCoordinate: (position) => {\n        if (state.vueFlowRef) {\n          const { x: domX, y: domY } = state.vueFlowRef.getBoundingClientRect();\n          const correctedPosition = {\n            x: position.x + domX,\n            y: position.y + domY\n          };\n          return rendererPointToPoint(correctedPosition, state.viewport);\n        }\n        return { x: 0, y: 0 };\n      }\n    };\n  });\n}\nfunction getD3Transition(selection2, duration = 0, ease = defaultEase, onEnd = () => {\n}) {\n  const hasDuration = typeof duration === \"number\" && duration > 0;\n  if (!hasDuration) {\n    onEnd();\n  }\n  return hasDuration ? selection2.transition().duration(duration).ease(ease).on(\"end\", onEnd) : selection2;\n}\nfunction useWatchProps(models, props, store) {\n  const scope = effectScope(true);\n  scope.run(() => {\n    const watchModelValue = () => {\n      scope.run(() => {\n        let pauseModel;\n        let pauseStore;\n        let immediateStore = !!(store.nodes.value.length || store.edges.value.length);\n        pauseModel = watchPausable([models.modelValue, () => {\n          var _a, _b;\n          return (_b = (_a = models.modelValue) == null ? void 0 : _a.value) == null ? void 0 : _b.length;\n        }], ([elements]) => {\n          if (elements && Array.isArray(elements)) {\n            pauseStore == null ? void 0 : pauseStore.pause();\n            store.setElements(elements);\n            if (!pauseStore && !immediateStore && elements.length) {\n              immediateStore = true;\n            } else {\n              pauseStore == null ? void 0 : pauseStore.resume();\n            }\n          }\n        });\n        pauseStore = watchPausable(\n          [store.nodes, store.edges, () => store.edges.value.length, () => store.nodes.value.length],\n          ([nodes, edges]) => {\n            var _a;\n            if (((_a = models.modelValue) == null ? void 0 : _a.value) && Array.isArray(models.modelValue.value)) {\n              pauseModel == null ? void 0 : pauseModel.pause();\n              models.modelValue.value = [...nodes, ...edges];\n              nextTick(() => {\n                pauseModel == null ? void 0 : pauseModel.resume();\n              });\n            }\n          },\n          { immediate: immediateStore }\n        );\n        onScopeDispose(() => {\n          pauseModel == null ? void 0 : pauseModel.stop();\n          pauseStore == null ? void 0 : pauseStore.stop();\n        });\n      });\n    };\n    const watchNodesValue = () => {\n      scope.run(() => {\n        let pauseModel;\n        let pauseStore;\n        let immediateStore = !!store.nodes.value.length;\n        pauseModel = watchPausable([models.nodes, () => {\n          var _a, _b;\n          return (_b = (_a = models.nodes) == null ? void 0 : _a.value) == null ? void 0 : _b.length;\n        }], ([nodes]) => {\n          if (nodes && Array.isArray(nodes)) {\n            pauseStore == null ? void 0 : pauseStore.pause();\n            store.setNodes(nodes);\n            if (!pauseStore && !immediateStore && nodes.length) {\n              immediateStore = true;\n            } else {\n              pauseStore == null ? void 0 : pauseStore.resume();\n            }\n          }\n        });\n        pauseStore = watchPausable(\n          [store.nodes, () => store.nodes.value.length],\n          ([nodes]) => {\n            var _a;\n            if (((_a = models.nodes) == null ? void 0 : _a.value) && Array.isArray(models.nodes.value)) {\n              pauseModel == null ? void 0 : pauseModel.pause();\n              models.nodes.value = [...nodes];\n              nextTick(() => {\n                pauseModel == null ? void 0 : pauseModel.resume();\n              });\n            }\n          },\n          { immediate: immediateStore }\n        );\n        onScopeDispose(() => {\n          pauseModel == null ? void 0 : pauseModel.stop();\n          pauseStore == null ? void 0 : pauseStore.stop();\n        });\n      });\n    };\n    const watchEdgesValue = () => {\n      scope.run(() => {\n        let pauseModel;\n        let pauseStore;\n        let immediateStore = !!store.edges.value.length;\n        pauseModel = watchPausable([models.edges, () => {\n          var _a, _b;\n          return (_b = (_a = models.edges) == null ? void 0 : _a.value) == null ? void 0 : _b.length;\n        }], ([edges]) => {\n          if (edges && Array.isArray(edges)) {\n            pauseStore == null ? void 0 : pauseStore.pause();\n            store.setEdges(edges);\n            if (!pauseStore && !immediateStore && edges.length) {\n              immediateStore = true;\n            } else {\n              pauseStore == null ? void 0 : pauseStore.resume();\n            }\n          }\n        });\n        pauseStore = watchPausable(\n          [store.edges, () => store.edges.value.length],\n          ([edges]) => {\n            var _a;\n            if (((_a = models.edges) == null ? void 0 : _a.value) && Array.isArray(models.edges.value)) {\n              pauseModel == null ? void 0 : pauseModel.pause();\n              models.edges.value = [...edges];\n              nextTick(() => {\n                pauseModel == null ? void 0 : pauseModel.resume();\n              });\n            }\n          },\n          { immediate: immediateStore }\n        );\n        onScopeDispose(() => {\n          pauseModel == null ? void 0 : pauseModel.stop();\n          pauseStore == null ? void 0 : pauseStore.stop();\n        });\n      });\n    };\n    const watchMaxZoom = () => {\n      scope.run(() => {\n        watch(\n          () => props.maxZoom,\n          () => {\n            if (props.maxZoom && isDef(props.maxZoom)) {\n              store.setMaxZoom(props.maxZoom);\n            }\n          },\n          {\n            immediate: true\n          }\n        );\n      });\n    };\n    const watchMinZoom = () => {\n      scope.run(() => {\n        watch(\n          () => props.minZoom,\n          () => {\n            if (props.minZoom && isDef(props.minZoom)) {\n              store.setMinZoom(props.minZoom);\n            }\n          },\n          { immediate: true }\n        );\n      });\n    };\n    const watchTranslateExtent = () => {\n      scope.run(() => {\n        watch(\n          () => props.translateExtent,\n          () => {\n            if (props.translateExtent && isDef(props.translateExtent)) {\n              store.setTranslateExtent(props.translateExtent);\n            }\n          },\n          {\n            immediate: true\n          }\n        );\n      });\n    };\n    const watchNodeExtent = () => {\n      scope.run(() => {\n        watch(\n          () => props.nodeExtent,\n          () => {\n            if (props.nodeExtent && isDef(props.nodeExtent)) {\n              store.setNodeExtent(props.nodeExtent);\n            }\n          },\n          {\n            immediate: true\n          }\n        );\n      });\n    };\n    const watchApplyDefault = () => {\n      scope.run(() => {\n        watch(\n          () => props.applyDefault,\n          () => {\n            if (isDef(props.applyDefault)) {\n              store.applyDefault.value = props.applyDefault;\n            }\n          },\n          {\n            immediate: true\n          }\n        );\n      });\n    };\n    const watchAutoConnect = () => {\n      scope.run(() => {\n        const autoConnector = async (params) => {\n          let connection = params;\n          if (typeof props.autoConnect === \"function\") {\n            connection = await props.autoConnect(params);\n          }\n          if (connection !== false) {\n            store.addEdges([connection]);\n          }\n        };\n        watch(\n          () => props.autoConnect,\n          () => {\n            if (isDef(props.autoConnect)) {\n              store.autoConnect.value = props.autoConnect;\n            }\n          },\n          { immediate: true }\n        );\n        watch(\n          store.autoConnect,\n          (autoConnectEnabled, _, onCleanup) => {\n            if (autoConnectEnabled) {\n              store.onConnect(autoConnector);\n            } else {\n              store.hooks.value.connect.off(autoConnector);\n            }\n            onCleanup(() => {\n              store.hooks.value.connect.off(autoConnector);\n            });\n          },\n          { immediate: true }\n        );\n      });\n    };\n    const watchRest = () => {\n      const skip = [\n        \"id\",\n        \"modelValue\",\n        \"translateExtent\",\n        \"nodeExtent\",\n        \"edges\",\n        \"nodes\",\n        \"maxZoom\",\n        \"minZoom\",\n        \"applyDefault\",\n        \"autoConnect\"\n      ];\n      for (const key of Object.keys(props)) {\n        const propKey = key;\n        if (!skip.includes(propKey)) {\n          const propValue = toRef(() => props[propKey]);\n          const storeRef = store[propKey];\n          if (isRef(storeRef)) {\n            scope.run(() => {\n              watch(\n                propValue,\n                (nextValue) => {\n                  if (isDef(nextValue)) {\n                    storeRef.value = nextValue;\n                  }\n                },\n                { immediate: true }\n              );\n            });\n          }\n        }\n      }\n    };\n    const runAll = () => {\n      watchModelValue();\n      watchNodesValue();\n      watchEdgesValue();\n      watchMinZoom();\n      watchMaxZoom();\n      watchTranslateExtent();\n      watchNodeExtent();\n      watchApplyDefault();\n      watchAutoConnect();\n      watchRest();\n    };\n    runAll();\n  });\n  return () => scope.stop();\n}\nfunction useZoomPanHelper(vueFlowId) {\n  const state = useVueFlow({ id: vueFlowId });\n  const viewportHelper = useViewportHelper(toReactive(state));\n  return {\n    fitView: (params) => viewportHelper.value.fitView(params),\n    zoomIn: (transitionOpts) => viewportHelper.value.zoomIn(transitionOpts),\n    zoomOut: (transitionOpts) => viewportHelper.value.zoomOut(transitionOpts),\n    zoomTo: (zoomLevel, transitionOpts) => viewportHelper.value.zoomTo(zoomLevel, transitionOpts),\n    setViewport: (params, transitionOpts) => viewportHelper.value.setViewport(params, transitionOpts),\n    setTransform: (params, transitionOpts) => viewportHelper.value.setTransform(params, transitionOpts),\n    getViewport: () => viewportHelper.value.getViewport(),\n    getTransform: () => viewportHelper.value.getTransform(),\n    setCenter: (x, y, opts) => viewportHelper.value.setCenter(x, y, opts),\n    fitBounds: (params, opts) => viewportHelper.value.fitBounds(params, opts),\n    project: (params) => viewportHelper.value.project(params)\n  };\n}\nfunction createHooks() {\n  return {\n    edgesChange: createExtendedEventHook(),\n    nodesChange: createExtendedEventHook(),\n    nodeDoubleClick: createExtendedEventHook(),\n    nodeClick: createExtendedEventHook(),\n    nodeMouseEnter: createExtendedEventHook(),\n    nodeMouseMove: createExtendedEventHook(),\n    nodeMouseLeave: createExtendedEventHook(),\n    nodeContextMenu: createExtendedEventHook(),\n    nodeDragStart: createExtendedEventHook(),\n    nodeDrag: createExtendedEventHook(),\n    nodeDragStop: createExtendedEventHook(),\n    nodesInitialized: createExtendedEventHook(),\n    miniMapNodeClick: createExtendedEventHook(),\n    miniMapNodeDoubleClick: createExtendedEventHook(),\n    miniMapNodeMouseEnter: createExtendedEventHook(),\n    miniMapNodeMouseMove: createExtendedEventHook(),\n    miniMapNodeMouseLeave: createExtendedEventHook(),\n    connect: createExtendedEventHook(),\n    connectStart: createExtendedEventHook(),\n    connectEnd: createExtendedEventHook(),\n    clickConnectStart: createExtendedEventHook(),\n    clickConnectEnd: createExtendedEventHook(),\n    paneReady: createExtendedEventHook(),\n    init: createExtendedEventHook(),\n    move: createExtendedEventHook(),\n    moveStart: createExtendedEventHook(),\n    moveEnd: createExtendedEventHook(),\n    selectionDragStart: createExtendedEventHook(),\n    selectionDrag: createExtendedEventHook(),\n    selectionDragStop: createExtendedEventHook(),\n    selectionContextMenu: createExtendedEventHook(),\n    selectionStart: createExtendedEventHook(),\n    selectionEnd: createExtendedEventHook(),\n    viewportChangeStart: createExtendedEventHook(),\n    viewportChange: createExtendedEventHook(),\n    viewportChangeEnd: createExtendedEventHook(),\n    paneScroll: createExtendedEventHook(),\n    paneClick: createExtendedEventHook(),\n    paneContextMenu: createExtendedEventHook(),\n    paneMouseEnter: createExtendedEventHook(),\n    paneMouseMove: createExtendedEventHook(),\n    paneMouseLeave: createExtendedEventHook(),\n    edgeContextMenu: createExtendedEventHook(),\n    edgeMouseEnter: createExtendedEventHook(),\n    edgeMouseMove: createExtendedEventHook(),\n    edgeMouseLeave: createExtendedEventHook(),\n    edgeDoubleClick: createExtendedEventHook(),\n    edgeClick: createExtendedEventHook(),\n    edgeUpdateStart: createExtendedEventHook(),\n    edgeUpdate: createExtendedEventHook(),\n    edgeUpdateEnd: createExtendedEventHook(),\n    updateNodeInternals: createExtendedEventHook(),\n    error: createExtendedEventHook((err) => warn(err.message))\n  };\n}\nfunction useHooks(emit, hooks) {\n  const inst = getCurrentInstance();\n  onBeforeMount(() => {\n    for (const [key, value] of Object.entries(hooks.value)) {\n      const listener = (data) => {\n        emit(key, data);\n      };\n      value.setEmitter(listener);\n      tryOnScopeDispose(value.removeEmitter);\n      value.setHasEmitListeners(() => hasVNodeListener(key));\n      tryOnScopeDispose(value.removeHasEmitListeners);\n    }\n  });\n  function hasVNodeListener(event) {\n    var _a;\n    const key = toHandlerKey(event);\n    const h2 = (_a = inst == null ? void 0 : inst.vnode.props) == null ? void 0 : _a[key];\n    return !!h2;\n  }\n}\nfunction toHandlerKey(event) {\n  const [head, ...rest] = event.split(\":\");\n  const camel = head.replace(/(?:^|-)(\\w)/g, (_, c) => c.toUpperCase());\n  return `on${camel}${rest.length ? `:${rest.join(\":\")}` : \"\"}`;\n}\nfunction useState() {\n  return {\n    vueFlowRef: null,\n    viewportRef: null,\n    nodes: [],\n    edges: [],\n    connectionLookup: /* @__PURE__ */ new Map(),\n    nodeTypes: {},\n    edgeTypes: {},\n    initialized: false,\n    dimensions: {\n      width: 0,\n      height: 0\n    },\n    viewport: { x: 0, y: 0, zoom: 1 },\n    d3Zoom: null,\n    d3Selection: null,\n    d3ZoomHandler: null,\n    minZoom: 0.5,\n    maxZoom: 2,\n    translateExtent: [\n      [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n      [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY]\n    ],\n    nodeExtent: [\n      [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n      [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY]\n    ],\n    selectionMode: SelectionMode.Full,\n    paneDragging: false,\n    preventScrolling: true,\n    zoomOnScroll: true,\n    zoomOnPinch: true,\n    zoomOnDoubleClick: true,\n    panOnScroll: false,\n    panOnScrollSpeed: 0.5,\n    panOnScrollMode: PanOnScrollMode.Free,\n    paneClickDistance: 0,\n    panOnDrag: true,\n    edgeUpdaterRadius: 10,\n    onlyRenderVisibleElements: false,\n    defaultViewport: { x: 0, y: 0, zoom: 1 },\n    nodesSelectionActive: false,\n    userSelectionActive: false,\n    userSelectionRect: null,\n    defaultMarkerColor: \"#b1b1b7\",\n    connectionLineStyle: {},\n    connectionLineType: null,\n    connectionLineOptions: {\n      type: ConnectionLineType.Bezier,\n      style: {}\n    },\n    connectionMode: ConnectionMode.Loose,\n    connectionStartHandle: null,\n    connectionEndHandle: null,\n    connectionClickStartHandle: null,\n    connectionPosition: { x: Number.NaN, y: Number.NaN },\n    connectionRadius: 20,\n    connectOnClick: true,\n    connectionStatus: null,\n    isValidConnection: null,\n    snapGrid: [15, 15],\n    snapToGrid: false,\n    edgesUpdatable: false,\n    edgesFocusable: true,\n    nodesFocusable: true,\n    nodesConnectable: true,\n    nodesDraggable: true,\n    nodeDragThreshold: 1,\n    elementsSelectable: true,\n    selectNodesOnDrag: true,\n    multiSelectionActive: false,\n    selectionKeyCode: \"Shift\",\n    multiSelectionKeyCode: isMacOs() ? \"Meta\" : \"Control\",\n    zoomActivationKeyCode: isMacOs() ? \"Meta\" : \"Control\",\n    deleteKeyCode: \"Backspace\",\n    panActivationKeyCode: \"Space\",\n    hooks: createHooks(),\n    applyDefault: true,\n    autoConnect: false,\n    fitViewOnInit: false,\n    fitViewOnInitDone: false,\n    noDragClassName: \"nodrag\",\n    noWheelClassName: \"nowheel\",\n    noPanClassName: \"nopan\",\n    defaultEdgeOptions: void 0,\n    elevateEdgesOnSelect: false,\n    elevateNodesOnSelect: true,\n    autoPanOnNodeDrag: true,\n    autoPanOnConnect: true,\n    autoPanSpeed: 15,\n    disableKeyboardA11y: false,\n    ariaLiveMessage: \"\"\n  };\n}\nconst storeOptionsToSkip = [\n  \"id\",\n  \"vueFlowRef\",\n  \"viewportRef\",\n  \"initialized\",\n  \"modelValue\",\n  \"nodes\",\n  \"edges\",\n  \"maxZoom\",\n  \"minZoom\",\n  \"translateExtent\",\n  \"hooks\",\n  \"defaultEdgeOptions\"\n];\nfunction useActions(state, nodeLookup, edgeLookup) {\n  const viewportHelper = useViewportHelper(state);\n  const updateNodeInternals = (ids) => {\n    const updateIds = ids ?? [];\n    state.hooks.updateNodeInternals.trigger(updateIds);\n  };\n  const getIncomers$1 = (nodeOrId) => {\n    return getIncomers(nodeOrId, state.nodes, state.edges);\n  };\n  const getOutgoers$1 = (nodeOrId) => {\n    return getOutgoers(nodeOrId, state.nodes, state.edges);\n  };\n  const getConnectedEdges$1 = (nodesOrId) => {\n    return getConnectedEdges(nodesOrId, state.edges);\n  };\n  const getHandleConnections = ({ id: id2, type, nodeId }) => {\n    var _a;\n    const handleSuffix = id2 ? `-${type}-${id2}` : `-${type}`;\n    return Array.from(((_a = state.connectionLookup.get(`${nodeId}${handleSuffix}`)) == null ? void 0 : _a.values()) ?? []);\n  };\n  const findNode = (id2) => {\n    if (!id2) {\n      return;\n    }\n    return nodeLookup.value.get(id2);\n  };\n  const findEdge = (id2) => {\n    if (!id2) {\n      return;\n    }\n    return edgeLookup.value.get(id2);\n  };\n  const updateNodePositions = (dragItems, changed, dragging) => {\n    var _a, _b;\n    const changes = [];\n    for (const node of dragItems) {\n      const change = {\n        id: node.id,\n        type: \"position\",\n        dragging,\n        from: node.from\n      };\n      if (changed) {\n        change.position = node.position;\n        if (node.parentNode) {\n          const parentNode = findNode(node.parentNode);\n          change.position = {\n            x: change.position.x - (((_a = parentNode == null ? void 0 : parentNode.computedPosition) == null ? void 0 : _a.x) ?? 0),\n            y: change.position.y - (((_b = parentNode == null ? void 0 : parentNode.computedPosition) == null ? void 0 : _b.y) ?? 0)\n          };\n        }\n      }\n      changes.push(change);\n    }\n    if (changes == null ? void 0 : changes.length) {\n      state.hooks.nodesChange.trigger(changes);\n    }\n  };\n  const updateNodeDimensions = (updates) => {\n    if (!state.vueFlowRef) {\n      return;\n    }\n    const viewportNode = state.vueFlowRef.querySelector(\".vue-flow__transformationpane\");\n    if (!viewportNode) {\n      return;\n    }\n    const style = window.getComputedStyle(viewportNode);\n    const { m22: zoom2 } = new window.DOMMatrixReadOnly(style.transform);\n    const changes = [];\n    for (const element of updates) {\n      const update = element;\n      const node = findNode(update.id);\n      if (node) {\n        const dimensions = getDimensions(update.nodeElement);\n        const doUpdate = !!(dimensions.width && dimensions.height && (node.dimensions.width !== dimensions.width || node.dimensions.height !== dimensions.height || update.forceUpdate));\n        if (doUpdate) {\n          const nodeBounds = update.nodeElement.getBoundingClientRect();\n          node.dimensions = dimensions;\n          node.handleBounds.source = getHandleBounds(\"source\", update.nodeElement, nodeBounds, zoom2, node.id);\n          node.handleBounds.target = getHandleBounds(\"target\", update.nodeElement, nodeBounds, zoom2, node.id);\n          changes.push({\n            id: node.id,\n            type: \"dimensions\",\n            dimensions\n          });\n        }\n      }\n    }\n    if (!state.fitViewOnInitDone && state.fitViewOnInit) {\n      viewportHelper.value.fitView().then(() => {\n        state.fitViewOnInitDone = true;\n      });\n    }\n    if (changes.length) {\n      state.hooks.nodesChange.trigger(changes);\n    }\n  };\n  const elementSelectionHandler = (elements, selected) => {\n    const nodeIds = /* @__PURE__ */ new Set();\n    const edgeIds = /* @__PURE__ */ new Set();\n    for (const element of elements) {\n      if (isNode(element)) {\n        nodeIds.add(element.id);\n      } else if (isEdge(element)) {\n        edgeIds.add(element.id);\n      }\n    }\n    const changedNodes = getSelectionChanges(nodeLookup.value, nodeIds, true);\n    const changedEdges = getSelectionChanges(edgeLookup.value, edgeIds);\n    if (state.multiSelectionActive) {\n      for (const nodeId of nodeIds) {\n        changedNodes.push(createSelectionChange(nodeId, selected));\n      }\n      for (const edgeId of edgeIds) {\n        changedEdges.push(createSelectionChange(edgeId, selected));\n      }\n    }\n    if (changedNodes.length) {\n      state.hooks.nodesChange.trigger(changedNodes);\n    }\n    if (changedEdges.length) {\n      state.hooks.edgesChange.trigger(changedEdges);\n    }\n  };\n  const addSelectedNodes = (nodes) => {\n    if (state.multiSelectionActive) {\n      const nodeChanges = nodes.map((node) => createSelectionChange(node.id, true));\n      state.hooks.nodesChange.trigger(nodeChanges);\n      return;\n    }\n    state.hooks.nodesChange.trigger(getSelectionChanges(nodeLookup.value, new Set(nodes.map((n) => n.id)), true));\n    state.hooks.edgesChange.trigger(getSelectionChanges(edgeLookup.value));\n  };\n  const addSelectedEdges = (edges) => {\n    if (state.multiSelectionActive) {\n      const changedEdges = edges.map((edge) => createSelectionChange(edge.id, true));\n      state.hooks.edgesChange.trigger(changedEdges);\n      return;\n    }\n    state.hooks.edgesChange.trigger(getSelectionChanges(edgeLookup.value, new Set(edges.map((e) => e.id))));\n    state.hooks.nodesChange.trigger(getSelectionChanges(nodeLookup.value, /* @__PURE__ */ new Set(), true));\n  };\n  const addSelectedElements = (elements) => {\n    elementSelectionHandler(elements, true);\n  };\n  const removeSelectedNodes = (nodes) => {\n    const nodesToUnselect = nodes || state.nodes;\n    const nodeChanges = nodesToUnselect.map((n) => {\n      n.selected = false;\n      return createSelectionChange(n.id, false);\n    });\n    state.hooks.nodesChange.trigger(nodeChanges);\n  };\n  const removeSelectedEdges = (edges) => {\n    const edgesToUnselect = edges || state.edges;\n    const edgeChanges = edgesToUnselect.map((e) => {\n      e.selected = false;\n      return createSelectionChange(e.id, false);\n    });\n    state.hooks.edgesChange.trigger(edgeChanges);\n  };\n  const removeSelectedElements = (elements) => {\n    if (!elements || !elements.length) {\n      return elementSelectionHandler([], false);\n    }\n    const changes = elements.reduce(\n      (changes2, curr) => {\n        const selectionChange = createSelectionChange(curr.id, false);\n        if (isNode(curr)) {\n          changes2.nodes.push(selectionChange);\n        } else {\n          changes2.edges.push(selectionChange);\n        }\n        return changes2;\n      },\n      { nodes: [], edges: [] }\n    );\n    if (changes.nodes.length) {\n      state.hooks.nodesChange.trigger(changes.nodes);\n    }\n    if (changes.edges.length) {\n      state.hooks.edgesChange.trigger(changes.edges);\n    }\n  };\n  const setMinZoom = (minZoom) => {\n    var _a;\n    (_a = state.d3Zoom) == null ? void 0 : _a.scaleExtent([minZoom, state.maxZoom]);\n    state.minZoom = minZoom;\n  };\n  const setMaxZoom = (maxZoom) => {\n    var _a;\n    (_a = state.d3Zoom) == null ? void 0 : _a.scaleExtent([state.minZoom, maxZoom]);\n    state.maxZoom = maxZoom;\n  };\n  const setTranslateExtent = (translateExtent) => {\n    var _a;\n    (_a = state.d3Zoom) == null ? void 0 : _a.translateExtent(translateExtent);\n    state.translateExtent = translateExtent;\n  };\n  const setNodeExtent = (nodeExtent) => {\n    state.nodeExtent = nodeExtent;\n    updateNodeInternals();\n  };\n  const setPaneClickDistance = (clickDistance) => {\n    var _a;\n    (_a = state.d3Zoom) == null ? void 0 : _a.clickDistance(clickDistance);\n  };\n  const setInteractive = (isInteractive) => {\n    state.nodesDraggable = isInteractive;\n    state.nodesConnectable = isInteractive;\n    state.elementsSelectable = isInteractive;\n  };\n  const setNodes = (nodes) => {\n    const nextNodes = nodes instanceof Function ? nodes(state.nodes) : nodes;\n    if (!state.initialized && !nextNodes.length) {\n      return;\n    }\n    state.nodes = createGraphNodes(nextNodes, findNode, state.hooks.error.trigger);\n  };\n  const setEdges = (edges) => {\n    const nextEdges = edges instanceof Function ? edges(state.edges) : edges;\n    if (!state.initialized && !nextEdges.length) {\n      return;\n    }\n    const validEdges = createGraphEdges(\n      nextEdges,\n      state.isValidConnection,\n      findNode,\n      findEdge,\n      state.hooks.error.trigger,\n      state.defaultEdgeOptions,\n      state.nodes,\n      state.edges\n    );\n    updateConnectionLookup(state.connectionLookup, edgeLookup.value, validEdges);\n    state.edges = validEdges;\n  };\n  const setElements = (elements) => {\n    const nextElements = elements instanceof Function ? elements([...state.nodes, ...state.edges]) : elements;\n    if (!state.initialized && !nextElements.length) {\n      return;\n    }\n    setNodes(nextElements.filter(isNode));\n    setEdges(nextElements.filter(isEdge));\n  };\n  const addNodes = (nodes) => {\n    let nextNodes = nodes instanceof Function ? nodes(state.nodes) : nodes;\n    nextNodes = Array.isArray(nextNodes) ? nextNodes : [nextNodes];\n    const graphNodes = createGraphNodes(nextNodes, findNode, state.hooks.error.trigger);\n    const changes = [];\n    for (const node of graphNodes) {\n      changes.push(createAdditionChange(node));\n    }\n    if (changes.length) {\n      state.hooks.nodesChange.trigger(changes);\n    }\n  };\n  const addEdges = (params) => {\n    let nextEdges = params instanceof Function ? params(state.edges) : params;\n    nextEdges = Array.isArray(nextEdges) ? nextEdges : [nextEdges];\n    const validEdges = createGraphEdges(\n      nextEdges,\n      state.isValidConnection,\n      findNode,\n      findEdge,\n      state.hooks.error.trigger,\n      state.defaultEdgeOptions,\n      state.nodes,\n      state.edges\n    );\n    const changes = [];\n    for (const edge of validEdges) {\n      changes.push(createAdditionChange(edge));\n    }\n    if (changes.length) {\n      state.hooks.edgesChange.trigger(changes);\n    }\n  };\n  const removeNodes = (nodes, removeConnectedEdges = true, removeChildren = false) => {\n    const nextNodes = nodes instanceof Function ? nodes(state.nodes) : nodes;\n    const nodesToRemove = Array.isArray(nextNodes) ? nextNodes : [nextNodes];\n    const nodeChanges = [];\n    const edgeChanges = [];\n    function createEdgeRemovalChanges(nodes2) {\n      const connectedEdges = getConnectedEdges$1(nodes2);\n      for (const edge of connectedEdges) {\n        if (isDef(edge.deletable) ? edge.deletable : true) {\n          edgeChanges.push(createEdgeRemoveChange(edge.id, edge.source, edge.target, edge.sourceHandle, edge.targetHandle));\n        }\n      }\n    }\n    function createChildrenRemovalChanges(id2) {\n      const children2 = [];\n      for (const node of state.nodes) {\n        if (node.parentNode === id2) {\n          children2.push(node);\n        }\n      }\n      if (children2.length) {\n        for (const child of children2) {\n          nodeChanges.push(createNodeRemoveChange(child.id));\n        }\n        if (removeConnectedEdges) {\n          createEdgeRemovalChanges(children2);\n        }\n        for (const child of children2) {\n          createChildrenRemovalChanges(child.id);\n        }\n      }\n    }\n    for (const item of nodesToRemove) {\n      const currNode = typeof item === \"string\" ? findNode(item) : item;\n      if (!currNode) {\n        continue;\n      }\n      if (isDef(currNode.deletable) && !currNode.deletable) {\n        continue;\n      }\n      nodeChanges.push(createNodeRemoveChange(currNode.id));\n      if (removeConnectedEdges) {\n        createEdgeRemovalChanges([currNode]);\n      }\n      if (removeChildren) {\n        createChildrenRemovalChanges(currNode.id);\n      }\n    }\n    if (edgeChanges.length) {\n      state.hooks.edgesChange.trigger(edgeChanges);\n    }\n    if (nodeChanges.length) {\n      state.hooks.nodesChange.trigger(nodeChanges);\n    }\n  };\n  const removeEdges = (edges) => {\n    const nextEdges = edges instanceof Function ? edges(state.edges) : edges;\n    const edgesToRemove = Array.isArray(nextEdges) ? nextEdges : [nextEdges];\n    const changes = [];\n    for (const item of edgesToRemove) {\n      const currEdge = typeof item === \"string\" ? findEdge(item) : item;\n      if (!currEdge) {\n        continue;\n      }\n      if (isDef(currEdge.deletable) && !currEdge.deletable) {\n        continue;\n      }\n      changes.push(\n        createEdgeRemoveChange(\n          typeof item === \"string\" ? item : item.id,\n          currEdge.source,\n          currEdge.target,\n          currEdge.sourceHandle,\n          currEdge.targetHandle\n        )\n      );\n    }\n    state.hooks.edgesChange.trigger(changes);\n  };\n  const updateEdge2 = (oldEdge, newConnection, shouldReplaceId = true) => {\n    const prevEdge = findEdge(oldEdge.id);\n    if (!prevEdge) {\n      return false;\n    }\n    const prevEdgeIndex = state.edges.indexOf(prevEdge);\n    const newEdge = updateEdgeAction(oldEdge, newConnection, prevEdge, shouldReplaceId, state.hooks.error.trigger);\n    if (newEdge) {\n      const [validEdge] = createGraphEdges(\n        [newEdge],\n        state.isValidConnection,\n        findNode,\n        findEdge,\n        state.hooks.error.trigger,\n        state.defaultEdgeOptions,\n        state.nodes,\n        state.edges\n      );\n      state.edges = state.edges.map((edge, index) => index === prevEdgeIndex ? validEdge : edge);\n      updateConnectionLookup(state.connectionLookup, edgeLookup.value, [validEdge]);\n      return validEdge;\n    }\n    return false;\n  };\n  const updateEdgeData = (id2, dataUpdate, options = { replace: false }) => {\n    const edge = findEdge(id2);\n    if (!edge) {\n      return;\n    }\n    const nextData = typeof dataUpdate === \"function\" ? dataUpdate(edge) : dataUpdate;\n    edge.data = options.replace ? nextData : { ...edge.data, ...nextData };\n  };\n  const applyNodeChanges2 = (changes) => {\n    return applyChanges(changes, state.nodes);\n  };\n  const applyEdgeChanges2 = (changes) => {\n    const changedEdges = applyChanges(changes, state.edges);\n    updateConnectionLookup(state.connectionLookup, edgeLookup.value, changedEdges);\n    return changedEdges;\n  };\n  const updateNode = (id2, nodeUpdate, options = { replace: false }) => {\n    const node = findNode(id2);\n    if (!node) {\n      return;\n    }\n    const nextNode = typeof nodeUpdate === \"function\" ? nodeUpdate(node) : nodeUpdate;\n    if (options.replace) {\n      state.nodes.splice(state.nodes.indexOf(node), 1, nextNode);\n    } else {\n      Object.assign(node, nextNode);\n    }\n  };\n  const updateNodeData = (id2, dataUpdate, options = { replace: false }) => {\n    const node = findNode(id2);\n    if (!node) {\n      return;\n    }\n    const nextData = typeof dataUpdate === \"function\" ? dataUpdate(node) : dataUpdate;\n    node.data = options.replace ? nextData : { ...node.data, ...nextData };\n  };\n  const startConnection = (startHandle, position, isClick = false) => {\n    if (isClick) {\n      state.connectionClickStartHandle = startHandle;\n    } else {\n      state.connectionStartHandle = startHandle;\n    }\n    state.connectionEndHandle = null;\n    state.connectionStatus = null;\n    if (position) {\n      state.connectionPosition = position;\n    }\n  };\n  const updateConnection = (position, result = null, status = null) => {\n    if (state.connectionStartHandle) {\n      state.connectionPosition = position;\n      state.connectionEndHandle = result;\n      state.connectionStatus = status;\n    }\n  };\n  const endConnection = (event, isClick) => {\n    state.connectionPosition = { x: Number.NaN, y: Number.NaN };\n    state.connectionEndHandle = null;\n    state.connectionStatus = null;\n    if (isClick) {\n      state.connectionClickStartHandle = null;\n    } else {\n      state.connectionStartHandle = null;\n    }\n  };\n  const getNodeRect = (nodeOrRect) => {\n    const isRectObj = isRect(nodeOrRect);\n    const node = isRectObj ? null : isGraphNode(nodeOrRect) ? nodeOrRect : findNode(nodeOrRect.id);\n    if (!isRectObj && !node) {\n      return [null, null, isRectObj];\n    }\n    const nodeRect = isRectObj ? nodeOrRect : nodeToRect(node);\n    return [nodeRect, node, isRectObj];\n  };\n  const getIntersectingNodes = (nodeOrRect, partially = true, nodes = state.nodes) => {\n    const [nodeRect, node, isRect2] = getNodeRect(nodeOrRect);\n    if (!nodeRect) {\n      return [];\n    }\n    const intersections = [];\n    for (const n of nodes || state.nodes) {\n      if (!isRect2 && (n.id === node.id || !n.computedPosition)) {\n        continue;\n      }\n      const currNodeRect = nodeToRect(n);\n      const overlappingArea = getOverlappingArea(currNodeRect, nodeRect);\n      const partiallyVisible = partially && overlappingArea > 0;\n      if (partiallyVisible || overlappingArea >= currNodeRect.width * currNodeRect.height || overlappingArea >= Number(nodeRect.width) * Number(nodeRect.height)) {\n        intersections.push(n);\n      }\n    }\n    return intersections;\n  };\n  const isNodeIntersecting = (nodeOrRect, area, partially = true) => {\n    const [nodeRect] = getNodeRect(nodeOrRect);\n    if (!nodeRect) {\n      return false;\n    }\n    const overlappingArea = getOverlappingArea(nodeRect, area);\n    const partiallyVisible = partially && overlappingArea > 0;\n    return partiallyVisible || overlappingArea >= Number(nodeRect.width) * Number(nodeRect.height);\n  };\n  const panBy = (delta) => {\n    const { viewport, dimensions, d3Zoom, d3Selection, translateExtent } = state;\n    if (!d3Zoom || !d3Selection || !delta.x && !delta.y) {\n      return false;\n    }\n    const nextTransform = identity.translate(viewport.x + delta.x, viewport.y + delta.y).scale(viewport.zoom);\n    const extent = [\n      [0, 0],\n      [dimensions.width, dimensions.height]\n    ];\n    const constrainedTransform = d3Zoom.constrain()(nextTransform, extent, translateExtent);\n    const transformChanged = state.viewport.x !== constrainedTransform.x || state.viewport.y !== constrainedTransform.y || state.viewport.zoom !== constrainedTransform.k;\n    d3Zoom.transform(d3Selection, constrainedTransform);\n    return transformChanged;\n  };\n  const setState = (options) => {\n    const opts = options instanceof Function ? options(state) : options;\n    const exclude = [\n      \"d3Zoom\",\n      \"d3Selection\",\n      \"d3ZoomHandler\",\n      \"viewportRef\",\n      \"vueFlowRef\",\n      \"dimensions\",\n      \"hooks\"\n    ];\n    if (isDef(opts.defaultEdgeOptions)) {\n      state.defaultEdgeOptions = opts.defaultEdgeOptions;\n    }\n    const elements = opts.modelValue || opts.nodes || opts.edges ? [] : void 0;\n    if (elements) {\n      if (opts.modelValue) {\n        elements.push(...opts.modelValue);\n      }\n      if (opts.nodes) {\n        elements.push(...opts.nodes);\n      }\n      if (opts.edges) {\n        elements.push(...opts.edges);\n      }\n      setElements(elements);\n    }\n    const setSkippedOptions = () => {\n      if (isDef(opts.maxZoom)) {\n        setMaxZoom(opts.maxZoom);\n      }\n      if (isDef(opts.minZoom)) {\n        setMinZoom(opts.minZoom);\n      }\n      if (isDef(opts.translateExtent)) {\n        setTranslateExtent(opts.translateExtent);\n      }\n    };\n    for (const o of Object.keys(opts)) {\n      const key = o;\n      const option = opts[key];\n      if (![...storeOptionsToSkip, ...exclude].includes(key) && isDef(option)) {\n        state[key] = option;\n      }\n    }\n    until(() => state.d3Zoom).not.toBeNull().then(setSkippedOptions);\n    if (!state.initialized) {\n      state.initialized = true;\n    }\n  };\n  const toObject = () => {\n    const nodes = [];\n    const edges = [];\n    for (const node of state.nodes) {\n      const {\n        computedPosition: _,\n        handleBounds: __,\n        selected: ___,\n        dimensions: ____,\n        isParent: _____,\n        resizing: ______,\n        dragging: _______,\n        events: _________,\n        ...rest\n      } = node;\n      nodes.push(rest);\n    }\n    for (const edge of state.edges) {\n      const { selected: _, sourceNode: __, targetNode: ___, events: ____, ...rest } = edge;\n      edges.push(rest);\n    }\n    return JSON.parse(\n      JSON.stringify({\n        nodes,\n        edges,\n        position: [state.viewport.x, state.viewport.y],\n        zoom: state.viewport.zoom,\n        viewport: state.viewport\n      })\n    );\n  };\n  const fromObject = (obj) => {\n    return new Promise((resolve) => {\n      const { nodes, edges, position, zoom: zoom2, viewport } = obj;\n      if (nodes) {\n        setNodes(nodes);\n      }\n      if (edges) {\n        setEdges(edges);\n      }\n      if ((viewport == null ? void 0 : viewport.x) && (viewport == null ? void 0 : viewport.y) || position) {\n        const x = (viewport == null ? void 0 : viewport.x) || position[0];\n        const y = (viewport == null ? void 0 : viewport.y) || position[1];\n        const nextZoom = (viewport == null ? void 0 : viewport.zoom) || zoom2 || state.viewport.zoom;\n        return until(() => viewportHelper.value.viewportInitialized).toBe(true).then(() => {\n          viewportHelper.value.setViewport({\n            x,\n            y,\n            zoom: nextZoom\n          }).then(() => {\n            resolve(true);\n          });\n        });\n      } else {\n        resolve(true);\n      }\n    });\n  };\n  const $reset = () => {\n    const resetState = useState();\n    state.edges = [];\n    state.nodes = [];\n    if (state.d3Zoom && state.d3Selection) {\n      const updatedTransform = identity.translate(resetState.defaultViewport.x ?? 0, resetState.defaultViewport.y ?? 0).scale(clamp(resetState.defaultViewport.zoom ?? 1, resetState.minZoom, resetState.maxZoom));\n      const bbox = state.viewportRef.getBoundingClientRect();\n      const extent = [\n        [0, 0],\n        [bbox.width, bbox.height]\n      ];\n      const constrainedTransform = state.d3Zoom.constrain()(updatedTransform, extent, resetState.translateExtent);\n      state.d3Zoom.transform(state.d3Selection, constrainedTransform);\n    }\n    setState(resetState);\n  };\n  return {\n    updateNodePositions,\n    updateNodeDimensions,\n    setElements,\n    setNodes,\n    setEdges,\n    addNodes,\n    addEdges,\n    removeNodes,\n    removeEdges,\n    findNode,\n    findEdge,\n    updateEdge: updateEdge2,\n    updateEdgeData,\n    updateNode,\n    updateNodeData,\n    applyEdgeChanges: applyEdgeChanges2,\n    applyNodeChanges: applyNodeChanges2,\n    addSelectedElements,\n    addSelectedNodes,\n    addSelectedEdges,\n    setMinZoom,\n    setMaxZoom,\n    setTranslateExtent,\n    setNodeExtent,\n    setPaneClickDistance,\n    removeSelectedElements,\n    removeSelectedNodes,\n    removeSelectedEdges,\n    startConnection,\n    updateConnection,\n    endConnection,\n    setInteractive,\n    setState,\n    getIntersectingNodes,\n    getIncomers: getIncomers$1,\n    getOutgoers: getOutgoers$1,\n    getConnectedEdges: getConnectedEdges$1,\n    getHandleConnections,\n    isNodeIntersecting,\n    panBy,\n    fitView: (params) => viewportHelper.value.fitView(params),\n    zoomIn: (transitionOpts) => viewportHelper.value.zoomIn(transitionOpts),\n    zoomOut: (transitionOpts) => viewportHelper.value.zoomOut(transitionOpts),\n    zoomTo: (zoomLevel, transitionOpts) => viewportHelper.value.zoomTo(zoomLevel, transitionOpts),\n    setViewport: (params, transitionOpts) => viewportHelper.value.setViewport(params, transitionOpts),\n    setTransform: (params, transitionOpts) => viewportHelper.value.setTransform(params, transitionOpts),\n    getViewport: () => viewportHelper.value.getViewport(),\n    getTransform: () => viewportHelper.value.getTransform(),\n    setCenter: (x, y, opts) => viewportHelper.value.setCenter(x, y, opts),\n    fitBounds: (params, opts) => viewportHelper.value.fitBounds(params, opts),\n    project: (params) => viewportHelper.value.project(params),\n    screenToFlowCoordinate: (params) => viewportHelper.value.screenToFlowCoordinate(params),\n    flowToScreenCoordinate: (params) => viewportHelper.value.flowToScreenCoordinate(params),\n    toObject,\n    fromObject,\n    updateNodeInternals,\n    viewportHelper,\n    $reset,\n    $destroy: () => {\n    }\n  };\n}\nconst _hoisted_1$9 = [\"data-id\", \"data-handleid\", \"data-nodeid\", \"data-handlepos\"];\nconst __default__$f = {\n  name: \"Handle\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$f = /* @__PURE__ */ defineComponent({\n  ...__default__$f,\n  props: {\n    id: { default: null },\n    type: {},\n    position: { default: () => Position.Top },\n    isValidConnection: { type: Function },\n    connectable: { type: [Boolean, Number, String, Function], default: void 0 },\n    connectableStart: { type: Boolean, default: true },\n    connectableEnd: { type: Boolean, default: true }\n  },\n  setup(__props, { expose: __expose }) {\n    const props = createPropsRestProxy(__props, [\"position\", \"connectable\", \"connectableStart\", \"connectableEnd\", \"id\"]);\n    const type = toRef(() => props.type ?? \"source\");\n    const isValidConnection = toRef(() => props.isValidConnection ?? null);\n    const {\n      id: flowId,\n      connectionStartHandle,\n      connectionClickStartHandle,\n      connectionEndHandle,\n      vueFlowRef,\n      nodesConnectable,\n      noDragClassName,\n      noPanClassName\n    } = useVueFlow();\n    const { id: nodeId, node, nodeEl, connectedEdges } = useNode();\n    const handle = ref();\n    const isConnectableStart = toRef(() => typeof __props.connectableStart !== \"undefined\" ? __props.connectableStart : true);\n    const isConnectableEnd = toRef(() => typeof __props.connectableEnd !== \"undefined\" ? __props.connectableEnd : true);\n    const isConnecting = toRef(\n      () => {\n        var _a, _b, _c, _d, _e, _f;\n        return ((_a = connectionStartHandle.value) == null ? void 0 : _a.nodeId) === nodeId && ((_b = connectionStartHandle.value) == null ? void 0 : _b.id) === __props.id && ((_c = connectionStartHandle.value) == null ? void 0 : _c.type) === type.value || ((_d = connectionEndHandle.value) == null ? void 0 : _d.nodeId) === nodeId && ((_e = connectionEndHandle.value) == null ? void 0 : _e.id) === __props.id && ((_f = connectionEndHandle.value) == null ? void 0 : _f.type) === type.value;\n      }\n    );\n    const isClickConnecting = toRef(\n      () => {\n        var _a, _b, _c;\n        return ((_a = connectionClickStartHandle.value) == null ? void 0 : _a.nodeId) === nodeId && ((_b = connectionClickStartHandle.value) == null ? void 0 : _b.id) === __props.id && ((_c = connectionClickStartHandle.value) == null ? void 0 : _c.type) === type.value;\n      }\n    );\n    const { handlePointerDown, handleClick } = useHandle({\n      nodeId,\n      handleId: __props.id,\n      isValidConnection,\n      type\n    });\n    const isConnectable = computed(() => {\n      if (typeof __props.connectable === \"string\" && __props.connectable === \"single\") {\n        return !connectedEdges.value.some((edge) => {\n          const id2 = edge[`${type.value}Handle`];\n          if (edge[type.value] !== nodeId) {\n            return false;\n          }\n          return id2 ? id2 === __props.id : true;\n        });\n      }\n      if (typeof __props.connectable === \"number\") {\n        return connectedEdges.value.filter((edge) => {\n          const id2 = edge[`${type.value}Handle`];\n          if (edge[type.value] !== nodeId) {\n            return false;\n          }\n          return id2 ? id2 === __props.id : true;\n        }).length < __props.connectable;\n      }\n      if (typeof __props.connectable === \"function\") {\n        return __props.connectable(node, connectedEdges.value);\n      }\n      return isDef(__props.connectable) ? __props.connectable : nodesConnectable.value;\n    });\n    onMounted(() => {\n      var _a;\n      if (!node.dimensions.width || !node.dimensions.height) {\n        return;\n      }\n      const existingBounds = (_a = node.handleBounds[type.value]) == null ? void 0 : _a.find((b) => b.id === __props.id);\n      if (!vueFlowRef.value || existingBounds) {\n        return;\n      }\n      const viewportNode = vueFlowRef.value.querySelector(\".vue-flow__transformationpane\");\n      if (!nodeEl.value || !handle.value || !viewportNode || !__props.id) {\n        return;\n      }\n      const nodeBounds = nodeEl.value.getBoundingClientRect();\n      const handleBounds = handle.value.getBoundingClientRect();\n      const style = window.getComputedStyle(viewportNode);\n      const { m22: zoom2 } = new window.DOMMatrixReadOnly(style.transform);\n      const nextBounds = {\n        id: __props.id,\n        position: __props.position,\n        x: (handleBounds.left - nodeBounds.left) / zoom2,\n        y: (handleBounds.top - nodeBounds.top) / zoom2,\n        type: type.value,\n        nodeId,\n        ...getDimensions(handle.value)\n      };\n      node.handleBounds[type.value] = [...node.handleBounds[type.value] ?? [], nextBounds];\n    });\n    function onPointerDown(event) {\n      const isMouseTriggered = isMouseEvent(event);\n      if (isConnectable.value && isConnectableStart.value && (isMouseTriggered && event.button === 0 || !isMouseTriggered)) {\n        handlePointerDown(event);\n      }\n    }\n    function onClick(event) {\n      if (!nodeId || !connectionClickStartHandle.value && !isConnectableStart.value) {\n        return;\n      }\n      if (isConnectable.value) {\n        handleClick(event);\n      }\n    }\n    __expose({\n      handleClick,\n      handlePointerDown,\n      onClick,\n      onPointerDown\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        ref_key: \"handle\",\n        ref: handle,\n        \"data-id\": `${unref(flowId)}-${unref(nodeId)}-${__props.id}-${type.value}`,\n        \"data-handleid\": __props.id,\n        \"data-nodeid\": unref(nodeId),\n        \"data-handlepos\": _ctx.position,\n        class: normalizeClass([\"vue-flow__handle\", [\n          `vue-flow__handle-${_ctx.position}`,\n          `vue-flow__handle-${__props.id}`,\n          unref(noDragClassName),\n          unref(noPanClassName),\n          type.value,\n          {\n            connectable: isConnectable.value,\n            connecting: isClickConnecting.value,\n            connectablestart: isConnectableStart.value,\n            connectableend: isConnectableEnd.value,\n            connectionindicator: isConnectable.value && (isConnectableStart.value && !isConnecting.value || isConnectableEnd.value && isConnecting.value)\n          }\n        ]]),\n        onMousedown: onPointerDown,\n        onTouchstartPassive: onPointerDown,\n        onClick\n      }, [\n        renderSlot(_ctx.$slots, \"default\", { id: _ctx.id })\n      ], 42, _hoisted_1$9);\n    };\n  }\n});\nconst DefaultNode = function({\n  sourcePosition = Position.Bottom,\n  targetPosition = Position.Top,\n  label: _label,\n  connectable = true,\n  isValidTargetPos,\n  isValidSourcePos,\n  data\n}) {\n  const label = data.label ?? _label;\n  return [\n    h(_sfc_main$f, { type: \"target\", position: targetPosition, connectable, isValidConnection: isValidTargetPos }),\n    typeof label !== \"string\" && label ? h(label) : h(Fragment, [label]),\n    h(_sfc_main$f, { type: \"source\", position: sourcePosition, connectable, isValidConnection: isValidSourcePos })\n  ];\n};\nDefaultNode.props = [\"sourcePosition\", \"targetPosition\", \"label\", \"isValidTargetPos\", \"isValidSourcePos\", \"connectable\", \"data\"];\nDefaultNode.inheritAttrs = false;\nDefaultNode.compatConfig = { MODE: 3 };\nconst DefaultNode$1 = DefaultNode;\nconst OutputNode = function({\n  targetPosition = Position.Top,\n  label: _label,\n  connectable = true,\n  isValidTargetPos,\n  data\n}) {\n  const label = data.label ?? _label;\n  return [\n    h(_sfc_main$f, { type: \"target\", position: targetPosition, connectable, isValidConnection: isValidTargetPos }),\n    typeof label !== \"string\" && label ? h(label) : h(Fragment, [label])\n  ];\n};\nOutputNode.props = [\"targetPosition\", \"label\", \"isValidTargetPos\", \"connectable\", \"data\"];\nOutputNode.inheritAttrs = false;\nOutputNode.compatConfig = { MODE: 3 };\nconst OutputNode$1 = OutputNode;\nconst InputNode = function({\n  sourcePosition = Position.Bottom,\n  label: _label,\n  connectable = true,\n  isValidSourcePos,\n  data\n}) {\n  const label = data.label ?? _label;\n  return [\n    typeof label !== \"string\" && label ? h(label) : h(Fragment, [label]),\n    h(_sfc_main$f, { type: \"source\", position: sourcePosition, connectable, isValidConnection: isValidSourcePos })\n  ];\n};\nInputNode.props = [\"sourcePosition\", \"label\", \"isValidSourcePos\", \"connectable\", \"data\"];\nInputNode.inheritAttrs = false;\nInputNode.compatConfig = { MODE: 3 };\nconst InputNode$1 = InputNode;\nconst _hoisted_1$8 = [\"transform\"];\nconst _hoisted_2$2 = [\"width\", \"height\", \"x\", \"y\", \"rx\", \"ry\"];\nconst _hoisted_3$1 = [\"y\"];\nconst __default__$e = {\n  name: \"EdgeText\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$e = /* @__PURE__ */ defineComponent({\n  ...__default__$e,\n  props: {\n    x: {},\n    y: {},\n    label: {},\n    labelStyle: { default: () => ({}) },\n    labelShowBg: { type: Boolean, default: true },\n    labelBgStyle: { default: () => ({}) },\n    labelBgPadding: { default: () => [2, 4] },\n    labelBgBorderRadius: { default: 2 }\n  },\n  setup(__props) {\n    const box = ref({ x: 0, y: 0, width: 0, height: 0 });\n    const el = ref(null);\n    const transform = computed(() => `translate(${__props.x - box.value.width / 2} ${__props.y - box.value.height / 2})`);\n    onMounted(getBox);\n    watch([() => __props.x, () => __props.y, el, () => __props.label], getBox);\n    function getBox() {\n      if (!el.value) {\n        return;\n      }\n      const nextBox = el.value.getBBox();\n      if (nextBox.width !== box.value.width || nextBox.height !== box.value.height) {\n        box.value = nextBox;\n      }\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"g\", {\n        transform: transform.value,\n        class: \"vue-flow__edge-textwrapper\"\n      }, [\n        _ctx.labelShowBg ? (openBlock(), createElementBlock(\"rect\", {\n          key: 0,\n          class: \"vue-flow__edge-textbg\",\n          width: `${box.value.width + 2 * _ctx.labelBgPadding[0]}px`,\n          height: `${box.value.height + 2 * _ctx.labelBgPadding[1]}px`,\n          x: -_ctx.labelBgPadding[0],\n          y: -_ctx.labelBgPadding[1],\n          style: normalizeStyle(_ctx.labelBgStyle),\n          rx: _ctx.labelBgBorderRadius,\n          ry: _ctx.labelBgBorderRadius\n        }, null, 12, _hoisted_2$2)) : createCommentVNode(\"\", true),\n        createElementVNode(\"text\", mergeProps(_ctx.$attrs, {\n          ref_key: \"el\",\n          ref: el,\n          class: \"vue-flow__edge-text\",\n          y: box.value.height / 2,\n          dy: \"0.3em\",\n          style: _ctx.labelStyle\n        }), [\n          renderSlot(_ctx.$slots, \"default\", {}, () => [\n            typeof _ctx.label !== \"string\" ? (openBlock(), createBlock(resolveDynamicComponent(_ctx.label), { key: 0 })) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [\n              createTextVNode(toDisplayString(_ctx.label), 1)\n            ], 64))\n          ])\n        ], 16, _hoisted_3$1)\n      ], 8, _hoisted_1$8);\n    };\n  }\n});\nconst _hoisted_1$7 = [\"id\", \"d\", \"marker-end\", \"marker-start\"];\nconst _hoisted_2$1 = [\"d\", \"stroke-width\"];\nconst __default__$d = {\n  name: \"BaseEdge\",\n  inheritAttrs: false,\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$d = /* @__PURE__ */ defineComponent({\n  ...__default__$d,\n  props: {\n    id: {},\n    labelX: {},\n    labelY: {},\n    path: {},\n    label: {},\n    markerStart: {},\n    markerEnd: {},\n    interactionWidth: { default: 20 },\n    labelStyle: {},\n    labelShowBg: { type: Boolean },\n    labelBgStyle: {},\n    labelBgPadding: {},\n    labelBgBorderRadius: {}\n  },\n  setup(__props, { expose: __expose }) {\n    const pathEl = ref(null);\n    const interactionEl = ref(null);\n    const labelEl = ref(null);\n    const attrs = useAttrs();\n    __expose({\n      pathEl,\n      interactionEl,\n      labelEl\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [\n        createElementVNode(\"path\", mergeProps(unref(attrs), {\n          id: _ctx.id,\n          ref_key: \"pathEl\",\n          ref: pathEl,\n          d: _ctx.path,\n          class: \"vue-flow__edge-path\",\n          \"marker-end\": _ctx.markerEnd,\n          \"marker-start\": _ctx.markerStart\n        }), null, 16, _hoisted_1$7),\n        _ctx.interactionWidth ? (openBlock(), createElementBlock(\"path\", {\n          key: 0,\n          ref_key: \"interactionEl\",\n          ref: interactionEl,\n          fill: \"none\",\n          d: _ctx.path,\n          \"stroke-width\": _ctx.interactionWidth,\n          \"stroke-opacity\": 0,\n          class: \"vue-flow__edge-interaction\"\n        }, null, 8, _hoisted_2$1)) : createCommentVNode(\"\", true),\n        _ctx.label && _ctx.labelX && _ctx.labelY ? (openBlock(), createBlock(_sfc_main$e, {\n          key: 1,\n          ref_key: \"labelEl\",\n          ref: labelEl,\n          x: _ctx.labelX,\n          y: _ctx.labelY,\n          label: _ctx.label,\n          \"label-show-bg\": _ctx.labelShowBg,\n          \"label-bg-style\": _ctx.labelBgStyle,\n          \"label-bg-padding\": _ctx.labelBgPadding,\n          \"label-bg-border-radius\": _ctx.labelBgBorderRadius,\n          \"label-style\": _ctx.labelStyle\n        }, null, 8, [\"x\", \"y\", \"label\", \"label-show-bg\", \"label-bg-style\", \"label-bg-padding\", \"label-bg-border-radius\", \"label-style\"])) : createCommentVNode(\"\", true)\n      ], 64);\n    };\n  }\n});\nfunction getSimpleEdgeCenter({\n  sourceX,\n  sourceY,\n  targetX,\n  targetY\n}) {\n  const xOffset = Math.abs(targetX - sourceX) / 2;\n  const centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n  const yOffset = Math.abs(targetY - sourceY) / 2;\n  const centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n  return [centerX, centerY, xOffset, yOffset];\n}\nfunction getBezierEdgeCenter({\n  sourceX,\n  sourceY,\n  targetX,\n  targetY,\n  sourceControlX,\n  sourceControlY,\n  targetControlX,\n  targetControlY\n}) {\n  const centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n  const centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n  const offsetX = Math.abs(centerX - sourceX);\n  const offsetY = Math.abs(centerY - sourceY);\n  return [centerX, centerY, offsetX, offsetY];\n}\nfunction calculateControlOffset(distance2, curvature) {\n  if (distance2 >= 0) {\n    return 0.5 * distance2;\n  } else {\n    return curvature * 25 * Math.sqrt(-distance2);\n  }\n}\nfunction getControlWithCurvature({ pos, x1, y1, x2, y2, c }) {\n  let ctX, ctY;\n  switch (pos) {\n    case Position.Left:\n      ctX = x1 - calculateControlOffset(x1 - x2, c);\n      ctY = y1;\n      break;\n    case Position.Right:\n      ctX = x1 + calculateControlOffset(x2 - x1, c);\n      ctY = y1;\n      break;\n    case Position.Top:\n      ctX = x1;\n      ctY = y1 - calculateControlOffset(y1 - y2, c);\n      break;\n    case Position.Bottom:\n      ctX = x1;\n      ctY = y1 + calculateControlOffset(y2 - y1, c);\n      break;\n  }\n  return [ctX, ctY];\n}\nfunction getBezierPath(bezierPathParams) {\n  const {\n    sourceX,\n    sourceY,\n    sourcePosition = Position.Bottom,\n    targetX,\n    targetY,\n    targetPosition = Position.Top,\n    curvature = 0.25\n  } = bezierPathParams;\n  const [sourceControlX, sourceControlY] = getControlWithCurvature({\n    pos: sourcePosition,\n    x1: sourceX,\n    y1: sourceY,\n    x2: targetX,\n    y2: targetY,\n    c: curvature\n  });\n  const [targetControlX, targetControlY] = getControlWithCurvature({\n    pos: targetPosition,\n    x1: targetX,\n    y1: targetY,\n    x2: sourceX,\n    y2: sourceY,\n    c: curvature\n  });\n  const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourceControlX,\n    sourceControlY,\n    targetControlX,\n    targetControlY\n  });\n  return [\n    `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n    labelX,\n    labelY,\n    offsetX,\n    offsetY\n  ];\n}\nfunction getControl({ pos, x1, y1, x2, y2 }) {\n  let ctX, ctY;\n  switch (pos) {\n    case Position.Left:\n    case Position.Right:\n      ctX = 0.5 * (x1 + x2);\n      ctY = y1;\n      break;\n    case Position.Top:\n    case Position.Bottom:\n      ctX = x1;\n      ctY = 0.5 * (y1 + y2);\n      break;\n  }\n  return [ctX, ctY];\n}\nfunction getSimpleBezierPath(simpleBezierPathParams) {\n  const {\n    sourceX,\n    sourceY,\n    sourcePosition = Position.Bottom,\n    targetX,\n    targetY,\n    targetPosition = Position.Top\n  } = simpleBezierPathParams;\n  const [sourceControlX, sourceControlY] = getControl({\n    pos: sourcePosition,\n    x1: sourceX,\n    y1: sourceY,\n    x2: targetX,\n    y2: targetY\n  });\n  const [targetControlX, targetControlY] = getControl({\n    pos: targetPosition,\n    x1: targetX,\n    y1: targetY,\n    x2: sourceX,\n    y2: sourceY\n  });\n  const [centerX, centerY, offsetX, offsetY] = getBezierEdgeCenter({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourceControlX,\n    sourceControlY,\n    targetControlX,\n    targetControlY\n  });\n  return [\n    `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n    centerX,\n    centerY,\n    offsetX,\n    offsetY\n  ];\n}\nconst handleDirections = {\n  [Position.Left]: { x: -1, y: 0 },\n  [Position.Right]: { x: 1, y: 0 },\n  [Position.Top]: { x: 0, y: -1 },\n  [Position.Bottom]: { x: 0, y: 1 }\n};\nfunction getDirection({\n  source,\n  sourcePosition = Position.Bottom,\n  target\n}) {\n  if (sourcePosition === Position.Left || sourcePosition === Position.Right) {\n    return source.x < target.x ? { x: 1, y: 0 } : { x: -1, y: 0 };\n  }\n  return source.y < target.y ? { x: 0, y: 1 } : { x: 0, y: -1 };\n}\nfunction distance(a, b) {\n  return Math.sqrt((b.x - a.x) ** 2 + (b.y - a.y) ** 2);\n}\nfunction getPoints({\n  source,\n  sourcePosition = Position.Bottom,\n  target,\n  targetPosition = Position.Top,\n  center,\n  offset\n}) {\n  const sourceDir = handleDirections[sourcePosition];\n  const targetDir = handleDirections[targetPosition];\n  const sourceGapped = { x: source.x + sourceDir.x * offset, y: source.y + sourceDir.y * offset };\n  const targetGapped = { x: target.x + targetDir.x * offset, y: target.y + targetDir.y * offset };\n  const dir = getDirection({\n    source: sourceGapped,\n    sourcePosition,\n    target: targetGapped\n  });\n  const dirAccessor = dir.x !== 0 ? \"x\" : \"y\";\n  const currDir = dir[dirAccessor];\n  let points;\n  let centerX, centerY;\n  const sourceGapOffset = { x: 0, y: 0 };\n  const targetGapOffset = { x: 0, y: 0 };\n  const [defaultCenterX, defaultCenterY, defaultOffsetX, defaultOffsetY] = getSimpleEdgeCenter({\n    sourceX: source.x,\n    sourceY: source.y,\n    targetX: target.x,\n    targetY: target.y\n  });\n  if (sourceDir[dirAccessor] * targetDir[dirAccessor] === -1) {\n    centerX = center.x ?? defaultCenterX;\n    centerY = center.y ?? defaultCenterY;\n    const verticalSplit = [\n      { x: centerX, y: sourceGapped.y },\n      { x: centerX, y: targetGapped.y }\n    ];\n    const horizontalSplit = [\n      { x: sourceGapped.x, y: centerY },\n      { x: targetGapped.x, y: centerY }\n    ];\n    if (sourceDir[dirAccessor] === currDir) {\n      points = dirAccessor === \"x\" ? verticalSplit : horizontalSplit;\n    } else {\n      points = dirAccessor === \"x\" ? horizontalSplit : verticalSplit;\n    }\n  } else {\n    const sourceTarget = [{ x: sourceGapped.x, y: targetGapped.y }];\n    const targetSource = [{ x: targetGapped.x, y: sourceGapped.y }];\n    if (dirAccessor === \"x\") {\n      points = sourceDir.x === currDir ? targetSource : sourceTarget;\n    } else {\n      points = sourceDir.y === currDir ? sourceTarget : targetSource;\n    }\n    if (sourcePosition === targetPosition) {\n      const diff = Math.abs(source[dirAccessor] - target[dirAccessor]);\n      if (diff <= offset) {\n        const gapOffset = Math.min(offset - 1, offset - diff);\n        if (sourceDir[dirAccessor] === currDir) {\n          sourceGapOffset[dirAccessor] = (sourceGapped[dirAccessor] > source[dirAccessor] ? -1 : 1) * gapOffset;\n        } else {\n          targetGapOffset[dirAccessor] = (targetGapped[dirAccessor] > target[dirAccessor] ? -1 : 1) * gapOffset;\n        }\n      }\n    }\n    if (sourcePosition !== targetPosition) {\n      const dirAccessorOpposite = dirAccessor === \"x\" ? \"y\" : \"x\";\n      const isSameDir = sourceDir[dirAccessor] === targetDir[dirAccessorOpposite];\n      const sourceGtTargetOppo = sourceGapped[dirAccessorOpposite] > targetGapped[dirAccessorOpposite];\n      const sourceLtTargetOppo = sourceGapped[dirAccessorOpposite] < targetGapped[dirAccessorOpposite];\n      const flipSourceTarget = sourceDir[dirAccessor] === 1 && (!isSameDir && sourceGtTargetOppo || isSameDir && sourceLtTargetOppo) || sourceDir[dirAccessor] !== 1 && (!isSameDir && sourceLtTargetOppo || isSameDir && sourceGtTargetOppo);\n      if (flipSourceTarget) {\n        points = dirAccessor === \"x\" ? sourceTarget : targetSource;\n      }\n    }\n    const sourceGapPoint = { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y };\n    const targetGapPoint = { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y };\n    const maxXDistance = Math.max(Math.abs(sourceGapPoint.x - points[0].x), Math.abs(targetGapPoint.x - points[0].x));\n    const maxYDistance = Math.max(Math.abs(sourceGapPoint.y - points[0].y), Math.abs(targetGapPoint.y - points[0].y));\n    if (maxXDistance >= maxYDistance) {\n      centerX = (sourceGapPoint.x + targetGapPoint.x) / 2;\n      centerY = points[0].y;\n    } else {\n      centerX = points[0].x;\n      centerY = (sourceGapPoint.y + targetGapPoint.y) / 2;\n    }\n  }\n  const pathPoints = [\n    source,\n    { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y },\n    ...points,\n    { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y },\n    target\n  ];\n  return [pathPoints, centerX, centerY, defaultOffsetX, defaultOffsetY];\n}\nfunction getBend(a, b, c, size) {\n  const bendSize = Math.min(distance(a, b) / 2, distance(b, c) / 2, size);\n  const { x, y } = b;\n  if (a.x === x && x === c.x || a.y === y && y === c.y) {\n    return `L${x} ${y}`;\n  }\n  if (a.y === y) {\n    const xDir2 = a.x < c.x ? -1 : 1;\n    const yDir2 = a.y < c.y ? 1 : -1;\n    return `L ${x + bendSize * xDir2},${y}Q ${x},${y} ${x},${y + bendSize * yDir2}`;\n  }\n  const xDir = a.x < c.x ? 1 : -1;\n  const yDir = a.y < c.y ? -1 : 1;\n  return `L ${x},${y + bendSize * yDir}Q ${x},${y} ${x + bendSize * xDir},${y}`;\n}\nfunction getSmoothStepPath(smoothStepPathParams) {\n  const {\n    sourceX,\n    sourceY,\n    sourcePosition = Position.Bottom,\n    targetX,\n    targetY,\n    targetPosition = Position.Top,\n    borderRadius = 5,\n    centerX,\n    centerY,\n    offset = 20\n  } = smoothStepPathParams;\n  const [points, labelX, labelY, offsetX, offsetY] = getPoints({\n    source: { x: sourceX, y: sourceY },\n    sourcePosition,\n    target: { x: targetX, y: targetY },\n    targetPosition,\n    center: { x: centerX, y: centerY },\n    offset\n  });\n  const path = points.reduce((res, p, i) => {\n    let segment;\n    if (i > 0 && i < points.length - 1) {\n      segment = getBend(points[i - 1], p, points[i + 1], borderRadius);\n    } else {\n      segment = `${i === 0 ? \"M\" : \"L\"}${p.x} ${p.y}`;\n    }\n    res += segment;\n    return res;\n  }, \"\");\n  return [path, labelX, labelY, offsetX, offsetY];\n}\nfunction getStraightPath(straightEdgeParams) {\n  const { sourceX, sourceY, targetX, targetY } = straightEdgeParams;\n  const [centerX, centerY, offsetX, offsetY] = getSimpleEdgeCenter({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY\n  });\n  return [`M ${sourceX},${sourceY}L ${targetX},${targetY}`, centerX, centerY, offsetX, offsetY];\n}\nconst StraightEdge = defineComponent({\n  name: \"StraightEdge\",\n  props: [\n    \"label\",\n    \"labelStyle\",\n    \"labelShowBg\",\n    \"labelBgStyle\",\n    \"labelBgPadding\",\n    \"labelBgBorderRadius\",\n    \"sourceY\",\n    \"sourceX\",\n    \"targetX\",\n    \"targetY\",\n    \"markerEnd\",\n    \"markerStart\",\n    \"interactionWidth\"\n  ],\n  compatConfig: { MODE: 3 },\n  setup(props, { attrs }) {\n    return () => {\n      const [path, labelX, labelY] = getStraightPath(props);\n      return h(_sfc_main$d, {\n        path,\n        labelX,\n        labelY,\n        ...attrs,\n        ...props\n      });\n    };\n  }\n});\nconst StraightEdge$1 = StraightEdge;\nconst SmoothStepEdge = defineComponent({\n  name: \"SmoothStepEdge\",\n  props: [\n    \"sourcePosition\",\n    \"targetPosition\",\n    \"label\",\n    \"labelStyle\",\n    \"labelShowBg\",\n    \"labelBgStyle\",\n    \"labelBgPadding\",\n    \"labelBgBorderRadius\",\n    \"sourceY\",\n    \"sourceX\",\n    \"targetX\",\n    \"targetY\",\n    \"borderRadius\",\n    \"markerEnd\",\n    \"markerStart\",\n    \"interactionWidth\",\n    \"offset\"\n  ],\n  compatConfig: { MODE: 3 },\n  setup(props, { attrs }) {\n    return () => {\n      const [path, labelX, labelY] = getSmoothStepPath({\n        ...props,\n        sourcePosition: props.sourcePosition ?? Position.Bottom,\n        targetPosition: props.targetPosition ?? Position.Top\n      });\n      return h(_sfc_main$d, {\n        path,\n        labelX,\n        labelY,\n        ...attrs,\n        ...props\n      });\n    };\n  }\n});\nconst SmoothStepEdge$1 = SmoothStepEdge;\nconst StepEdge = defineComponent({\n  name: \"StepEdge\",\n  props: [\n    \"sourcePosition\",\n    \"targetPosition\",\n    \"label\",\n    \"labelStyle\",\n    \"labelShowBg\",\n    \"labelBgStyle\",\n    \"labelBgPadding\",\n    \"labelBgBorderRadius\",\n    \"sourceY\",\n    \"sourceX\",\n    \"targetX\",\n    \"targetY\",\n    \"markerEnd\",\n    \"markerStart\",\n    \"interactionWidth\"\n  ],\n  setup(props, { attrs }) {\n    return () => h(SmoothStepEdge$1, { ...props, ...attrs, borderRadius: 0 });\n  }\n});\nconst StepEdge$1 = StepEdge;\nconst BezierEdge = defineComponent({\n  name: \"BezierEdge\",\n  props: [\n    \"sourcePosition\",\n    \"targetPosition\",\n    \"label\",\n    \"labelStyle\",\n    \"labelShowBg\",\n    \"labelBgStyle\",\n    \"labelBgPadding\",\n    \"labelBgBorderRadius\",\n    \"sourceY\",\n    \"sourceX\",\n    \"targetX\",\n    \"targetY\",\n    \"curvature\",\n    \"markerEnd\",\n    \"markerStart\",\n    \"interactionWidth\"\n  ],\n  compatConfig: { MODE: 3 },\n  setup(props, { attrs }) {\n    return () => {\n      const [path, labelX, labelY] = getBezierPath({\n        ...props,\n        sourcePosition: props.sourcePosition ?? Position.Bottom,\n        targetPosition: props.targetPosition ?? Position.Top\n      });\n      return h(_sfc_main$d, {\n        path,\n        labelX,\n        labelY,\n        ...attrs,\n        ...props\n      });\n    };\n  }\n});\nconst BezierEdge$1 = BezierEdge;\nconst SimpleBezierEdge = defineComponent({\n  name: \"SimpleBezierEdge\",\n  props: [\n    \"sourcePosition\",\n    \"targetPosition\",\n    \"label\",\n    \"labelStyle\",\n    \"labelShowBg\",\n    \"labelBgStyle\",\n    \"labelBgPadding\",\n    \"labelBgBorderRadius\",\n    \"sourceY\",\n    \"sourceX\",\n    \"targetX\",\n    \"targetY\",\n    \"markerEnd\",\n    \"markerStart\",\n    \"interactionWidth\"\n  ],\n  compatConfig: { MODE: 3 },\n  setup(props, { attrs }) {\n    return () => {\n      const [path, labelX, labelY] = getSimpleBezierPath({\n        ...props,\n        sourcePosition: props.sourcePosition ?? Position.Bottom,\n        targetPosition: props.targetPosition ?? Position.Top\n      });\n      return h(_sfc_main$d, {\n        path,\n        labelX,\n        labelY,\n        ...attrs,\n        ...props\n      });\n    };\n  }\n});\nconst SimpleBezierEdge$1 = SimpleBezierEdge;\nconst defaultNodeTypes = {\n  input: InputNode$1,\n  default: DefaultNode$1,\n  output: OutputNode$1\n};\nconst defaultEdgeTypes = {\n  default: BezierEdge$1,\n  straight: StraightEdge$1,\n  step: StepEdge$1,\n  smoothstep: SmoothStepEdge$1,\n  simplebezier: SimpleBezierEdge$1\n};\nfunction useGetters(state, nodeLookup, edgeLookup) {\n  const getNode = computed(() => (id2) => nodeLookup.value.get(id2));\n  const getEdge = computed(() => (id2) => edgeLookup.value.get(id2));\n  const getEdgeTypes = computed(() => {\n    const edgeTypes = {\n      ...defaultEdgeTypes,\n      ...state.edgeTypes\n    };\n    const keys = Object.keys(edgeTypes);\n    for (const e of state.edges) {\n      e.type && !keys.includes(e.type) && (edgeTypes[e.type] = e.type);\n    }\n    return edgeTypes;\n  });\n  const getNodeTypes = computed(() => {\n    const nodeTypes = {\n      ...defaultNodeTypes,\n      ...state.nodeTypes\n    };\n    const keys = Object.keys(nodeTypes);\n    for (const n of state.nodes) {\n      n.type && !keys.includes(n.type) && (nodeTypes[n.type] = n.type);\n    }\n    return nodeTypes;\n  });\n  const getNodes = computed(() => {\n    if (state.onlyRenderVisibleElements) {\n      return getNodesInside(\n        state.nodes,\n        {\n          x: 0,\n          y: 0,\n          width: state.dimensions.width,\n          height: state.dimensions.height\n        },\n        state.viewport,\n        true\n      );\n    }\n    return state.nodes;\n  });\n  const getEdges = computed(() => {\n    if (state.onlyRenderVisibleElements) {\n      const visibleEdges = [];\n      for (const edge of state.edges) {\n        const source = nodeLookup.value.get(edge.source);\n        const target = nodeLookup.value.get(edge.target);\n        if (isEdgeVisible({\n          sourcePos: source.computedPosition || { x: 0, y: 0 },\n          targetPos: target.computedPosition || { x: 0, y: 0 },\n          sourceWidth: source.dimensions.width,\n          sourceHeight: source.dimensions.height,\n          targetWidth: target.dimensions.width,\n          targetHeight: target.dimensions.height,\n          width: state.dimensions.width,\n          height: state.dimensions.height,\n          viewport: state.viewport\n        })) {\n          visibleEdges.push(edge);\n        }\n      }\n      return visibleEdges;\n    }\n    return state.edges;\n  });\n  const getElements = computed(() => [...getNodes.value, ...getEdges.value]);\n  const getSelectedNodes = computed(() => {\n    const selectedNodes = [];\n    for (const node of state.nodes) {\n      if (node.selected) {\n        selectedNodes.push(node);\n      }\n    }\n    return selectedNodes;\n  });\n  const getSelectedEdges = computed(() => {\n    const selectedEdges = [];\n    for (const edge of state.edges) {\n      if (edge.selected) {\n        selectedEdges.push(edge);\n      }\n    }\n    return selectedEdges;\n  });\n  const getSelectedElements = computed(() => [\n    ...getSelectedNodes.value,\n    ...getSelectedEdges.value\n  ]);\n  const getNodesInitialized = computed(() => {\n    const initializedNodes = [];\n    for (const node of state.nodes) {\n      if (!!node.dimensions.width && !!node.dimensions.height && node.handleBounds !== void 0) {\n        initializedNodes.push(node);\n      }\n    }\n    return initializedNodes;\n  });\n  const areNodesInitialized = computed(\n    () => getNodes.value.length > 0 && getNodesInitialized.value.length === getNodes.value.length\n  );\n  return {\n    getNode,\n    getEdge,\n    getElements,\n    getEdgeTypes,\n    getNodeTypes,\n    getEdges,\n    getNodes,\n    getSelectedElements,\n    getSelectedNodes,\n    getSelectedEdges,\n    getNodesInitialized,\n    areNodesInitialized\n  };\n}\nclass Storage {\n  constructor() {\n    this.currentId = 0;\n    this.flows = /* @__PURE__ */ new Map();\n  }\n  static getInstance() {\n    var _a;\n    const vueApp = (_a = getCurrentInstance()) == null ? void 0 : _a.appContext.app;\n    const existingInstance = (vueApp == null ? void 0 : vueApp.config.globalProperties.$vueFlowStorage) ?? Storage.instance;\n    Storage.instance = existingInstance ?? new Storage();\n    if (vueApp) {\n      vueApp.config.globalProperties.$vueFlowStorage = Storage.instance;\n    }\n    return Storage.instance;\n  }\n  set(id2, flow) {\n    return this.flows.set(id2, flow);\n  }\n  get(id2) {\n    return this.flows.get(id2);\n  }\n  remove(id2) {\n    return this.flows.delete(id2);\n  }\n  create(id2, preloadedState) {\n    const state = useState();\n    const reactiveState = reactive(state);\n    const hooksOn = {};\n    for (const [n, h2] of Object.entries(reactiveState.hooks)) {\n      const name = `on${n.charAt(0).toUpperCase() + n.slice(1)}`;\n      hooksOn[name] = h2.on;\n    }\n    const emits = {};\n    for (const [n, h2] of Object.entries(reactiveState.hooks)) {\n      emits[n] = h2.trigger;\n    }\n    const nodeLookup = computed(() => {\n      const nodesMap = /* @__PURE__ */ new Map();\n      for (const node of reactiveState.nodes) {\n        nodesMap.set(node.id, node);\n      }\n      return nodesMap;\n    });\n    const edgeLookup = computed(() => {\n      const edgesMap = /* @__PURE__ */ new Map();\n      for (const edge of reactiveState.edges) {\n        edgesMap.set(edge.id, edge);\n      }\n      return edgesMap;\n    });\n    const getters = useGetters(reactiveState, nodeLookup, edgeLookup);\n    const actions = useActions(reactiveState, nodeLookup, edgeLookup);\n    actions.setState({ ...reactiveState, ...preloadedState });\n    const flow = {\n      ...hooksOn,\n      ...getters,\n      ...actions,\n      ...toRefs(reactiveState),\n      nodeLookup,\n      edgeLookup,\n      emits,\n      id: id2,\n      vueFlowVersion: \"1.47.0\",\n      $destroy: () => {\n        this.remove(id2);\n      }\n    };\n    this.set(id2, flow);\n    return flow;\n  }\n  getId() {\n    return `vue-flow-${this.currentId++}`;\n  }\n}\nfunction useVueFlow(idOrOpts) {\n  const storage = Storage.getInstance();\n  const scope = getCurrentScope();\n  const isOptsObj = typeof idOrOpts === \"object\";\n  const options = isOptsObj ? idOrOpts : { id: idOrOpts };\n  const id2 = options.id;\n  const vueFlowId = id2 ?? (scope == null ? void 0 : scope.vueFlowId);\n  let vueFlow;\n  if (scope) {\n    const injectedState = inject(VueFlow, null);\n    if (typeof injectedState !== \"undefined\" && injectedState !== null && (!vueFlowId || injectedState.id === vueFlowId)) {\n      vueFlow = injectedState;\n    }\n  }\n  if (!vueFlow) {\n    if (vueFlowId) {\n      vueFlow = storage.get(vueFlowId);\n    }\n  }\n  if (!vueFlow || vueFlowId && vueFlow.id !== vueFlowId) {\n    const name = id2 ?? storage.getId();\n    const state = storage.create(name, options);\n    vueFlow = state;\n    const vfScope = scope ?? effectScope(true);\n    vfScope.run(() => {\n      watch(\n        state.applyDefault,\n        (shouldApplyDefault, __, onCleanup) => {\n          const nodesChangeHandler = (changes) => {\n            state.applyNodeChanges(changes);\n          };\n          const edgesChangeHandler = (changes) => {\n            state.applyEdgeChanges(changes);\n          };\n          if (shouldApplyDefault) {\n            state.onNodesChange(nodesChangeHandler);\n            state.onEdgesChange(edgesChangeHandler);\n          } else {\n            state.hooks.value.nodesChange.off(nodesChangeHandler);\n            state.hooks.value.edgesChange.off(edgesChangeHandler);\n          }\n          onCleanup(() => {\n            state.hooks.value.nodesChange.off(nodesChangeHandler);\n            state.hooks.value.edgesChange.off(edgesChangeHandler);\n          });\n        },\n        { immediate: true }\n      );\n      tryOnScopeDispose(() => {\n        if (vueFlow) {\n          const storedInstance = storage.get(vueFlow.id);\n          if (storedInstance) {\n            storedInstance.$destroy();\n          } else {\n            warn(`No store instance found for id ${vueFlow.id} in storage.`);\n          }\n        }\n      });\n    });\n  } else {\n    if (isOptsObj) {\n      vueFlow.setState(options);\n    }\n  }\n  if (scope) {\n    provide(VueFlow, vueFlow);\n    scope.vueFlowId = vueFlow.id;\n  }\n  if (isOptsObj) {\n    const instance = getCurrentInstance();\n    if ((instance == null ? void 0 : instance.type.name) !== \"VueFlow\") {\n      vueFlow.emits.error(new VueFlowError(ErrorCode.USEVUEFLOW_OPTIONS));\n    }\n  }\n  return vueFlow;\n}\nfunction useResizeHandler(viewportEl) {\n  const { emits, dimensions } = useVueFlow();\n  let resizeObserver;\n  onMounted(() => {\n    const updateDimensions = () => {\n      var _a, _b;\n      if (!viewportEl.value || !(((_b = (_a = viewportEl.value).checkVisibility) == null ? void 0 : _b.call(_a)) ?? true)) {\n        return;\n      }\n      const size = getDimensions(viewportEl.value);\n      if (size.width === 0 || size.height === 0) {\n        emits.error(new VueFlowError(ErrorCode.MISSING_VIEWPORT_DIMENSIONS));\n      }\n      dimensions.value = { width: size.width || 500, height: size.height || 500 };\n    };\n    updateDimensions();\n    window.addEventListener(\"resize\", updateDimensions);\n    if (viewportEl.value) {\n      resizeObserver = new ResizeObserver(() => updateDimensions());\n      resizeObserver.observe(viewportEl.value);\n    }\n    onBeforeUnmount(() => {\n      window.removeEventListener(\"resize\", updateDimensions);\n      if (resizeObserver && viewportEl.value) {\n        resizeObserver.unobserve(viewportEl.value);\n      }\n    });\n  });\n}\nconst __default__$c = {\n  name: \"UserSelection\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$c = /* @__PURE__ */ defineComponent({\n  ...__default__$c,\n  props: {\n    userSelectionRect: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: \"vue-flow__selection vue-flow__container\",\n        style: normalizeStyle({\n          width: `${_ctx.userSelectionRect.width}px`,\n          height: `${_ctx.userSelectionRect.height}px`,\n          transform: `translate(${_ctx.userSelectionRect.x}px, ${_ctx.userSelectionRect.y}px)`\n        })\n      }, null, 4);\n    };\n  }\n});\nconst _hoisted_1$6 = [\"tabIndex\"];\nconst __default__$b = {\n  name: \"NodesSelection\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$b = /* @__PURE__ */ defineComponent({\n  ...__default__$b,\n  setup(__props) {\n    const { emits, viewport, getSelectedNodes, noPanClassName, disableKeyboardA11y, userSelectionActive } = useVueFlow();\n    const updatePositions = useUpdateNodePositions();\n    const el = ref(null);\n    const dragging = useDrag({\n      el,\n      onStart(args) {\n        emits.selectionDragStart(args);\n        emits.nodeDragStart(args);\n      },\n      onDrag(args) {\n        emits.selectionDrag(args);\n        emits.nodeDrag(args);\n      },\n      onStop(args) {\n        emits.selectionDragStop(args);\n        emits.nodeDragStop(args);\n      }\n    });\n    onMounted(() => {\n      var _a;\n      if (!disableKeyboardA11y.value) {\n        (_a = el.value) == null ? void 0 : _a.focus({ preventScroll: true });\n      }\n    });\n    const selectedNodesBBox = computed(() => getRectOfNodes(getSelectedNodes.value));\n    const innerStyle = computed(() => ({\n      width: `${selectedNodesBBox.value.width}px`,\n      height: `${selectedNodesBBox.value.height}px`,\n      top: `${selectedNodesBBox.value.y}px`,\n      left: `${selectedNodesBBox.value.x}px`\n    }));\n    function onContextMenu(event) {\n      emits.selectionContextMenu({ event, nodes: getSelectedNodes.value });\n    }\n    function onKeyDown(event) {\n      if (disableKeyboardA11y) {\n        return;\n      }\n      if (arrowKeyDiffs[event.key]) {\n        event.preventDefault();\n        updatePositions(\n          {\n            x: arrowKeyDiffs[event.key].x,\n            y: arrowKeyDiffs[event.key].y\n          },\n          event.shiftKey\n        );\n      }\n    }\n    return (_ctx, _cache) => {\n      return !unref(userSelectionActive) && selectedNodesBBox.value.width && selectedNodesBBox.value.height ? (openBlock(), createElementBlock(\"div\", {\n        key: 0,\n        class: normalizeClass([\"vue-flow__nodesselection vue-flow__container\", unref(noPanClassName)]),\n        style: normalizeStyle({ transform: `translate(${unref(viewport).x}px,${unref(viewport).y}px) scale(${unref(viewport).zoom})` })\n      }, [\n        createElementVNode(\"div\", {\n          ref_key: \"el\",\n          ref: el,\n          class: normalizeClass([{ dragging: unref(dragging) }, \"vue-flow__nodesselection-rect\"]),\n          style: normalizeStyle(innerStyle.value),\n          tabIndex: unref(disableKeyboardA11y) ? void 0 : -1,\n          onContextmenu: onContextMenu,\n          onKeydown: onKeyDown\n        }, null, 46, _hoisted_1$6)\n      ], 6)) : createCommentVNode(\"\", true);\n    };\n  }\n});\nfunction getMousePosition(event, containerBounds) {\n  return {\n    x: event.clientX - containerBounds.left,\n    y: event.clientY - containerBounds.top\n  };\n}\nconst __default__$a = {\n  name: \"Pane\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$a = /* @__PURE__ */ defineComponent({\n  ...__default__$a,\n  props: {\n    isSelecting: { type: Boolean },\n    selectionKeyPressed: { type: Boolean }\n  },\n  setup(__props) {\n    const {\n      vueFlowRef,\n      nodes,\n      viewport,\n      emits,\n      userSelectionActive,\n      removeSelectedElements,\n      userSelectionRect,\n      elementsSelectable,\n      nodesSelectionActive,\n      getSelectedEdges,\n      getSelectedNodes,\n      removeNodes,\n      removeEdges,\n      selectionMode,\n      deleteKeyCode,\n      multiSelectionKeyCode,\n      multiSelectionActive,\n      edgeLookup,\n      nodeLookup,\n      connectionLookup,\n      defaultEdgeOptions,\n      connectionStartHandle\n    } = useVueFlow();\n    const container = ref(null);\n    const selectedNodeIds = ref(/* @__PURE__ */ new Set());\n    const selectedEdgeIds = ref(/* @__PURE__ */ new Set());\n    const containerBounds = ref();\n    const hasActiveSelection = toRef(() => elementsSelectable.value && (__props.isSelecting || userSelectionActive.value));\n    const connectionInProgress = toRef(() => connectionStartHandle.value !== null);\n    let selectionInProgress = false;\n    let selectionStarted = false;\n    const deleteKeyPressed = useKeyPress(deleteKeyCode, { actInsideInputWithModifier: false });\n    const multiSelectKeyPressed = useKeyPress(multiSelectionKeyCode);\n    watch(deleteKeyPressed, (isKeyPressed) => {\n      if (!isKeyPressed) {\n        return;\n      }\n      removeNodes(getSelectedNodes.value);\n      removeEdges(getSelectedEdges.value);\n      nodesSelectionActive.value = false;\n    });\n    watch(multiSelectKeyPressed, (isKeyPressed) => {\n      multiSelectionActive.value = isKeyPressed;\n    });\n    function wrapHandler(handler, containerRef) {\n      return (event) => {\n        if (event.target !== containerRef) {\n          return;\n        }\n        handler == null ? void 0 : handler(event);\n      };\n    }\n    function onClick(event) {\n      if (selectionInProgress || connectionInProgress.value) {\n        selectionInProgress = false;\n        return;\n      }\n      emits.paneClick(event);\n      removeSelectedElements();\n      nodesSelectionActive.value = false;\n    }\n    function onContextMenu(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      emits.paneContextMenu(event);\n    }\n    function onWheel(event) {\n      emits.paneScroll(event);\n    }\n    function onPointerDown(event) {\n      var _a, _b, _c;\n      containerBounds.value = (_a = vueFlowRef.value) == null ? void 0 : _a.getBoundingClientRect();\n      if (!elementsSelectable.value || !__props.isSelecting || event.button !== 0 || event.target !== container.value || !containerBounds.value) {\n        return;\n      }\n      (_c = (_b = event.target) == null ? void 0 : _b.setPointerCapture) == null ? void 0 : _c.call(_b, event.pointerId);\n      const { x, y } = getMousePosition(event, containerBounds.value);\n      selectionStarted = true;\n      selectionInProgress = false;\n      removeSelectedElements();\n      userSelectionRect.value = {\n        width: 0,\n        height: 0,\n        startX: x,\n        startY: y,\n        x,\n        y\n      };\n      emits.selectionStart(event);\n    }\n    function onPointerMove(event) {\n      var _a;\n      if (!containerBounds.value || !userSelectionRect.value) {\n        return;\n      }\n      selectionInProgress = true;\n      const { x: mouseX, y: mouseY } = getEventPosition(event, containerBounds.value);\n      const { startX = 0, startY = 0 } = userSelectionRect.value;\n      const nextUserSelectRect = {\n        startX,\n        startY,\n        x: mouseX < startX ? mouseX : startX,\n        y: mouseY < startY ? mouseY : startY,\n        width: Math.abs(mouseX - startX),\n        height: Math.abs(mouseY - startY)\n      };\n      const prevSelectedNodeIds = selectedNodeIds.value;\n      const prevSelectedEdgeIds = selectedEdgeIds.value;\n      selectedNodeIds.value = new Set(\n        getNodesInside(nodes.value, nextUserSelectRect, viewport.value, selectionMode.value === SelectionMode.Partial, true).map(\n          (node) => node.id\n        )\n      );\n      selectedEdgeIds.value = /* @__PURE__ */ new Set();\n      const edgesSelectable = ((_a = defaultEdgeOptions.value) == null ? void 0 : _a.selectable) ?? true;\n      for (const nodeId of selectedNodeIds.value) {\n        const connections = connectionLookup.value.get(nodeId);\n        if (!connections) {\n          continue;\n        }\n        for (const { edgeId } of connections.values()) {\n          const edge = edgeLookup.value.get(edgeId);\n          if (edge && (edge.selectable ?? edgesSelectable)) {\n            selectedEdgeIds.value.add(edgeId);\n          }\n        }\n      }\n      if (!areSetsEqual(prevSelectedNodeIds, selectedNodeIds.value)) {\n        const changes = getSelectionChanges(nodeLookup.value, selectedNodeIds.value, true);\n        emits.nodesChange(changes);\n      }\n      if (!areSetsEqual(prevSelectedEdgeIds, selectedEdgeIds.value)) {\n        const changes = getSelectionChanges(edgeLookup.value, selectedEdgeIds.value);\n        emits.edgesChange(changes);\n      }\n      userSelectionRect.value = nextUserSelectRect;\n      userSelectionActive.value = true;\n      nodesSelectionActive.value = false;\n    }\n    function onPointerUp(event) {\n      var _a;\n      if (event.button !== 0 || !selectionStarted) {\n        return;\n      }\n      (_a = event.target) == null ? void 0 : _a.releasePointerCapture(event.pointerId);\n      if (!userSelectionActive.value && userSelectionRect.value && event.target === container.value) {\n        onClick(event);\n      }\n      userSelectionActive.value = false;\n      userSelectionRect.value = null;\n      nodesSelectionActive.value = selectedNodeIds.value.size > 0;\n      emits.selectionEnd(event);\n      if (__props.selectionKeyPressed) {\n        selectionInProgress = false;\n      }\n      selectionStarted = false;\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        ref_key: \"container\",\n        ref: container,\n        class: normalizeClass([\"vue-flow__pane vue-flow__container\", { selection: _ctx.isSelecting }]),\n        onClick: _cache[0] || (_cache[0] = (event) => hasActiveSelection.value ? void 0 : wrapHandler(onClick, container.value)(event)),\n        onContextmenu: _cache[1] || (_cache[1] = ($event) => wrapHandler(onContextMenu, container.value)($event)),\n        onWheelPassive: _cache[2] || (_cache[2] = ($event) => wrapHandler(onWheel, container.value)($event)),\n        onPointerenter: _cache[3] || (_cache[3] = (event) => hasActiveSelection.value ? void 0 : unref(emits).paneMouseEnter(event)),\n        onPointerdown: _cache[4] || (_cache[4] = (event) => hasActiveSelection.value ? onPointerDown(event) : unref(emits).paneMouseMove(event)),\n        onPointermove: _cache[5] || (_cache[5] = (event) => hasActiveSelection.value ? onPointerMove(event) : unref(emits).paneMouseMove(event)),\n        onPointerup: _cache[6] || (_cache[6] = (event) => hasActiveSelection.value ? onPointerUp(event) : void 0),\n        onPointerleave: _cache[7] || (_cache[7] = ($event) => unref(emits).paneMouseLeave($event))\n      }, [\n        renderSlot(_ctx.$slots, \"default\"),\n        unref(userSelectionActive) && unref(userSelectionRect) ? (openBlock(), createBlock(_sfc_main$c, {\n          key: 0,\n          \"user-selection-rect\": unref(userSelectionRect)\n        }, null, 8, [\"user-selection-rect\"])) : createCommentVNode(\"\", true),\n        unref(nodesSelectionActive) && unref(getSelectedNodes).length ? (openBlock(), createBlock(_sfc_main$b, { key: 1 })) : createCommentVNode(\"\", true)\n      ], 34);\n    };\n  }\n});\nconst __default__$9 = {\n  name: \"Transform\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$9 = /* @__PURE__ */ defineComponent({\n  ...__default__$9,\n  setup(__props) {\n    const { viewport, fitViewOnInit, fitViewOnInitDone } = useVueFlow();\n    const isHidden = computed(() => {\n      if (fitViewOnInit.value) {\n        return !fitViewOnInitDone.value;\n      }\n      return false;\n    });\n    const transform = computed(() => `translate(${viewport.value.x}px,${viewport.value.y}px) scale(${viewport.value.zoom})`);\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: \"vue-flow__transformationpane vue-flow__container\",\n        style: normalizeStyle({ transform: transform.value, opacity: isHidden.value ? 0 : void 0 })\n      }, [\n        renderSlot(_ctx.$slots, \"default\")\n      ], 4);\n    };\n  }\n});\nconst __default__$8 = {\n  name: \"Viewport\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$8 = /* @__PURE__ */ defineComponent({\n  ...__default__$8,\n  setup(__props) {\n    const {\n      minZoom,\n      maxZoom,\n      defaultViewport,\n      translateExtent,\n      zoomActivationKeyCode,\n      selectionKeyCode,\n      panActivationKeyCode,\n      panOnScroll,\n      panOnScrollMode,\n      panOnScrollSpeed,\n      panOnDrag,\n      zoomOnDoubleClick,\n      zoomOnPinch,\n      zoomOnScroll,\n      preventScrolling,\n      noWheelClassName,\n      noPanClassName,\n      emits,\n      connectionStartHandle,\n      userSelectionActive,\n      paneDragging,\n      d3Zoom: storeD3Zoom,\n      d3Selection: storeD3Selection,\n      d3ZoomHandler: storeD3ZoomHandler,\n      viewport,\n      viewportRef,\n      paneClickDistance\n    } = useVueFlow();\n    useResizeHandler(viewportRef);\n    const isZoomingOrPanning = shallowRef(false);\n    const isPanScrolling = shallowRef(false);\n    let panScrollTimeout = null;\n    let zoomedWithRightMouseButton = false;\n    let mouseButton = 0;\n    let prevTransform = {\n      x: 0,\n      y: 0,\n      zoom: 0\n    };\n    const panKeyPressed = useKeyPress(panActivationKeyCode);\n    const selectionKeyPressed = useKeyPress(selectionKeyCode);\n    const zoomKeyPressed = useKeyPress(zoomActivationKeyCode);\n    const shouldPanOnDrag = toRef(\n      () => (!selectionKeyPressed.value || selectionKeyPressed.value && selectionKeyCode.value === true) && (panKeyPressed.value || panOnDrag.value)\n    );\n    const shouldPanOnScroll = toRef(() => panKeyPressed.value || panOnScroll.value);\n    const isSelecting = toRef(() => selectionKeyPressed.value || selectionKeyCode.value === true && shouldPanOnDrag.value !== true);\n    const connectionInProgress = toRef(() => connectionStartHandle.value !== null);\n    onMounted(() => {\n      if (!viewportRef.value) {\n        warn(\"Viewport element is missing\");\n        return;\n      }\n      const viewportElement = viewportRef.value;\n      const bbox = viewportElement.getBoundingClientRect();\n      const d3Zoom = zoom().clickDistance(paneClickDistance.value).scaleExtent([minZoom.value, maxZoom.value]).translateExtent(translateExtent.value);\n      const d3Selection = select(viewportElement).call(d3Zoom);\n      const d3ZoomHandler = d3Selection.on(\"wheel.zoom\");\n      const updatedTransform = identity.translate(defaultViewport.value.x ?? 0, defaultViewport.value.y ?? 0).scale(clamp(defaultViewport.value.zoom ?? 1, minZoom.value, maxZoom.value));\n      const extent = [\n        [0, 0],\n        [bbox.width, bbox.height]\n      ];\n      const constrainedTransform = d3Zoom.constrain()(updatedTransform, extent, translateExtent.value);\n      d3Zoom.transform(d3Selection, constrainedTransform);\n      d3Zoom.wheelDelta(wheelDelta);\n      storeD3Zoom.value = d3Zoom;\n      storeD3Selection.value = d3Selection;\n      storeD3ZoomHandler.value = d3ZoomHandler;\n      viewport.value = { x: constrainedTransform.x, y: constrainedTransform.y, zoom: constrainedTransform.k };\n      d3Zoom.on(\"start\", (event) => {\n        var _a;\n        if (!event.sourceEvent) {\n          return null;\n        }\n        mouseButton = event.sourceEvent.button;\n        isZoomingOrPanning.value = true;\n        const flowTransform = eventToFlowTransform(event.transform);\n        if (((_a = event.sourceEvent) == null ? void 0 : _a.type) === \"mousedown\") {\n          paneDragging.value = true;\n        }\n        prevTransform = flowTransform;\n        emits.viewportChangeStart(flowTransform);\n        emits.moveStart({ event, flowTransform });\n      });\n      d3Zoom.on(\"end\", (event) => {\n        if (!event.sourceEvent) {\n          return null;\n        }\n        isZoomingOrPanning.value = false;\n        paneDragging.value = false;\n        if (isRightClickPan(shouldPanOnDrag.value, mouseButton ?? 0) && !zoomedWithRightMouseButton) {\n          emits.paneContextMenu(event.sourceEvent);\n        }\n        zoomedWithRightMouseButton = false;\n        if (viewChanged(prevTransform, event.transform)) {\n          const flowTransform = eventToFlowTransform(event.transform);\n          prevTransform = flowTransform;\n          emits.viewportChangeEnd(flowTransform);\n          emits.moveEnd({ event, flowTransform });\n        }\n      });\n      d3Zoom.filter((event) => {\n        var _a;\n        const zoomScroll = zoomKeyPressed.value || zoomOnScroll.value;\n        const pinchZoom = zoomOnPinch.value && event.ctrlKey;\n        const eventButton = event.button;\n        const isWheelEvent = event.type === \"wheel\";\n        if (eventButton === 1 && event.type === \"mousedown\" && (isWrappedWithClass(event, \"vue-flow__node\") || isWrappedWithClass(event, \"vue-flow__edge\"))) {\n          return true;\n        }\n        if (!shouldPanOnDrag.value && !zoomScroll && !shouldPanOnScroll.value && !zoomOnDoubleClick.value && !zoomOnPinch.value) {\n          return false;\n        }\n        if (userSelectionActive.value) {\n          return false;\n        }\n        if (connectionInProgress.value && !isWheelEvent) {\n          return false;\n        }\n        if (!zoomOnDoubleClick.value && event.type === \"dblclick\") {\n          return false;\n        }\n        if (isWrappedWithClass(event, noWheelClassName.value) && isWheelEvent) {\n          return false;\n        }\n        if (isWrappedWithClass(event, noPanClassName.value) && (!isWheelEvent || shouldPanOnScroll.value && isWheelEvent && !zoomKeyPressed.value)) {\n          return false;\n        }\n        if (!zoomOnPinch.value && event.ctrlKey && isWheelEvent) {\n          return false;\n        }\n        if (!zoomScroll && !shouldPanOnScroll.value && !pinchZoom && isWheelEvent) {\n          return false;\n        }\n        if (!zoomOnPinch && event.type === \"touchstart\" && ((_a = event.touches) == null ? void 0 : _a.length) > 1) {\n          event.preventDefault();\n          return false;\n        }\n        if (!shouldPanOnDrag.value && (event.type === \"mousedown\" || event.type === \"touchstart\")) {\n          return false;\n        }\n        if (selectionKeyCode.value === true && Array.isArray(panOnDrag.value) && panOnDrag.value.includes(0) && eventButton === 0) {\n          return false;\n        }\n        if (Array.isArray(panOnDrag.value) && !panOnDrag.value.includes(eventButton) && (event.type === \"mousedown\" || event.type === \"touchstart\")) {\n          return false;\n        }\n        const buttonAllowed = Array.isArray(panOnDrag.value) && panOnDrag.value.includes(eventButton) || selectionKeyCode.value === true && Array.isArray(panOnDrag.value) && !panOnDrag.value.includes(0) || !eventButton || eventButton <= 1;\n        return (!event.ctrlKey || panKeyPressed.value || isWheelEvent) && buttonAllowed;\n      });\n      watch(\n        [userSelectionActive, shouldPanOnDrag],\n        () => {\n          if (userSelectionActive.value && !isZoomingOrPanning.value) {\n            d3Zoom.on(\"zoom\", null);\n          } else if (!userSelectionActive.value) {\n            d3Zoom.on(\"zoom\", (event) => {\n              viewport.value = { x: event.transform.x, y: event.transform.y, zoom: event.transform.k };\n              const flowTransform = eventToFlowTransform(event.transform);\n              zoomedWithRightMouseButton = isRightClickPan(shouldPanOnDrag.value, mouseButton ?? 0);\n              emits.viewportChange(flowTransform);\n              emits.move({ event, flowTransform });\n            });\n          }\n        },\n        { immediate: true }\n      );\n      watch(\n        [userSelectionActive, shouldPanOnScroll, panOnScrollMode, zoomKeyPressed, zoomOnPinch, preventScrolling, noWheelClassName],\n        () => {\n          if (shouldPanOnScroll.value && !zoomKeyPressed.value && !userSelectionActive.value) {\n            d3Selection.on(\n              \"wheel.zoom\",\n              (event) => {\n                if (isWrappedWithClass(event, noWheelClassName.value)) {\n                  return false;\n                }\n                const zoomScroll = zoomKeyPressed.value || zoomOnScroll.value;\n                const pinchZoom = zoomOnPinch.value && event.ctrlKey;\n                const scrollEventEnabled = !preventScrolling.value || shouldPanOnScroll.value || zoomScroll || pinchZoom;\n                if (!scrollEventEnabled) {\n                  return false;\n                }\n                event.preventDefault();\n                event.stopImmediatePropagation();\n                const currentZoom = d3Selection.property(\"__zoom\").k || 1;\n                const _isMacOs = isMacOs();\n                if (!panKeyPressed.value && event.ctrlKey && zoomOnPinch.value && _isMacOs) {\n                  const point = pointer(event);\n                  const pinchDelta = wheelDelta(event);\n                  const zoom2 = currentZoom * 2 ** pinchDelta;\n                  d3Zoom.scaleTo(d3Selection, zoom2, point, event);\n                  return;\n                }\n                const deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n                let deltaX = panOnScrollMode.value === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n                let deltaY = panOnScrollMode.value === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n                if (!_isMacOs && event.shiftKey && panOnScrollMode.value !== PanOnScrollMode.Vertical && !deltaX && deltaY) {\n                  deltaX = deltaY;\n                  deltaY = 0;\n                }\n                d3Zoom.translateBy(\n                  d3Selection,\n                  -(deltaX / currentZoom) * panOnScrollSpeed.value,\n                  -(deltaY / currentZoom) * panOnScrollSpeed.value\n                );\n                const nextViewport = eventToFlowTransform(d3Selection.property(\"__zoom\"));\n                if (panScrollTimeout) {\n                  clearTimeout(panScrollTimeout);\n                }\n                if (!isPanScrolling.value) {\n                  isPanScrolling.value = true;\n                  emits.moveStart({ event, flowTransform: nextViewport });\n                  emits.viewportChangeStart(nextViewport);\n                } else {\n                  emits.move({ event, flowTransform: nextViewport });\n                  emits.viewportChange(nextViewport);\n                  panScrollTimeout = setTimeout(() => {\n                    emits.moveEnd({ event, flowTransform: nextViewport });\n                    emits.viewportChangeEnd(nextViewport);\n                    isPanScrolling.value = false;\n                  }, 150);\n                }\n              },\n              { passive: false }\n            );\n          } else if (typeof d3ZoomHandler !== \"undefined\") {\n            d3Selection.on(\n              \"wheel.zoom\",\n              function(event, d) {\n                const invalidEvent = !preventScrolling.value && event.type === \"wheel\" && !event.ctrlKey;\n                const zoomScroll = zoomKeyPressed.value || zoomOnScroll.value;\n                const pinchZoom = zoomOnPinch.value && event.ctrlKey;\n                const scrollEventsDisabled = !zoomScroll && !panOnScroll.value && !pinchZoom && event.type === \"wheel\";\n                if (scrollEventsDisabled || invalidEvent || isWrappedWithClass(event, noWheelClassName.value)) {\n                  return null;\n                }\n                event.preventDefault();\n                d3ZoomHandler.call(this, event, d);\n              },\n              { passive: false }\n            );\n          }\n        },\n        { immediate: true }\n      );\n    });\n    function isRightClickPan(pan, usedButton) {\n      return usedButton === 2 && Array.isArray(pan) && pan.includes(2);\n    }\n    function viewChanged(prevViewport, eventTransform) {\n      return prevViewport.x !== eventTransform.x && !Number.isNaN(eventTransform.x) || prevViewport.y !== eventTransform.y && !Number.isNaN(eventTransform.y) || prevViewport.zoom !== eventTransform.k && !Number.isNaN(eventTransform.k);\n    }\n    function eventToFlowTransform(eventTransform) {\n      return {\n        x: eventTransform.x,\n        y: eventTransform.y,\n        zoom: eventTransform.k\n      };\n    }\n    function isWrappedWithClass(event, className) {\n      return event.target.closest(`.${className}`);\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        ref_key: \"viewportRef\",\n        ref: viewportRef,\n        class: \"vue-flow__viewport vue-flow__container\"\n      }, [\n        createVNode(_sfc_main$a, {\n          \"is-selecting\": isSelecting.value,\n          \"selection-key-pressed\": unref(selectionKeyPressed),\n          class: normalizeClass({\n            connecting: connectionInProgress.value,\n            dragging: unref(paneDragging),\n            draggable: unref(panOnDrag) === true || Array.isArray(unref(panOnDrag)) && unref(panOnDrag).includes(0)\n          })\n        }, {\n          default: withCtx(() => [\n            createVNode(_sfc_main$9, null, {\n              default: withCtx(() => [\n                renderSlot(_ctx.$slots, \"default\")\n              ]),\n              _: 3\n            })\n          ]),\n          _: 3\n        }, 8, [\"is-selecting\", \"selection-key-pressed\", \"class\"])\n      ], 512);\n    };\n  }\n});\nconst _hoisted_1$5 = [\"id\"];\nconst _hoisted_2 = [\"id\"];\nconst _hoisted_3 = [\"id\"];\nconst __default__$7 = {\n  name: \"A11yDescriptions\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$7 = /* @__PURE__ */ defineComponent({\n  ...__default__$7,\n  setup(__props) {\n    const { id: id2, disableKeyboardA11y, ariaLiveMessage } = useVueFlow();\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [\n        createElementVNode(\"div\", {\n          id: `${unref(ARIA_NODE_DESC_KEY)}-${unref(id2)}`,\n          style: { \"display\": \"none\" }\n        }, \" Press enter or space to select a node. \" + toDisplayString(!unref(disableKeyboardA11y) ? \"You can then use the arrow keys to move the node around.\" : \"\") + \" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. \", 9, _hoisted_1$5),\n        createElementVNode(\"div\", {\n          id: `${unref(ARIA_EDGE_DESC_KEY)}-${unref(id2)}`,\n          style: { \"display\": \"none\" }\n        }, \" Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. \", 8, _hoisted_2),\n        !unref(disableKeyboardA11y) ? (openBlock(), createElementBlock(\"div\", {\n          key: 0,\n          id: `${unref(ARIA_LIVE_MESSAGE)}-${unref(id2)}`,\n          \"aria-live\": \"assertive\",\n          \"aria-atomic\": \"true\",\n          style: { \"position\": \"absolute\", \"width\": \"1px\", \"height\": \"1px\", \"margin\": \"-1px\", \"border\": \"0\", \"padding\": \"0\", \"overflow\": \"hidden\", \"clip\": \"rect(0px, 0px, 0px, 0px)\", \"clip-path\": \"inset(100%)\" }\n        }, toDisplayString(unref(ariaLiveMessage)), 9, _hoisted_3)) : createCommentVNode(\"\", true)\n      ], 64);\n    };\n  }\n});\nfunction useOnInitHandler() {\n  const vfInstance = useVueFlow();\n  watch(\n    () => vfInstance.viewportHelper.value.viewportInitialized,\n    (isInitialized) => {\n      if (isInitialized) {\n        setTimeout(() => {\n          vfInstance.emits.init(vfInstance);\n          vfInstance.emits.paneReady(vfInstance);\n        }, 1);\n      }\n    }\n  );\n}\nfunction shiftX(x, shift, position) {\n  if (position === Position.Left) {\n    return x - shift;\n  }\n  if (position === Position.Right) {\n    return x + shift;\n  }\n  return x;\n}\nfunction shiftY(y, shift, position) {\n  if (position === Position.Top) {\n    return y - shift;\n  }\n  if (position === Position.Bottom) {\n    return y + shift;\n  }\n  return y;\n}\nconst EdgeAnchor = function({\n  radius = 10,\n  centerX = 0,\n  centerY = 0,\n  position = Position.Top,\n  type\n}) {\n  return h(\"circle\", {\n    class: `vue-flow__edgeupdater vue-flow__edgeupdater-${type}`,\n    cx: shiftX(centerX, radius, position),\n    cy: shiftY(centerY, radius, position),\n    r: radius,\n    stroke: \"transparent\",\n    fill: \"transparent\"\n  });\n};\nEdgeAnchor.props = [\"radius\", \"centerX\", \"centerY\", \"position\", \"type\"];\nEdgeAnchor.compatConfig = { MODE: 3 };\nconst EdgeAnchor$1 = EdgeAnchor;\nconst EdgeWrapper = defineComponent({\n  name: \"Edge\",\n  compatConfig: { MODE: 3 },\n  props: [\"id\"],\n  setup(props) {\n    const {\n      id: vueFlowId,\n      addSelectedEdges,\n      connectionMode,\n      edgeUpdaterRadius,\n      emits,\n      nodesSelectionActive,\n      noPanClassName,\n      getEdgeTypes,\n      removeSelectedEdges,\n      findEdge,\n      findNode,\n      isValidConnection,\n      multiSelectionActive,\n      disableKeyboardA11y,\n      elementsSelectable,\n      edgesUpdatable,\n      edgesFocusable,\n      hooks\n    } = useVueFlow();\n    const edge = computed(() => findEdge(props.id));\n    const { emit, on } = useEdgeHooks(edge.value, emits);\n    const slots = inject(Slots);\n    const instance = getCurrentInstance();\n    const mouseOver = ref(false);\n    const updating = ref(false);\n    const nodeId = ref(\"\");\n    const handleId = ref(null);\n    const edgeUpdaterType = ref(\"source\");\n    const edgeEl = ref(null);\n    const isSelectable = toRef(\n      () => typeof edge.value.selectable === \"undefined\" ? elementsSelectable.value : edge.value.selectable\n    );\n    const isUpdatable = toRef(() => typeof edge.value.updatable === \"undefined\" ? edgesUpdatable.value : edge.value.updatable);\n    const isFocusable = toRef(() => typeof edge.value.focusable === \"undefined\" ? edgesFocusable.value : edge.value.focusable);\n    provide(EdgeId, props.id);\n    provide(EdgeRef, edgeEl);\n    const edgeClass = computed(() => edge.value.class instanceof Function ? edge.value.class(edge.value) : edge.value.class);\n    const edgeStyle = computed(() => edge.value.style instanceof Function ? edge.value.style(edge.value) : edge.value.style);\n    const edgeCmp = computed(() => {\n      const name = edge.value.type || \"default\";\n      const slot = slots == null ? void 0 : slots[`edge-${name}`];\n      if (slot) {\n        return slot;\n      }\n      let edgeType = edge.value.template ?? getEdgeTypes.value[name];\n      if (typeof edgeType === \"string\") {\n        if (instance) {\n          const components = Object.keys(instance.appContext.components);\n          if (components && components.includes(name)) {\n            edgeType = resolveComponent(name, false);\n          }\n        }\n      }\n      if (edgeType && typeof edgeType !== \"string\") {\n        return edgeType;\n      }\n      emits.error(new VueFlowError(ErrorCode.EDGE_TYPE_MISSING, edgeType));\n      return false;\n    });\n    const { handlePointerDown } = useHandle({\n      nodeId,\n      handleId,\n      type: edgeUpdaterType,\n      isValidConnection,\n      edgeUpdaterType,\n      onEdgeUpdate,\n      onEdgeUpdateEnd\n    });\n    return () => {\n      const sourceNode = findNode(edge.value.source);\n      const targetNode = findNode(edge.value.target);\n      const pathOptions = \"pathOptions\" in edge.value ? edge.value.pathOptions : {};\n      if (!sourceNode && !targetNode) {\n        emits.error(new VueFlowError(ErrorCode.EDGE_SOURCE_TARGET_MISSING, edge.value.id, edge.value.source, edge.value.target));\n        return null;\n      }\n      if (!sourceNode) {\n        emits.error(new VueFlowError(ErrorCode.EDGE_SOURCE_MISSING, edge.value.id, edge.value.source));\n        return null;\n      }\n      if (!targetNode) {\n        emits.error(new VueFlowError(ErrorCode.EDGE_TARGET_MISSING, edge.value.id, edge.value.target));\n        return null;\n      }\n      if (!edge.value || edge.value.hidden || sourceNode.hidden || targetNode.hidden) {\n        return null;\n      }\n      let sourceNodeHandles;\n      if (connectionMode.value === ConnectionMode.Strict) {\n        sourceNodeHandles = sourceNode.handleBounds.source;\n      } else {\n        sourceNodeHandles = [...sourceNode.handleBounds.source || [], ...sourceNode.handleBounds.target || []];\n      }\n      const sourceHandle = getEdgeHandle(sourceNodeHandles, edge.value.sourceHandle);\n      let targetNodeHandles;\n      if (connectionMode.value === ConnectionMode.Strict) {\n        targetNodeHandles = targetNode.handleBounds.target;\n      } else {\n        targetNodeHandles = [...targetNode.handleBounds.target || [], ...targetNode.handleBounds.source || []];\n      }\n      const targetHandle = getEdgeHandle(targetNodeHandles, edge.value.targetHandle);\n      const sourcePosition = (sourceHandle == null ? void 0 : sourceHandle.position) || Position.Bottom;\n      const targetPosition = (targetHandle == null ? void 0 : targetHandle.position) || Position.Top;\n      const { x: sourceX, y: sourceY } = getHandlePosition(sourceNode, sourceHandle, sourcePosition);\n      const { x: targetX, y: targetY } = getHandlePosition(targetNode, targetHandle, targetPosition);\n      edge.value.sourceX = sourceX;\n      edge.value.sourceY = sourceY;\n      edge.value.targetX = targetX;\n      edge.value.targetY = targetY;\n      return h(\n        \"g\",\n        {\n          \"ref\": edgeEl,\n          \"key\": props.id,\n          \"data-id\": props.id,\n          \"class\": [\n            \"vue-flow__edge\",\n            `vue-flow__edge-${edgeCmp.value === false ? \"default\" : edge.value.type || \"default\"}`,\n            noPanClassName.value,\n            edgeClass.value,\n            {\n              updating: mouseOver.value,\n              selected: edge.value.selected,\n              animated: edge.value.animated,\n              inactive: !isSelectable.value && !hooks.value.edgeClick.hasListeners()\n            }\n          ],\n          \"tabIndex\": isFocusable.value ? 0 : void 0,\n          \"aria-label\": edge.value.ariaLabel === null ? void 0 : edge.value.ariaLabel ?? `Edge from ${edge.value.source} to ${edge.value.target}`,\n          \"aria-describedby\": isFocusable.value ? `${ARIA_EDGE_DESC_KEY}-${vueFlowId}` : void 0,\n          \"aria-roledescription\": \"edge\",\n          \"role\": isFocusable.value ? \"group\" : \"img\",\n          ...edge.value.domAttributes,\n          \"onClick\": onEdgeClick,\n          \"onContextmenu\": onEdgeContextMenu,\n          \"onDblclick\": onDoubleClick,\n          \"onMouseenter\": onEdgeMouseEnter,\n          \"onMousemove\": onEdgeMouseMove,\n          \"onMouseleave\": onEdgeMouseLeave,\n          \"onKeyDown\": isFocusable.value ? onKeyDown : void 0\n        },\n        [\n          updating.value ? null : h(edgeCmp.value === false ? getEdgeTypes.value.default : edgeCmp.value, {\n            id: props.id,\n            sourceNode,\n            targetNode,\n            source: edge.value.source,\n            target: edge.value.target,\n            type: edge.value.type,\n            updatable: isUpdatable.value,\n            selected: edge.value.selected,\n            animated: edge.value.animated,\n            label: edge.value.label,\n            labelStyle: edge.value.labelStyle,\n            labelShowBg: edge.value.labelShowBg,\n            labelBgStyle: edge.value.labelBgStyle,\n            labelBgPadding: edge.value.labelBgPadding,\n            labelBgBorderRadius: edge.value.labelBgBorderRadius,\n            data: edge.value.data,\n            events: { ...edge.value.events, ...on },\n            style: edgeStyle.value,\n            markerStart: `url('#${getMarkerId(edge.value.markerStart, vueFlowId)}')`,\n            markerEnd: `url('#${getMarkerId(edge.value.markerEnd, vueFlowId)}')`,\n            sourcePosition,\n            targetPosition,\n            sourceX,\n            sourceY,\n            targetX,\n            targetY,\n            sourceHandleId: edge.value.sourceHandle,\n            targetHandleId: edge.value.targetHandle,\n            interactionWidth: edge.value.interactionWidth,\n            ...pathOptions\n          }),\n          [\n            isUpdatable.value === \"source\" || isUpdatable.value === true ? [\n              h(\n                \"g\",\n                {\n                  onMousedown: onEdgeUpdaterSourceMouseDown,\n                  onMouseenter: onEdgeUpdaterMouseEnter,\n                  onMouseout: onEdgeUpdaterMouseOut\n                },\n                h(EdgeAnchor$1, {\n                  \"position\": sourcePosition,\n                  \"centerX\": sourceX,\n                  \"centerY\": sourceY,\n                  \"radius\": edgeUpdaterRadius.value,\n                  \"type\": \"source\",\n                  \"data-type\": \"source\"\n                })\n              )\n            ] : null,\n            isUpdatable.value === \"target\" || isUpdatable.value === true ? [\n              h(\n                \"g\",\n                {\n                  onMousedown: onEdgeUpdaterTargetMouseDown,\n                  onMouseenter: onEdgeUpdaterMouseEnter,\n                  onMouseout: onEdgeUpdaterMouseOut\n                },\n                h(EdgeAnchor$1, {\n                  \"position\": targetPosition,\n                  \"centerX\": targetX,\n                  \"centerY\": targetY,\n                  \"radius\": edgeUpdaterRadius.value,\n                  \"type\": \"target\",\n                  \"data-type\": \"target\"\n                })\n              )\n            ] : null\n          ]\n        ]\n      );\n    };\n    function onEdgeUpdaterMouseEnter() {\n      mouseOver.value = true;\n    }\n    function onEdgeUpdaterMouseOut() {\n      mouseOver.value = false;\n    }\n    function onEdgeUpdate(event, connection) {\n      emit.update({ event, edge: edge.value, connection });\n    }\n    function onEdgeUpdateEnd(event) {\n      emit.updateEnd({ event, edge: edge.value });\n      updating.value = false;\n    }\n    function handleEdgeUpdater(event, isSourceHandle) {\n      if (event.button !== 0) {\n        return;\n      }\n      updating.value = true;\n      nodeId.value = isSourceHandle ? edge.value.target : edge.value.source;\n      handleId.value = (isSourceHandle ? edge.value.targetHandle : edge.value.sourceHandle) ?? null;\n      edgeUpdaterType.value = isSourceHandle ? \"target\" : \"source\";\n      emit.updateStart({ event, edge: edge.value });\n      handlePointerDown(event);\n    }\n    function onEdgeClick(event) {\n      var _a;\n      const data = { event, edge: edge.value };\n      if (isSelectable.value) {\n        nodesSelectionActive.value = false;\n        if (edge.value.selected && multiSelectionActive.value) {\n          removeSelectedEdges([edge.value]);\n          (_a = edgeEl.value) == null ? void 0 : _a.blur();\n        } else {\n          addSelectedEdges([edge.value]);\n        }\n      }\n      emit.click(data);\n    }\n    function onEdgeContextMenu(event) {\n      emit.contextMenu({ event, edge: edge.value });\n    }\n    function onDoubleClick(event) {\n      emit.doubleClick({ event, edge: edge.value });\n    }\n    function onEdgeMouseEnter(event) {\n      emit.mouseEnter({ event, edge: edge.value });\n    }\n    function onEdgeMouseMove(event) {\n      emit.mouseMove({ event, edge: edge.value });\n    }\n    function onEdgeMouseLeave(event) {\n      emit.mouseLeave({ event, edge: edge.value });\n    }\n    function onEdgeUpdaterSourceMouseDown(event) {\n      handleEdgeUpdater(event, true);\n    }\n    function onEdgeUpdaterTargetMouseDown(event) {\n      handleEdgeUpdater(event, false);\n    }\n    function onKeyDown(event) {\n      var _a;\n      if (!disableKeyboardA11y.value && elementSelectionKeys.includes(event.key) && isSelectable.value) {\n        const unselect = event.key === \"Escape\";\n        if (unselect) {\n          (_a = edgeEl.value) == null ? void 0 : _a.blur();\n          removeSelectedEdges([findEdge(props.id)]);\n        } else {\n          addSelectedEdges([findEdge(props.id)]);\n        }\n      }\n    }\n  }\n});\nconst EdgeWrapper$1 = EdgeWrapper;\nconst ConnectionLine = defineComponent({\n  name: \"ConnectionLine\",\n  compatConfig: { MODE: 3 },\n  setup() {\n    var _a;\n    const {\n      id: id2,\n      connectionMode,\n      connectionStartHandle,\n      connectionEndHandle,\n      connectionPosition,\n      connectionLineType,\n      connectionLineStyle,\n      connectionLineOptions,\n      connectionStatus,\n      viewport,\n      findNode\n    } = useVueFlow();\n    const connectionLineComponent = (_a = inject(Slots)) == null ? void 0 : _a[\"connection-line\"];\n    const fromNode = computed(() => {\n      var _a2;\n      return findNode((_a2 = connectionStartHandle.value) == null ? void 0 : _a2.nodeId);\n    });\n    const toNode = computed(() => {\n      var _a2;\n      return findNode((_a2 = connectionEndHandle.value) == null ? void 0 : _a2.nodeId) ?? null;\n    });\n    const toXY = computed(() => {\n      return {\n        x: (connectionPosition.value.x - viewport.value.x) / viewport.value.zoom,\n        y: (connectionPosition.value.y - viewport.value.y) / viewport.value.zoom\n      };\n    });\n    const markerStart = computed(\n      () => connectionLineOptions.value.markerStart ? `url(#${getMarkerId(connectionLineOptions.value.markerStart, id2)})` : \"\"\n    );\n    const markerEnd = computed(\n      () => connectionLineOptions.value.markerEnd ? `url(#${getMarkerId(connectionLineOptions.value.markerEnd, id2)})` : \"\"\n    );\n    return () => {\n      var _a2, _b, _c;\n      if (!fromNode.value || !connectionStartHandle.value) {\n        return null;\n      }\n      const startHandleId = connectionStartHandle.value.id;\n      const handleType = connectionStartHandle.value.type;\n      const fromHandleBounds = fromNode.value.handleBounds;\n      let handleBounds = (fromHandleBounds == null ? void 0 : fromHandleBounds[handleType]) ?? [];\n      if (connectionMode.value === ConnectionMode.Loose) {\n        const oppositeBounds = (fromHandleBounds == null ? void 0 : fromHandleBounds[handleType === \"source\" ? \"target\" : \"source\"]) ?? [];\n        handleBounds = [...handleBounds, ...oppositeBounds];\n      }\n      if (!handleBounds) {\n        return null;\n      }\n      const fromHandle = (startHandleId ? handleBounds.find((d) => d.id === startHandleId) : handleBounds[0]) ?? null;\n      const fromPosition = (fromHandle == null ? void 0 : fromHandle.position) ?? Position.Top;\n      const { x: fromX, y: fromY } = getHandlePosition(fromNode.value, fromHandle, fromPosition);\n      let toHandle = null;\n      if (toNode.value) {\n        if (connectionMode.value === ConnectionMode.Strict) {\n          toHandle = ((_a2 = toNode.value.handleBounds[handleType === \"source\" ? \"target\" : \"source\"]) == null ? void 0 : _a2.find(\n            (d) => {\n              var _a3;\n              return d.id === ((_a3 = connectionEndHandle.value) == null ? void 0 : _a3.id);\n            }\n          )) || null;\n        } else {\n          toHandle = ((_b = [...toNode.value.handleBounds.source ?? [], ...toNode.value.handleBounds.target ?? []]) == null ? void 0 : _b.find(\n            (d) => {\n              var _a3;\n              return d.id === ((_a3 = connectionEndHandle.value) == null ? void 0 : _a3.id);\n            }\n          )) || null;\n        }\n      }\n      const toPosition = ((_c = connectionEndHandle.value) == null ? void 0 : _c.position) ?? (fromPosition ? oppositePosition[fromPosition] : null);\n      if (!fromPosition || !toPosition) {\n        return null;\n      }\n      const type = connectionLineType.value ?? connectionLineOptions.value.type ?? ConnectionLineType.Bezier;\n      let dAttr = \"\";\n      const pathParams = {\n        sourceX: fromX,\n        sourceY: fromY,\n        sourcePosition: fromPosition,\n        targetX: toXY.value.x,\n        targetY: toXY.value.y,\n        targetPosition: toPosition\n      };\n      if (type === ConnectionLineType.Bezier) {\n        [dAttr] = getBezierPath(pathParams);\n      } else if (type === ConnectionLineType.Step) {\n        [dAttr] = getSmoothStepPath({\n          ...pathParams,\n          borderRadius: 0\n        });\n      } else if (type === ConnectionLineType.SmoothStep) {\n        [dAttr] = getSmoothStepPath(pathParams);\n      } else if (type === ConnectionLineType.SimpleBezier) {\n        [dAttr] = getSimpleBezierPath(pathParams);\n      } else {\n        dAttr = `M${fromX},${fromY} ${toXY.value.x},${toXY.value.y}`;\n      }\n      return h(\n        \"svg\",\n        { class: \"vue-flow__edges vue-flow__connectionline vue-flow__container\" },\n        h(\n          \"g\",\n          { class: \"vue-flow__connection\" },\n          connectionLineComponent ? h(connectionLineComponent, {\n            sourceX: fromX,\n            sourceY: fromY,\n            sourcePosition: fromPosition,\n            targetX: toXY.value.x,\n            targetY: toXY.value.y,\n            targetPosition: toPosition,\n            sourceNode: fromNode.value,\n            sourceHandle: fromHandle,\n            targetNode: toNode.value,\n            targetHandle: toHandle,\n            markerEnd: markerEnd.value,\n            markerStart: markerStart.value,\n            connectionStatus: connectionStatus.value\n          }) : h(\"path\", {\n            \"d\": dAttr,\n            \"class\": [connectionLineOptions.value.class, connectionStatus.value, \"vue-flow__connection-path\"],\n            \"style\": {\n              ...connectionLineStyle.value,\n              ...connectionLineOptions.value.style\n            },\n            \"marker-end\": markerEnd.value,\n            \"marker-start\": markerStart.value\n          })\n        )\n      );\n    };\n  }\n});\nconst ConnectionLine$1 = ConnectionLine;\nconst _hoisted_1$4 = [\"id\", \"markerWidth\", \"markerHeight\", \"markerUnits\", \"orient\"];\nconst __default__$6 = {\n  name: \"MarkerType\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$6 = /* @__PURE__ */ defineComponent({\n  ...__default__$6,\n  props: {\n    id: {},\n    type: {},\n    color: { default: \"none\" },\n    width: { default: 12.5 },\n    height: { default: 12.5 },\n    markerUnits: { default: \"strokeWidth\" },\n    orient: { default: \"auto-start-reverse\" },\n    strokeWidth: { default: 1 }\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"marker\", {\n        id: _ctx.id,\n        class: \"vue-flow__arrowhead\",\n        viewBox: \"-10 -10 20 20\",\n        refX: \"0\",\n        refY: \"0\",\n        markerWidth: `${_ctx.width}`,\n        markerHeight: `${_ctx.height}`,\n        markerUnits: _ctx.markerUnits,\n        orient: _ctx.orient\n      }, [\n        _ctx.type === unref(MarkerType).ArrowClosed ? (openBlock(), createElementBlock(\"polyline\", {\n          key: 0,\n          style: normalizeStyle({\n            stroke: _ctx.color,\n            fill: _ctx.color,\n            strokeWidth: _ctx.strokeWidth\n          }),\n          \"stroke-linecap\": \"round\",\n          \"stroke-linejoin\": \"round\",\n          points: \"-5,-4 0,0 -5,4 -5,-4\"\n        }, null, 4)) : createCommentVNode(\"\", true),\n        _ctx.type === unref(MarkerType).Arrow ? (openBlock(), createElementBlock(\"polyline\", {\n          key: 1,\n          style: normalizeStyle({\n            stroke: _ctx.color,\n            strokeWidth: _ctx.strokeWidth\n          }),\n          \"stroke-linecap\": \"round\",\n          \"stroke-linejoin\": \"round\",\n          fill: \"none\",\n          points: \"-5,-4 0,0 -5,4\"\n        }, null, 4)) : createCommentVNode(\"\", true)\n      ], 8, _hoisted_1$4);\n    };\n  }\n});\nconst _hoisted_1$3 = {\n  class: \"vue-flow__marker vue-flow__container\",\n  \"aria-hidden\": \"true\"\n};\nconst __default__$5 = {\n  name: \"MarkerDefinitions\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$5 = /* @__PURE__ */ defineComponent({\n  ...__default__$5,\n  setup(__props) {\n    const { id: vueFlowId, edges, connectionLineOptions, defaultMarkerColor: defaultColor } = useVueFlow();\n    const markers = computed(() => {\n      const ids = /* @__PURE__ */ new Set();\n      const markers2 = [];\n      const createMarkers = (marker) => {\n        if (marker) {\n          const markerId = getMarkerId(marker, vueFlowId);\n          if (!ids.has(markerId)) {\n            if (typeof marker === \"object\") {\n              markers2.push({ ...marker, id: markerId, color: marker.color || defaultColor.value });\n            } else {\n              markers2.push({ id: markerId, color: defaultColor.value, type: marker });\n            }\n            ids.add(markerId);\n          }\n        }\n      };\n      for (const marker of [connectionLineOptions.value.markerEnd, connectionLineOptions.value.markerStart]) {\n        createMarkers(marker);\n      }\n      for (const edge of edges.value) {\n        for (const marker of [edge.markerStart, edge.markerEnd]) {\n          createMarkers(marker);\n        }\n      }\n      return markers2.sort((a, b) => a.id.localeCompare(b.id));\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"svg\", _hoisted_1$3, [\n        createElementVNode(\"defs\", null, [\n          (openBlock(true), createElementBlock(Fragment, null, renderList(markers.value, (marker) => {\n            return openBlock(), createBlock(_sfc_main$6, {\n              id: marker.id,\n              key: marker.id,\n              type: marker.type,\n              color: marker.color,\n              width: marker.width,\n              height: marker.height,\n              markerUnits: marker.markerUnits,\n              \"stroke-width\": marker.strokeWidth,\n              orient: marker.orient\n            }, null, 8, [\"id\", \"type\", \"color\", \"width\", \"height\", \"markerUnits\", \"stroke-width\", \"orient\"]);\n          }), 128))\n        ])\n      ]);\n    };\n  }\n});\nconst __default__$4 = {\n  name: \"Edges\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$4 = /* @__PURE__ */ defineComponent({\n  ...__default__$4,\n  setup(__props) {\n    const { findNode, getEdges, elevateEdgesOnSelect } = useVueFlow();\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [\n        createVNode(_sfc_main$5),\n        (openBlock(true), createElementBlock(Fragment, null, renderList(unref(getEdges), (edge) => {\n          return openBlock(), createElementBlock(\"svg\", {\n            key: edge.id,\n            class: \"vue-flow__edges vue-flow__container\",\n            style: normalizeStyle({ zIndex: unref(getEdgeZIndex)(edge, unref(findNode), unref(elevateEdgesOnSelect)) })\n          }, [\n            createVNode(unref(EdgeWrapper$1), {\n              id: edge.id\n            }, null, 8, [\"id\"])\n          ], 4);\n        }), 128)),\n        createVNode(unref(ConnectionLine$1))\n      ], 64);\n    };\n  }\n});\nconst NodeWrapper = defineComponent({\n  name: \"Node\",\n  compatConfig: { MODE: 3 },\n  props: [\"id\", \"resizeObserver\"],\n  setup(props) {\n    const {\n      id: vueFlowId,\n      noPanClassName,\n      selectNodesOnDrag,\n      nodesSelectionActive,\n      multiSelectionActive,\n      emits,\n      removeSelectedNodes,\n      addSelectedNodes,\n      updateNodeDimensions,\n      onUpdateNodeInternals,\n      getNodeTypes,\n      nodeExtent,\n      elevateNodesOnSelect,\n      disableKeyboardA11y,\n      ariaLiveMessage,\n      snapToGrid,\n      snapGrid,\n      nodeDragThreshold,\n      nodesDraggable,\n      elementsSelectable,\n      nodesConnectable,\n      nodesFocusable,\n      hooks\n    } = useVueFlow();\n    const nodeElement = ref(null);\n    provide(NodeRef, nodeElement);\n    provide(NodeId, props.id);\n    const slots = inject(Slots);\n    const instance = getCurrentInstance();\n    const updateNodePositions = useUpdateNodePositions();\n    const { node, parentNode } = useNode(props.id);\n    const { emit, on } = useNodeHooks(node, emits);\n    const isDraggable = toRef(() => typeof node.draggable === \"undefined\" ? nodesDraggable.value : node.draggable);\n    const isSelectable = toRef(() => typeof node.selectable === \"undefined\" ? elementsSelectable.value : node.selectable);\n    const isConnectable = toRef(() => typeof node.connectable === \"undefined\" ? nodesConnectable.value : node.connectable);\n    const isFocusable = toRef(() => typeof node.focusable === \"undefined\" ? nodesFocusable.value : node.focusable);\n    const hasPointerEvents = computed(\n      () => isSelectable.value || isDraggable.value || hooks.value.nodeClick.hasListeners() || hooks.value.nodeDoubleClick.hasListeners() || hooks.value.nodeMouseEnter.hasListeners() || hooks.value.nodeMouseMove.hasListeners() || hooks.value.nodeMouseLeave.hasListeners()\n    );\n    const isInit = toRef(() => !!node.dimensions.width && !!node.dimensions.height);\n    const nodeCmp = computed(() => {\n      const name = node.type || \"default\";\n      const slot = slots == null ? void 0 : slots[`node-${name}`];\n      if (slot) {\n        return slot;\n      }\n      let nodeType = node.template || getNodeTypes.value[name];\n      if (typeof nodeType === \"string\") {\n        if (instance) {\n          const components = Object.keys(instance.appContext.components);\n          if (components && components.includes(name)) {\n            nodeType = resolveComponent(name, false);\n          }\n        }\n      }\n      if (nodeType && typeof nodeType !== \"string\") {\n        return nodeType;\n      }\n      emits.error(new VueFlowError(ErrorCode.NODE_TYPE_MISSING, nodeType));\n      return false;\n    });\n    const dragging = useDrag({\n      id: props.id,\n      el: nodeElement,\n      disabled: () => !isDraggable.value,\n      selectable: isSelectable,\n      dragHandle: () => node.dragHandle,\n      onStart(event) {\n        emit.dragStart(event);\n      },\n      onDrag(event) {\n        emit.drag(event);\n      },\n      onStop(event) {\n        emit.dragStop(event);\n      },\n      onClick(event) {\n        onSelectNode(event);\n      }\n    });\n    const getClass = computed(() => node.class instanceof Function ? node.class(node) : node.class);\n    const getStyle = computed(() => {\n      const styles = (node.style instanceof Function ? node.style(node) : node.style) || {};\n      const width = node.width instanceof Function ? node.width(node) : node.width;\n      const height = node.height instanceof Function ? node.height(node) : node.height;\n      if (!styles.width && width) {\n        styles.width = typeof width === \"string\" ? width : `${width}px`;\n      }\n      if (!styles.height && height) {\n        styles.height = typeof height === \"string\" ? height : `${height}px`;\n      }\n      return styles;\n    });\n    const zIndex = toRef(() => Number(node.zIndex ?? getStyle.value.zIndex ?? 0));\n    onUpdateNodeInternals((updateIds) => {\n      if (updateIds.includes(props.id) || !updateIds.length) {\n        updateInternals();\n      }\n    });\n    onMounted(() => {\n      watch(\n        () => node.hidden,\n        (isHidden = false, _, onCleanup) => {\n          if (!isHidden && nodeElement.value) {\n            props.resizeObserver.observe(nodeElement.value);\n            onCleanup(() => {\n              if (nodeElement.value) {\n                props.resizeObserver.unobserve(nodeElement.value);\n              }\n            });\n          }\n        },\n        { immediate: true, flush: \"post\" }\n      );\n    });\n    watch([() => node.type, () => node.sourcePosition, () => node.targetPosition], () => {\n      nextTick(() => {\n        updateNodeDimensions([{ id: props.id, nodeElement: nodeElement.value, forceUpdate: true }]);\n      });\n    });\n    watch(\n      [\n        () => node.position.x,\n        () => node.position.y,\n        () => {\n          var _a;\n          return (_a = parentNode.value) == null ? void 0 : _a.computedPosition.x;\n        },\n        () => {\n          var _a;\n          return (_a = parentNode.value) == null ? void 0 : _a.computedPosition.y;\n        },\n        () => {\n          var _a;\n          return (_a = parentNode.value) == null ? void 0 : _a.computedPosition.z;\n        },\n        zIndex,\n        () => node.selected,\n        () => node.dimensions.height,\n        () => node.dimensions.width,\n        () => {\n          var _a;\n          return (_a = parentNode.value) == null ? void 0 : _a.dimensions.height;\n        },\n        () => {\n          var _a;\n          return (_a = parentNode.value) == null ? void 0 : _a.dimensions.width;\n        }\n      ],\n      ([newX, newY, parentX, parentY, parentZ, nodeZIndex]) => {\n        const xyzPos = {\n          x: newX,\n          y: newY,\n          z: nodeZIndex + (elevateNodesOnSelect.value ? node.selected ? 1e3 : 0 : 0)\n        };\n        if (typeof parentX !== \"undefined\" && typeof parentY !== \"undefined\") {\n          node.computedPosition = getXYZPos({ x: parentX, y: parentY, z: parentZ }, xyzPos);\n        } else {\n          node.computedPosition = xyzPos;\n        }\n      },\n      { flush: \"post\", immediate: true }\n    );\n    watch([() => node.extent, nodeExtent], ([nodeExtent2, globalExtent], [oldNodeExtent, oldGlobalExtent]) => {\n      if (nodeExtent2 !== oldNodeExtent || globalExtent !== oldGlobalExtent) {\n        clampPosition2();\n      }\n    });\n    if (node.extent === \"parent\" || typeof node.extent === \"object\" && \"range\" in node.extent && node.extent.range === \"parent\") {\n      until(() => isInit).toBe(true).then(clampPosition2);\n    } else {\n      clampPosition2();\n    }\n    return () => {\n      if (node.hidden) {\n        return null;\n      }\n      return h(\n        \"div\",\n        {\n          \"ref\": nodeElement,\n          \"data-id\": node.id,\n          \"class\": [\n            \"vue-flow__node\",\n            `vue-flow__node-${nodeCmp.value === false ? \"default\" : node.type || \"default\"}`,\n            {\n              [noPanClassName.value]: isDraggable.value,\n              dragging: dragging == null ? void 0 : dragging.value,\n              draggable: isDraggable.value,\n              selected: node.selected,\n              selectable: isSelectable.value,\n              parent: node.isParent\n            },\n            getClass.value\n          ],\n          \"style\": {\n            visibility: isInit.value ? \"visible\" : \"hidden\",\n            zIndex: node.computedPosition.z ?? zIndex.value,\n            transform: `translate(${node.computedPosition.x}px,${node.computedPosition.y}px)`,\n            pointerEvents: hasPointerEvents.value ? \"all\" : \"none\",\n            ...getStyle.value\n          },\n          \"tabIndex\": isFocusable.value ? 0 : void 0,\n          \"role\": isFocusable.value ? \"group\" : void 0,\n          \"aria-describedby\": disableKeyboardA11y.value ? void 0 : `${ARIA_NODE_DESC_KEY}-${vueFlowId}`,\n          \"aria-label\": node.ariaLabel,\n          \"aria-roledescription\": \"node\",\n          ...node.domAttributes,\n          \"onMouseenter\": onMouseEnter,\n          \"onMousemove\": onMouseMove,\n          \"onMouseleave\": onMouseLeave,\n          \"onContextmenu\": onContextMenu,\n          \"onClick\": onSelectNode,\n          \"onDblclick\": onDoubleClick,\n          \"onKeydown\": onKeyDown\n        },\n        [\n          h(nodeCmp.value === false ? getNodeTypes.value.default : nodeCmp.value, {\n            id: node.id,\n            type: node.type,\n            data: node.data,\n            events: { ...node.events, ...on },\n            selected: node.selected,\n            resizing: node.resizing,\n            dragging: dragging.value,\n            connectable: isConnectable.value,\n            position: node.computedPosition,\n            dimensions: node.dimensions,\n            isValidTargetPos: node.isValidTargetPos,\n            isValidSourcePos: node.isValidSourcePos,\n            parent: node.parentNode,\n            parentNodeId: node.parentNode,\n            zIndex: node.computedPosition.z ?? zIndex.value,\n            targetPosition: node.targetPosition,\n            sourcePosition: node.sourcePosition,\n            label: node.label,\n            dragHandle: node.dragHandle,\n            onUpdateNodeInternals: updateInternals\n          })\n        ]\n      );\n    };\n    function clampPosition2() {\n      const nextPosition = node.computedPosition;\n      const { computedPosition, position } = calcNextPosition(\n        node,\n        snapToGrid.value ? snapPosition(nextPosition, snapGrid.value) : nextPosition,\n        emits.error,\n        nodeExtent.value,\n        parentNode.value\n      );\n      if (node.computedPosition.x !== computedPosition.x || node.computedPosition.y !== computedPosition.y) {\n        node.computedPosition = { ...node.computedPosition, ...computedPosition };\n      }\n      if (node.position.x !== position.x || node.position.y !== position.y) {\n        node.position = position;\n      }\n    }\n    function updateInternals() {\n      if (nodeElement.value) {\n        updateNodeDimensions([{ id: props.id, nodeElement: nodeElement.value, forceUpdate: true }]);\n      }\n    }\n    function onMouseEnter(event) {\n      if (!(dragging == null ? void 0 : dragging.value)) {\n        emit.mouseEnter({ event, node });\n      }\n    }\n    function onMouseMove(event) {\n      if (!(dragging == null ? void 0 : dragging.value)) {\n        emit.mouseMove({ event, node });\n      }\n    }\n    function onMouseLeave(event) {\n      if (!(dragging == null ? void 0 : dragging.value)) {\n        emit.mouseLeave({ event, node });\n      }\n    }\n    function onContextMenu(event) {\n      return emit.contextMenu({ event, node });\n    }\n    function onDoubleClick(event) {\n      return emit.doubleClick({ event, node });\n    }\n    function onSelectNode(event) {\n      if (isSelectable.value && (!selectNodesOnDrag.value || !isDraggable.value || nodeDragThreshold.value > 0)) {\n        handleNodeClick(\n          node,\n          multiSelectionActive.value,\n          addSelectedNodes,\n          removeSelectedNodes,\n          nodesSelectionActive,\n          false,\n          nodeElement.value\n        );\n      }\n      emit.click({ event, node });\n    }\n    function onKeyDown(event) {\n      if (isInputDOMNode(event) || disableKeyboardA11y.value) {\n        return;\n      }\n      if (elementSelectionKeys.includes(event.key) && isSelectable.value) {\n        const unselect = event.key === \"Escape\";\n        handleNodeClick(\n          node,\n          multiSelectionActive.value,\n          addSelectedNodes,\n          removeSelectedNodes,\n          nodesSelectionActive,\n          unselect,\n          nodeElement.value\n        );\n      } else if (isDraggable.value && node.selected && arrowKeyDiffs[event.key]) {\n        event.preventDefault();\n        ariaLiveMessage.value = `Moved selected node ${event.key.replace(\"Arrow\", \"\").toLowerCase()}. New position, x: ${~~node.position.x}, y: ${~~node.position.y}`;\n        updateNodePositions(\n          {\n            x: arrowKeyDiffs[event.key].x,\n            y: arrowKeyDiffs[event.key].y\n          },\n          event.shiftKey\n        );\n      }\n    }\n  }\n});\nconst NodeWrapper$1 = NodeWrapper;\nconst _hoisted_1$2 = {\n  height: \"0\",\n  width: \"0\"\n};\nconst __default__$3 = {\n  name: \"EdgeLabelRenderer\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$3 = /* @__PURE__ */ defineComponent({\n  ...__default__$3,\n  setup(__props) {\n    const { viewportRef } = useVueFlow();\n    const teleportTarget = toRef(() => {\n      var _a;\n      return (_a = viewportRef.value) == null ? void 0 : _a.getElementsByClassName(\"vue-flow__edge-labels\")[0];\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"svg\", null, [\n        (openBlock(), createElementBlock(\"foreignObject\", _hoisted_1$2, [\n          (openBlock(), createBlock(Teleport, {\n            to: teleportTarget.value,\n            disabled: !teleportTarget.value\n          }, [\n            renderSlot(_ctx.$slots, \"default\")\n          ], 8, [\"to\", \"disabled\"]))\n        ]))\n      ]);\n    };\n  }\n});\nfunction useNodesInitialized(options = { includeHiddenNodes: false }) {\n  const { nodes } = useVueFlow();\n  return computed(() => {\n    if (nodes.value.length === 0) {\n      return false;\n    }\n    for (const node of nodes.value) {\n      if (options.includeHiddenNodes || !node.hidden) {\n        if ((node == null ? void 0 : node.handleBounds) === void 0 || node.dimensions.width === 0 || node.dimensions.height === 0) {\n          return false;\n        }\n      }\n    }\n    return true;\n  });\n}\nconst _hoisted_1$1 = { class: \"vue-flow__nodes vue-flow__container\" };\nconst __default__$2 = {\n  name: \"Nodes\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$2 = /* @__PURE__ */ defineComponent({\n  ...__default__$2,\n  setup(__props) {\n    const { getNodes, updateNodeDimensions, emits } = useVueFlow();\n    const nodesInitialized = useNodesInitialized();\n    const resizeObserver = ref();\n    watch(\n      nodesInitialized,\n      (isInit) => {\n        if (isInit) {\n          nextTick(() => {\n            emits.nodesInitialized(getNodes.value);\n          });\n        }\n      },\n      { immediate: true }\n    );\n    onMounted(() => {\n      resizeObserver.value = new ResizeObserver((entries) => {\n        const updates = entries.map((entry) => {\n          const id2 = entry.target.getAttribute(\"data-id\");\n          return {\n            id: id2,\n            nodeElement: entry.target,\n            forceUpdate: true\n          };\n        });\n        nextTick(() => updateNodeDimensions(updates));\n      });\n    });\n    onBeforeUnmount(() => {\n      var _a;\n      return (_a = resizeObserver.value) == null ? void 0 : _a.disconnect();\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$1, [\n        resizeObserver.value ? (openBlock(true), createElementBlock(Fragment, { key: 0 }, renderList(unref(getNodes), (node, __, ___, _cached) => {\n          const _memo = [node.id];\n          if (_cached && _cached.key === node.id && isMemoSame(_cached, _memo))\n            return _cached;\n          const _item = (openBlock(), createBlock(unref(NodeWrapper$1), {\n            id: node.id,\n            key: node.id,\n            \"resize-observer\": resizeObserver.value\n          }, null, 8, [\"id\", \"resize-observer\"]));\n          _item.memo = _memo;\n          return _item;\n        }, _cache, 0), 128)) : createCommentVNode(\"\", true)\n      ]);\n    };\n  }\n});\nfunction useStylesLoadedWarning() {\n  const { emits } = useVueFlow();\n  onMounted(() => {\n    if (isDev()) {\n      const pane = document.querySelector(\".vue-flow__pane\");\n      if (pane && !(window.getComputedStyle(pane).zIndex === \"1\")) {\n        emits.error(new VueFlowError(ErrorCode.MISSING_STYLES));\n      }\n    }\n  });\n}\nconst _hoisted_1 = /* @__PURE__ */ createElementVNode(\"div\", { class: \"vue-flow__edge-labels\" }, null, -1);\nconst __default__$1 = {\n  name: \"VueFlow\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main$1 = /* @__PURE__ */ defineComponent({\n  ...__default__$1,\n  props: {\n    id: {},\n    modelValue: {},\n    nodes: {},\n    edges: {},\n    edgeTypes: {},\n    nodeTypes: {},\n    connectionMode: {},\n    connectionLineType: {},\n    connectionLineStyle: { default: void 0 },\n    connectionLineOptions: { default: void 0 },\n    connectionRadius: {},\n    isValidConnection: { type: [Function, null], default: void 0 },\n    deleteKeyCode: { default: void 0 },\n    selectionKeyCode: { type: [Boolean, null], default: void 0 },\n    multiSelectionKeyCode: { default: void 0 },\n    zoomActivationKeyCode: { default: void 0 },\n    panActivationKeyCode: { default: void 0 },\n    snapToGrid: { type: Boolean, default: void 0 },\n    snapGrid: {},\n    onlyRenderVisibleElements: { type: Boolean, default: void 0 },\n    edgesUpdatable: { type: [Boolean, String], default: void 0 },\n    nodesDraggable: { type: Boolean, default: void 0 },\n    nodesConnectable: { type: Boolean, default: void 0 },\n    nodeDragThreshold: {},\n    elementsSelectable: { type: Boolean, default: void 0 },\n    selectNodesOnDrag: { type: Boolean, default: void 0 },\n    panOnDrag: { type: [Boolean, Array], default: void 0 },\n    minZoom: {},\n    maxZoom: {},\n    defaultViewport: {},\n    translateExtent: {},\n    nodeExtent: {},\n    defaultMarkerColor: {},\n    zoomOnScroll: { type: Boolean, default: void 0 },\n    zoomOnPinch: { type: Boolean, default: void 0 },\n    panOnScroll: { type: Boolean, default: void 0 },\n    panOnScrollSpeed: {},\n    panOnScrollMode: {},\n    paneClickDistance: {},\n    zoomOnDoubleClick: { type: Boolean, default: void 0 },\n    preventScrolling: { type: Boolean, default: void 0 },\n    selectionMode: {},\n    edgeUpdaterRadius: {},\n    fitViewOnInit: { type: Boolean, default: void 0 },\n    connectOnClick: { type: Boolean, default: void 0 },\n    applyDefault: { type: Boolean, default: void 0 },\n    autoConnect: { type: [Boolean, Function], default: void 0 },\n    noDragClassName: {},\n    noWheelClassName: {},\n    noPanClassName: {},\n    defaultEdgeOptions: {},\n    elevateEdgesOnSelect: { type: Boolean, default: void 0 },\n    elevateNodesOnSelect: { type: Boolean, default: void 0 },\n    disableKeyboardA11y: { type: Boolean, default: void 0 },\n    edgesFocusable: { type: Boolean, default: void 0 },\n    nodesFocusable: { type: Boolean, default: void 0 },\n    autoPanOnConnect: { type: Boolean, default: void 0 },\n    autoPanOnNodeDrag: { type: Boolean, default: void 0 },\n    autoPanSpeed: {}\n  },\n  emits: [\"nodesChange\", \"edgesChange\", \"nodesInitialized\", \"paneReady\", \"init\", \"updateNodeInternals\", \"error\", \"connect\", \"connectStart\", \"connectEnd\", \"clickConnectStart\", \"clickConnectEnd\", \"moveStart\", \"move\", \"moveEnd\", \"selectionDragStart\", \"selectionDrag\", \"selectionDragStop\", \"selectionContextMenu\", \"selectionStart\", \"selectionEnd\", \"viewportChangeStart\", \"viewportChange\", \"viewportChangeEnd\", \"paneScroll\", \"paneClick\", \"paneContextMenu\", \"paneMouseEnter\", \"paneMouseMove\", \"paneMouseLeave\", \"edgeUpdate\", \"edgeContextMenu\", \"edgeMouseEnter\", \"edgeMouseMove\", \"edgeMouseLeave\", \"edgeDoubleClick\", \"edgeClick\", \"edgeUpdateStart\", \"edgeUpdateEnd\", \"nodeContextMenu\", \"nodeMouseEnter\", \"nodeMouseMove\", \"nodeMouseLeave\", \"nodeDoubleClick\", \"nodeClick\", \"nodeDragStart\", \"nodeDrag\", \"nodeDragStop\", \"miniMapNodeClick\", \"miniMapNodeDoubleClick\", \"miniMapNodeMouseEnter\", \"miniMapNodeMouseMove\", \"miniMapNodeMouseLeave\", \"update:modelValue\", \"update:nodes\", \"update:edges\"],\n  setup(__props, { expose: __expose, emit }) {\n    const props = __props;\n    const slots = useSlots();\n    const modelValue = useVModel(props, \"modelValue\", emit);\n    const modelNodes = useVModel(props, \"nodes\", emit);\n    const modelEdges = useVModel(props, \"edges\", emit);\n    const vfInstance = useVueFlow(props);\n    const disposeWatchers = useWatchProps({ modelValue, nodes: modelNodes, edges: modelEdges }, props, vfInstance);\n    useHooks(emit, vfInstance.hooks);\n    useOnInitHandler();\n    useStylesLoadedWarning();\n    provide(Slots, slots);\n    onUnmounted(disposeWatchers);\n    __expose(vfInstance);\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        ref: unref(vfInstance).vueFlowRef,\n        class: \"vue-flow\"\n      }, [\n        createVNode(_sfc_main$8, null, {\n          default: withCtx(() => [\n            createVNode(_sfc_main$4),\n            _hoisted_1,\n            createVNode(_sfc_main$2),\n            renderSlot(_ctx.$slots, \"zoom-pane\")\n          ]),\n          _: 3\n        }),\n        renderSlot(_ctx.$slots, \"default\"),\n        createVNode(_sfc_main$7)\n      ], 512);\n    };\n  }\n});\nconst __default__ = {\n  name: \"Panel\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: {\n    position: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const { userSelectionActive } = useVueFlow();\n    const positionClasses = computed(() => `${props.position}`.split(\"-\"));\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass([\"vue-flow__panel\", positionClasses.value]),\n        style: normalizeStyle({ pointerEvents: unref(userSelectionActive) ? \"none\" : \"all\" })\n      }, [\n        renderSlot(_ctx.$slots, \"default\")\n      ], 6);\n    };\n  }\n});\nfunction useConnection() {\n  const {\n    connectionStartHandle: startHandle,\n    connectionEndHandle: endHandle,\n    connectionStatus: status,\n    connectionPosition: position\n  } = useVueFlow();\n  return {\n    startHandle,\n    endHandle,\n    status,\n    position\n  };\n}\nfunction useHandleConnections(params) {\n  const { type, id: id2, nodeId, onConnect, onDisconnect } = params;\n  const { connectionLookup } = useVueFlow();\n  const _nodeId = useNodeId();\n  const currentNodeId = toRef(() => toValue$1(nodeId) ?? _nodeId);\n  const handleType = toRef(() => toValue$1(type));\n  const handleId = toRef(() => toValue$1(id2) ?? null);\n  const prevConnections = ref(null);\n  const connections = ref();\n  watch(\n    () => connectionLookup.value.get(`${currentNodeId.value}-${handleType.value}-${handleId.value}`),\n    (nextConnections) => {\n      if (areConnectionMapsEqual(connections.value, nextConnections)) {\n        return;\n      }\n      connections.value = nextConnections;\n    },\n    { immediate: true }\n  );\n  watch(\n    [connections, () => typeof onConnect !== \"undefined\", () => typeof onDisconnect !== \"undefined\"],\n    ([currentConnections = /* @__PURE__ */ new Map()]) => {\n      if (prevConnections.value && prevConnections.value !== currentConnections) {\n        handleConnectionChange(prevConnections.value, currentConnections, onDisconnect);\n        handleConnectionChange(currentConnections, prevConnections.value, onConnect);\n      }\n      prevConnections.value = currentConnections;\n    },\n    { immediate: true }\n  );\n  return computed(() => {\n    if (!connections.value) {\n      return [];\n    }\n    return Array.from(connections.value.values());\n  });\n}\nfunction useNodeConnections(params = {}) {\n  const { handleType, handleId, nodeId, onConnect, onDisconnect } = params;\n  const { connectionLookup } = useVueFlow();\n  const _nodeId = useNodeId();\n  const prevConnections = ref(null);\n  const connections = ref();\n  const lookupKey = computed(() => {\n    const currNodeId = toValue$1(nodeId) ?? _nodeId;\n    const currentHandleType = toValue$1(handleType);\n    const currHandleId = toValue$1(handleId);\n    let handleSuffix = \"\";\n    if (currentHandleType) {\n      handleSuffix = currHandleId ? `-${currentHandleType}-${currHandleId}` : `-${currentHandleType}`;\n    }\n    return `${currNodeId}${handleSuffix}`;\n  });\n  watch(\n    () => connectionLookup.value.get(lookupKey.value),\n    (nextConnections) => {\n      if (areConnectionMapsEqual(connections.value, nextConnections)) {\n        return;\n      }\n      connections.value = nextConnections;\n    },\n    { immediate: true }\n  );\n  watch(\n    [connections, () => typeof onConnect !== \"undefined\", () => typeof onDisconnect !== \"undefined\"],\n    ([currentConnections = /* @__PURE__ */ new Map()]) => {\n      if (prevConnections.value && prevConnections.value !== currentConnections) {\n        handleConnectionChange(prevConnections.value, currentConnections, onDisconnect);\n        handleConnectionChange(currentConnections, prevConnections.value, onConnect);\n      }\n      prevConnections.value = currentConnections;\n    },\n    { immediate: true }\n  );\n  return computed(() => {\n    if (!connections.value) {\n      return [];\n    }\n    return Array.from(connections.value.values());\n  });\n}\nfunction useNodesData(_nodeIds) {\n  const { findNode } = useVueFlow();\n  return computed({\n    get() {\n      const nodeIds = toValue$1(_nodeIds);\n      if (!Array.isArray(nodeIds)) {\n        const node = findNode(nodeIds);\n        if (node) {\n          return {\n            id: node.id,\n            type: node.type,\n            data: node.data\n          };\n        }\n        return null;\n      }\n      const data = [];\n      for (const nodeId of nodeIds) {\n        const node = findNode(nodeId);\n        if (node) {\n          data.push({\n            id: node.id,\n            type: node.type,\n            data: node.data\n          });\n        }\n      }\n      return data;\n    },\n    set() {\n      warn(\"You are trying to set node data via useNodesData. This is not supported.\");\n    }\n  });\n}\nfunction useEdgesData(_edgeIds) {\n  const { findEdge } = useVueFlow();\n  return computed({\n    get() {\n      const edgeIds = toValue$1(_edgeIds);\n      if (!Array.isArray(edgeIds)) {\n        const edge = findEdge(edgeIds);\n        if (edge) {\n          return {\n            id: edge.id,\n            type: edge.type,\n            data: edge.data ?? null\n          };\n        }\n        return null;\n      }\n      const data = [];\n      for (const edgeId of edgeIds) {\n        const edge = findEdge(edgeId);\n        if (edge) {\n          data.push({\n            id: edge.id,\n            type: edge.type,\n            data: edge.data ?? null\n          });\n        }\n      }\n      return data;\n    },\n    set() {\n      warn(\"You are trying to set edge data via useEdgesData. This is not supported.\");\n    }\n  });\n}\nexport {\n  _sfc_main$d as BaseEdge,\n  BezierEdge$1 as BezierEdge,\n  ConnectionLineType,\n  ConnectionMode,\n  _sfc_main$3 as EdgeLabelRenderer,\n  _sfc_main$e as EdgeText,\n  ErrorCode,\n  _sfc_main$f as Handle,\n  MarkerType,\n  NodeId as NodeIdInjection,\n  PanOnScrollMode,\n  _sfc_main as Panel,\n  PanelPosition,\n  Position,\n  SelectionMode,\n  SimpleBezierEdge$1 as SimpleBezierEdge,\n  SmoothStepEdge$1 as SmoothStepEdge,\n  StepEdge$1 as StepEdge,\n  StraightEdge$1 as StraightEdge,\n  _sfc_main$1 as VueFlow,\n  VueFlowError,\n  VueFlow as VueFlowInjection,\n  addEdge,\n  applyChanges,\n  applyEdgeChanges,\n  applyNodeChanges,\n  clamp,\n  connectionExists,\n  defaultEdgeTypes,\n  defaultNodeTypes,\n  getBezierEdgeCenter,\n  getBezierPath,\n  getBoundsofRects,\n  getConnectedEdges,\n  getIncomers,\n  getMarkerId,\n  getNodesInside,\n  getOutgoers,\n  getRectOfNodes,\n  getSimpleBezierPath,\n  getSimpleEdgeCenter,\n  getSmoothStepPath,\n  getStraightPath,\n  getTransformForBounds,\n  rendererPointToPoint as graphPosToZoomedPos,\n  isEdge,\n  isErrorOfType,\n  isGraphEdge,\n  isGraphNode,\n  isMacOs,\n  isNode,\n  pointToRendererPoint,\n  rendererPointToPoint,\n  updateEdge,\n  useConnection,\n  useEdge,\n  useEdgesData,\n  useGetPointerPosition,\n  useHandle,\n  useHandleConnections,\n  useKeyPress,\n  useNode,\n  useNodeConnections,\n  useNodeId,\n  useNodesData,\n  useNodesInitialized,\n  useVueFlow,\n  useZoomPanHelper,\n  wheelDelta\n};\n","export default interface Header {\n  key: NServiceBusHeaders;\n  value?: string;\n}\n\nexport enum NServiceBusHeaders {\n  HttpFrom = \"NServiceBus.From\",\n  HttpTo = \"NServiceBus.To\",\n  RouteTo = \"NServiceBus.Header.RouteTo\",\n  DestinationSites = \"NServiceBus.DestinationSites\",\n  OriginatingSite = \"NServiceBus.OriginatingSite\",\n  SagaId = \"NServiceBus.SagaId\",\n  MessageId = \"NServiceBus.MessageId\",\n  CorrelationId = \"NServiceBus.CorrelationId\",\n  ReplyToAddress = \"NServiceBus.ReplyToAddress\",\n  NServiceBusVersion = \"NServiceBus.Version\",\n  ReturnMessageErrorCodeHeader = \"NServiceBus.ReturnMessage.ErrorCode\",\n  ControlMessageHeader = \"NServiceBus.ControlMessage\",\n  SagaType = \"NServiceBus.SagaType\",\n  OriginatingSagaId = \"NServiceBus.OriginatingSagaId\",\n  OriginatingSagaType = \"NServiceBus.OriginatingSagaType\",\n  DelayedRetries = \"NServiceBus.Retries\",\n  DelayedRetriesTimestamp = \"NServiceBus.Retries.Timestamp\",\n  ImmediateRetries = \"NServiceBus.FLRetries\",\n  ProcessingStarted = \"NServiceBus.ProcessingStarted\",\n  ProcessingEnded = \"NServiceBus.ProcessingEnded\",\n  TimeSent = \"NServiceBus.TimeSent\",\n  DeliverAt = \"NServiceBus.DeliverAt\",\n  RelatedTo = \"NServiceBus.RelatedTo\",\n  EnclosedMessageTypes = \"NServiceBus.EnclosedMessageTypes\",\n  ContentType = \"NServiceBus.ContentType\",\n  SubscriptionMessageType = \"SubscriptionMessageType\",\n  SubscriberTransportAddress = \"NServiceBus.SubscriberAddress\",\n  SubscriberEndpoint = \"NServiceBus.SubscriberEndpoint\",\n  IsSagaTimeoutMessage = \"NServiceBus.IsSagaTimeoutMessage\",\n  IsDeferredMessage = \"NServiceBus.IsDeferredMessage\",\n  OriginatingEndpoint = \"NServiceBus.OriginatingEndpoint\",\n  OriginatingMachine = \"NServiceBus.OriginatingMachine\",\n  OriginatingHostId = \"$.diagnostics.originating.hostid\",\n  ProcessingEndpoint = \"NServiceBus.ProcessingEndpoint\",\n  ProcessingMachine = \"NServiceBus.ProcessingMachine\",\n  HostDisplayName = \"$.diagnostics.hostdisplayname\",\n  HostId = \"$.diagnostics.hostid\",\n  HasLicenseExpired = \"$.diagnostics.license.expired\",\n  OriginatingAddress = \"NServiceBus.OriginatingAddress\",\n  ConversationId = \"NServiceBus.ConversationId\",\n  PreviousConversationId = \"NServiceBus.PreviousConversationId\",\n  MessageIntent = \"NServiceBus.MessageIntent\",\n  NonDurableMessage = \"NServiceBus.NonDurableMessage\",\n  TimeToBeReceived = \"NServiceBus.TimeToBeReceived\",\n  DiagnosticsTraceParent = \"traceparent\",\n  DiagnosticsTraceState = \"tracestate\",\n  DiagnosticsBaggage = \"baggage\",\n  DataBusConfigContentType = \"NServiceBus.DataBusConfig.ContentType\",\n  ExceptionInfoExceptionType = \"NServiceBus.ExceptionInfo.ExceptionType\",\n}\n","import { openBlock, createElementBlock, renderSlot, createElementVNode, defineComponent, toRef, createBlock, unref, withCtx, Fragment, createVNode, resolveDynamicComponent, createCommentVNode } from \"vue\";\nimport { PanelPosition, useVueFlow, Panel } from \"@vue-flow/core\";\nconst _sfc_main$1 = {\n  name: \"ControlButton\",\n  compatConfig: { MODE: 3 }\n};\nconst _export_sfc = (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n};\nconst _hoisted_1$5 = {\n  type: \"button\",\n  class: \"vue-flow__controls-button\"\n};\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"button\", _hoisted_1$5, [\n    renderSlot(_ctx.$slots, \"default\")\n  ]);\n}\nconst ControlButton = /* @__PURE__ */ _export_sfc(_sfc_main$1, [[\"render\", _sfc_render]]);\nconst _hoisted_1$4 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 32 32\"\n};\nconst _hoisted_2$4 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z\" }, null, -1);\nconst _hoisted_3$4 = [\n  _hoisted_2$4\n];\nfunction render$4(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$4, _hoisted_3$4);\n}\nconst PlusIcon = { render: render$4 };\nconst _hoisted_1$3 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 32 5\"\n};\nconst _hoisted_2$3 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M0 0h32v4.2H0z\" }, null, -1);\nconst _hoisted_3$3 = [\n  _hoisted_2$3\n];\nfunction render$3(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$3, _hoisted_3$3);\n}\nconst MinusIcon = { render: render$3 };\nconst _hoisted_1$2 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 32 30\"\n};\nconst _hoisted_2$2 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z\" }, null, -1);\nconst _hoisted_3$2 = [\n  _hoisted_2$2\n];\nfunction render$2(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$2, _hoisted_3$2);\n}\nconst FitView = { render: render$2 };\nconst _hoisted_1$1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 25 32\"\n};\nconst _hoisted_2$1 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z\" }, null, -1);\nconst _hoisted_3$1 = [\n  _hoisted_2$1\n];\nfunction render$1(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$1, _hoisted_3$1);\n}\nconst Lock = { render: render$1 };\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 25 32\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z\" }, null, -1);\nconst _hoisted_3 = [\n  _hoisted_2\n];\nfunction render(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1, _hoisted_3);\n}\nconst Unlock = { render };\nconst __default__ = {\n  name: \"Controls\",\n  compatConfig: { MODE: 3 }\n};\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: {\n    showZoom: { type: Boolean, default: true },\n    showFitView: { type: Boolean, default: true },\n    showInteractive: { type: Boolean, default: true },\n    fitViewParams: {},\n    position: { default: () => PanelPosition.BottomLeft }\n  },\n  emits: [\"zoomIn\", \"zoomOut\", \"fitView\", \"interactionChange\"],\n  setup(__props, { emit }) {\n    const {\n      nodesDraggable,\n      nodesConnectable,\n      elementsSelectable,\n      setInteractive,\n      zoomIn,\n      zoomOut,\n      fitView,\n      viewport,\n      minZoom,\n      maxZoom\n    } = useVueFlow();\n    const isInteractive = toRef(() => nodesDraggable.value || nodesConnectable.value || elementsSelectable.value);\n    const minZoomReached = toRef(() => viewport.value.zoom <= minZoom.value);\n    const maxZoomReached = toRef(() => viewport.value.zoom >= maxZoom.value);\n    function onZoomInHandler() {\n      zoomIn();\n      emit(\"zoomIn\");\n    }\n    function onZoomOutHandler() {\n      zoomOut();\n      emit(\"zoomOut\");\n    }\n    function onFitViewHandler() {\n      fitView(__props.fitViewParams);\n      emit(\"fitView\");\n    }\n    function onInteractiveChangeHandler() {\n      setInteractive(!isInteractive.value);\n      emit(\"interactionChange\", !isInteractive.value);\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(Panel), {\n        class: \"vue-flow__controls\",\n        position: _ctx.position\n      }, {\n        default: withCtx(() => [\n          renderSlot(_ctx.$slots, \"top\"),\n          _ctx.showZoom ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [\n            renderSlot(_ctx.$slots, \"control-zoom-in\", {}, () => [\n              createVNode(ControlButton, {\n                class: \"vue-flow__controls-zoomin\",\n                disabled: maxZoomReached.value,\n                onClick: onZoomInHandler\n              }, {\n                default: withCtx(() => [\n                  renderSlot(_ctx.$slots, \"icon-zoom-in\", {}, () => [\n                    (openBlock(), createBlock(resolveDynamicComponent(unref(PlusIcon))))\n                  ])\n                ]),\n                _: 3\n              }, 8, [\"disabled\"])\n            ]),\n            renderSlot(_ctx.$slots, \"control-zoom-out\", {}, () => [\n              createVNode(ControlButton, {\n                class: \"vue-flow__controls-zoomout\",\n                disabled: minZoomReached.value,\n                onClick: onZoomOutHandler\n              }, {\n                default: withCtx(() => [\n                  renderSlot(_ctx.$slots, \"icon-zoom-out\", {}, () => [\n                    (openBlock(), createBlock(resolveDynamicComponent(unref(MinusIcon))))\n                  ])\n                ]),\n                _: 3\n              }, 8, [\"disabled\"])\n            ])\n          ], 64)) : createCommentVNode(\"\", true),\n          _ctx.showFitView ? renderSlot(_ctx.$slots, \"control-fit-view\", { key: 1 }, () => [\n            createVNode(ControlButton, {\n              class: \"vue-flow__controls-fitview\",\n              onClick: onFitViewHandler\n            }, {\n              default: withCtx(() => [\n                renderSlot(_ctx.$slots, \"icon-fit-view\", {}, () => [\n                  (openBlock(), createBlock(resolveDynamicComponent(unref(FitView))))\n                ])\n              ]),\n              _: 3\n            })\n          ]) : createCommentVNode(\"\", true),\n          _ctx.showInteractive ? renderSlot(_ctx.$slots, \"control-interactive\", { key: 2 }, () => [\n            _ctx.showInteractive ? (openBlock(), createBlock(ControlButton, {\n              key: 0,\n              class: \"vue-flow__controls-interactive\",\n              onClick: onInteractiveChangeHandler\n            }, {\n              default: withCtx(() => [\n                isInteractive.value ? renderSlot(_ctx.$slots, \"icon-unlock\", { key: 0 }, () => [\n                  (openBlock(), createBlock(resolveDynamicComponent(unref(Unlock))))\n                ]) : createCommentVNode(\"\", true),\n                !isInteractive.value ? renderSlot(_ctx.$slots, \"icon-lock\", { key: 1 }, () => [\n                  (openBlock(), createBlock(resolveDynamicComponent(unref(Lock))))\n                ]) : createCommentVNode(\"\", true)\n              ]),\n              _: 3\n            })) : createCommentVNode(\"\", true)\n          ]) : createCommentVNode(\"\", true),\n          renderSlot(_ctx.$slots, \"default\")\n        ]),\n        _: 3\n      }, 8, [\"position\"]);\n    };\n  }\n});\nexport {\n  ControlButton,\n  _sfc_main as Controls\n};\n","<script setup lang=\"ts\">\nimport { ref, watch, onMounted } from \"vue\";\n\nconst props = withDefaults(\n  defineProps<{\n    text: string;\n    ellipsesStyle?: \"RightSide\" | \"LeftSide\";\n  }>(),\n  { ellipsesStyle: \"RightSide\" }\n);\n\nconst textContainer = ref<HTMLElement | null>(null);\nconst tooltipText = ref(\"\");\n\nconst updateTooltip = () => {\n  if (textContainer.value) {\n    tooltipText.value = textContainer.value.scrollWidth > textContainer.value.clientWidth ? textContainer.value.textContent || \"\" : \"\";\n  }\n};\n\nonMounted(() => {\n  updateTooltip();\n});\n\nwatch([() => props.text], () => {\n  updateTooltip();\n});\n</script>\n\n<template>\n  <div ref=\"textContainer\" title=\"\" class=\"text-container hackToPreventSafariFromShowingTooltip\" :class=\"{ 'left-side-ellipsis': ellipsesStyle === 'LeftSide' }\" v-tippy=\"{ content: tooltipText, maxWidth: 'none' }\">\n    {{ text }}\n  </div>\n</template>\n\n<style scoped>\n.hackToPreventSafariFromShowingTooltip::after {\n  content: \"\";\n  display: block;\n}\n\n.left-side-ellipsis {\n  direction: rtl;\n  text-align: left;\n}\n\n.text-container {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: inline-block;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport TextEllipses from \"@/components/TextEllipses.vue\";\nimport { formatTypeName } from \"@/composables/formatUtils\";\n\ninterface Props {\n  typeName: string;\n  maxWidth?: string;\n  ellipsesStyle?: \"RightSide\" | \"LeftSide\";\n  showRawType?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  maxWidth: \"auto\",\n  ellipsesStyle: \"RightSide\",\n  showRawType: false,\n});\n\nconst displayText = computed(() => {\n  return props.showRawType ? props.typeName : formatTypeName(props.typeName);\n});\n\nconst tooltipText = computed(() => {\n  return props.showRawType ? formatTypeName(props.typeName) : props.typeName;\n});\n</script>\n\n<template>\n  <div class=\"type-name-display\" :style=\"{ width: maxWidth }\" :title=\"tooltipText\">\n    <TextEllipses :text=\"displayText\" :ellipses-style=\"ellipsesStyle\" />\n  </div>\n</template>\n\n<style scoped>\n.type-name-display {\n  display: inline-block;\n  max-width: 100%;\n}\n</style>\n","<script setup lang=\"ts\">\nimport TypeNameDisplay from \"@/components/TypeNameDisplay.vue\";\n\ninterface Props {\n  sagaType: string;\n  maxWidth?: string;\n  ellipsesStyle?: \"RightSide\" | \"LeftSide\";\n  showTitle?: boolean;\n  titleLevel?: \"h1\" | \"h2\" | \"h3\" | \"h4\" | \"h5\" | \"h6\" | \"div\";\n  cssClass?: string;\n}\n\nwithDefaults(defineProps<Props>(), {\n  maxWidth: \"182px\",\n  ellipsesStyle: \"LeftSide\",\n  showTitle: false,\n  titleLevel: \"div\",\n  cssClass: \"sagaName\",\n});\n</script>\n\n<template>\n  <component :is=\"showTitle ? titleLevel : 'div'\" :class=\"cssClass\" :aria-label=\"showTitle ? 'saga name' : undefined\">\n    <TypeNameDisplay :type-name=\"sagaType\" :max-width=\"maxWidth\" :ellipses-style=\"ellipsesStyle\" />\n  </component>\n</template>\n\n<style scoped>\n.sagaName {\n  color: #e6e6e6;\n}\n</style>\n","\"use strict\";\n\nvar DEFAULT_EDGE_NAME = \"\\x00\";\nvar GRAPH_NODE = \"\\x00\";\nvar EDGE_KEY_DELIM = \"\\x01\";\n\n// Implementation notes:\n//\n//  * Node id query functions should return string ids for the nodes\n//  * Edge id query functions should return an \"edgeObj\", edge object, that is\n//    composed of enough information to uniquely identify an edge: {v, w, name}.\n//  * Internally we use an \"edgeId\", a stringified form of the edgeObj, to\n//    reference edges. This is because we need a performant way to look these\n//    edges up and, object properties, which have string keys, are the closest\n//    we're going to get to a performant hashtable in JavaScript.\n\nclass Graph {\n  _isDirected = true;\n  _isMultigraph = false;\n  _isCompound = false;\n\n  // Label for the graph itself\n  _label;\n\n  // Defaults to be set when creating a new node\n  _defaultNodeLabelFn = () => undefined;\n\n  // Defaults to be set when creating a new edge\n  _defaultEdgeLabelFn = () => undefined;\n\n  // v -> label\n  _nodes = {};\n\n  // v -> edgeObj\n  _in = {};\n\n  // u -> v -> Number\n  _preds = {};\n\n  // v -> edgeObj\n  _out = {};\n\n  // v -> w -> Number\n  _sucs = {};\n\n  // e -> edgeObj\n  _edgeObjs = {};\n\n  // e -> label\n  _edgeLabels = {};\n\n  /* Number of nodes in the graph. Should only be changed by the implementation. */\n  _nodeCount = 0;\n\n  /* Number of edges in the graph. Should only be changed by the implementation. */\n  _edgeCount = 0;\n\n  _parent;\n\n  _children;\n\n  constructor(opts) {\n    if (opts) {\n      this._isDirected = Object.hasOwn(opts, \"directed\") ? opts.directed : true;\n      this._isMultigraph = Object.hasOwn(opts, \"multigraph\") ? opts.multigraph : false;\n      this._isCompound = Object.hasOwn(opts, \"compound\") ? opts.compound : false;\n    }\n\n    if (this._isCompound) {\n      // v -> parent\n      this._parent = {};\n\n      // v -> children\n      this._children = {};\n      this._children[GRAPH_NODE] = {};\n    }\n  }\n\n  /* === Graph functions ========= */\n\n  /**\n   * Whether graph was created with 'directed' flag set to true or not.\n   */\n  isDirected() {\n    return this._isDirected;\n  }\n\n  /**\n   * Whether graph was created with 'multigraph' flag set to true or not.\n   */\n  isMultigraph() {\n    return this._isMultigraph;\n  }\n\n  /**\n   * Whether graph was created with 'compound' flag set to true or not.\n   */\n  isCompound() {\n    return this._isCompound;\n  }\n\n  /**\n   * Sets the label of the graph.\n   */\n  setGraph(label) {\n    this._label = label;\n    return this;\n  }\n\n  /**\n   * Gets the graph label.\n   */\n  graph() {\n    return this._label;\n  }\n\n\n  /* === Node functions ========== */\n\n  /**\n   * Sets the default node label. If newDefault is a function, it will be\n   * invoked ach time when setting a label for a node. Otherwise, this label\n   * will be assigned as default label in case if no label was specified while\n   * setting a node.\n   * Complexity: O(1).\n   */\n  setDefaultNodeLabel(newDefault) {\n    this._defaultNodeLabelFn = newDefault;\n    if (typeof newDefault !== 'function') {\n      this._defaultNodeLabelFn = () => newDefault;\n    }\n\n    return this;\n  }\n\n  /**\n   * Gets the number of nodes in the graph.\n   * Complexity: O(1).\n   */\n  nodeCount() {\n    return this._nodeCount;\n  }\n\n  /**\n   * Gets all nodes of the graph. Note, the in case of compound graph subnodes are\n   * not included in list.\n   * Complexity: O(1).\n   */\n  nodes() {\n    return Object.keys(this._nodes);\n  }\n\n  /**\n   * Gets list of nodes without in-edges.\n   * Complexity: O(|V|).\n   */\n  sources() {\n    var self = this;\n    return this.nodes().filter(v => Object.keys(self._in[v]).length === 0);\n  }\n\n  /**\n   * Gets list of nodes without out-edges.\n   * Complexity: O(|V|).\n   */\n  sinks() {\n    var self = this;\n    return this.nodes().filter(v => Object.keys(self._out[v]).length === 0);\n  }\n\n  /**\n   * Invokes setNode method for each node in names list.\n   * Complexity: O(|names|).\n   */\n  setNodes(vs, value) {\n    var args = arguments;\n    var self = this;\n    vs.forEach(function(v) {\n      if (args.length > 1) {\n        self.setNode(v, value);\n      } else {\n        self.setNode(v);\n      }\n    });\n    return this;\n  }\n\n  /**\n   * Creates or updates the value for the node v in the graph. If label is supplied\n   * it is set as the value for the node. If label is not supplied and the node was\n   * created by this call then the default node label will be assigned.\n   * Complexity: O(1).\n   */\n  setNode(v, value) {\n    if (Object.hasOwn(this._nodes, v)) {\n      if (arguments.length > 1) {\n        this._nodes[v] = value;\n      }\n      return this;\n    }\n\n    this._nodes[v] = arguments.length > 1 ? value : this._defaultNodeLabelFn(v);\n    if (this._isCompound) {\n      this._parent[v] = GRAPH_NODE;\n      this._children[v] = {};\n      this._children[GRAPH_NODE][v] = true;\n    }\n    this._in[v] = {};\n    this._preds[v] = {};\n    this._out[v] = {};\n    this._sucs[v] = {};\n    ++this._nodeCount;\n    return this;\n  }\n\n  /**\n   * Gets the label of node with specified name.\n   * Complexity: O(|V|).\n   */\n  node(v) {\n    return this._nodes[v];\n  }\n\n  /**\n   * Detects whether graph has a node with specified name or not.\n   */\n  hasNode(v) {\n    return Object.hasOwn(this._nodes, v);\n  }\n\n  /**\n   * Remove the node with the name from the graph or do nothing if the node is not in\n   * the graph. If the node was removed this function also removes any incident\n   * edges.\n   * Complexity: O(1).\n   */\n  removeNode(v) {\n    var self = this;\n    if (Object.hasOwn(this._nodes, v)) {\n      var removeEdge = e => self.removeEdge(self._edgeObjs[e]);\n      delete this._nodes[v];\n      if (this._isCompound) {\n        this._removeFromParentsChildList(v);\n        delete this._parent[v];\n        this.children(v).forEach(function(child) {\n          self.setParent(child);\n        });\n        delete this._children[v];\n      }\n      Object.keys(this._in[v]).forEach(removeEdge);\n      delete this._in[v];\n      delete this._preds[v];\n      Object.keys(this._out[v]).forEach(removeEdge);\n      delete this._out[v];\n      delete this._sucs[v];\n      --this._nodeCount;\n    }\n    return this;\n  }\n\n  /**\n   * Sets node p as a parent for node v if it is defined, or removes the\n   * parent for v if p is undefined. Method throws an exception in case of\n   * invoking it in context of noncompound graph.\n   * Average-case complexity: O(1).\n   */\n  setParent(v, parent) {\n    if (!this._isCompound) {\n      throw new Error(\"Cannot set parent in a non-compound graph\");\n    }\n\n    if (parent === undefined) {\n      parent = GRAPH_NODE;\n    } else {\n      // Coerce parent to string\n      parent += \"\";\n      for (var ancestor = parent; ancestor !== undefined; ancestor = this.parent(ancestor)) {\n        if (ancestor === v) {\n          throw new Error(\"Setting \" + parent+ \" as parent of \" + v +\n              \" would create a cycle\");\n        }\n      }\n\n      this.setNode(parent);\n    }\n\n    this.setNode(v);\n    this._removeFromParentsChildList(v);\n    this._parent[v] = parent;\n    this._children[parent][v] = true;\n    return this;\n  }\n\n  _removeFromParentsChildList(v) {\n    delete this._children[this._parent[v]][v];\n  }\n\n  /**\n   * Gets parent node for node v.\n   * Complexity: O(1).\n   */\n  parent(v) {\n    if (this._isCompound) {\n      var parent = this._parent[v];\n      if (parent !== GRAPH_NODE) {\n        return parent;\n      }\n    }\n  }\n\n  /**\n   * Gets list of direct children of node v.\n   * Complexity: O(1).\n   */\n  children(v = GRAPH_NODE) {\n    if (this._isCompound) {\n      var children = this._children[v];\n      if (children) {\n        return Object.keys(children);\n      }\n    } else if (v === GRAPH_NODE) {\n      return this.nodes();\n    } else if (this.hasNode(v)) {\n      return [];\n    }\n  }\n\n  /**\n   * Return all nodes that are predecessors of the specified node or undefined if node v is not in\n   * the graph. Behavior is undefined for undirected graphs - use neighbors instead.\n   * Complexity: O(|V|).\n   */\n  predecessors(v) {\n    var predsV = this._preds[v];\n    if (predsV) {\n      return Object.keys(predsV);\n    }\n  }\n\n  /**\n   * Return all nodes that are successors of the specified node or undefined if node v is not in\n   * the graph. Behavior is undefined for undirected graphs - use neighbors instead.\n   * Complexity: O(|V|).\n   */\n  successors(v) {\n    var sucsV = this._sucs[v];\n    if (sucsV) {\n      return Object.keys(sucsV);\n    }\n  }\n\n  /**\n   * Return all nodes that are predecessors or successors of the specified node or undefined if\n   * node v is not in the graph.\n   * Complexity: O(|V|).\n   */\n  neighbors(v) {\n    var preds = this.predecessors(v);\n    if (preds) {\n      const union = new Set(preds);\n      for (var succ of this.successors(v)) {\n        union.add(succ);\n      }\n\n      return Array.from(union.values());\n    }\n  }\n\n  isLeaf(v) {\n    var neighbors;\n    if (this.isDirected()) {\n      neighbors = this.successors(v);\n    } else {\n      neighbors = this.neighbors(v);\n    }\n    return neighbors.length === 0;\n  }\n\n  /**\n   * Creates new graph with nodes filtered via filter. Edges incident to rejected node\n   * are also removed. In case of compound graph, if parent is rejected by filter,\n   * than all its children are rejected too.\n   * Average-case complexity: O(|E|+|V|).\n   */\n  filterNodes(filter) {\n    var copy = new this.constructor({\n      directed: this._isDirected,\n      multigraph: this._isMultigraph,\n      compound: this._isCompound\n    });\n\n    copy.setGraph(this.graph());\n\n    var self = this;\n    Object.entries(this._nodes).forEach(function([v, value]) {\n      if (filter(v)) {\n        copy.setNode(v, value);\n      }\n    });\n\n    Object.values(this._edgeObjs).forEach(function(e) {\n      if (copy.hasNode(e.v) && copy.hasNode(e.w)) {\n        copy.setEdge(e, self.edge(e));\n      }\n    });\n\n    var parents = {};\n    function findParent(v) {\n      var parent = self.parent(v);\n      if (parent === undefined || copy.hasNode(parent)) {\n        parents[v] = parent;\n        return parent;\n      } else if (parent in parents) {\n        return parents[parent];\n      } else {\n        return findParent(parent);\n      }\n    }\n\n    if (this._isCompound) {\n      copy.nodes().forEach(v => copy.setParent(v, findParent(v)));\n    }\n\n    return copy;\n  }\n\n  /* === Edge functions ========== */\n\n  /**\n   * Sets the default edge label or factory function. This label will be\n   * assigned as default label in case if no label was specified while setting\n   * an edge or this function will be invoked each time when setting an edge\n   * with no label specified and returned value * will be used as a label for edge.\n   * Complexity: O(1).\n   */\n  setDefaultEdgeLabel(newDefault) {\n    this._defaultEdgeLabelFn = newDefault;\n    if (typeof newDefault !== 'function') {\n      this._defaultEdgeLabelFn = () => newDefault;\n    }\n\n    return this;\n  }\n\n  /**\n   * Gets the number of edges in the graph.\n   * Complexity: O(1).\n   */\n  edgeCount() {\n    return this._edgeCount;\n  }\n\n  /**\n   * Gets edges of the graph. In case of compound graph subgraphs are not considered.\n   * Complexity: O(|E|).\n   */\n  edges() {\n    return Object.values(this._edgeObjs);\n  }\n\n  /**\n   * Establish an edges path over the nodes in nodes list. If some edge is already\n   * exists, it will update its label, otherwise it will create an edge between pair\n   * of nodes with label provided or default label if no label provided.\n   * Complexity: O(|nodes|).\n   */\n  setPath(vs, value) {\n    var self = this;\n    var args = arguments;\n    vs.reduce(function(v, w) {\n      if (args.length > 1) {\n        self.setEdge(v, w, value);\n      } else {\n        self.setEdge(v, w);\n      }\n      return w;\n    });\n    return this;\n  }\n\n  /**\n   * Creates or updates the label for the edge (v, w) with the optionally supplied\n   * name. If label is supplied it is set as the value for the edge. If label is not\n   * supplied and the edge was created by this call then the default edge label will\n   * be assigned. The name parameter is only useful with multigraphs.\n   */\n  setEdge() {\n    var v, w, name, value;\n    var valueSpecified = false;\n    var arg0 = arguments[0];\n\n    if (typeof arg0 === \"object\" && arg0 !== null && \"v\" in arg0) {\n      v = arg0.v;\n      w = arg0.w;\n      name = arg0.name;\n      if (arguments.length === 2) {\n        value = arguments[1];\n        valueSpecified = true;\n      }\n    } else {\n      v = arg0;\n      w = arguments[1];\n      name = arguments[3];\n      if (arguments.length > 2) {\n        value = arguments[2];\n        valueSpecified = true;\n      }\n    }\n\n    v = \"\" + v;\n    w = \"\" + w;\n    if (name !== undefined) {\n      name = \"\" + name;\n    }\n\n    var e = edgeArgsToId(this._isDirected, v, w, name);\n    if (Object.hasOwn(this._edgeLabels, e)) {\n      if (valueSpecified) {\n        this._edgeLabels[e] = value;\n      }\n      return this;\n    }\n\n    if (name !== undefined && !this._isMultigraph) {\n      throw new Error(\"Cannot set a named edge when isMultigraph = false\");\n    }\n\n    // It didn't exist, so we need to create it.\n    // First ensure the nodes exist.\n    this.setNode(v);\n    this.setNode(w);\n\n    this._edgeLabels[e] = valueSpecified ? value : this._defaultEdgeLabelFn(v, w, name);\n\n    var edgeObj = edgeArgsToObj(this._isDirected, v, w, name);\n    // Ensure we add undirected edges in a consistent way.\n    v = edgeObj.v;\n    w = edgeObj.w;\n\n    Object.freeze(edgeObj);\n    this._edgeObjs[e] = edgeObj;\n    incrementOrInitEntry(this._preds[w], v);\n    incrementOrInitEntry(this._sucs[v], w);\n    this._in[w][e] = edgeObj;\n    this._out[v][e] = edgeObj;\n    this._edgeCount++;\n    return this;\n  }\n\n  /**\n   * Gets the label for the specified edge.\n   * Complexity: O(1).\n   */\n  edge(v, w, name) {\n    var e = (arguments.length === 1\n      ? edgeObjToId(this._isDirected, arguments[0])\n      : edgeArgsToId(this._isDirected, v, w, name));\n    return this._edgeLabels[e];\n  }\n\n  /**\n   * Gets the label for the specified edge and converts it to an object.\n   * Complexity: O(1)\n   */\n  edgeAsObj() {\n    const edge = this.edge(...arguments);\n    if (typeof edge !== \"object\") {\n      return {label: edge};\n    }\n\n    return edge;\n  }\n\n  /**\n   * Detects whether the graph contains specified edge or not. No subgraphs are considered.\n   * Complexity: O(1).\n   */\n  hasEdge(v, w, name) {\n    var e = (arguments.length === 1\n      ? edgeObjToId(this._isDirected, arguments[0])\n      : edgeArgsToId(this._isDirected, v, w, name));\n    return Object.hasOwn(this._edgeLabels, e);\n  }\n\n  /**\n   * Removes the specified edge from the graph. No subgraphs are considered.\n   * Complexity: O(1).\n   */\n  removeEdge(v, w, name) {\n    var e = (arguments.length === 1\n      ? edgeObjToId(this._isDirected, arguments[0])\n      : edgeArgsToId(this._isDirected, v, w, name));\n    var edge = this._edgeObjs[e];\n    if (edge) {\n      v = edge.v;\n      w = edge.w;\n      delete this._edgeLabels[e];\n      delete this._edgeObjs[e];\n      decrementOrRemoveEntry(this._preds[w], v);\n      decrementOrRemoveEntry(this._sucs[v], w);\n      delete this._in[w][e];\n      delete this._out[v][e];\n      this._edgeCount--;\n    }\n    return this;\n  }\n\n  /**\n   * Return all edges that point to the node v. Optionally filters those edges down to just those\n   * coming from node u. Behavior is undefined for undirected graphs - use nodeEdges instead.\n   * Complexity: O(|E|).\n   */\n  inEdges(v, u) {\n    var inV = this._in[v];\n    if (inV) {\n      var edges = Object.values(inV);\n      if (!u) {\n        return edges;\n      }\n      return edges.filter(edge => edge.v === u);\n    }\n  }\n\n  /**\n   * Return all edges that are pointed at by node v. Optionally filters those edges down to just\n   * those point to w. Behavior is undefined for undirected graphs - use nodeEdges instead.\n   * Complexity: O(|E|).\n   */\n  outEdges(v, w) {\n    var outV = this._out[v];\n    if (outV) {\n      var edges = Object.values(outV);\n      if (!w) {\n        return edges;\n      }\n      return edges.filter(edge => edge.w === w);\n    }\n  }\n\n  /**\n   * Returns all edges to or from node v regardless of direction. Optionally filters those edges\n   * down to just those between nodes v and w regardless of direction.\n   * Complexity: O(|E|).\n   */\n  nodeEdges(v, w) {\n    var inEdges = this.inEdges(v, w);\n    if (inEdges) {\n      return inEdges.concat(this.outEdges(v, w));\n    }\n  }\n}\n\nfunction incrementOrInitEntry(map, k) {\n  if (map[k]) {\n    map[k]++;\n  } else {\n    map[k] = 1;\n  }\n}\n\nfunction decrementOrRemoveEntry(map, k) {\n  if (!--map[k]) { delete map[k]; }\n}\n\nfunction edgeArgsToId(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return v + EDGE_KEY_DELIM + w + EDGE_KEY_DELIM +\n             (name === undefined ? DEFAULT_EDGE_NAME : name);\n}\n\nfunction edgeArgsToObj(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  var edgeObj =  { v: v, w: w };\n  if (name) {\n    edgeObj.name = name;\n  }\n  return edgeObj;\n}\n\nfunction edgeObjToId(isDirected, edgeObj) {\n  return edgeArgsToId(isDirected, edgeObj.v, edgeObj.w, edgeObj.name);\n}\n\nmodule.exports = Graph;\n","module.exports = '2.2.4';\n","// Includes only the \"core\" of graphlib\nmodule.exports = {\n  Graph: require(\"./graph\"),\n  version: require(\"./version\")\n};\n","var Graph = require(\"./graph\");\n\nmodule.exports = {\n  write: write,\n  read: read\n};\n\n/**\n * Creates a JSON representation of the graph that can be serialized to a string with\n * JSON.stringify. The graph can later be restored using json.read.\n */\nfunction write(g) {\n  var json = {\n    options: {\n      directed: g.isDirected(),\n      multigraph: g.isMultigraph(),\n      compound: g.isCompound()\n    },\n    nodes: writeNodes(g),\n    edges: writeEdges(g)\n  };\n\n  if (g.graph() !== undefined) {\n    json.value = structuredClone(g.graph());\n  }\n  return json;\n}\n\nfunction writeNodes(g) {\n  return g.nodes().map(function(v) {\n    var nodeValue = g.node(v);\n    var parent = g.parent(v);\n    var node = { v: v };\n    if (nodeValue !== undefined) {\n      node.value = nodeValue;\n    }\n    if (parent !== undefined) {\n      node.parent = parent;\n    }\n    return node;\n  });\n}\n\nfunction writeEdges(g) {\n  return g.edges().map(function(e) {\n    var edgeValue = g.edge(e);\n    var edge = { v: e.v, w: e.w };\n    if (e.name !== undefined) {\n      edge.name = e.name;\n    }\n    if (edgeValue !== undefined) {\n      edge.value = edgeValue;\n    }\n    return edge;\n  });\n}\n\n/**\n * Takes JSON as input and returns the graph representation.\n *\n * @example\n * var g2 = graphlib.json.read(JSON.parse(str));\n * g2.nodes();\n * // ['a', 'b']\n * g2.edges()\n * // [ { v: 'a', w: 'b' } ]\n */\nfunction read(json) {\n  var g = new Graph(json.options).setGraph(json.value);\n  json.nodes.forEach(function(entry) {\n    g.setNode(entry.v, entry.value);\n    if (entry.parent) {\n      g.setParent(entry.v, entry.parent);\n    }\n  });\n  json.edges.forEach(function(entry) {\n    g.setEdge({ v: entry.v, w: entry.w, name: entry.name }, entry.value);\n  });\n  return g;\n}\n","module.exports = components;\n\nfunction components(g) {\n  var visited = {};\n  var cmpts = [];\n  var cmpt;\n\n  function dfs(v) {\n    if (Object.hasOwn(visited, v)) return;\n    visited[v] = true;\n    cmpt.push(v);\n    g.successors(v).forEach(dfs);\n    g.predecessors(v).forEach(dfs);\n  }\n\n  g.nodes().forEach(function(v) {\n    cmpt = [];\n    dfs(v);\n    if (cmpt.length) {\n      cmpts.push(cmpt);\n    }\n  });\n\n  return cmpts;\n}\n","/**\n * A min-priority queue data structure. This algorithm is derived from Cormen,\n * et al., \"Introduction to Algorithms\". The basic idea of a min-priority\n * queue is that you can efficiently (in O(1) time) get the smallest key in\n * the queue. Adding and removing elements takes O(log n) time. A key can\n * have its priority decreased in O(log n) time.\n */\nclass PriorityQueue {\n  _arr = [];\n  _keyIndices = {};\n\n  /**\n   * Returns the number of elements in the queue. Takes `O(1)` time.\n   */\n  size() {\n    return this._arr.length;\n  }\n\n  /**\n   * Returns the keys that are in the queue. Takes `O(n)` time.\n   */\n  keys() {\n    return this._arr.map(function(x) { return x.key; });\n  }\n\n  /**\n   * Returns `true` if **key** is in the queue and `false` if not.\n   */\n  has(key) {\n    return Object.hasOwn(this._keyIndices, key);\n  }\n\n  /**\n   * Returns the priority for **key**. If **key** is not present in the queue\n   * then this function returns `undefined`. Takes `O(1)` time.\n   *\n   * @param {Object} key\n   */\n  priority(key) {\n    var index = this._keyIndices[key];\n    if (index !== undefined) {\n      return this._arr[index].priority;\n    }\n  }\n\n  /**\n   * Returns the key for the minimum element in this queue. If the queue is\n   * empty this function throws an Error. Takes `O(1)` time.\n   */\n  min() {\n    if (this.size() === 0) {\n      throw new Error(\"Queue underflow\");\n    }\n    return this._arr[0].key;\n  }\n\n  /**\n   * Inserts a new key into the priority queue. If the key already exists in\n   * the queue this function returns `false`; otherwise it will return `true`.\n   * Takes `O(n)` time.\n   *\n   * @param {Object} key the key to add\n   * @param {Number} priority the initial priority for the key\n   */\n  add(key, priority) {\n    var keyIndices = this._keyIndices;\n    key = String(key);\n    if (!Object.hasOwn(keyIndices, key)) {\n      var arr = this._arr;\n      var index = arr.length;\n      keyIndices[key] = index;\n      arr.push({key: key, priority: priority});\n      this._decrease(index);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Removes and returns the smallest key in the queue. Takes `O(log n)` time.\n   */\n  removeMin() {\n    this._swap(0, this._arr.length - 1);\n    var min = this._arr.pop();\n    delete this._keyIndices[min.key];\n    this._heapify(0);\n    return min.key;\n  }\n\n  /**\n   * Decreases the priority for **key** to **priority**. If the new priority is\n   * greater than the previous priority, this function will throw an Error.\n   *\n   * @param {Object} key the key for which to raise priority\n   * @param {Number} priority the new priority for the key\n   */\n  decrease(key, priority) {\n    var index = this._keyIndices[key];\n    if (priority > this._arr[index].priority) {\n      throw new Error(\"New priority is greater than current priority. \" +\n          \"Key: \" + key + \" Old: \" + this._arr[index].priority + \" New: \" + priority);\n    }\n    this._arr[index].priority = priority;\n    this._decrease(index);\n  }\n\n  _heapify(i) {\n    var arr = this._arr;\n    var l = 2 * i;\n    var r = l + 1;\n    var largest = i;\n    if (l < arr.length) {\n      largest = arr[l].priority < arr[largest].priority ? l : largest;\n      if (r < arr.length) {\n        largest = arr[r].priority < arr[largest].priority ? r : largest;\n      }\n      if (largest !== i) {\n        this._swap(i, largest);\n        this._heapify(largest);\n      }\n    }\n  }\n\n  _decrease(index) {\n    var arr = this._arr;\n    var priority = arr[index].priority;\n    var parent;\n    while (index !== 0) {\n      parent = index >> 1;\n      if (arr[parent].priority < priority) {\n        break;\n      }\n      this._swap(index, parent);\n      index = parent;\n    }\n  }\n\n  _swap(i, j) {\n    var arr = this._arr;\n    var keyIndices = this._keyIndices;\n    var origArrI = arr[i];\n    var origArrJ = arr[j];\n    arr[i] = origArrJ;\n    arr[j] = origArrI;\n    keyIndices[origArrJ.key] = i;\n    keyIndices[origArrI.key] = j;\n  }\n}\n\nmodule.exports = PriorityQueue;\n","var PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = dijkstra;\n\nvar DEFAULT_WEIGHT_FUNC = () => 1;\n\nfunction dijkstra(g, source, weightFn, edgeFn) {\n  return runDijkstra(g, String(source),\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runDijkstra(g, source, weightFn, edgeFn) {\n  var results = {};\n  var pq = new PriorityQueue();\n  var v, vEntry;\n\n  var updateNeighbors = function(edge) {\n    var w = edge.v !== v ? edge.v : edge.w;\n    var wEntry = results[w];\n    var weight = weightFn(edge);\n    var distance = vEntry.distance + weight;\n\n    if (weight < 0) {\n      throw new Error(\"dijkstra does not allow negative edge weights. \" +\n                      \"Bad edge: \" + edge + \" Weight: \" + weight);\n    }\n\n    if (distance < wEntry.distance) {\n      wEntry.distance = distance;\n      wEntry.predecessor = v;\n      pq.decrease(w, distance);\n    }\n  };\n\n  g.nodes().forEach(function(v) {\n    var distance = v === source ? 0 : Number.POSITIVE_INFINITY;\n    results[v] = { distance: distance };\n    pq.add(v, distance);\n  });\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    vEntry = results[v];\n    if (vEntry.distance === Number.POSITIVE_INFINITY) {\n      break;\n    }\n\n    edgeFn(v).forEach(updateNeighbors);\n  }\n\n  return results;\n}\n","var dijkstra = require(\"./dijkstra\");\n\nmodule.exports = dijkstraAll;\n\nfunction dijkstraAll(g, weightFunc, edgeFunc) {\n  return g.nodes().reduce(function(acc, v) {\n    acc[v] = dijkstra(g, v, weightFunc, edgeFunc);\n    return acc;\n  }, {});\n}\n","module.exports = tarjan;\n\nfunction tarjan(g) {\n  var index = 0;\n  var stack = [];\n  var visited = {}; // node id -> { onStack, lowlink, index }\n  var results = [];\n\n  function dfs(v) {\n    var entry = visited[v] = {\n      onStack: true,\n      lowlink: index,\n      index: index++\n    };\n    stack.push(v);\n\n    g.successors(v).forEach(function(w) {\n      if (!Object.hasOwn(visited, w)) {\n        dfs(w);\n        entry.lowlink = Math.min(entry.lowlink, visited[w].lowlink);\n      } else if (visited[w].onStack) {\n        entry.lowlink = Math.min(entry.lowlink, visited[w].index);\n      }\n    });\n\n    if (entry.lowlink === entry.index) {\n      var cmpt = [];\n      var w;\n      do {\n        w = stack.pop();\n        visited[w].onStack = false;\n        cmpt.push(w);\n      } while (v !== w);\n      results.push(cmpt);\n    }\n  }\n\n  g.nodes().forEach(function(v) {\n    if (!Object.hasOwn(visited, v)) {\n      dfs(v);\n    }\n  });\n\n  return results;\n}\n","var tarjan = require(\"./tarjan\");\n\nmodule.exports = findCycles;\n\nfunction findCycles(g) {\n  return tarjan(g).filter(function(cmpt) {\n    return cmpt.length > 1 || (cmpt.length === 1 && g.hasEdge(cmpt[0], cmpt[0]));\n  });\n}\n","module.exports = floydWarshall;\n\nvar DEFAULT_WEIGHT_FUNC = () => 1;\n\nfunction floydWarshall(g, weightFn, edgeFn) {\n  return runFloydWarshall(g,\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runFloydWarshall(g, weightFn, edgeFn) {\n  var results = {};\n  var nodes = g.nodes();\n\n  nodes.forEach(function(v) {\n    results[v] = {};\n    results[v][v] = { distance: 0 };\n    nodes.forEach(function(w) {\n      if (v !== w) {\n        results[v][w] = { distance: Number.POSITIVE_INFINITY };\n      }\n    });\n    edgeFn(v).forEach(function(edge) {\n      var w = edge.v === v ? edge.w : edge.v;\n      var d = weightFn(edge);\n      results[v][w] = { distance: d, predecessor: v };\n    });\n  });\n\n  nodes.forEach(function(k) {\n    var rowK = results[k];\n    nodes.forEach(function(i) {\n      var rowI = results[i];\n      nodes.forEach(function(j) {\n        var ik = rowI[k];\n        var kj = rowK[j];\n        var ij = rowI[j];\n        var altDistance = ik.distance + kj.distance;\n        if (altDistance < ij.distance) {\n          ij.distance = altDistance;\n          ij.predecessor = kj.predecessor;\n        }\n      });\n    });\n  });\n\n  return results;\n}\n","function topsort(g) {\n  var visited = {};\n  var stack = {};\n  var results = [];\n\n  function visit(node) {\n    if (Object.hasOwn(stack, node)) {\n      throw new CycleException();\n    }\n\n    if (!Object.hasOwn(visited, node)) {\n      stack[node] = true;\n      visited[node] = true;\n      g.predecessors(node).forEach(visit);\n      delete stack[node];\n      results.push(node);\n    }\n  }\n\n  g.sinks().forEach(visit);\n\n  if (Object.keys(visited).length !== g.nodeCount()) {\n    throw new CycleException();\n  }\n\n  return results;\n}\n\nclass CycleException extends Error {\n  constructor() {\n    super(...arguments);\n  }\n}\n\nmodule.exports = topsort;\ntopsort.CycleException = CycleException;\n","var topsort = require(\"./topsort\");\n\nmodule.exports = isAcyclic;\n\nfunction isAcyclic(g) {\n  try {\n    topsort(g);\n  } catch (e) {\n    if (e instanceof topsort.CycleException) {\n      return false;\n    }\n    throw e;\n  }\n  return true;\n}\n","module.exports = dfs;\n\n/*\n * A helper that preforms a pre- or post-order traversal on the input graph\n * and returns the nodes in the order they were visited. If the graph is\n * undirected then this algorithm will navigate using neighbors. If the graph\n * is directed then this algorithm will navigate using successors.\n *\n * If the order is not \"post\", it will be treated as \"pre\".\n */\nfunction dfs(g, vs, order) {\n  if (!Array.isArray(vs)) {\n    vs = [vs];\n  }\n\n  var navigation = g.isDirected() ? v => g.successors(v) : v => g.neighbors(v);\n  var orderFunc = order === \"post\" ? postOrderDfs : preOrderDfs;\n\n  var acc = [];\n  var visited = {};\n  vs.forEach(v => {\n    if (!g.hasNode(v)) {\n      throw new Error(\"Graph does not have node: \" + v);\n    }\n\n    orderFunc(v, navigation, visited, acc);\n  });\n\n  return acc;\n}\n\nfunction postOrderDfs(v, navigation, visited, acc) {\n  var stack = [[v, false]];\n  while (stack.length > 0) {\n    var curr = stack.pop();\n    if (curr[1]) {\n      acc.push(curr[0]);\n    } else {\n      if (!Object.hasOwn(visited, curr[0])) {\n        visited[curr[0]] = true;\n        stack.push([curr[0], true]);\n        forEachRight(navigation(curr[0]), w => stack.push([w, false]));\n      }\n    }\n  }\n}\n\nfunction preOrderDfs(v, navigation, visited, acc) {\n  var stack = [v];\n  while (stack.length > 0) {\n    var curr = stack.pop();\n    if (!Object.hasOwn(visited, curr)) {\n      visited[curr] = true;\n      acc.push(curr);\n      forEachRight(navigation(curr), w => stack.push(w));\n    }\n  }\n}\n\nfunction forEachRight(array, iteratee) {\n  var length = array.length;\n  while (length--) {\n    iteratee(array[length], length, array);\n  }\n\n  return array;\n}\n","var dfs = require(\"./dfs\");\n\nmodule.exports = postorder;\n\nfunction postorder(g, vs) {\n  return dfs(g, vs, \"post\");\n}\n","var dfs = require(\"./dfs\");\n\nmodule.exports = preorder;\n\nfunction preorder(g, vs) {\n  return dfs(g, vs, \"pre\");\n}\n","var Graph = require(\"../graph\");\nvar PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = prim;\n\nfunction prim(g, weightFunc) {\n  var result = new Graph();\n  var parents = {};\n  var pq = new PriorityQueue();\n  var v;\n\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge);\n      if (edgeWeight < pri) {\n        parents[w] = v;\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n\n  if (g.nodeCount() === 0) {\n    return result;\n  }\n\n  g.nodes().forEach(function(v) {\n    pq.add(v, Number.POSITIVE_INFINITY);\n    result.setNode(v);\n  });\n\n  // Start from an arbitrary node\n  pq.decrease(g.nodes()[0], 0);\n\n  var init = false;\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    if (Object.hasOwn(parents, v)) {\n      result.setEdge(v, parents[v]);\n    } else if (init) {\n      throw new Error(\"Input graph is not connected: \" + g);\n    } else {\n      init = true;\n    }\n\n    g.nodeEdges(v).forEach(updateNeighbors);\n  }\n\n  return result;\n}\n","module.exports = {\n  components: require(\"./components\"),\n  dijkstra: require(\"./dijkstra\"),\n  dijkstraAll: require(\"./dijkstra-all\"),\n  findCycles: require(\"./find-cycles\"),\n  floydWarshall: require(\"./floyd-warshall\"),\n  isAcyclic: require(\"./is-acyclic\"),\n  postorder: require(\"./postorder\"),\n  preorder: require(\"./preorder\"),\n  prim: require(\"./prim\"),\n  tarjan: require(\"./tarjan\"),\n  topsort: require(\"./topsort\")\n};\n","/**\n * Copyright (c) 2014, Chris Pettitt\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its contributors\n * may be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar lib = require(\"./lib\");\n\nmodule.exports = {\n  Graph: lib.Graph,\n  json: require(\"./lib/json\"),\n  alg: require(\"./lib/alg\"),\n  version: lib.version\n};\n","/*\n * Simple doubly linked list implementation derived from Cormen, et al.,\n * \"Introduction to Algorithms\".\n */\n\nclass List {\n  constructor() {\n    let sentinel = {};\n    sentinel._next = sentinel._prev = sentinel;\n    this._sentinel = sentinel;\n  }\n\n  dequeue() {\n    let sentinel = this._sentinel;\n    let entry = sentinel._prev;\n    if (entry !== sentinel) {\n      unlink(entry);\n      return entry;\n    }\n  }\n\n  enqueue(entry) {\n    let sentinel = this._sentinel;\n    if (entry._prev && entry._next) {\n      unlink(entry);\n    }\n    entry._next = sentinel._next;\n    sentinel._next._prev = entry;\n    sentinel._next = entry;\n    entry._prev = sentinel;\n  }\n\n  toString() {\n    let strs = [];\n    let sentinel = this._sentinel;\n    let curr = sentinel._prev;\n    while (curr !== sentinel) {\n      strs.push(JSON.stringify(curr, filterOutLinks));\n      curr = curr._prev;\n    }\n    return \"[\" + strs.join(\", \") + \"]\";\n  }\n}\n\nfunction unlink(entry) {\n  entry._prev._next = entry._next;\n  entry._next._prev = entry._prev;\n  delete entry._next;\n  delete entry._prev;\n}\n\nfunction filterOutLinks(k, v) {\n  if (k !== \"_next\" && k !== \"_prev\") {\n    return v;\n  }\n}\n\nmodule.exports = List;\n","let Graph = require(\"@dagrejs/graphlib\").Graph;\nlet List = require(\"./data/list\");\n\n/*\n * A greedy heuristic for finding a feedback arc set for a graph. A feedback\n * arc set is a set of edges that can be removed to make a graph acyclic.\n * The algorithm comes from: P. Eades, X. Lin, and W. F. Smyth, \"A fast and\n * effective heuristic for the feedback arc set problem.\" This implementation\n * adjusts that from the paper to allow for weighted edges.\n */\nmodule.exports = greedyFAS;\n\nlet DEFAULT_WEIGHT_FN = () => 1;\n\nfunction greedyFAS(g, weightFn) {\n  if (g.nodeCount() <= 1) {\n    return [];\n  }\n  let state = buildState(g, weightFn || DEFAULT_WEIGHT_FN);\n  let results = doGreedyFAS(state.graph, state.buckets, state.zeroIdx);\n\n  // Expand multi-edges\n  return results.flatMap(e => g.outEdges(e.v, e.w));\n}\n\nfunction doGreedyFAS(g, buckets, zeroIdx) {\n  let results = [];\n  let sources = buckets[buckets.length - 1];\n  let sinks = buckets[0];\n\n  let entry;\n  while (g.nodeCount()) {\n    while ((entry = sinks.dequeue()))   { removeNode(g, buckets, zeroIdx, entry); }\n    while ((entry = sources.dequeue())) { removeNode(g, buckets, zeroIdx, entry); }\n    if (g.nodeCount()) {\n      for (let i = buckets.length - 2; i > 0; --i) {\n        entry = buckets[i].dequeue();\n        if (entry) {\n          results = results.concat(removeNode(g, buckets, zeroIdx, entry, true));\n          break;\n        }\n      }\n    }\n  }\n\n  return results;\n}\n\nfunction removeNode(g, buckets, zeroIdx, entry, collectPredecessors) {\n  let results = collectPredecessors ? [] : undefined;\n\n  g.inEdges(entry.v).forEach(edge => {\n    let weight = g.edge(edge);\n    let uEntry = g.node(edge.v);\n\n    if (collectPredecessors) {\n      results.push({ v: edge.v, w: edge.w });\n    }\n\n    uEntry.out -= weight;\n    assignBucket(buckets, zeroIdx, uEntry);\n  });\n\n  g.outEdges(entry.v).forEach(edge => {\n    let weight = g.edge(edge);\n    let w = edge.w;\n    let wEntry = g.node(w);\n    wEntry[\"in\"] -= weight;\n    assignBucket(buckets, zeroIdx, wEntry);\n  });\n\n  g.removeNode(entry.v);\n\n  return results;\n}\n\nfunction buildState(g, weightFn) {\n  let fasGraph = new Graph();\n  let maxIn = 0;\n  let maxOut = 0;\n\n  g.nodes().forEach(v => {\n    fasGraph.setNode(v, { v: v, \"in\": 0, out: 0 });\n  });\n\n  // Aggregate weights on nodes, but also sum the weights across multi-edges\n  // into a single edge for the fasGraph.\n  g.edges().forEach(e => {\n    let prevWeight = fasGraph.edge(e.v, e.w) || 0;\n    let weight = weightFn(e);\n    let edgeWeight = prevWeight + weight;\n    fasGraph.setEdge(e.v, e.w, edgeWeight);\n    maxOut = Math.max(maxOut, fasGraph.node(e.v).out += weight);\n    maxIn  = Math.max(maxIn,  fasGraph.node(e.w)[\"in\"]  += weight);\n  });\n\n  let buckets = range(maxOut + maxIn + 3).map(() => new List());\n  let zeroIdx = maxIn + 1;\n\n  fasGraph.nodes().forEach(v => {\n    assignBucket(buckets, zeroIdx, fasGraph.node(v));\n  });\n\n  return { graph: fasGraph, buckets: buckets, zeroIdx: zeroIdx };\n}\n\nfunction assignBucket(buckets, zeroIdx, entry) {\n  if (!entry.out) {\n    buckets[0].enqueue(entry);\n  } else if (!entry[\"in\"]) {\n    buckets[buckets.length - 1].enqueue(entry);\n  } else {\n    buckets[entry.out - entry[\"in\"] + zeroIdx].enqueue(entry);\n  }\n}\n\nfunction range(limit) {\n  const range = [];\n  for (let i = 0; i < limit; i++) {\n    range.push(i);\n  }\n\n  return range;\n}\n","/* eslint \"no-console\": off */\n\n\"use strict\";\n\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\n\nmodule.exports = {\n  addBorderNode,\n  addDummyNode,\n  applyWithChunking,\n  asNonCompoundGraph,\n  buildLayerMatrix,\n  intersectRect,\n  mapValues,\n  maxRank,\n  normalizeRanks,\n  notime,\n  partition,\n  pick,\n  predecessorWeights,\n  range,\n  removeEmptyRanks,\n  simplify,\n  successorWeights,\n  time,\n  uniqueId,\n  zipObject,\n};\n\n/*\n * Adds a dummy node to the graph and return v.\n */\nfunction addDummyNode(g, type, attrs, name) {\n  var v = name;\n  while (g.hasNode(v)) {\n    v = uniqueId(name);\n  }\n\n  attrs.dummy = type;\n  g.setNode(v, attrs);\n  return v;\n}\n\n/*\n * Returns a new graph with only simple edges. Handles aggregation of data\n * associated with multi-edges.\n */\nfunction simplify(g) {\n  let simplified = new Graph().setGraph(g.graph());\n  g.nodes().forEach(v => simplified.setNode(v, g.node(v)));\n  g.edges().forEach(e => {\n    let simpleLabel = simplified.edge(e.v, e.w) || { weight: 0, minlen: 1 };\n    let label = g.edge(e);\n    simplified.setEdge(e.v, e.w, {\n      weight: simpleLabel.weight + label.weight,\n      minlen: Math.max(simpleLabel.minlen, label.minlen)\n    });\n  });\n  return simplified;\n}\n\nfunction asNonCompoundGraph(g) {\n  let simplified = new Graph({ multigraph: g.isMultigraph() }).setGraph(g.graph());\n  g.nodes().forEach(v => {\n    if (!g.children(v).length) {\n      simplified.setNode(v, g.node(v));\n    }\n  });\n  g.edges().forEach(e => {\n    simplified.setEdge(e, g.edge(e));\n  });\n  return simplified;\n}\n\nfunction successorWeights(g) {\n  let weightMap = g.nodes().map(v => {\n    let sucs = {};\n    g.outEdges(v).forEach(e => {\n      sucs[e.w] = (sucs[e.w] || 0) + g.edge(e).weight;\n    });\n    return sucs;\n  });\n  return zipObject(g.nodes(), weightMap);\n}\n\nfunction predecessorWeights(g) {\n  let weightMap = g.nodes().map(v => {\n    let preds = {};\n    g.inEdges(v).forEach(e => {\n      preds[e.v] = (preds[e.v] || 0) + g.edge(e).weight;\n    });\n    return preds;\n  });\n  return zipObject(g.nodes(), weightMap);\n}\n\n/*\n * Finds where a line starting at point ({x, y}) would intersect a rectangle\n * ({x, y, width, height}) if it were pointing at the rectangle's center.\n */\nfunction intersectRect(rect, point) {\n  let x = rect.x;\n  let y = rect.y;\n\n  // Rectangle intersection algorithm from:\n  // http://math.stackexchange.com/questions/108113/find-edge-between-two-boxes\n  let dx = point.x - x;\n  let dy = point.y - y;\n  let w = rect.width / 2;\n  let h = rect.height / 2;\n\n  if (!dx && !dy) {\n    throw new Error(\"Not possible to find intersection inside of the rectangle\");\n  }\n\n  let sx, sy;\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    // Intersection is top or bottom of rect.\n    if (dy < 0) {\n      h = -h;\n    }\n    sx = h * dx / dy;\n    sy = h;\n  } else {\n    // Intersection is left or right of rect.\n    if (dx < 0) {\n      w = -w;\n    }\n    sx = w;\n    sy = w * dy / dx;\n  }\n\n  return { x: x + sx, y: y + sy };\n}\n\n/*\n * Given a DAG with each node assigned \"rank\" and \"order\" properties, this\n * function will produce a matrix with the ids of each node.\n */\nfunction buildLayerMatrix(g) {\n  let layering = range(maxRank(g) + 1).map(() => []);\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    let rank = node.rank;\n    if (rank !== undefined) {\n      layering[rank][node.order] = v;\n    }\n  });\n  return layering;\n}\n\n/*\n * Adjusts the ranks for all nodes in the graph such that all nodes v have\n * rank(v) >= 0 and at least one node w has rank(w) = 0.\n */\nfunction normalizeRanks(g) {\n  let nodeRanks = g.nodes().map(v => {\n    let rank = g.node(v).rank;\n    if (rank === undefined) {\n      return Number.MAX_VALUE;\n    }\n\n    return rank;\n  });\n  let min = applyWithChunking(Math.min, nodeRanks);\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    if (Object.hasOwn(node, \"rank\")) {\n      node.rank -= min;\n    }\n  });\n}\n\nfunction removeEmptyRanks(g) {\n  // Ranks may not start at 0, so we need to offset them\n  let nodeRanks = g.nodes().map(v => g.node(v).rank);\n  let offset = applyWithChunking(Math.min, nodeRanks);\n\n  let layers = [];\n  g.nodes().forEach(v => {\n    let rank = g.node(v).rank - offset;\n    if (!layers[rank]) {\n      layers[rank] = [];\n    }\n    layers[rank].push(v);\n  });\n\n  let delta = 0;\n  let nodeRankFactor = g.graph().nodeRankFactor;\n  Array.from(layers).forEach((vs, i) => {\n    if (vs === undefined && i % nodeRankFactor !== 0) {\n      --delta;\n    } else if (vs !== undefined && delta) {\n      vs.forEach(v => g.node(v).rank += delta);\n    }\n  });\n}\n\nfunction addBorderNode(g, prefix, rank, order) {\n  let node = {\n    width: 0,\n    height: 0\n  };\n  if (arguments.length >= 4) {\n    node.rank = rank;\n    node.order = order;\n  }\n  return addDummyNode(g, \"border\", node, prefix);\n}\n\nfunction splitToChunks(array, chunkSize = CHUNKING_THRESHOLD) {\n  const chunks = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    const chunk = array.slice(i, i + chunkSize);\n    chunks.push(chunk);\n  }\n  return chunks;\n}\n\nconst CHUNKING_THRESHOLD = 65535;\n\nfunction applyWithChunking(fn, argsArray) {\n  if(argsArray.length > CHUNKING_THRESHOLD) {\n    const chunks = splitToChunks(argsArray);\n    return fn.apply(null, chunks.map(chunk => fn.apply(null, chunk)));\n  } else {\n    return fn.apply(null, argsArray);\n  }\n}\n\nfunction maxRank(g) {\n  const nodes = g.nodes();\n  const nodeRanks = nodes.map(v => {\n    let rank = g.node(v).rank;\n    if (rank === undefined) {\n      return Number.MIN_VALUE;\n    }\n    return rank;\n  });\n\n  return applyWithChunking(Math.max, nodeRanks);\n}\n\n/*\n * Partition a collection into two groups: `lhs` and `rhs`. If the supplied\n * function returns true for an entry it goes into `lhs`. Otherwise it goes\n * into `rhs.\n */\nfunction partition(collection, fn) {\n  let result = { lhs: [], rhs: [] };\n  collection.forEach(value => {\n    if (fn(value)) {\n      result.lhs.push(value);\n    } else {\n      result.rhs.push(value);\n    }\n  });\n  return result;\n}\n\n/*\n * Returns a new function that wraps `fn` with a timer. The wrapper logs the\n * time it takes to execute the function.\n */\nfunction time(name, fn) {\n  let start = Date.now();\n  try {\n    return fn();\n  } finally {\n    console.log(name + \" time: \" + (Date.now() - start) + \"ms\");\n  }\n}\n\nfunction notime(name, fn) {\n  return fn();\n}\n\nlet idCounter = 0;\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return prefix + (\"\" + id);\n}\n\nfunction range(start, limit, step = 1) {\n  if (limit == null) {\n    limit = start;\n    start = 0;\n  }\n\n  let endCon = (i) => i < limit;\n  if (step < 0) {\n    endCon = (i) => limit < i;\n  }\n\n  const range = [];\n  for (let i = start; endCon(i); i += step) {\n    range.push(i);\n  }\n\n  return range;\n}\n\nfunction pick(source, keys) {\n  const dest = {};\n  for (const key of keys) {\n    if (source[key] !== undefined) {\n      dest[key] = source[key];\n    }\n  }\n\n  return dest;\n}\n\nfunction mapValues(obj, funcOrProp) {\n  let func = funcOrProp;\n  if (typeof funcOrProp === 'string') {\n    func = (val) => val[funcOrProp];\n  }\n\n  return Object.entries(obj).reduce((acc, [k, v]) => {\n    acc[k] = func(v, k);\n    return acc;\n  }, {});\n}\n\nfunction zipObject(props, values) {\n  return props.reduce((acc, key, i) => {\n    acc[key] = values[i];\n    return acc;\n  }, {});\n}\n","\"use strict\";\n\nlet greedyFAS = require(\"./greedy-fas\");\nlet uniqueId = require(\"./util\").uniqueId;\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\nfunction run(g) {\n  let fas = (g.graph().acyclicer === \"greedy\"\n    ? greedyFAS(g, weightFn(g))\n    : dfsFAS(g));\n  fas.forEach(e => {\n    let label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, uniqueId(\"rev\"));\n  });\n\n  function weightFn(g) {\n    return e => {\n      return g.edge(e).weight;\n    };\n  }\n}\n\nfunction dfsFAS(g) {\n  let fas = [];\n  let stack = {};\n  let visited = {};\n\n  function dfs(v) {\n    if (Object.hasOwn(visited, v)) {\n      return;\n    }\n    visited[v] = true;\n    stack[v] = true;\n    g.outEdges(v).forEach(e => {\n      if (Object.hasOwn(stack, e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n    delete stack[v];\n  }\n\n  g.nodes().forEach(dfs);\n  return fas;\n}\n\nfunction undo(g) {\n  g.edges().forEach(e => {\n    let label = g.edge(e);\n    if (label.reversed) {\n      g.removeEdge(e);\n\n      let forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n}\n","\"use strict\";\n\nlet util = require(\"./util\");\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\n/*\n * Breaks any long edges in the graph into short segments that span 1 layer\n * each. This operation is undoable with the denormalize function.\n *\n * Pre-conditions:\n *\n *    1. The input graph is a DAG.\n *    2. Each node in the graph has a \"rank\" property.\n *\n * Post-condition:\n *\n *    1. All edges in the graph have a length of 1.\n *    2. Dummy nodes are added where edges have been split into segments.\n *    3. The graph is augmented with a \"dummyChains\" attribute which contains\n *       the first dummy in each chain of dummy nodes produced.\n */\nfunction run(g) {\n  g.graph().dummyChains = [];\n  g.edges().forEach(edge => normalizeEdge(g, edge));\n}\n\nfunction normalizeEdge(g, e) {\n  let v = e.v;\n  let vRank = g.node(v).rank;\n  let w = e.w;\n  let wRank = g.node(w).rank;\n  let name = e.name;\n  let edgeLabel = g.edge(e);\n  let labelRank = edgeLabel.labelRank;\n\n  if (wRank === vRank + 1) return;\n\n  g.removeEdge(e);\n\n  let dummy, attrs, i;\n  for (i = 0, ++vRank; vRank < wRank; ++i, ++vRank) {\n    edgeLabel.points = [];\n    attrs = {\n      width: 0, height: 0,\n      edgeLabel: edgeLabel, edgeObj: e,\n      rank: vRank\n    };\n    dummy = util.addDummyNode(g, \"edge\", attrs, \"_d\");\n    if (vRank === labelRank) {\n      attrs.width = edgeLabel.width;\n      attrs.height = edgeLabel.height;\n      attrs.dummy = \"edge-label\";\n      attrs.labelpos = edgeLabel.labelpos;\n    }\n    g.setEdge(v, dummy, { weight: edgeLabel.weight }, name);\n    if (i === 0) {\n      g.graph().dummyChains.push(dummy);\n    }\n    v = dummy;\n  }\n\n  g.setEdge(v, w, { weight: edgeLabel.weight }, name);\n}\n\nfunction undo(g) {\n  g.graph().dummyChains.forEach(v => {\n    let node = g.node(v);\n    let origLabel = node.edgeLabel;\n    let w;\n    g.setEdge(node.edgeObj, origLabel);\n    while (node.dummy) {\n      w = g.successors(v)[0];\n      g.removeNode(v);\n      origLabel.points.push({ x: node.x, y: node.y });\n      if (node.dummy === \"edge-label\") {\n        origLabel.x = node.x;\n        origLabel.y = node.y;\n        origLabel.width = node.width;\n        origLabel.height = node.height;\n      }\n      v = w;\n      node = g.node(v);\n    }\n  });\n}\n","\"use strict\";\n\nconst { applyWithChunking } = require(\"../util\");\n\nmodule.exports = {\n  longestPath: longestPath,\n  slack: slack\n};\n\n/*\n * Initializes ranks for the input graph using the longest path algorithm. This\n * algorithm scales well and is fast in practice, it yields rather poor\n * solutions. Nodes are pushed to the lowest layer possible, leaving the bottom\n * ranks wide and leaving edges longer than necessary. However, due to its\n * speed, this algorithm is good for getting an initial ranking that can be fed\n * into other algorithms.\n *\n * This algorithm does not normalize layers because it will be used by other\n * algorithms in most cases. If using this algorithm directly, be sure to\n * run normalize at the end.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG.\n *    2. Input graph node labels can be assigned properties.\n *\n * Post-conditions:\n *\n *    1. Each node will be assign an (unnormalized) \"rank\" property.\n */\nfunction longestPath(g) {\n  var visited = {};\n\n  function dfs(v) {\n    var label = g.node(v);\n    if (Object.hasOwn(visited, v)) {\n      return label.rank;\n    }\n    visited[v] = true;\n\n    let outEdgesMinLens = g.outEdges(v).map(e => {\n      if (e == null) {\n        return Number.POSITIVE_INFINITY;\n      }\n\n      return dfs(e.w) - g.edge(e).minlen;\n    });\n\n    var rank = applyWithChunking(Math.min, outEdgesMinLens);\n\n    if (rank === Number.POSITIVE_INFINITY) {\n      rank = 0;\n    }\n\n    return (label.rank = rank);\n  }\n\n  g.sources().forEach(dfs);\n}\n\n/*\n * Returns the amount of slack for the given edge. The slack is defined as the\n * difference between the length of the edge and its minimum length.\n */\nfunction slack(g, e) {\n  return g.node(e.w).rank - g.node(e.v).rank - g.edge(e).minlen;\n}\n","\"use strict\";\n\nvar Graph = require(\"@dagrejs/graphlib\").Graph;\nvar slack = require(\"./util\").slack;\n\nmodule.exports = feasibleTree;\n\n/*\n * Constructs a spanning tree with tight edges and adjusted the input node's\n * ranks to achieve this. A tight edge is one that is has a length that matches\n * its \"minlen\" attribute.\n *\n * The basic structure for this function is derived from Gansner, et al., \"A\n * Technique for Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a DAG.\n *    2. Graph must be connected.\n *    3. Graph must have at least one node.\n *    5. Graph nodes must have been previously assigned a \"rank\" property that\n *       respects the \"minlen\" property of incident edges.\n *    6. Graph edges must have a \"minlen\" property.\n *\n * Post-conditions:\n *\n *    - Graph nodes will have their rank adjusted to ensure that all edges are\n *      tight.\n *\n * Returns a tree (undirected graph) that is constructed using only \"tight\"\n * edges.\n */\nfunction feasibleTree(g) {\n  var t = new Graph({ directed: false });\n\n  // Choose arbitrary node from which to start our tree\n  var start = g.nodes()[0];\n  var size = g.nodeCount();\n  t.setNode(start, {});\n\n  var edge, delta;\n  while (tightTree(t, g) < size) {\n    edge = findMinSlackEdge(t, g);\n    delta = t.hasNode(edge.v) ? slack(g, edge) : -slack(g, edge);\n    shiftRanks(t, g, delta);\n  }\n\n  return t;\n}\n\n/*\n * Finds a maximal tree of tight edges and returns the number of nodes in the\n * tree.\n */\nfunction tightTree(t, g) {\n  function dfs(v) {\n    g.nodeEdges(v).forEach(e => {\n      var edgeV = e.v,\n        w = (v === edgeV) ? e.w : edgeV;\n      if (!t.hasNode(w) && !slack(g, e)) {\n        t.setNode(w, {});\n        t.setEdge(v, w, {});\n        dfs(w);\n      }\n    });\n  }\n\n  t.nodes().forEach(dfs);\n  return t.nodeCount();\n}\n\n/*\n * Finds the edge with the smallest slack that is incident on tree and returns\n * it.\n */\nfunction findMinSlackEdge(t, g) {\n  const edges = g.edges();\n\n  return edges.reduce((acc, edge) => {\n    let edgeSlack = Number.POSITIVE_INFINITY;\n    if (t.hasNode(edge.v) !== t.hasNode(edge.w)) {\n      edgeSlack = slack(g, edge);\n    }\n\n    if (edgeSlack < acc[0]) {\n      return [edgeSlack, edge];\n    }\n\n    return acc;\n  }, [Number.POSITIVE_INFINITY, null])[1];\n}\n\nfunction shiftRanks(t, g, delta) {\n  t.nodes().forEach(v => g.node(v).rank += delta);\n}\n","\"use strict\";\n\nvar feasibleTree = require(\"./feasible-tree\");\nvar slack = require(\"./util\").slack;\nvar initRank = require(\"./util\").longestPath;\nvar preorder = require(\"@dagrejs/graphlib\").alg.preorder;\nvar postorder = require(\"@dagrejs/graphlib\").alg.postorder;\nvar simplify = require(\"../util\").simplify;\n\nmodule.exports = networkSimplex;\n\n// Expose some internals for testing purposes\nnetworkSimplex.initLowLimValues = initLowLimValues;\nnetworkSimplex.initCutValues = initCutValues;\nnetworkSimplex.calcCutValue = calcCutValue;\nnetworkSimplex.leaveEdge = leaveEdge;\nnetworkSimplex.enterEdge = enterEdge;\nnetworkSimplex.exchangeEdges = exchangeEdges;\n\n/*\n * The network simplex algorithm assigns ranks to each node in the input graph\n * and iteratively improves the ranking to reduce the length of edges.\n *\n * Preconditions:\n *\n *    1. The input graph must be a DAG.\n *    2. All nodes in the graph must have an object value.\n *    3. All edges in the graph must have \"minlen\" and \"weight\" attributes.\n *\n * Postconditions:\n *\n *    1. All nodes in the graph will have an assigned \"rank\" attribute that has\n *       been optimized by the network simplex algorithm. Ranks start at 0.\n *\n *\n * A rough sketch of the algorithm is as follows:\n *\n *    1. Assign initial ranks to each node. We use the longest path algorithm,\n *       which assigns ranks to the lowest position possible. In general this\n *       leads to very wide bottom ranks and unnecessarily long edges.\n *    2. Construct a feasible tight tree. A tight tree is one such that all\n *       edges in the tree have no slack (difference between length of edge\n *       and minlen for the edge). This by itself greatly improves the assigned\n *       rankings by shorting edges.\n *    3. Iteratively find edges that have negative cut values. Generally a\n *       negative cut value indicates that the edge could be removed and a new\n *       tree edge could be added to produce a more compact graph.\n *\n * Much of the algorithms here are derived from Gansner, et al., \"A Technique\n * for Drawing Directed Graphs.\" The structure of the file roughly follows the\n * structure of the overall algorithm.\n */\nfunction networkSimplex(g) {\n  g = simplify(g);\n  initRank(g);\n  var t = feasibleTree(g);\n  initLowLimValues(t);\n  initCutValues(t, g);\n\n  var e, f;\n  while ((e = leaveEdge(t))) {\n    f = enterEdge(t, g, e);\n    exchangeEdges(t, g, e, f);\n  }\n}\n\n/*\n * Initializes cut values for all edges in the tree.\n */\nfunction initCutValues(t, g) {\n  var vs = postorder(t, t.nodes());\n  vs = vs.slice(0, vs.length - 1);\n  vs.forEach(v => assignCutValue(t, g, v));\n}\n\nfunction assignCutValue(t, g, child) {\n  var childLab = t.node(child);\n  var parent = childLab.parent;\n  t.edge(child, parent).cutvalue = calcCutValue(t, g, child);\n}\n\n/*\n * Given the tight tree, its graph, and a child in the graph calculate and\n * return the cut value for the edge between the child and its parent.\n */\nfunction calcCutValue(t, g, child) {\n  var childLab = t.node(child);\n  var parent = childLab.parent;\n  // True if the child is on the tail end of the edge in the directed graph\n  var childIsTail = true;\n  // The graph's view of the tree edge we're inspecting\n  var graphEdge = g.edge(child, parent);\n  // The accumulated cut value for the edge between this node and its parent\n  var cutValue = 0;\n\n  if (!graphEdge) {\n    childIsTail = false;\n    graphEdge = g.edge(parent, child);\n  }\n\n  cutValue = graphEdge.weight;\n\n  g.nodeEdges(child).forEach(e => {\n    var isOutEdge = e.v === child,\n      other = isOutEdge ? e.w : e.v;\n\n    if (other !== parent) {\n      var pointsToHead = isOutEdge === childIsTail,\n        otherWeight = g.edge(e).weight;\n\n      cutValue += pointsToHead ? otherWeight : -otherWeight;\n      if (isTreeEdge(t, child, other)) {\n        var otherCutValue = t.edge(child, other).cutvalue;\n        cutValue += pointsToHead ? -otherCutValue : otherCutValue;\n      }\n    }\n  });\n\n  return cutValue;\n}\n\nfunction initLowLimValues(tree, root) {\n  if (arguments.length < 2) {\n    root = tree.nodes()[0];\n  }\n  dfsAssignLowLim(tree, {}, 1, root);\n}\n\nfunction dfsAssignLowLim(tree, visited, nextLim, v, parent) {\n  var low = nextLim;\n  var label = tree.node(v);\n\n  visited[v] = true;\n  tree.neighbors(v).forEach(w => {\n    if (!Object.hasOwn(visited, w)) {\n      nextLim = dfsAssignLowLim(tree, visited, nextLim, w, v);\n    }\n  });\n\n  label.low = low;\n  label.lim = nextLim++;\n  if (parent) {\n    label.parent = parent;\n  } else {\n    // TODO should be able to remove this when we incrementally update low lim\n    delete label.parent;\n  }\n\n  return nextLim;\n}\n\nfunction leaveEdge(tree) {\n  return tree.edges().find(e => tree.edge(e).cutvalue < 0);\n}\n\nfunction enterEdge(t, g, edge) {\n  var v = edge.v;\n  var w = edge.w;\n\n  // For the rest of this function we assume that v is the tail and w is the\n  // head, so if we don't have this edge in the graph we should flip it to\n  // match the correct orientation.\n  if (!g.hasEdge(v, w)) {\n    v = edge.w;\n    w = edge.v;\n  }\n\n  var vLabel = t.node(v);\n  var wLabel = t.node(w);\n  var tailLabel = vLabel;\n  var flip = false;\n\n  // If the root is in the tail of the edge then we need to flip the logic that\n  // checks for the head and tail nodes in the candidates function below.\n  if (vLabel.lim > wLabel.lim) {\n    tailLabel = wLabel;\n    flip = true;\n  }\n\n  var candidates = g.edges().filter(edge => {\n    return flip === isDescendant(t, t.node(edge.v), tailLabel) &&\n           flip !== isDescendant(t, t.node(edge.w), tailLabel);\n  });\n\n  return candidates.reduce((acc, edge) => {\n    if (slack(g, edge) < slack(g, acc)) {\n      return edge;\n    }\n\n    return acc;\n  });\n}\n\nfunction exchangeEdges(t, g, e, f) {\n  var v = e.v;\n  var w = e.w;\n  t.removeEdge(v, w);\n  t.setEdge(f.v, f.w, {});\n  initLowLimValues(t);\n  initCutValues(t, g);\n  updateRanks(t, g);\n}\n\nfunction updateRanks(t, g) {\n  var root = t.nodes().find(v => !g.node(v).parent);\n  var vs = preorder(t, root);\n  vs = vs.slice(1);\n  vs.forEach(v => {\n    var parent = t.node(v).parent,\n      edge = g.edge(v, parent),\n      flipped = false;\n\n    if (!edge) {\n      edge = g.edge(parent, v);\n      flipped = true;\n    }\n\n    g.node(v).rank = g.node(parent).rank + (flipped ? edge.minlen : -edge.minlen);\n  });\n}\n\n/*\n * Returns true if the edge is in the tree.\n */\nfunction isTreeEdge(tree, u, v) {\n  return tree.hasEdge(u, v);\n}\n\n/*\n * Returns true if the specified node is descendant of the root node per the\n * assigned low and lim attributes in the tree.\n */\nfunction isDescendant(tree, vLabel, rootLabel) {\n  return rootLabel.low <= vLabel.lim && vLabel.lim <= rootLabel.lim;\n}\n","\"use strict\";\n\nvar rankUtil = require(\"./util\");\nvar longestPath = rankUtil.longestPath;\nvar feasibleTree = require(\"./feasible-tree\");\nvar networkSimplex = require(\"./network-simplex\");\n\nmodule.exports = rank;\n\n/*\n * Assigns a rank to each node in the input graph that respects the \"minlen\"\n * constraint specified on edges between nodes.\n *\n * This basic structure is derived from Gansner, et al., \"A Technique for\n * Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a connected DAG\n *    2. Graph nodes must be objects\n *    3. Graph edges must have \"weight\" and \"minlen\" attributes\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have a \"rank\" attribute based on the results of the\n *       algorithm. Ranks can start at any index (including negative), we'll\n *       fix them up later.\n */\nfunction rank(g) {\n  var ranker = g.graph().ranker;\n  if (ranker instanceof Function) {\n    return ranker(g);\n  }\n\n  switch(g.graph().ranker) {\n  case \"network-simplex\": networkSimplexRanker(g); break;\n  case \"tight-tree\": tightTreeRanker(g); break;\n  case \"longest-path\": longestPathRanker(g); break;\n  case \"none\": break;\n  default: networkSimplexRanker(g);\n  }\n}\n\n// A fast and simple ranker, but results are far from optimal.\nvar longestPathRanker = longestPath;\n\nfunction tightTreeRanker(g) {\n  longestPath(g);\n  feasibleTree(g);\n}\n\nfunction networkSimplexRanker(g) {\n  networkSimplex(g);\n}\n","module.exports = parentDummyChains;\n\nfunction parentDummyChains(g) {\n  let postorderNums = postorder(g);\n\n  g.graph().dummyChains.forEach(v => {\n    let node = g.node(v);\n    let edgeObj = node.edgeObj;\n    let pathData = findPath(g, postorderNums, edgeObj.v, edgeObj.w);\n    let path = pathData.path;\n    let lca = pathData.lca;\n    let pathIdx = 0;\n    let pathV = path[pathIdx];\n    let ascending = true;\n\n    while (v !== edgeObj.w) {\n      node = g.node(v);\n\n      if (ascending) {\n        while ((pathV = path[pathIdx]) !== lca &&\n               g.node(pathV).maxRank < node.rank) {\n          pathIdx++;\n        }\n\n        if (pathV === lca) {\n          ascending = false;\n        }\n      }\n\n      if (!ascending) {\n        while (pathIdx < path.length - 1 &&\n               g.node(pathV = path[pathIdx + 1]).minRank <= node.rank) {\n          pathIdx++;\n        }\n        pathV = path[pathIdx];\n      }\n\n      g.setParent(v, pathV);\n      v = g.successors(v)[0];\n    }\n  });\n}\n\n// Find a path from v to w through the lowest common ancestor (LCA). Return the\n// full path and the LCA.\nfunction findPath(g, postorderNums, v, w) {\n  let vPath = [];\n  let wPath = [];\n  let low = Math.min(postorderNums[v].low, postorderNums[w].low);\n  let lim = Math.max(postorderNums[v].lim, postorderNums[w].lim);\n  let parent;\n  let lca;\n\n  // Traverse up from v to find the LCA\n  parent = v;\n  do {\n    parent = g.parent(parent);\n    vPath.push(parent);\n  } while (parent &&\n           (postorderNums[parent].low > low || lim > postorderNums[parent].lim));\n  lca = parent;\n\n  // Traverse from w to LCA\n  parent = w;\n  while ((parent = g.parent(parent)) !== lca) {\n    wPath.push(parent);\n  }\n\n  return { path: vPath.concat(wPath.reverse()), lca: lca };\n}\n\nfunction postorder(g) {\n  let result = {};\n  let lim = 0;\n\n  function dfs(v) {\n    let low = lim;\n    g.children(v).forEach(dfs);\n    result[v] = { low: low, lim: lim++ };\n  }\n  g.children().forEach(dfs);\n\n  return result;\n}\n","let util = require(\"./util\");\n\nmodule.exports = {\n  run,\n  cleanup,\n};\n\n/*\n * A nesting graph creates dummy nodes for the tops and bottoms of subgraphs,\n * adds appropriate edges to ensure that all cluster nodes are placed between\n * these boundaries, and ensures that the graph is connected.\n *\n * In addition we ensure, through the use of the minlen property, that nodes\n * and subgraph border nodes to not end up on the same rank.\n *\n * Preconditions:\n *\n *    1. Input graph is a DAG\n *    2. Nodes in the input graph has a minlen attribute\n *\n * Postconditions:\n *\n *    1. Input graph is connected.\n *    2. Dummy nodes are added for the tops and bottoms of subgraphs.\n *    3. The minlen attribute for nodes is adjusted to ensure nodes do not\n *       get placed on the same rank as subgraph border nodes.\n *\n * The nesting graph idea comes from Sander, \"Layout of Compound Directed\n * Graphs.\"\n */\nfunction run(g) {\n  let root = util.addDummyNode(g, \"root\", {}, \"_root\");\n  let depths = treeDepths(g);\n  let depthsArr = Object.values(depths);\n  let height = util.applyWithChunking(Math.max, depthsArr) - 1; // Note: depths is an Object not an array\n  let nodeSep = 2 * height + 1;\n\n  g.graph().nestingRoot = root;\n\n  // Multiply minlen by nodeSep to align nodes on non-border ranks.\n  g.edges().forEach(e => g.edge(e).minlen *= nodeSep);\n\n  // Calculate a weight that is sufficient to keep subgraphs vertically compact\n  let weight = sumWeights(g) + 1;\n\n  // Create border nodes and link them up\n  g.children().forEach(child => dfs(g, root, nodeSep, weight, height, depths, child));\n\n  // Save the multiplier for node layers for later removal of empty border\n  // layers.\n  g.graph().nodeRankFactor = nodeSep;\n}\n\nfunction dfs(g, root, nodeSep, weight, height, depths, v) {\n  let children = g.children(v);\n  if (!children.length) {\n    if (v !== root) {\n      g.setEdge(root, v, { weight: 0, minlen: nodeSep });\n    }\n    return;\n  }\n\n  let top = util.addBorderNode(g, \"_bt\");\n  let bottom = util.addBorderNode(g, \"_bb\");\n  let label = g.node(v);\n\n  g.setParent(top, v);\n  label.borderTop = top;\n  g.setParent(bottom, v);\n  label.borderBottom = bottom;\n\n  children.forEach(child => {\n    dfs(g, root, nodeSep, weight, height, depths, child);\n\n    let childNode = g.node(child);\n    let childTop = childNode.borderTop ? childNode.borderTop : child;\n    let childBottom = childNode.borderBottom ? childNode.borderBottom : child;\n    let thisWeight = childNode.borderTop ? weight : 2 * weight;\n    let minlen = childTop !== childBottom ? 1 : height - depths[v] + 1;\n\n    g.setEdge(top, childTop, {\n      weight: thisWeight,\n      minlen: minlen,\n      nestingEdge: true\n    });\n\n    g.setEdge(childBottom, bottom, {\n      weight: thisWeight,\n      minlen: minlen,\n      nestingEdge: true\n    });\n  });\n\n  if (!g.parent(v)) {\n    g.setEdge(root, top, { weight: 0, minlen: height + depths[v] });\n  }\n}\n\nfunction treeDepths(g) {\n  var depths = {};\n  function dfs(v, depth) {\n    var children = g.children(v);\n    if (children && children.length) {\n      children.forEach(child => dfs(child, depth + 1));\n    }\n    depths[v] = depth;\n  }\n  g.children().forEach(v => dfs(v, 1));\n  return depths;\n}\n\nfunction sumWeights(g) {\n  return g.edges().reduce((acc, e) => acc + g.edge(e).weight, 0);\n}\n\nfunction cleanup(g) {\n  var graphLabel = g.graph();\n  g.removeNode(graphLabel.nestingRoot);\n  delete graphLabel.nestingRoot;\n  g.edges().forEach(e => {\n    var edge = g.edge(e);\n    if (edge.nestingEdge) {\n      g.removeEdge(e);\n    }\n  });\n}\n","let util = require(\"./util\");\n\nmodule.exports = addBorderSegments;\n\nfunction addBorderSegments(g) {\n  function dfs(v) {\n    let children = g.children(v);\n    let node = g.node(v);\n    if (children.length) {\n      children.forEach(dfs);\n    }\n\n    if (Object.hasOwn(node, \"minRank\")) {\n      node.borderLeft = [];\n      node.borderRight = [];\n      for (let rank = node.minRank, maxRank = node.maxRank + 1;\n        rank < maxRank;\n        ++rank) {\n        addBorderNode(g, \"borderLeft\", \"_bl\", v, node, rank);\n        addBorderNode(g, \"borderRight\", \"_br\", v, node, rank);\n      }\n    }\n  }\n\n  g.children().forEach(dfs);\n}\n\nfunction addBorderNode(g, prop, prefix, sg, sgNode, rank) {\n  let label = { width: 0, height: 0, rank: rank, borderType: prop };\n  let prev = sgNode[prop][rank - 1];\n  let curr = util.addDummyNode(g, \"border\", label, prefix);\n  sgNode[prop][rank] = curr;\n  g.setParent(curr, sg);\n  if (prev) {\n    g.setEdge(prev, curr, { weight: 1 });\n  }\n}\n","\"use strict\";\n\nmodule.exports = {\n  adjust: adjust,\n  undo: undo\n};\n\nfunction adjust(g) {\n  let rankDir = g.graph().rankdir.toLowerCase();\n  if (rankDir === \"lr\" || rankDir === \"rl\") {\n    swapWidthHeight(g);\n  }\n}\n\nfunction undo(g) {\n  let rankDir = g.graph().rankdir.toLowerCase();\n  if (rankDir === \"bt\" || rankDir === \"rl\") {\n    reverseY(g);\n  }\n\n  if (rankDir === \"lr\" || rankDir === \"rl\") {\n    swapXY(g);\n    swapWidthHeight(g);\n  }\n}\n\nfunction swapWidthHeight(g) {\n  g.nodes().forEach(v => swapWidthHeightOne(g.node(v)));\n  g.edges().forEach(e => swapWidthHeightOne(g.edge(e)));\n}\n\nfunction swapWidthHeightOne(attrs) {\n  let w = attrs.width;\n  attrs.width = attrs.height;\n  attrs.height = w;\n}\n\nfunction reverseY(g) {\n  g.nodes().forEach(v => reverseYOne(g.node(v)));\n\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.points.forEach(reverseYOne);\n    if (Object.hasOwn(edge, \"y\")) {\n      reverseYOne(edge);\n    }\n  });\n}\n\nfunction reverseYOne(attrs) {\n  attrs.y = -attrs.y;\n}\n\nfunction swapXY(g) {\n  g.nodes().forEach(v => swapXYOne(g.node(v)));\n\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.points.forEach(swapXYOne);\n    if (Object.hasOwn(edge, \"x\")) {\n      swapXYOne(edge);\n    }\n  });\n}\n\nfunction swapXYOne(attrs) {\n  let x = attrs.x;\n  attrs.x = attrs.y;\n  attrs.y = x;\n}\n","\"use strict\";\n\nlet util = require(\"../util\");\n\nmodule.exports = initOrder;\n\n/*\n * Assigns an initial order value for each node by performing a DFS search\n * starting from nodes in the first rank. Nodes are assigned an order in their\n * rank as they are first visited.\n *\n * This approach comes from Gansner, et al., \"A Technique for Drawing Directed\n * Graphs.\"\n *\n * Returns a layering matrix with an array per layer and each layer sorted by\n * the order of its nodes.\n */\nfunction initOrder(g) {\n  let visited = {};\n  let simpleNodes = g.nodes().filter(v => !g.children(v).length);\n  let simpleNodesRanks = simpleNodes.map(v => g.node(v).rank);\n  let maxRank = util.applyWithChunking(Math.max, simpleNodesRanks);\n  let layers = util.range(maxRank + 1).map(() => []);\n\n  function dfs(v) {\n    if (visited[v]) return;\n    visited[v] = true;\n    let node = g.node(v);\n    layers[node.rank].push(v);\n    g.successors(v).forEach(dfs);\n  }\n\n  let orderedVs = simpleNodes.sort((a, b) => g.node(a).rank - g.node(b).rank);\n  orderedVs.forEach(dfs);\n\n  return layers;\n}\n","\"use strict\";\n\nlet zipObject = require(\"../util\").zipObject;\n\nmodule.exports = crossCount;\n\n/*\n * A function that takes a layering (an array of layers, each with an array of\n * ordererd nodes) and a graph and returns a weighted crossing count.\n *\n * Pre-conditions:\n *\n *    1. Input graph must be simple (not a multigraph), directed, and include\n *       only simple edges.\n *    2. Edges in the input graph must have assigned weights.\n *\n * Post-conditions:\n *\n *    1. The graph and layering matrix are left unchanged.\n *\n * This algorithm is derived from Barth, et al., \"Bilayer Cross Counting.\"\n */\nfunction crossCount(g, layering) {\n  let cc = 0;\n  for (let i = 1; i < layering.length; ++i) {\n    cc += twoLayerCrossCount(g, layering[i-1], layering[i]);\n  }\n  return cc;\n}\n\nfunction twoLayerCrossCount(g, northLayer, southLayer) {\n  // Sort all of the edges between the north and south layers by their position\n  // in the north layer and then the south. Map these edges to the position of\n  // their head in the south layer.\n  let southPos = zipObject(southLayer, southLayer.map((v, i) => i));\n  let southEntries = northLayer.flatMap(v => {\n    return g.outEdges(v).map(e => {\n      return { pos: southPos[e.w], weight: g.edge(e).weight };\n    }).sort((a, b) => a.pos - b.pos);\n  });\n\n  // Build the accumulator tree\n  let firstIndex = 1;\n  while (firstIndex < southLayer.length) firstIndex <<= 1;\n  let treeSize = 2 * firstIndex - 1;\n  firstIndex -= 1;\n  let tree = new Array(treeSize).fill(0);\n\n  // Calculate the weighted crossings\n  let cc = 0;\n  southEntries.forEach(entry => {\n    let index = entry.pos + firstIndex;\n    tree[index] += entry.weight;\n    let weightSum = 0;\n    while (index > 0) {\n      if (index % 2) {\n        weightSum += tree[index + 1];\n      }\n      index = (index - 1) >> 1;\n      tree[index] += entry.weight;\n    }\n    cc += entry.weight * weightSum;\n  });\n\n  return cc;\n}\n","module.exports = barycenter;\n\nfunction barycenter(g, movable = []) {\n  return movable.map(v => {\n    let inV = g.inEdges(v);\n    if (!inV.length) {\n      return { v: v };\n    } else {\n      let result = inV.reduce((acc, e) => {\n        let edge = g.edge(e),\n          nodeU = g.node(e.v);\n        return {\n          sum: acc.sum + (edge.weight * nodeU.order),\n          weight: acc.weight + edge.weight\n        };\n      }, { sum: 0, weight: 0 });\n\n      return {\n        v: v,\n        barycenter: result.sum / result.weight,\n        weight: result.weight\n      };\n    }\n  });\n}\n\n","\"use strict\";\n\nlet util = require(\"../util\");\n\nmodule.exports = resolveConflicts;\n\n/*\n * Given a list of entries of the form {v, barycenter, weight} and a\n * constraint graph this function will resolve any conflicts between the\n * constraint graph and the barycenters for the entries. If the barycenters for\n * an entry would violate a constraint in the constraint graph then we coalesce\n * the nodes in the conflict into a new node that respects the contraint and\n * aggregates barycenter and weight information.\n *\n * This implementation is based on the description in Forster, \"A Fast and\n * Simple Hueristic for Constrained Two-Level Crossing Reduction,\" thought it\n * differs in some specific details.\n *\n * Pre-conditions:\n *\n *    1. Each entry has the form {v, barycenter, weight}, or if the node has\n *       no barycenter, then {v}.\n *\n * Returns:\n *\n *    A new list of entries of the form {vs, i, barycenter, weight}. The list\n *    `vs` may either be a singleton or it may be an aggregation of nodes\n *    ordered such that they do not violate constraints from the constraint\n *    graph. The property `i` is the lowest original index of any of the\n *    elements in `vs`.\n */\nfunction resolveConflicts(entries, cg) {\n  let mappedEntries = {};\n  entries.forEach((entry, i) => {\n    let tmp = mappedEntries[entry.v] = {\n      indegree: 0,\n      \"in\": [],\n      out: [],\n      vs: [entry.v],\n      i: i\n    };\n    if (entry.barycenter !== undefined) {\n      tmp.barycenter = entry.barycenter;\n      tmp.weight = entry.weight;\n    }\n  });\n\n  cg.edges().forEach(e => {\n    let entryV = mappedEntries[e.v];\n    let entryW = mappedEntries[e.w];\n    if (entryV !== undefined && entryW !== undefined) {\n      entryW.indegree++;\n      entryV.out.push(mappedEntries[e.w]);\n    }\n  });\n\n  let sourceSet = Object.values(mappedEntries).filter(entry => !entry.indegree);\n\n  return doResolveConflicts(sourceSet);\n}\n\nfunction doResolveConflicts(sourceSet) {\n  let entries = [];\n\n  function handleIn(vEntry) {\n    return uEntry => {\n      if (uEntry.merged) {\n        return;\n      }\n      if (uEntry.barycenter === undefined ||\n          vEntry.barycenter === undefined ||\n          uEntry.barycenter >= vEntry.barycenter) {\n        mergeEntries(vEntry, uEntry);\n      }\n    };\n  }\n\n  function handleOut(vEntry) {\n    return wEntry => {\n      wEntry[\"in\"].push(vEntry);\n      if (--wEntry.indegree === 0) {\n        sourceSet.push(wEntry);\n      }\n    };\n  }\n\n  while (sourceSet.length) {\n    let entry = sourceSet.pop();\n    entries.push(entry);\n    entry[\"in\"].reverse().forEach(handleIn(entry));\n    entry.out.forEach(handleOut(entry));\n  }\n\n  return entries.filter(entry => !entry.merged).map(entry => {\n    return util.pick(entry, [\"vs\", \"i\", \"barycenter\", \"weight\"]);\n  });\n}\n\nfunction mergeEntries(target, source) {\n  let sum = 0;\n  let weight = 0;\n\n  if (target.weight) {\n    sum += target.barycenter * target.weight;\n    weight += target.weight;\n  }\n\n  if (source.weight) {\n    sum += source.barycenter * source.weight;\n    weight += source.weight;\n  }\n\n  target.vs = source.vs.concat(target.vs);\n  target.barycenter = sum / weight;\n  target.weight = weight;\n  target.i = Math.min(source.i, target.i);\n  source.merged = true;\n}\n","let util = require(\"../util\");\n\nmodule.exports = sort;\n\nfunction sort(entries, biasRight) {\n  let parts = util.partition(entries, entry => {\n    return Object.hasOwn(entry, \"barycenter\");\n  });\n  let sortable = parts.lhs,\n    unsortable = parts.rhs.sort((a, b) => b.i - a.i),\n    vs = [],\n    sum = 0,\n    weight = 0,\n    vsIndex = 0;\n\n  sortable.sort(compareWithBias(!!biasRight));\n\n  vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n\n  sortable.forEach(entry => {\n    vsIndex += entry.vs.length;\n    vs.push(entry.vs);\n    sum += entry.barycenter * entry.weight;\n    weight += entry.weight;\n    vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n  });\n\n  let result = { vs: vs.flat(true) };\n  if (weight) {\n    result.barycenter = sum / weight;\n    result.weight = weight;\n  }\n  return result;\n}\n\nfunction consumeUnsortable(vs, unsortable, index) {\n  let last;\n  while (unsortable.length && (last = unsortable[unsortable.length - 1]).i <= index) {\n    unsortable.pop();\n    vs.push(last.vs);\n    index++;\n  }\n  return index;\n}\n\nfunction compareWithBias(bias) {\n  return (entryV, entryW) => {\n    if (entryV.barycenter < entryW.barycenter) {\n      return -1;\n    } else if (entryV.barycenter > entryW.barycenter) {\n      return 1;\n    }\n\n    return !bias ? entryV.i - entryW.i : entryW.i - entryV.i;\n  };\n}\n","let barycenter = require(\"./barycenter\");\nlet resolveConflicts = require(\"./resolve-conflicts\");\nlet sort = require(\"./sort\");\n\nmodule.exports = sortSubgraph;\n\nfunction sortSubgraph(g, v, cg, biasRight) {\n  let movable = g.children(v);\n  let node = g.node(v);\n  let bl = node ? node.borderLeft : undefined;\n  let br = node ? node.borderRight: undefined;\n  let subgraphs = {};\n\n  if (bl) {\n    movable = movable.filter(w => w !== bl && w !== br);\n  }\n\n  let barycenters = barycenter(g, movable);\n  barycenters.forEach(entry => {\n    if (g.children(entry.v).length) {\n      let subgraphResult = sortSubgraph(g, entry.v, cg, biasRight);\n      subgraphs[entry.v] = subgraphResult;\n      if (Object.hasOwn(subgraphResult, \"barycenter\")) {\n        mergeBarycenters(entry, subgraphResult);\n      }\n    }\n  });\n\n  let entries = resolveConflicts(barycenters, cg);\n  expandSubgraphs(entries, subgraphs);\n\n  let result = sort(entries, biasRight);\n\n  if (bl) {\n    result.vs = [bl, result.vs, br].flat(true);\n    if (g.predecessors(bl).length) {\n      let blPred = g.node(g.predecessors(bl)[0]),\n        brPred = g.node(g.predecessors(br)[0]);\n      if (!Object.hasOwn(result, \"barycenter\")) {\n        result.barycenter = 0;\n        result.weight = 0;\n      }\n      result.barycenter = (result.barycenter * result.weight +\n                           blPred.order + brPred.order) / (result.weight + 2);\n      result.weight += 2;\n    }\n  }\n\n  return result;\n}\n\nfunction expandSubgraphs(entries, subgraphs) {\n  entries.forEach(entry => {\n    entry.vs = entry.vs.flatMap(v => {\n      if (subgraphs[v]) {\n        return subgraphs[v].vs;\n      }\n      return v;\n    });\n  });\n}\n\nfunction mergeBarycenters(target, other) {\n  if (target.barycenter !== undefined) {\n    target.barycenter = (target.barycenter * target.weight +\n                         other.barycenter * other.weight) /\n                        (target.weight + other.weight);\n    target.weight += other.weight;\n  } else {\n    target.barycenter = other.barycenter;\n    target.weight = other.weight;\n  }\n}\n","let Graph = require(\"@dagrejs/graphlib\").Graph;\nlet util = require(\"../util\");\n\nmodule.exports = buildLayerGraph;\n\n/*\n * Constructs a graph that can be used to sort a layer of nodes. The graph will\n * contain all base and subgraph nodes from the request layer in their original\n * hierarchy and any edges that are incident on these nodes and are of the type\n * requested by the \"relationship\" parameter.\n *\n * Nodes from the requested rank that do not have parents are assigned a root\n * node in the output graph, which is set in the root graph attribute. This\n * makes it easy to walk the hierarchy of movable nodes during ordering.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG\n *    2. Base nodes in the input graph have a rank attribute\n *    3. Subgraph nodes in the input graph has minRank and maxRank attributes\n *    4. Edges have an assigned weight\n *    5. If `nodesWithRank` is not undefined, it must contains only the nodes\n *       which belong to `g` and belong to `rank`.\n *\n * Post-conditions:\n *\n *    1. Output graph has all nodes in the movable rank with preserved\n *       hierarchy.\n *    2. Root nodes in the movable layer are made children of the node\n *       indicated by the root attribute of the graph.\n *    3. Non-movable nodes incident on movable nodes, selected by the\n *       relationship parameter, are included in the graph (without hierarchy).\n *    4. Edges incident on movable nodes, selected by the relationship\n *       parameter, are added to the output graph.\n *    5. The weights for copied edges are aggregated as need, since the output\n *       graph is not a multi-graph.\n */\nfunction buildLayerGraph(g, rank, relationship, nodesWithRank) {\n  if (!nodesWithRank) {\n    nodesWithRank = g.nodes();\n  }\n  let root = createRootNode(g),\n    result = new Graph({ compound: true })\n      .setGraph({ root: root })\n      .setDefaultNodeLabel((v) => g.node(v));\n\n  nodesWithRank.forEach((v) => {\n    let node = g.node(v),\n      parent = g.parent(v);\n\n    if (node.rank === rank || node.minRank <= rank && rank <= node.maxRank) {\n      result.setNode(v);\n      result.setParent(v, parent || root);\n\n      // This assumes we have only short edges!\n      g[relationship](v).forEach(e => {\n        let u = e.v === v ? e.w : e.v,\n          edge = result.edge(u, v),\n          weight = edge !== undefined ? edge.weight : 0;\n        result.setEdge(u, v, { weight: g.edge(e).weight + weight });\n      });\n\n      if (Object.hasOwn(node, \"minRank\")) {\n        result.setNode(v, {\n          borderLeft: node.borderLeft[rank],\n          borderRight: node.borderRight[rank]\n        });\n      }\n    }\n  });\n\n  return result;\n}\n\nfunction createRootNode(g) {\n  var v;\n  while (g.hasNode((v = util.uniqueId(\"_root\"))));\n  return v;\n}\n","module.exports = addSubgraphConstraints;\n\nfunction addSubgraphConstraints(g, cg, vs) {\n  let prev = {},\n    rootPrev;\n\n  vs.forEach(v => {\n    let child = g.parent(v),\n      parent,\n      prevChild;\n    while (child) {\n      parent = g.parent(child);\n      if (parent) {\n        prevChild = prev[parent];\n        prev[parent] = child;\n      } else {\n        prevChild = rootPrev;\n        rootPrev = child;\n      }\n      if (prevChild && prevChild !== child) {\n        cg.setEdge(prevChild, child);\n        return;\n      }\n      child = parent;\n    }\n  });\n\n  /*\n  function dfs(v) {\n    var children = v ? g.children(v) : g.children();\n    if (children.length) {\n      var min = Number.POSITIVE_INFINITY,\n          subgraphs = [];\n      children.forEach(function(child) {\n        var childMin = dfs(child);\n        if (g.children(child).length) {\n          subgraphs.push({ v: child, order: childMin });\n        }\n        min = Math.min(min, childMin);\n      });\n      _.sortBy(subgraphs, \"order\").reduce(function(prev, curr) {\n        cg.setEdge(prev.v, curr.v);\n        return curr;\n      });\n      return min;\n    }\n    return g.node(v).order;\n  }\n  dfs(undefined);\n  */\n}\n","\"use strict\";\n\nlet initOrder = require(\"./init-order\");\nlet crossCount = require(\"./cross-count\");\nlet sortSubgraph = require(\"./sort-subgraph\");\nlet buildLayerGraph = require(\"./build-layer-graph\");\nlet addSubgraphConstraints = require(\"./add-subgraph-constraints\");\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\nlet util = require(\"../util\");\n\nmodule.exports = order;\n\n/*\n * Applies heuristics to minimize edge crossings in the graph and sets the best\n * order solution as an order attribute on each node.\n *\n * Pre-conditions:\n *\n *    1. Graph must be DAG\n *    2. Graph nodes must be objects with a \"rank\" attribute\n *    3. Graph edges must have the \"weight\" attribute\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have an \"order\" attribute based on the results of the\n *       algorithm.\n */\nfunction order(g, opts) {\n  if (opts && typeof opts.customOrder === 'function') {\n    opts.customOrder(g, order);\n    return;\n  }\n\n  let maxRank = util.maxRank(g),\n    downLayerGraphs = buildLayerGraphs(g, util.range(1, maxRank + 1), \"inEdges\"),\n    upLayerGraphs = buildLayerGraphs(g, util.range(maxRank - 1, -1, -1), \"outEdges\");\n\n  let layering = initOrder(g);\n  assignOrder(g, layering);\n\n  if (opts && opts.disableOptimalOrderHeuristic) {\n    return;\n  }\n\n  let bestCC = Number.POSITIVE_INFINITY,\n    best;\n\n  for (let i = 0, lastBest = 0; lastBest < 4; ++i, ++lastBest) {\n    sweepLayerGraphs(i % 2 ? downLayerGraphs : upLayerGraphs, i % 4 >= 2);\n\n    layering = util.buildLayerMatrix(g);\n    let cc = crossCount(g, layering);\n    if (cc < bestCC) {\n      lastBest = 0;\n      best = Object.assign({}, layering);\n      bestCC = cc;\n    }\n  }\n\n  assignOrder(g, best);\n}\n\nfunction buildLayerGraphs(g, ranks, relationship) {\n  // Build an index mapping from rank to the nodes with that rank.\n  // This helps to avoid a quadratic search for all nodes with the same rank as\n  // the current node.\n  const nodesByRank = new Map();\n  const addNodeToRank = (rank, node) => {\n    if (!nodesByRank.has(rank)) {\n      nodesByRank.set(rank, []);\n    }\n    nodesByRank.get(rank).push(node);\n  };\n\n  // Visit the nodes in their original order in the graph, and add each\n  // node to the ranks(s) that it belongs to.\n  for (const v of g.nodes()) {\n    const node = g.node(v);\n    if (typeof node.rank === \"number\") {\n      addNodeToRank(node.rank, v);\n    }\n    // If there is a range of ranks, add it to each, but skip the `node.rank` which\n    // has already had the node added.\n    if (typeof node.minRank === \"number\" && typeof node.maxRank === \"number\") {\n      for (let r = node.minRank; r <= node.maxRank; r++) {\n        if (r !== node.rank) {\n          // Don't add this node to its `node.rank` twice.\n          addNodeToRank(r, v);\n        }\n      }\n    }\n  }\n\n  return ranks.map(function (rank) {\n    return buildLayerGraph(g, rank, relationship, nodesByRank.get(rank) || []);\n  });\n}\n\nfunction sweepLayerGraphs(layerGraphs, biasRight) {\n  let cg = new Graph();\n  layerGraphs.forEach(function(lg) {\n    let root = lg.graph().root;\n    let sorted = sortSubgraph(lg, root, cg, biasRight);\n    sorted.vs.forEach((v, i) => lg.node(v).order = i);\n    addSubgraphConstraints(lg, cg, sorted.vs);\n  });\n}\n\nfunction assignOrder(g, layering) {\n  Object.values(layering).forEach(layer => layer.forEach((v, i) => g.node(v).order = i));\n}\n","\"use strict\";\n\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\nlet util = require(\"../util\");\n\n/*\n * This module provides coordinate assignment based on Brandes and Kpf, \"Fast\n * and Simple Horizontal Coordinate Assignment.\"\n */\n\nmodule.exports = {\n  positionX: positionX,\n  findType1Conflicts: findType1Conflicts,\n  findType2Conflicts: findType2Conflicts,\n  addConflict: addConflict,\n  hasConflict: hasConflict,\n  verticalAlignment: verticalAlignment,\n  horizontalCompaction: horizontalCompaction,\n  alignCoordinates: alignCoordinates,\n  findSmallestWidthAlignment: findSmallestWidthAlignment,\n  balance: balance\n};\n\n/*\n * Marks all edges in the graph with a type-1 conflict with the \"type1Conflict\"\n * property. A type-1 conflict is one where a non-inner segment crosses an\n * inner segment. An inner segment is an edge with both incident nodes marked\n * with the \"dummy\" property.\n *\n * This algorithm scans layer by layer, starting with the second, for type-1\n * conflicts between the current layer and the previous layer. For each layer\n * it scans the nodes from left to right until it reaches one that is incident\n * on an inner segment. It then scans predecessors to determine if they have\n * edges that cross that inner segment. At the end a final scan is done for all\n * nodes on the current rank to see if they cross the last visited inner\n * segment.\n *\n * This algorithm (safely) assumes that a dummy node will only be incident on a\n * single node in the layers being scanned.\n */\nfunction findType1Conflicts(g, layering) {\n  let conflicts = {};\n\n  function visitLayer(prevLayer, layer) {\n    let\n      // last visited node in the previous layer that is incident on an inner\n      // segment.\n      k0 = 0,\n      // Tracks the last node in this layer scanned for crossings with a type-1\n      // segment.\n      scanPos = 0,\n      prevLayerLength = prevLayer.length,\n      lastNode = layer[layer.length - 1];\n\n    layer.forEach((v, i) => {\n      let w = findOtherInnerSegmentNode(g, v),\n        k1 = w ? g.node(w).order : prevLayerLength;\n\n      if (w || v === lastNode) {\n        layer.slice(scanPos, i+1).forEach(scanNode => {\n          g.predecessors(scanNode).forEach(u => {\n            let uLabel = g.node(u),\n              uPos = uLabel.order;\n            if ((uPos < k0 || k1 < uPos) &&\n                !(uLabel.dummy && g.node(scanNode).dummy)) {\n              addConflict(conflicts, u, scanNode);\n            }\n          });\n        });\n        scanPos = i + 1;\n        k0 = k1;\n      }\n    });\n\n    return layer;\n  }\n\n  layering.length && layering.reduce(visitLayer);\n\n  return conflicts;\n}\n\nfunction findType2Conflicts(g, layering) {\n  let conflicts = {};\n\n  function scan(south, southPos, southEnd, prevNorthBorder, nextNorthBorder) {\n    let v;\n    util.range(southPos, southEnd).forEach(i => {\n      v = south[i];\n      if (g.node(v).dummy) {\n        g.predecessors(v).forEach(u => {\n          let uNode = g.node(u);\n          if (uNode.dummy &&\n              (uNode.order < prevNorthBorder || uNode.order > nextNorthBorder)) {\n            addConflict(conflicts, u, v);\n          }\n        });\n      }\n    });\n  }\n\n\n  function visitLayer(north, south) {\n    let prevNorthPos = -1,\n      nextNorthPos,\n      southPos = 0;\n\n    south.forEach((v, southLookahead) => {\n      if (g.node(v).dummy === \"border\") {\n        let predecessors = g.predecessors(v);\n        if (predecessors.length) {\n          nextNorthPos = g.node(predecessors[0]).order;\n          scan(south, southPos, southLookahead, prevNorthPos, nextNorthPos);\n          southPos = southLookahead;\n          prevNorthPos = nextNorthPos;\n        }\n      }\n      scan(south, southPos, south.length, nextNorthPos, north.length);\n    });\n\n    return south;\n  }\n\n  layering.length && layering.reduce(visitLayer);\n\n  return conflicts;\n}\n\nfunction findOtherInnerSegmentNode(g, v) {\n  if (g.node(v).dummy) {\n    return g.predecessors(v).find(u => g.node(u).dummy);\n  }\n}\n\nfunction addConflict(conflicts, v, w) {\n  if (v > w) {\n    let tmp = v;\n    v = w;\n    w = tmp;\n  }\n\n  let conflictsV = conflicts[v];\n  if (!conflictsV) {\n    conflicts[v] = conflictsV = {};\n  }\n  conflictsV[w] = true;\n}\n\nfunction hasConflict(conflicts, v, w) {\n  if (v > w) {\n    let tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return !!conflicts[v] && Object.hasOwn(conflicts[v], w);\n}\n\n/*\n * Try to align nodes into vertical \"blocks\" where possible. This algorithm\n * attempts to align a node with one of its median neighbors. If the edge\n * connecting a neighbor is a type-1 conflict then we ignore that possibility.\n * If a previous node has already formed a block with a node after the node\n * we're trying to form a block with, we also ignore that possibility - our\n * blocks would be split in that scenario.\n */\nfunction verticalAlignment(g, layering, conflicts, neighborFn) {\n  let root = {},\n    align = {},\n    pos = {};\n\n  // We cache the position here based on the layering because the graph and\n  // layering may be out of sync. The layering matrix is manipulated to\n  // generate different extreme alignments.\n  layering.forEach(layer => {\n    layer.forEach((v, order) => {\n      root[v] = v;\n      align[v] = v;\n      pos[v] = order;\n    });\n  });\n\n  layering.forEach(layer => {\n    let prevIdx = -1;\n    layer.forEach(v => {\n      let ws = neighborFn(v);\n      if (ws.length) {\n        ws = ws.sort((a, b) => pos[a] - pos[b]);\n        let mp = (ws.length - 1) / 2;\n        for (let i = Math.floor(mp), il = Math.ceil(mp); i <= il; ++i) {\n          let w = ws[i];\n          if (align[v] === v &&\n              prevIdx < pos[w] &&\n              !hasConflict(conflicts, v, w)) {\n            align[w] = v;\n            align[v] = root[v] = root[w];\n            prevIdx = pos[w];\n          }\n        }\n      }\n    });\n  });\n\n  return { root: root, align: align };\n}\n\nfunction horizontalCompaction(g, layering, root, align, reverseSep) {\n  // This portion of the algorithm differs from BK due to a number of problems.\n  // Instead of their algorithm we construct a new block graph and do two\n  // sweeps. The first sweep places blocks with the smallest possible\n  // coordinates. The second sweep removes unused space by moving blocks to the\n  // greatest coordinates without violating separation.\n  let xs = {},\n    blockG = buildBlockGraph(g, layering, root, reverseSep),\n    borderType = reverseSep ? \"borderLeft\" : \"borderRight\";\n\n  function iterate(setXsFunc, nextNodesFunc) {\n    let stack = blockG.nodes();\n    let elem = stack.pop();\n    let visited = {};\n    while (elem) {\n      if (visited[elem]) {\n        setXsFunc(elem);\n      } else {\n        visited[elem] = true;\n        stack.push(elem);\n        stack = stack.concat(nextNodesFunc(elem));\n      }\n\n      elem = stack.pop();\n    }\n  }\n\n  // First pass, assign smallest coordinates\n  function pass1(elem) {\n    xs[elem] = blockG.inEdges(elem).reduce((acc, e) => {\n      return Math.max(acc, xs[e.v] + blockG.edge(e));\n    }, 0);\n  }\n\n  // Second pass, assign greatest coordinates\n  function pass2(elem) {\n    let min = blockG.outEdges(elem).reduce((acc, e) => {\n      return Math.min(acc, xs[e.w] - blockG.edge(e));\n    }, Number.POSITIVE_INFINITY);\n\n    let node = g.node(elem);\n    if (min !== Number.POSITIVE_INFINITY && node.borderType !== borderType) {\n      xs[elem] = Math.max(xs[elem], min);\n    }\n  }\n\n  iterate(pass1, blockG.predecessors.bind(blockG));\n  iterate(pass2, blockG.successors.bind(blockG));\n\n  // Assign x coordinates to all nodes\n  Object.keys(align).forEach(v => xs[v] = xs[root[v]]);\n\n  return xs;\n}\n\n\nfunction buildBlockGraph(g, layering, root, reverseSep) {\n  let blockGraph = new Graph(),\n    graphLabel = g.graph(),\n    sepFn = sep(graphLabel.nodesep, graphLabel.edgesep, reverseSep);\n\n  layering.forEach(layer => {\n    let u;\n    layer.forEach(v => {\n      let vRoot = root[v];\n      blockGraph.setNode(vRoot);\n      if (u) {\n        var uRoot = root[u],\n          prevMax = blockGraph.edge(uRoot, vRoot);\n        blockGraph.setEdge(uRoot, vRoot, Math.max(sepFn(g, v, u), prevMax || 0));\n      }\n      u = v;\n    });\n  });\n\n  return blockGraph;\n}\n\n/*\n * Returns the alignment that has the smallest width of the given alignments.\n */\nfunction findSmallestWidthAlignment(g, xss) {\n  return Object.values(xss).reduce((currentMinAndXs, xs) => {\n    let max = Number.NEGATIVE_INFINITY;\n    let min = Number.POSITIVE_INFINITY;\n\n    Object.entries(xs).forEach(([v, x]) => {\n      let halfWidth = width(g, v) / 2;\n\n      max = Math.max(x + halfWidth, max);\n      min = Math.min(x - halfWidth, min);\n    });\n\n    const newMin = max - min;\n    if (newMin < currentMinAndXs[0]) {\n      currentMinAndXs = [newMin, xs];\n    }\n    return currentMinAndXs;\n  }, [Number.POSITIVE_INFINITY, null])[1];\n}\n\n/*\n * Align the coordinates of each of the layout alignments such that\n * left-biased alignments have their minimum coordinate at the same point as\n * the minimum coordinate of the smallest width alignment and right-biased\n * alignments have their maximum coordinate at the same point as the maximum\n * coordinate of the smallest width alignment.\n */\nfunction alignCoordinates(xss, alignTo) {\n  let alignToVals = Object.values(alignTo),\n    alignToMin = util.applyWithChunking(Math.min, alignToVals),\n    alignToMax = util.applyWithChunking(Math.max, alignToVals);\n\n  [\"u\", \"d\"].forEach(vert => {\n    [\"l\", \"r\"].forEach(horiz => {\n      let alignment = vert + horiz,\n        xs = xss[alignment];\n\n      if (xs === alignTo) return;\n\n      let xsVals = Object.values(xs);\n      let delta = alignToMin - util.applyWithChunking(Math.min, xsVals);\n      if (horiz !== \"l\") {\n        delta = alignToMax - util.applyWithChunking(Math.max,xsVals);\n      }\n\n      if (delta) {\n        xss[alignment] = util.mapValues(xs, x => x + delta);\n      }\n    });\n  });\n}\n\nfunction balance(xss, align) {\n  return util.mapValues(xss.ul, (num, v) => {\n    if (align) {\n      return xss[align.toLowerCase()][v];\n    } else {\n      let xs = Object.values(xss).map(xs => xs[v]).sort((a, b) => a - b);\n      return (xs[1] + xs[2]) / 2;\n    }\n  });\n}\n\nfunction positionX(g) {\n  let layering = util.buildLayerMatrix(g);\n  let conflicts = Object.assign(\n    findType1Conflicts(g, layering),\n    findType2Conflicts(g, layering));\n\n  let xss = {};\n  let adjustedLayering;\n  [\"u\", \"d\"].forEach(vert => {\n    adjustedLayering = vert === \"u\" ? layering : Object.values(layering).reverse();\n    [\"l\", \"r\"].forEach(horiz => {\n      if (horiz === \"r\") {\n        adjustedLayering = adjustedLayering.map(inner => {\n          return Object.values(inner).reverse();\n        });\n      }\n\n      let neighborFn = (vert === \"u\" ? g.predecessors : g.successors).bind(g);\n      let align = verticalAlignment(g, adjustedLayering, conflicts, neighborFn);\n      let xs = horizontalCompaction(g, adjustedLayering,\n        align.root, align.align, horiz === \"r\");\n      if (horiz === \"r\") {\n        xs = util.mapValues(xs, x => -x);\n      }\n      xss[vert + horiz] = xs;\n    });\n  });\n\n\n  let smallestWidth = findSmallestWidthAlignment(g, xss);\n  alignCoordinates(xss, smallestWidth);\n  return balance(xss, g.graph().align);\n}\n\nfunction sep(nodeSep, edgeSep, reverseSep) {\n  return (g, v, w) => {\n    let vLabel = g.node(v);\n    let wLabel = g.node(w);\n    let sum = 0;\n    let delta;\n\n    sum += vLabel.width / 2;\n    if (Object.hasOwn(vLabel, \"labelpos\")) {\n      switch (vLabel.labelpos.toLowerCase()) {\n      case \"l\": delta = -vLabel.width / 2; break;\n      case \"r\": delta = vLabel.width / 2; break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n\n    sum += (vLabel.dummy ? edgeSep : nodeSep) / 2;\n    sum += (wLabel.dummy ? edgeSep : nodeSep) / 2;\n\n    sum += wLabel.width / 2;\n    if (Object.hasOwn(wLabel, \"labelpos\")) {\n      switch (wLabel.labelpos.toLowerCase()) {\n      case \"l\": delta = wLabel.width / 2; break;\n      case \"r\": delta = -wLabel.width / 2; break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n\n    return sum;\n  };\n}\n\nfunction width(g, v) {\n  return g.node(v).width;\n}\n","\"use strict\";\n\nlet util = require(\"../util\");\nlet positionX = require(\"./bk\").positionX;\n\nmodule.exports = position;\n\nfunction position(g) {\n  g = util.asNonCompoundGraph(g);\n\n  positionY(g);\n  Object.entries(positionX(g)).forEach(([v, x]) => g.node(v).x = x);\n}\n\nfunction positionY(g) {\n  let layering = util.buildLayerMatrix(g);\n  let rankSep = g.graph().ranksep;\n  let prevY = 0;\n  layering.forEach(layer => {\n    const maxHeight = layer.reduce((acc, v) => {\n      const height = g.node(v).height;\n      if (acc > height) {\n        return acc;\n      } else {\n        return height;\n      }\n    }, 0);\n    layer.forEach(v => g.node(v).y = prevY + maxHeight / 2);\n    prevY += maxHeight + rankSep;\n  });\n}\n\n","\"use strict\";\n\nlet acyclic = require(\"./acyclic\");\nlet normalize = require(\"./normalize\");\nlet rank = require(\"./rank\");\nlet normalizeRanks = require(\"./util\").normalizeRanks;\nlet parentDummyChains = require(\"./parent-dummy-chains\");\nlet removeEmptyRanks = require(\"./util\").removeEmptyRanks;\nlet nestingGraph = require(\"./nesting-graph\");\nlet addBorderSegments = require(\"./add-border-segments\");\nlet coordinateSystem = require(\"./coordinate-system\");\nlet order = require(\"./order\");\nlet position = require(\"./position\");\nlet util = require(\"./util\");\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\n\nmodule.exports = layout;\n\nfunction layout(g, opts) {\n  let time = opts && opts.debugTiming ? util.time : util.notime;\n  time(\"layout\", () => {\n    let layoutGraph =\n      time(\"  buildLayoutGraph\", () => buildLayoutGraph(g));\n    time(\"  runLayout\",        () => runLayout(layoutGraph, time, opts));\n    time(\"  updateInputGraph\", () => updateInputGraph(g, layoutGraph));\n  });\n}\n\nfunction runLayout(g, time, opts) {\n  time(\"    makeSpaceForEdgeLabels\", () => makeSpaceForEdgeLabels(g));\n  time(\"    removeSelfEdges\",        () => removeSelfEdges(g));\n  time(\"    acyclic\",                () => acyclic.run(g));\n  time(\"    nestingGraph.run\",       () => nestingGraph.run(g));\n  time(\"    rank\",                   () => rank(util.asNonCompoundGraph(g)));\n  time(\"    injectEdgeLabelProxies\", () => injectEdgeLabelProxies(g));\n  time(\"    removeEmptyRanks\",       () => removeEmptyRanks(g));\n  time(\"    nestingGraph.cleanup\",   () => nestingGraph.cleanup(g));\n  time(\"    normalizeRanks\",         () => normalizeRanks(g));\n  time(\"    assignRankMinMax\",       () => assignRankMinMax(g));\n  time(\"    removeEdgeLabelProxies\", () => removeEdgeLabelProxies(g));\n  time(\"    normalize.run\",          () => normalize.run(g));\n  time(\"    parentDummyChains\",      () => parentDummyChains(g));\n  time(\"    addBorderSegments\",      () => addBorderSegments(g));\n  time(\"    order\",                  () => order(g, opts));\n  time(\"    insertSelfEdges\",        () => insertSelfEdges(g));\n  time(\"    adjustCoordinateSystem\", () => coordinateSystem.adjust(g));\n  time(\"    position\",               () => position(g));\n  time(\"    positionSelfEdges\",      () => positionSelfEdges(g));\n  time(\"    removeBorderNodes\",      () => removeBorderNodes(g));\n  time(\"    normalize.undo\",         () => normalize.undo(g));\n  time(\"    fixupEdgeLabelCoords\",   () => fixupEdgeLabelCoords(g));\n  time(\"    undoCoordinateSystem\",   () => coordinateSystem.undo(g));\n  time(\"    translateGraph\",         () => translateGraph(g));\n  time(\"    assignNodeIntersects\",   () => assignNodeIntersects(g));\n  time(\"    reversePoints\",          () => reversePointsForReversedEdges(g));\n  time(\"    acyclic.undo\",           () => acyclic.undo(g));\n}\n\n/*\n * Copies final layout information from the layout graph back to the input\n * graph. This process only copies whitelisted attributes from the layout graph\n * to the input graph, so it serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction updateInputGraph(inputGraph, layoutGraph) {\n  inputGraph.nodes().forEach(v => {\n    let inputLabel = inputGraph.node(v);\n    let layoutLabel = layoutGraph.node(v);\n\n    if (inputLabel) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n      inputLabel.rank = layoutLabel.rank;\n\n      if (layoutGraph.children(v).length) {\n        inputLabel.width = layoutLabel.width;\n        inputLabel.height = layoutLabel.height;\n      }\n    }\n  });\n\n  inputGraph.edges().forEach(e => {\n    let inputLabel = inputGraph.edge(e);\n    let layoutLabel = layoutGraph.edge(e);\n\n    inputLabel.points = layoutLabel.points;\n    if (Object.hasOwn(layoutLabel, \"x\")) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n    }\n  });\n\n  inputGraph.graph().width = layoutGraph.graph().width;\n  inputGraph.graph().height = layoutGraph.graph().height;\n}\n\nlet graphNumAttrs = [\"nodesep\", \"edgesep\", \"ranksep\", \"marginx\", \"marginy\"];\nlet graphDefaults = { ranksep: 50, edgesep: 20, nodesep: 50, rankdir: \"tb\" };\nlet graphAttrs = [\"acyclicer\", \"ranker\", \"rankdir\", \"align\"];\nlet nodeNumAttrs = [\"width\", \"height\", \"rank\"];\nlet nodeDefaults = { width: 0, height: 0 };\nlet edgeNumAttrs = [\"minlen\", \"weight\", \"width\", \"height\", \"labeloffset\"];\nlet edgeDefaults = {\n  minlen: 1, weight: 1, width: 0, height: 0,\n  labeloffset: 10, labelpos: \"r\"\n};\nlet edgeAttrs = [\"labelpos\"];\n\n/*\n * Constructs a new graph from the input graph, which can be used for layout.\n * This process copies only whitelisted attributes from the input graph to the\n * layout graph. Thus this function serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction buildLayoutGraph(inputGraph) {\n  let g = new Graph({ multigraph: true, compound: true });\n  let graph = canonicalize(inputGraph.graph());\n\n  g.setGraph(Object.assign({},\n    graphDefaults,\n    selectNumberAttrs(graph, graphNumAttrs),\n    util.pick(graph, graphAttrs)));\n\n  inputGraph.nodes().forEach(v => {\n    let node = canonicalize(inputGraph.node(v));\n    const newNode = selectNumberAttrs(node, nodeNumAttrs);\n    Object.keys(nodeDefaults).forEach(k => {\n      if (newNode[k] === undefined) {\n        newNode[k] = nodeDefaults[k];\n      }\n    });\n\n    g.setNode(v, newNode);\n    g.setParent(v, inputGraph.parent(v));\n  });\n\n  inputGraph.edges().forEach(e => {\n    let edge = canonicalize(inputGraph.edge(e));\n    g.setEdge(e, Object.assign({},\n      edgeDefaults,\n      selectNumberAttrs(edge, edgeNumAttrs),\n      util.pick(edge, edgeAttrs)));\n  });\n\n  return g;\n}\n\n/*\n * This idea comes from the Gansner paper: to account for edge labels in our\n * layout we split each rank in half by doubling minlen and halving ranksep.\n * Then we can place labels at these mid-points between nodes.\n *\n * We also add some minimal padding to the width to push the label for the edge\n * away from the edge itself a bit.\n */\nfunction makeSpaceForEdgeLabels(g) {\n  let graph = g.graph();\n  graph.ranksep /= 2;\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.minlen *= 2;\n    if (edge.labelpos.toLowerCase() !== \"c\") {\n      if (graph.rankdir === \"TB\" || graph.rankdir === \"BT\") {\n        edge.width += edge.labeloffset;\n      } else {\n        edge.height += edge.labeloffset;\n      }\n    }\n  });\n}\n\n/*\n * Creates temporary dummy nodes that capture the rank in which each edge's\n * label is going to, if it has one of non-zero width and height. We do this\n * so that we can safely remove empty ranks while preserving balance for the\n * label's position.\n */\nfunction injectEdgeLabelProxies(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (edge.width && edge.height) {\n      let v = g.node(e.v);\n      let w = g.node(e.w);\n      let label = { rank: (w.rank - v.rank) / 2 + v.rank, e: e };\n      util.addDummyNode(g, \"edge-proxy\", label, \"_ep\");\n    }\n  });\n}\n\nfunction assignRankMinMax(g) {\n  let maxRank = 0;\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    if (node.borderTop) {\n      node.minRank = g.node(node.borderTop).rank;\n      node.maxRank = g.node(node.borderBottom).rank;\n      maxRank = Math.max(maxRank, node.maxRank);\n    }\n  });\n  g.graph().maxRank = maxRank;\n}\n\nfunction removeEdgeLabelProxies(g) {\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    if (node.dummy === \"edge-proxy\") {\n      g.edge(node.e).labelRank = node.rank;\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction translateGraph(g) {\n  let minX = Number.POSITIVE_INFINITY;\n  let maxX = 0;\n  let minY = Number.POSITIVE_INFINITY;\n  let maxY = 0;\n  let graphLabel = g.graph();\n  let marginX = graphLabel.marginx || 0;\n  let marginY = graphLabel.marginy || 0;\n\n  function getExtremes(attrs) {\n    let x = attrs.x;\n    let y = attrs.y;\n    let w = attrs.width;\n    let h = attrs.height;\n    minX = Math.min(minX, x - w / 2);\n    maxX = Math.max(maxX, x + w / 2);\n    minY = Math.min(minY, y - h / 2);\n    maxY = Math.max(maxY, y + h / 2);\n  }\n\n  g.nodes().forEach(v => getExtremes(g.node(v)));\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (Object.hasOwn(edge, \"x\")) {\n      getExtremes(edge);\n    }\n  });\n\n  minX -= marginX;\n  minY -= marginY;\n\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    node.x -= minX;\n    node.y -= minY;\n  });\n\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.points.forEach(p => {\n      p.x -= minX;\n      p.y -= minY;\n    });\n    if (Object.hasOwn(edge, \"x\")) { edge.x -= minX; }\n    if (Object.hasOwn(edge, \"y\")) { edge.y -= minY; }\n  });\n\n  graphLabel.width = maxX - minX + marginX;\n  graphLabel.height = maxY - minY + marginY;\n}\n\nfunction assignNodeIntersects(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    let nodeV = g.node(e.v);\n    let nodeW = g.node(e.w);\n    let p1, p2;\n    if (!edge.points) {\n      edge.points = [];\n      p1 = nodeW;\n      p2 = nodeV;\n    } else {\n      p1 = edge.points[0];\n      p2 = edge.points[edge.points.length - 1];\n    }\n    edge.points.unshift(util.intersectRect(nodeV, p1));\n    edge.points.push(util.intersectRect(nodeW, p2));\n  });\n}\n\nfunction fixupEdgeLabelCoords(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (Object.hasOwn(edge, \"x\")) {\n      if (edge.labelpos === \"l\" || edge.labelpos === \"r\") {\n        edge.width -= edge.labeloffset;\n      }\n      switch (edge.labelpos) {\n      case \"l\": edge.x -= edge.width / 2 + edge.labeloffset; break;\n      case \"r\": edge.x += edge.width / 2 + edge.labeloffset; break;\n      }\n    }\n  });\n}\n\nfunction reversePointsForReversedEdges(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (edge.reversed) {\n      edge.points.reverse();\n    }\n  });\n}\n\nfunction removeBorderNodes(g) {\n  g.nodes().forEach(v => {\n    if (g.children(v).length) {\n      let node = g.node(v);\n      let t = g.node(node.borderTop);\n      let b = g.node(node.borderBottom);\n      let l = g.node(node.borderLeft[node.borderLeft.length - 1]);\n      let r = g.node(node.borderRight[node.borderRight.length - 1]);\n\n      node.width = Math.abs(r.x - l.x);\n      node.height = Math.abs(b.y - t.y);\n      node.x = l.x + node.width / 2;\n      node.y = t.y + node.height / 2;\n    }\n  });\n\n  g.nodes().forEach(v => {\n    if (g.node(v).dummy === \"border\") {\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction removeSelfEdges(g) {\n  g.edges().forEach(e => {\n    if (e.v === e.w) {\n      var node = g.node(e.v);\n      if (!node.selfEdges) {\n        node.selfEdges = [];\n      }\n      node.selfEdges.push({ e: e, label: g.edge(e) });\n      g.removeEdge(e);\n    }\n  });\n}\n\nfunction insertSelfEdges(g) {\n  var layers = util.buildLayerMatrix(g);\n  layers.forEach(layer => {\n    var orderShift = 0;\n    layer.forEach((v, i) => {\n      var node = g.node(v);\n      node.order = i + orderShift;\n      (node.selfEdges || []).forEach(selfEdge => {\n        util.addDummyNode(g, \"selfedge\", {\n          width: selfEdge.label.width,\n          height: selfEdge.label.height,\n          rank: node.rank,\n          order: i + (++orderShift),\n          e: selfEdge.e,\n          label: selfEdge.label\n        }, \"_se\");\n      });\n      delete node.selfEdges;\n    });\n  });\n}\n\nfunction positionSelfEdges(g) {\n  g.nodes().forEach(v => {\n    var node = g.node(v);\n    if (node.dummy === \"selfedge\") {\n      var selfNode = g.node(node.e.v);\n      var x = selfNode.x + selfNode.width / 2;\n      var y = selfNode.y;\n      var dx = node.x - x;\n      var dy = selfNode.height / 2;\n      g.setEdge(node.e, node.label);\n      g.removeNode(v);\n      node.label.points = [\n        { x: x + 2 * dx / 3, y: y - dy },\n        { x: x + 5 * dx / 6, y: y - dy },\n        { x: x +     dx    , y: y },\n        { x: x + 5 * dx / 6, y: y + dy },\n        { x: x + 2 * dx / 3, y: y + dy }\n      ];\n      node.label.x = node.x;\n      node.label.y = node.y;\n    }\n  });\n}\n\nfunction selectNumberAttrs(obj, attrs) {\n  return util.mapValues(util.pick(obj, attrs), Number);\n}\n\nfunction canonicalize(attrs) {\n  var newAttrs = {};\n  if (attrs) {\n    Object.entries(attrs).forEach(([k, v]) => {\n      if (typeof k === \"string\") {\n        k = k.toLowerCase();\n      }\n\n      newAttrs[k] = v;\n    });\n  }\n  return newAttrs;\n}\n","let util = require(\"./util\");\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\n\nmodule.exports = {\n  debugOrdering: debugOrdering\n};\n\n/* istanbul ignore next */\nfunction debugOrdering(g) {\n  let layerMatrix = util.buildLayerMatrix(g);\n\n  let h = new Graph({ compound: true, multigraph: true }).setGraph({});\n\n  g.nodes().forEach(v => {\n    h.setNode(v, { label: v });\n    h.setParent(v, \"layer\" + g.node(v).rank);\n  });\n\n  g.edges().forEach(e => h.setEdge(e.v, e.w, {}, e.name));\n\n  layerMatrix.forEach((layer, i) => {\n    let layerV = \"layer\" + i;\n    h.setNode(layerV, { rank: \"same\" });\n    layer.reduce((u, v) => {\n      h.setEdge(u, v, { style: \"invis\" });\n      return v;\n    });\n  });\n\n  return h;\n}\n","module.exports = \"1.1.8\";\n","/*\nCopyright (c) 2012-2014 Chris Pettitt\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\nmodule.exports = {\n  graphlib: require(\"@dagrejs/graphlib\"),\n\n  layout: require(\"./lib/layout\"),\n  debug: require(\"./lib/debug\"),\n  util: {\n    time: require(\"./lib/util\").time,\n    notime: require(\"./lib/util\").notime\n  },\n  version: require(\"./lib/version\")\n};\n","import dagre from \"@dagrejs/dagre\";\nimport { DefaultEdge, Node, Position, useVueFlow } from \"@vue-flow/core\";\nimport { ref } from \"vue\";\n\nexport function useLayout() {\n  const { findNode } = useVueFlow();\n\n  const graph = ref(new dagre.graphlib.Graph());\n\n  function layout(nodes: Node[], edges: DefaultEdge[]) {\n    // we create a new graph instance, in case some nodes/edges were removed, otherwise dagre would act as if they were still there\n    const dagreGraph = new dagre.graphlib.Graph();\n\n    graph.value = dagreGraph;\n\n    dagreGraph.setDefaultEdgeLabel(() => ({}));\n\n    const isHorizontal = false;\n    dagreGraph.setGraph({ rankdir: \"TB\" });\n\n    for (const node of nodes) {\n      const graphNode = findNode(node.id);\n      if (graphNode === undefined) continue;\n\n      dagreGraph.setNode(node.id, { width: graphNode.dimensions.width || 250, height: graphNode.dimensions.height || 55 });\n    }\n\n    for (const edge of edges) {\n      dagreGraph.setEdge(edge.source, edge.target);\n    }\n\n    dagre.layout(dagreGraph);\n\n    // set nodes with updated positions\n    return nodes.map((node) => {\n      const nodeWithPosition = dagreGraph.node(node.id);\n\n      return {\n        ...node,\n        targetPosition: isHorizontal ? Position.Left : Position.Top,\n        sourcePosition: isHorizontal ? Position.Right : Position.Bottom,\n        position: { x: nodeWithPosition.x, y: nodeWithPosition.y },\n      };\n    });\n  }\n\n  return { graph, layout };\n}\n","<script setup lang=\"ts\">\nimport { onMounted, ref, nextTick } from \"vue\";\nimport { type DefaultEdge, MarkerType, type Node, useVueFlow, VueFlow, XYPosition } from \"@vue-flow/core\";\nimport TimeSince from \"../../TimeSince.vue\";\nimport routeLinks from \"@/router/routeLinks\";\nimport Message, { MessageIntent, MessageStatus, SagaInfo } from \"@/resources/Message\";\nimport { NServiceBusHeaders } from \"@/resources/Header\";\nimport { Controls } from \"@vue-flow/controls\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport LoadingSpinner from \"@/components/LoadingSpinner.vue\";\nimport { storeToRefs } from \"pinia\";\nimport { useRouter } from \"vue-router\";\nimport EndpointDetails from \"@/resources/EndpointDetails\";\nimport { hexToCSSFilter } from \"hex-to-css-filter\";\nimport SagaName from \"@/components/SagaName.vue\";\nimport { useLayout } from \"@/components/messages/FlowDiagram/useLayout\";\nimport { formatTypeName } from \"@/composables/formatUtils\";\nimport TextEllipses from \"@/components/TextEllipses.vue\";\n\nenum MessageType {\n  Event = \"Event message\",\n  Timeout = \"Timeout message\",\n  Command = \"Command message\",\n}\n\nconst store = useMessageStore();\nconst { state, conversationData } = storeToRefs(store);\n\nasync function getConversation(conversationId: string) {\n  await store.loadConversation(conversationId);\n\n  return conversationData.value.data;\n}\n\nclass SagaInvocation {\n  id: string;\n  sagaType: string;\n  isSagaCompleted: boolean;\n  isSagaInitiated: boolean;\n\n  constructor(saga: SagaInfo, message: Message) {\n    const sagaIdHeader = getHeaderByKey(message, NServiceBusHeaders.SagaId);\n    const originatedSagaIdHeader = getHeaderByKey(message, NServiceBusHeaders.OriginatingSagaId);\n    this.id = saga.saga_id;\n    this.sagaType = formatTypeName(saga.saga_type);\n    this.isSagaCompleted = saga.change_status === \"Completed\";\n    this.isSagaInitiated = sagaIdHeader === undefined && originatedSagaIdHeader !== undefined;\n  }\n}\n\ninterface NodeData {\n  label: string;\n  timeSent: string;\n  messageId: string;\n  sendingEndpoint: EndpointDetails;\n  receivingEndpoint: EndpointDetails;\n  isError: boolean;\n  sagaInvocations: SagaInvocation[];\n  isPublished: boolean;\n  isTimeout: boolean;\n  isCommand: boolean;\n  isEvent: boolean;\n  message: Message;\n  type: MessageType;\n}\n\nclass MessageNode implements Node<NodeData> {\n  readonly id: string;\n  readonly type: string;\n  readonly data: NodeData;\n  readonly position: XYPosition;\n  readonly draggable: boolean;\n\n  constructor(message: Message) {\n    this.id = message.id;\n    this.type = \"message\";\n    this.position = { x: 0, y: 0 };\n    this.draggable = false;\n\n    const isPublished = message.message_intent === MessageIntent.Publish;\n    const isTimeout = getHeaderByKey(message, NServiceBusHeaders.IsSagaTimeoutMessage)?.toLowerCase() === \"true\";\n    const sagas = message.invoked_sagas ?? [];\n\n    if (message.originates_from_saga) {\n      sagas.push(message.originates_from_saga);\n    }\n\n    this.data = {\n      label: message.message_type,\n      timeSent: message.time_sent,\n      messageId: message.message_id,\n      sendingEndpoint: message.sending_endpoint,\n      receivingEndpoint: message.receiving_endpoint,\n      isError: message.status !== MessageStatus.Successful && message.status !== MessageStatus.ResolvedSuccessfully,\n      sagaInvocations: sagas.map((saga) => new SagaInvocation(saga, message)),\n      isPublished,\n      isTimeout,\n      isEvent: isPublished && !isTimeout,\n      isCommand: !isPublished && !isTimeout,\n      message,\n      type: isPublished ? MessageType.Event : isTimeout ? MessageType.Timeout : MessageType.Command,\n    };\n  }\n}\n\nfunction constructNodes(messages: Message[]): Node<NodeData>[] {\n  const messageMap = new Map();\n\n  messages.forEach((message) => {\n    if (!messageMap.has(message.id)) {\n      messageMap.set(message.id, new MessageNode(message));\n    }\n  });\n\n  return Array.from(messageMap.values());\n}\n\nfunction getHeaderByKey(message: Message, key: NServiceBusHeaders) {\n  return message.headers.find((header) => header.key === key)?.value;\n}\n\nfunction constructEdges(nodes: Node<NodeData>[]): DefaultEdge[] {\n  const edges: DefaultEdge[] = [];\n\n  for (const node of nodes) {\n    const message = node.data?.message;\n    if (message === undefined) continue;\n\n    const relatedTo = getHeaderByKey(message, NServiceBusHeaders.RelatedTo);\n    if (!relatedTo && relatedTo !== message.message_id) {\n      continue;\n    }\n\n    let parentMessages = nodes.filter((n) => {\n      const m = n.data?.message;\n      if (m === undefined) return false;\n      return m.receiving_endpoint !== undefined && m.sending_endpoint !== undefined && m.message_id === relatedTo && m.receiving_endpoint.name === message.sending_endpoint.name;\n    });\n\n    if (parentMessages.length === 0) {\n      parentMessages = nodes.filter((n) => {\n        const m = n.data?.message;\n        if (m === undefined) return false;\n        return m.receiving_endpoint !== undefined && m.sending_endpoint !== undefined && m.message_id === relatedTo && m.message_intent !== MessageIntent.Publish;\n      });\n\n      if (parentMessages.length === 0) {\n        console.debug(`Fall back to match only on RelatedToMessageId for message with Id '${message.message_id}' matched but link could be invalid.`);\n      }\n    }\n\n    switch (parentMessages.length) {\n      case 0:\n        console.warn(\n          `No parent could be resolved for the message with Id '${message.message_id}' which has RelatedToMessageId set. This can happen if the parent has been purged due to retention expiration, an ServiceControl node to be unavailable, or because the parent message not been stored (yet).`\n        );\n        break;\n      case 1:\n        // Log nothing, this is what it should be\n        break;\n      default:\n        console.warn(`Multiple parents matched for message id '${message.message_id}' possibly due to more-than-once processing, linking to all as it is unknown which processing attempt generated the message.`);\n        break;\n    }\n\n    for (const parentMessage of parentMessages) {\n      edges.push(addConnection(parentMessage, node));\n    }\n  }\n\n  return edges;\n}\n\nfunction addConnection(parentMessage: Node<NodeData>, childMessage: Node<NodeData>): DefaultEdge {\n  return {\n    id: `${parentMessage.id}##${childMessage.id}`,\n    source: `${parentMessage.id}`,\n    target: `${childMessage.id}`,\n    markerEnd: MarkerType.ArrowClosed,\n    style: {\n      strokeDasharray: childMessage.data?.isPublished ? \"5, 3\" : \"\",\n      strokeWidth: 2,\n    },\n  };\n}\n\nconst nodes = ref<Node[]>([]);\nconst edges = ref<DefaultEdge[]>([]);\nconst { layout } = useLayout();\nconst { fitView } = useVueFlow();\nconst backLink = ref<string>(routeLinks.failedMessage.failedMessages.link);\n\nonMounted(async () => {\n  const back = useRouter().currentRoute.value.query.back as string;\n  if (back) {\n    backLink.value = back;\n  }\n\n  if (!state.value.data.conversation_id) return;\n\n  const messages = await getConversation(state.value.data.conversation_id);\n\n  nodes.value = constructNodes(messages);\n  edges.value = constructEdges(nodes.value);\n});\n\nasync function layoutGraph() {\n  nodes.value = layout(nodes.value, edges.value);\n\n  await nextTick(() => {\n    if (store.state.data.id) {\n      fitView({ nodes: [store.state.data.id], maxZoom: 0.9 });\n    }\n  });\n}\n\nconst errorColor = hexToCSSFilter(\"#be514a\").filter;\nconst selectedErrorColor = hexToCSSFilter(\"#e8e6e8\").filter;\n</script>\n\n<template>\n  <div class=\"gap\">\n    <div v-if=\"store.conversationData.failed_to_load\" class=\"alert alert-info\">FlowDiagram data is unavailable.</div>\n    <LoadingSpinner v-else-if=\"store.conversationData.loading\" />\n    <div v-else id=\"tree-container\">\n      <VueFlow :nodes=\"nodes\" :edges=\"edges\" :min-zoom=\"0.1\" :max-zoom=\"1.2\" :only-render-visible-elements=\"true\" @nodes-initialized=\"layoutGraph\">\n        <Controls :show-interactive=\"false\" position=\"top-left\" class=\"controls\" />\n        <template #node-message=\"{ id, data }: { id: string; data: NodeData }\">\n          <TextEllipses class=\"address\" :text=\"`${data.sendingEndpoint.name}@${data.sendingEndpoint.host}`\" />\n          <div class=\"node\" :class=\"{ error: data.isError, 'current-message': id === store.state.data.id }\">\n            <div class=\"node-text\">\n              <i\n                class=\"fa\"\n                :style=\"data.isError && id === store.state.data.id ? { filter: selectedErrorColor } : {}\"\n                :class=\"{ 'pa-flow-timeout': data.isTimeout, 'pa-flow-command': data.isCommand, 'pa-flow-event': data.isEvent }\"\n                v-tippy=\"data.type\"\n              />\n              <div class=\"typeName\">\n                <RouterLink v-if=\"data.isError\" :to=\"{ path: routeLinks.messages.failedMessage.link(id), query: { back: backLink } }\"><TextEllipses style=\"width: 204px\" :text=\"data.label\" ellipses-style=\"LeftSide\" /></RouterLink>\n                <RouterLink v-else :to=\"{ path: routeLinks.messages.successMessage.link(data.messageId, id), query: { back: backLink } }\"><TextEllipses style=\"width: 204px\" :text=\"data.label\" ellipses-style=\"LeftSide\" /></RouterLink>\n              </div>\n              <i v-if=\"data.isError\" class=\"fa pa-flow-failed\" :style=\"id !== store.state.data.id ? { filter: errorColor } : { filter: selectedErrorColor }\" />\n              <div class=\"time-sent\">\n                <time-since class=\"time-since\" :date-utc=\"data.timeSent\" />\n              </div>\n              <div class=\"sagas\" v-if=\"data.sagaInvocations.length > 0\">\n                <div class=\"saga\" v-for=\"saga in data.sagaInvocations\" :key=\"saga.id\">\n                  <i\n                    class=\"fa\"\n                    v-tippy=\"saga.isSagaInitiated ? 'Saga Initiated / Updated' : !saga.isSagaInitiated && saga.isSagaCompleted ? 'Saga Completed' : 'Message originated from Saga'\"\n                    :class=\"{ 'pa-flow-saga-initiated': saga.isSagaInitiated, 'pa-flow-saga-completed': !saga.isSagaInitiated && saga.isSagaCompleted, 'pa-flow-saga-trigger': !saga.isSagaInitiated && !saga.isSagaCompleted }\"\n                  />\n                  <SagaName :saga-type=\"saga.sagaType\" />\n                </div>\n              </div>\n            </div>\n          </div>\n          <TextEllipses class=\"address\" :text=\"`${data.receivingEndpoint.name}@${data.receivingEndpoint.host}`\" />\n        </template>\n      </VueFlow>\n    </div>\n  </div>\n</template>\n\n<style>\n@import \"@vue-flow/core/dist/style.css\";\n@import \"@vue-flow/core/dist/theme-default.css\";\n@import \"@vue-flow/controls/dist/style.css\";\n</style>\n\n<style scoped>\n@import \"../../list.css\";\n\n.gap {\n  margin-top: 5px;\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  background: white;\n}\n.controls {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n#tree-container {\n  width: inherit;\n  height: 70vh;\n}\n\n.sagas {\n  background-color: #333333;\n}\n\n.saga {\n  display: flex;\n}\n\n.node {\n  --vf-handle: var(--vf-node-color, #1a192b);\n  --vf-box-shadow: var(--vf-node-color, #1a192b);\n  background: var(--vf-node-bg);\n  border-color: var(--vf-node-color, #1a192b);\n  border-radius: 3px;\n  font-size: 12px;\n  border-width: 1px;\n  border-style: solid;\n  color: var(--vf-node-text);\n  text-align: left;\n}\n\n.node {\n  background-color: #fff;\n  border-color: #cccbcc;\n  border-width: 3px;\n}\n\n.node .error {\n  border-color: #be514a;\n}\n\n.node text {\n  font: 12px sans-serif;\n}\n\n.node .time-sent .time-since {\n  margin-left: 20px;\n  padding-top: 0;\n  color: #262727;\n  text-transform: capitalize;\n}\n\n.node-text {\n  padding: 3px 8px 1px;\n}\n\n.node-text i {\n  display: inline-block;\n  position: relative;\n  margin-right: 5px;\n}\n\n.node-text .typeName {\n  display: inline-block;\n  position: relative;\n  font-weight: bold;\n}\n\n.node-text a {\n  color: #777f7f;\n}\n\n.address {\n  color: #777f7f;\n  font-size: 0.8em;\n  width: 264px;\n}\n\n.current-message {\n  border-color: #cccbcc;\n  background-color: #cccbcc !important;\n}\n\n.current-message.error {\n  border-color: #be514a;\n  background-color: #be514a !important;\n}\n\n.current-message.error .node-text .typeName a {\n  color: #e8e6e8;\n  font-weight: 900;\n}\n\n.current-message.error .node-text .time-since {\n  color: #e8e6e8;\n}\n\n.error {\n  border-color: #be514a;\n}\n\n.current-message.error .node-text a:hover {\n  cursor: text;\n  text-decoration: none;\n}\n\n.node-text a {\n  color: #000;\n}\n\n.error .node-text a:hover {\n  text-decoration: underline;\n}\n\n.pa-flow-failed {\n  background-image: url(\"@/assets/failed-msg.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n  height: 15px;\n  width: 15px;\n}\n\n.pa-flow-saga-completed {\n  background-image: url(\"@/assets/saga-completed.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n  height: 15px;\n  width: 15px;\n}\n.pa-flow-saga-initiated {\n  background-image: url(\"@/assets/saga-initiated.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n  height: 15px;\n  width: 15px;\n}\n.pa-flow-saga-trigger {\n  background-image: url(\"@/assets/saga-trigger.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n  height: 15px;\n  width: 15px;\n}\n\n.pa-flow-timeout {\n  background-image: url(\"@/assets/timeout.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n  height: 15px;\n  width: 15px;\n}\n\n.pa-flow-event {\n  background-image: url(\"@/assets/event.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n  height: 15px;\n  width: 15px;\n}\n\n.pa-flow-command {\n  background-image: url(\"@/assets/command.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n  height: 15px;\n  width: 15px;\n}\n</style>\n","import EndpointDetails from \"../EndpointDetails\";\nimport { NServiceBusHeaders } from \"../Header\";\nimport Message, { MessageIntent, MessageStatus } from \"../Message\";\nimport { Handler } from \"./Handler\";\nimport { friendlyTypeName } from \"./SequenceModel\";\n\nexport interface RoutedMessage {\n  id: string;\n  name: string;\n  readonly selectedMessage: Message;\n  fromHandler?: Handler;\n  toHandler?: Handler;\n  route?: MessageProcessingRoute;\n  direction: Direction;\n  type: RoutedMessageType;\n  readonly receiving: EndpointDetails;\n  readonly sending: EndpointDetails;\n  readonly sentTime: Date | undefined;\n  readonly messageId: string;\n  readonly status: MessageStatus;\n}\n\nexport interface MessageProcessingRoute {\n  readonly name?: string;\n  readonly fromRoutedMessage?: RoutedMessage;\n  readonly processingHandler?: Handler;\n  uiRef?: SVGElement;\n}\n\nexport enum Direction {\n  Left,\n  Right,\n}\n\nexport enum RoutedMessageType {\n  Event,\n  Command,\n  Local,\n  Timeout,\n}\n\nexport function createRoute(routedMessage: RoutedMessage, processingHandler: Handler): MessageProcessingRoute {\n  return new MessageProcessingRouteItem(routedMessage, processingHandler);\n}\n\nexport function createRoutedMessage(message: Message): RoutedMessage {\n  const routedMessage = new RoutedMessageItem(message);\n\n  if (message.message_intent === MessageIntent.Publish) routedMessage.type = RoutedMessageType.Event;\n  else {\n    const isTimeoutString = message.headers.find((h) => h.key === NServiceBusHeaders.IsSagaTimeoutMessage)?.value?.toLowerCase();\n    const isTimeout = (isTimeoutString ?? \"\") === \"true\";\n    if (isTimeout) routedMessage.type = RoutedMessageType.Timeout;\n    else if (message.receiving_endpoint.host_id === message.sending_endpoint.host_id && message.receiving_endpoint.name === message.sending_endpoint.name) routedMessage.type = RoutedMessageType.Local;\n    else routedMessage.type = RoutedMessageType.Command;\n  }\n\n  return routedMessage;\n}\n\nclass MessageProcessingRouteItem implements MessageProcessingRoute {\n  readonly name?: string;\n  private _fromRoutedMessage?: RoutedMessageItem;\n  readonly processingHandler?: Handler;\n  uiRef?: SVGElement;\n\n  constructor(routedMessage?: RoutedMessageItem, processingHandler?: Handler) {\n    this._fromRoutedMessage = routedMessage;\n    this.processingHandler = processingHandler;\n\n    if (routedMessage && this.processingHandler) {\n      this.name = `${processingHandler?.name}(${routedMessage.id})`;\n    }\n\n    if (routedMessage) routedMessage.route = this;\n    if (processingHandler) processingHandler.route = this;\n  }\n\n  get fromRoutedMessage() {\n    return this._fromRoutedMessage as RoutedMessage | undefined;\n  }\n}\n\nclass RoutedMessageItem implements RoutedMessage {\n  readonly selectedMessage: Message;\n  readonly name: string;\n  fromHandler?: Handler;\n  toHandler?: Handler;\n  route?: MessageProcessingRoute;\n  direction = Direction.Left;\n  type = RoutedMessageType.Command;\n\n  constructor(message: Message) {\n    this.selectedMessage = message;\n    this.name = friendlyTypeName(message.message_type) ?? \"\";\n  }\n\n  get id() {\n    return this.selectedMessage.id;\n  }\n\n  get receiving() {\n    return this.selectedMessage.receiving_endpoint;\n  }\n  get sending() {\n    return this.selectedMessage.sending_endpoint;\n  }\n  get sentTime() {\n    return this.selectedMessage.time_sent ? new Date(this.selectedMessage.time_sent) : undefined;\n  }\n  get messageId() {\n    return this.selectedMessage.message_id;\n  }\n  get status() {\n    return this.selectedMessage.status;\n  }\n}\n","import { NServiceBusHeaders } from \"../Header\";\nimport Message from \"../Message\";\nimport { Handler } from \"./Handler\";\n\nexport interface Endpoint {\n  readonly name: string;\n  readonly hosts: EndpointHost[];\n  readonly hostId: string;\n  readonly handlers: Handler[];\n  readonly host: string;\n  readonly version: string;\n  uiRef?: Element;\n  addHandler(handler: Handler): void;\n}\n\nexport interface EndpointHost {\n  readonly host: string;\n  readonly hostId: string;\n  readonly versions: string[];\n}\n\nexport function createProcessingEndpoint(message: Message): Endpoint {\n  return new EndpointItem(\n    message.receiving_endpoint.name,\n    message.receiving_endpoint.host,\n    message.receiving_endpoint.host_id,\n    message.receiving_endpoint.name === message.sending_endpoint.name && message.receiving_endpoint.host === message.sending_endpoint.host ? message.headers.find((h) => h.key === NServiceBusHeaders.NServiceBusVersion)?.value : undefined\n  );\n}\n\nexport function createSendingEndpoint(message: Message): Endpoint {\n  return new EndpointItem(message.sending_endpoint.name, message.sending_endpoint.host, message.sending_endpoint.host_id, message.headers.find((h) => h.key === NServiceBusHeaders.NServiceBusVersion)?.value);\n}\n\nexport class EndpointRegistry {\n  #store = new Map<string, EndpointItem>();\n\n  register(item: Endpoint) {\n    let endpoint = this.#store.get(item.name);\n    if (!endpoint) {\n      endpoint = item as EndpointItem;\n      this.#store.set(endpoint.name, endpoint);\n    }\n\n    item.hosts.forEach((host) => endpoint.addHost(host as Host));\n  }\n\n  get(item: Endpoint) {\n    return this.#store.get(item.name)! as Endpoint;\n  }\n}\n\nclass EndpointItem implements Endpoint {\n  private _hosts: Map<string, Host>;\n  private _name: string;\n  private _handlers: Handler[] = [];\n  uiRef?: SVGElement;\n\n  constructor(name: string, host: string, id: string, version?: string) {\n    const initialHost = new Host(host, id, version);\n    this._hosts = new Map<string, Host>([[initialHost.equatableKey, initialHost]]);\n    this._name = name;\n  }\n\n  get name() {\n    return this._name;\n  }\n  get hosts() {\n    return [...this._hosts].map(([, host]) => host);\n  }\n  get host() {\n    return [...this._hosts].map(([, host]) => host.host).join(\",\");\n  }\n  get hostId() {\n    return [...this._hosts].map(([, host]) => host.hostId).join(\",\");\n  }\n  get handlers() {\n    return [...this._handlers];\n  }\n  get version() {\n    return [...this._hosts].flatMap(([, host]) => host.versions).join(\",\");\n  }\n\n  addHost(host: Host) {\n    if (!this._hosts.has(host.equatableKey)) {\n      this._hosts.set(host.equatableKey, host);\n    } else {\n      const existing = this._hosts.get(host.equatableKey)!;\n      existing.addVersions(host.versions);\n    }\n  }\n\n  addHandler(handler: Handler) {\n    this._handlers.push(handler);\n  }\n}\n\nclass Host implements EndpointHost {\n  private _host: string;\n  private _hostId: string;\n  private _versions: Set<string>;\n\n  constructor(host: string, hostId: string, version?: string) {\n    this._host = host;\n    this._hostId = hostId;\n    this._versions = new Set<string>();\n    this.addVersions([version]);\n  }\n\n  get host() {\n    return this._host;\n  }\n  get hostId() {\n    return this._hostId;\n  }\n\n  get versions() {\n    return [...this._versions];\n  }\n\n  get equatableKey() {\n    return `${this._hostId}###${this._host}`;\n  }\n\n  addVersions(versions: (string | undefined)[]) {\n    versions.filter((version) => version).forEach((version) => this._versions.add(version!.toLowerCase()));\n  }\n}\n","import { NServiceBusHeaders } from \"../Header\";\nimport Message, { MessageStatus } from \"../Message\";\nimport { Direction, MessageProcessingRoute, RoutedMessage } from \"./RoutedMessage\";\nimport { Endpoint } from \"./Endpoint\";\nimport { friendlyTypeName } from \"./SequenceModel\";\n\nexport interface Handler {\n  readonly id: string;\n  name?: string;\n  friendlyName?: string;\n  readonly endpoint: Endpoint;\n  readonly isPartOfSaga: boolean;\n  partOfSaga?: string;\n  state: HandlerState;\n  inMessage?: RoutedMessage;\n  readonly outMessages: RoutedMessage[];\n  processedAt?: Date;\n  readonly handledAt?: Date;\n  processingTime?: number;\n  readonly direction: Direction;\n  route?: MessageProcessingRoute;\n  readonly selectedMessage?: Message;\n  uiRef?: SVGElement;\n  updateProcessedAt(timeSent: Date): void;\n  addOutMessage(routedMessage: RoutedMessage): void;\n}\n\nexport enum HandlerState {\n  Fail,\n  Success,\n  Unknown,\n}\n\nexport const ConversationStartHandlerName = \"First\";\n\nexport function createSendingHandler(message: Message, sendingEndpoint: Endpoint): Handler {\n  return new HandlerItem(message.headers.find((h) => h.key === NServiceBusHeaders.RelatedTo)?.value ?? ConversationStartHandlerName, sendingEndpoint);\n}\n\nexport function createProcessingHandler(message: Message, processingEndpoint: Endpoint): Handler {\n  const handler = new HandlerItem(message.message_id, processingEndpoint);\n  updateProcessingHandler(handler, message);\n  return handler;\n}\n\nexport class HandlerRegistry {\n  #store = new Map<string, HandlerItem>();\n  private storeKey = (id: string, endpointName: string) => `${id}###${endpointName}`;\n\n  register(handler: Handler) {\n    const existing = this.#store.get(this.storeKey(handler.id, handler.endpoint.name));\n    if (existing) return { handler: existing, isNew: false };\n\n    this.#store.set(this.storeKey(handler.id, handler.endpoint.name), handler as HandlerItem);\n    return { handler, isNew: true };\n  }\n}\n\nexport function updateProcessingHandler(handler: Handler, message: Message) {\n  handler.processedAt = new Date(message.processed_at);\n  //assuming if we have days in the timespan then something is very, very wrong\n  //TODO: extract logic since it's also currently used in AuditList\n  const [hh, mm, ss] = message.processing_time.split(\":\");\n  handler.processingTime = ((parseInt(hh) * 60 + parseInt(mm)) * 60 + parseFloat(ss)) * 1000;\n  handler.name = message.message_type;\n  handler.friendlyName = friendlyTypeName(message.message_type);\n\n  if ((message.invoked_sagas?.length ?? 0) > 0) {\n    handler.partOfSaga = message.invoked_sagas!.map((saga) => friendlyTypeName(saga.saga_type)).join(\", \");\n  }\n\n  switch (message.status) {\n    case MessageStatus.ArchivedFailure:\n    case MessageStatus.Failed:\n    case MessageStatus.RepeatedFailure:\n      handler.state = HandlerState.Fail;\n      break;\n    default:\n      handler.state = HandlerState.Success;\n  }\n}\n\nclass HandlerItem implements Handler {\n  private _id: string;\n  private _endpoint: Endpoint;\n  private _processedAtGuess?: Date;\n  private _outMessages: RoutedMessage[];\n  name?: string;\n  partOfSaga?: string;\n  inMessage?: RoutedMessage;\n  state: HandlerState = HandlerState.Unknown;\n  processedAt?: Date;\n  processingTime?: number;\n  route?: MessageProcessingRoute;\n  uiRef?: SVGElement;\n\n  constructor(id: string, endpoint: Endpoint) {\n    this._id = id;\n    this._endpoint = endpoint;\n    this._outMessages = [];\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get endpoint() {\n    return this._endpoint;\n  }\n\n  get isPartOfSaga() {\n    return this.partOfSaga != null;\n  }\n\n  get handledAt() {\n    return this.processedAt ?? this._processedAtGuess;\n  }\n\n  get selectedMessage() {\n    return this.route?.fromRoutedMessage?.selectedMessage;\n  }\n\n  get outMessages() {\n    return [...this._outMessages];\n  }\n\n  get direction() {\n    return this.outMessages[0]?.direction ?? Direction.Right;\n  }\n\n  updateProcessedAt(timeSent: Date) {\n    if (!this._processedAtGuess || this._processedAtGuess.getTime() > timeSent.getTime()) this._processedAtGuess = timeSent;\n  }\n\n  addOutMessage(routedMessage: RoutedMessage) {\n    this._outMessages = [routedMessage, ...this._outMessages].sort((a, b) => (a.sentTime?.getTime() ?? 0) - (b.sentTime?.getTime() ?? 0));\n  }\n}\n","import { NServiceBusHeaders } from \"../Header\";\nimport Message from \"../Message\";\nimport { createRoutedMessage, createRoute, MessageProcessingRoute } from \"./RoutedMessage\";\nimport { createProcessingEndpoint, createSendingEndpoint, Endpoint, EndpointRegistry } from \"./Endpoint\";\nimport { ConversationStartHandlerName, createProcessingHandler, createSendingHandler, Handler, HandlerRegistry, updateProcessingHandler } from \"./Handler\";\n\nexport interface ConversationModel {\n  endpoints: Endpoint[];\n}\n\n//TODO: extract to common area if this continues to be used in AuditList\nexport function friendlyTypeName(messageType: string) {\n  if (messageType == null) return undefined;\n\n  const typeClass = messageType.split(\",\")[0];\n  const typeName = typeClass.split(\".\").reverse()[0];\n  return typeName.replace(/\\+/g, \".\");\n}\n\nexport class ModelCreator implements ConversationModel {\n  #endpoints: Endpoint[];\n  #handlers: Handler[];\n  #processingRoutes: MessageProcessingRoute[];\n\n  constructor(messages: Message[]) {\n    this.#endpoints = [];\n    this.#processingRoutes = [];\n\n    const endpointRegistry = new EndpointRegistry();\n    const handlerRegistry = new HandlerRegistry();\n    const firstOrderHandlers: Handler[] = [];\n    const messagesInOrder = MessageTreeNode.createTree(messages).flatMap((node) => node.walk());\n\n    // NOTE: All sending endpoints are created first to ensure version info is retained\n    for (const message of messagesInOrder) {\n      endpointRegistry.register(createSendingEndpoint(message));\n    }\n    for (const message of messagesInOrder) {\n      endpointRegistry.register(createProcessingEndpoint(message));\n    }\n\n    for (const message of messagesInOrder) {\n      const sendingEndpoint = endpointRegistry.get(createSendingEndpoint(message));\n      if (!this.#endpoints.find((endpoint) => endpoint.name === sendingEndpoint?.name)) {\n        this.#endpoints.push(sendingEndpoint);\n      }\n      const processingEndpoint = endpointRegistry.get(createProcessingEndpoint(message));\n      if (!this.#endpoints.find((endpoint) => endpoint.name === processingEndpoint?.name)) {\n        this.#endpoints.push(processingEndpoint);\n      }\n\n      const { handler: sendingHandler, isNew: sendingHandlerIsNew } = handlerRegistry.register(createSendingHandler(message, sendingEndpoint));\n      if (sendingHandlerIsNew) {\n        firstOrderHandlers.push(sendingHandler);\n        sendingEndpoint.addHandler(sendingHandler);\n      }\n      sendingHandler.updateProcessedAt(new Date(message.time_sent));\n\n      const { handler: processingHandler, isNew: processingHandlerIsNew } = handlerRegistry.register(createProcessingHandler(message, processingEndpoint));\n      if (processingHandlerIsNew) {\n        firstOrderHandlers.push(processingHandler);\n        processingEndpoint.addHandler(processingHandler);\n      } else {\n        updateProcessingHandler(processingHandler, message);\n      }\n\n      const routedMessage = createRoutedMessage(message);\n      routedMessage.toHandler = processingHandler;\n      routedMessage.fromHandler = sendingHandler;\n      this.#processingRoutes.push(createRoute(routedMessage, processingHandler));\n      processingHandler.inMessage = routedMessage;\n      sendingHandler.addOutMessage(routedMessage);\n    }\n\n    const start = firstOrderHandlers.filter((h) => h.id === ConversationStartHandlerName);\n    const orderByHandledAt = firstOrderHandlers.filter((h) => h.id !== ConversationStartHandlerName).sort((a, b) => (a.handledAt?.getTime() ?? 0) - (b.handledAt?.getTime() ?? 0));\n\n    this.#handlers = [...start, ...orderByHandledAt];\n  }\n\n  get endpoints(): Endpoint[] {\n    return [...this.#endpoints];\n  }\n\n  get handlers(): Handler[] {\n    return [...this.#handlers];\n  }\n\n  get routes(): MessageProcessingRoute[] {\n    return [...this.#processingRoutes];\n  }\n}\n\nclass MessageTreeNode {\n  #message: Message;\n  #parent?: string;\n  #children: MessageTreeNode[];\n\n  static createTree(messages: Message[]) {\n    const nodes = messages.map((message) => new MessageTreeNode(message));\n    const resolved: MessageTreeNode[] = [];\n    const index = new Map<string, MessageTreeNode>(nodes.map((node) => [node.id, node]));\n\n    for (const node of nodes) {\n      const parent = index.get(node.parent ?? \"\");\n      if (parent) {\n        parent.addChild(node);\n        resolved.push(node);\n      }\n    }\n\n    return nodes.filter((node) => !resolved.includes(node));\n  }\n\n  constructor(message: Message) {\n    this.#message = message;\n    this.#parent = message.headers.find((h) => h.key === NServiceBusHeaders.RelatedTo)?.value;\n    this.#children = [];\n  }\n\n  get id() {\n    return this.#message.message_id;\n  }\n  get parent() {\n    return this.#parent;\n  }\n  get message() {\n    return this.#message;\n  }\n  get children() {\n    return [...this.#children];\n  }\n\n  addChild(childNode: MessageTreeNode) {\n    this.#children.push(childNode);\n  }\n\n  walk(): Message[] {\n    //TODO: check performance of this. We may need to pre-calculate the processed_at as a date on the message object\n    return [this.#message, ...this.children.sort((a, b) => new Date(a.message.processed_at).getTime() - new Date(b.message.processed_at).getTime()).flatMap((child) => child.walk())];\n  }\n}\n","import { acceptHMRUpdate, defineStore, storeToRefs } from \"pinia\";\nimport { computed, ref, watch } from \"vue\";\nimport { ModelCreator } from \"@/resources/SequenceDiagram/SequenceModel\";\nimport { Endpoint } from \"@/resources/SequenceDiagram/Endpoint\";\nimport { Handler } from \"@/resources/SequenceDiagram/Handler\";\nimport { MessageProcessingRoute } from \"@/resources/SequenceDiagram/RoutedMessage\";\nimport { useMessageStore } from \"./MessageStore\";\nimport { useRouter } from \"vue-router\";\nimport routeLinks from \"@/router/routeLinks\";\n\nexport interface EndpointCentrePoint {\n  name: string;\n  centre?: number;\n  top: number;\n}\n\nexport interface HandlerLocation {\n  id: string;\n  endpointName: string;\n  left: number;\n  right: number;\n  y: number;\n  height: number;\n}\n\nexport const Endpoint_Width = 260;\n\nexport const useSequenceDiagramStore = defineStore(\"SequenceDiagramStore\", () => {\n  const messageStore = useMessageStore();\n  const { state, conversationData } = storeToRefs(messageStore);\n  const router = useRouter();\n\n  const startX = ref(Endpoint_Width / 2);\n  const endpoints = ref<Endpoint[]>([]);\n  const handlers = ref<Handler[]>([]);\n  const routes = ref<MessageProcessingRoute[]>([]);\n  const endpointCentrePoints = ref<EndpointCentrePoint[]>([]);\n  const maxWidth = ref(150);\n  const maxHeight = ref(150);\n  const handlerLocations = ref<HandlerLocation[]>([]);\n  const highlightId = ref<string>();\n\n  const isLoading = computed(() => conversationData.value.loading);\n  const selectedId = computed(() => `${state.value.data.message_type ?? \"\"}(${state.value.data.id})`);\n\n  watch(\n    () => conversationData.value.data,\n    (conversationData) => {\n      if (conversationData.length) {\n        startX.value = Endpoint_Width / 2;\n        const model = new ModelCreator(conversationData);\n        endpoints.value = model.endpoints;\n        handlers.value = model.handlers;\n        routes.value = model.routes;\n      }\n    },\n    { immediate: true }\n  );\n\n  function setStartX(offset: number) {\n    const newValue = Math.max(offset + Endpoint_Width / 2, startX.value);\n    if (newValue === startX.value) return;\n    startX.value = newValue;\n  }\n\n  function setMaxWidth(width: number) {\n    maxWidth.value = width;\n  }\n\n  function setMaxHeight(height: number) {\n    maxHeight.value = height;\n  }\n\n  function setEndpointCentrePoints(centrePoints: EndpointCentrePoint[]) {\n    endpointCentrePoints.value = centrePoints;\n  }\n\n  function setHandlerLocations(locations: HandlerLocation[]) {\n    handlerLocations.value = locations;\n  }\n\n  function setHighlightId(id?: string) {\n    highlightId.value = id;\n  }\n\n  function refreshConversation() {\n    if (messageStore.state.data.conversation_id) messageStore.loadConversation(messageStore.state.data.conversation_id);\n  }\n\n  function navigateTo(messageUniqueId: string | undefined, messageId: string | undefined, isError: boolean) {\n    if (messageUniqueId == null) return;\n    if (!isError && messageId == null) return;\n\n    router.push({ path: isError ? routeLinks.messages.failedMessage.link(messageUniqueId) : routeLinks.messages.successMessage.link(messageId!, messageUniqueId) });\n  }\n\n  return {\n    startX,\n    endpoints,\n    handlers,\n    routes,\n    endpointCentrePoints,\n    maxWidth,\n    maxHeight,\n    handlerLocations,\n    highlightId,\n    selectedId,\n    isLoading,\n    setStartX,\n    setMaxWidth,\n    setMaxHeight,\n    setEndpointCentrePoints,\n    setHandlerLocations,\n    setHighlightId,\n    refreshConversation,\n    navigateTo,\n  };\n});\n\nif (import.meta.hot) {\n  import.meta.hot.accept(acceptHMRUpdate(useSequenceDiagramStore, import.meta.hot));\n}\n\nexport type SequenceDiagramStore = ReturnType<typeof useSequenceDiagramStore>;\n","<script setup lang=\"ts\">\nimport { Endpoint } from \"@/resources/SequenceDiagram/Endpoint\";\nimport { Endpoint_Width, EndpointCentrePoint, useSequenceDiagramStore } from \"@/stores/SequenceDiagramStore\";\nimport { storeToRefs } from \"pinia\";\nimport { computed, ref, watch } from \"vue\";\n\ninterface EndpointWithLocation extends Endpoint {\n  width: number;\n  textWidth: number;\n  x: number;\n  height: number;\n}\n\nconst Endpoint_Gap = 30;\nconst Endpoint_Image_Width = 20;\n\ndefineProps<{\n  yOffset: number;\n}>();\n\nconst store = useSequenceDiagramStore();\nconst { startX, endpoints } = storeToRefs(store);\n\nconst epTextRefs = ref<Element[]>([]);\nconst endpointItems = computed(() =>\n  endpoints.value.map((x, index) => {\n    const endpoint = x as EndpointWithLocation;\n    const el = epTextRefs.value[index];\n    if (el) {\n      const bounds = el.getBoundingClientRect();\n      const previousEndpoint = index > 0 ? endpointItems.value[index - 1] : undefined;\n      endpoint.width = Math.max(Endpoint_Width, bounds.width);\n      endpoint.textWidth = bounds.width;\n      endpoint.x = (previousEndpoint?.x ?? startX.value) + (previousEndpoint?.width ?? 0) + Endpoint_Gap;\n      endpoint.height = bounds.height;\n      endpoint.uiRef = el;\n    }\n    return endpoint;\n  })\n);\n\nwatch(endpointItems, () => {\n  store.setEndpointCentrePoints(endpointItems.value.map((endpoint) => ({ name: endpoint.name, centre: endpoint.x ?? 0, top: (endpoint.height ?? 0) + 15 }) as EndpointCentrePoint));\n  const lastEndpoint = endpointItems.value[endpointItems.value.length - 1];\n  store.setMaxWidth((lastEndpoint.x ?? 0) + lastEndpoint.width);\n});\n\nwatch(startX, () => {\n  epTextRefs.value = [];\n});\n\nfunction setEndpointTextRef(el: Element, index: number) {\n  if (el) epTextRefs.value[index] = el;\n}\n</script>\n\n<template>\n  <!-- occlusion for top of diagram so that elements don't show above the endpoint names when scrolling -->\n  <rect width=\"100%\" height=\"15\" :transform=\"`translate(0,${yOffset})`\" fill=\"white\" />\n  <g v-for=\"(endpoint, i) in endpointItems\" :key=\"endpoint.name\" :transform=\"`translate(0,${yOffset + 5})`\" style=\"outline: none\">\n    <g :transform=\"`translate(${(endpoint.x ?? Endpoint_Width / 2) - ((endpoint.textWidth ?? 0) + Endpoint_Image_Width) / 2}, 0)`\">\n      <foreignObject :x=\"Endpoint_Image_Width\" y=\"10\" :width=\"Endpoint_Width\" height=\"100%\" style=\"pointer-events: none\">\n        <div class=\"endpoint-surround\" :ref=\"(el) => setEndpointTextRef(el as Element, i)\">\n          <i class=\"endpoint-icon\" />\n          <div class=\"endpoint-name\">{{ endpoint.name }}</div>\n        </div>\n      </foreignObject>\n    </g>\n  </g>\n</template>\n\n<style scoped>\n.endpoint-surround {\n  width: 100%;\n  display: flex;\n  background: var(--gray90);\n  border-radius: 5px;\n  padding: 0.5em;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5em;\n  pointer-events: all;\n}\n\n.endpoint-icon {\n  flex-shrink: 0;\n  background-image: url(\"@/assets/endpoint.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n  height: 18px;\n  width: 18px;\n}\n\n.endpoint-name {\n  overflow-wrap: anywhere;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useSequenceDiagramStore } from \"@/stores/SequenceDiagramStore\";\nimport { storeToRefs } from \"pinia\";\n\nconst store = useSequenceDiagramStore();\nconst { endpointCentrePoints, maxHeight } = storeToRefs(store);\n</script>\n\n<template>\n  <g v-for=\"timeline in endpointCentrePoints\" :key=\"timeline.name\">\n    <path v-if=\"timeline.centre\" :d=\"`M${timeline.centre} ${timeline.top} v0 ${maxHeight - timeline.top}`\" stroke=\"var(--gray90)\" stroke-width=\"2\" />\n  </g>\n</template>\n","<script setup lang=\"ts\">\nimport { HandlerState } from \"@/resources/SequenceDiagram/Handler\";\nimport { computed, onActivated, ref, watch } from \"vue\";\nimport { Direction } from \"@/resources/SequenceDiagram/RoutedMessage\";\nimport { useSequenceDiagramStore } from \"@/stores/SequenceDiagramStore\";\nimport { storeToRefs } from \"pinia\";\n\nconst Height_Per_Out = 40;\nconst Handler_Gap = 20;\nconst Handler_Width = 14;\n\nconst store = useSequenceDiagramStore();\nconst { handlers, endpointCentrePoints, highlightId, selectedId } = storeToRefs(store);\n\nconst messageTypeRefs = ref<SVGTextElement[]>([]);\nconst hasMadeVisible = ref(false);\nconst selectedElement = ref<SVGElement>();\n//reset values to allow scroll to element on switching back to this tab\nonActivated(() => {\n  hasMadeVisible.value = false;\n  if (selectedElement.value) scrollToIfSelected(selectedElement.value, selectedId.value);\n});\nwatch(selectedId, () => (selectedElement.value = undefined));\n\nconst handlerItems = computed(() => {\n  let nextY = 0;\n  const result = handlers.value.map((handler, index) => {\n    const endpoint = endpointCentrePoints.value.find((cp) => cp.name === handler.endpoint.name)!;\n    const messageTypeElement = messageTypeRefs.value[index];\n    const count = handler.outMessages.length;\n    const height = (count === 0 ? 1 : count) * Height_Per_Out;\n    if (nextY === 0) nextY += Handler_Gap + Math.max(...[0, ...endpointCentrePoints.value.map((cp) => cp.top)]);\n    const y = nextY;\n    nextY += height + Handler_Gap;\n    const fill = (() => {\n      if (handler.id === \"First\") return \"black\";\n      if (handler.state === HandlerState.Fail) return \"var(--error)\";\n      if (handler.route && handler.route.name === selectedId.value) return \"var(--highlight)\";\n      if (handler.route && handler.route.name === highlightId.value) return \"var(--highlight-background)\";\n      return \"var(--gray60)\";\n    })();\n    const icon = (() => {\n      if (handler.id === \"First\") return \"M0,0L8,4 0,8z\";\n      if (handler.state === HandlerState.Fail) return \"M6,0L0,6 6,12 12,6 6,0z M7,9L5,9 5,8 7,8 7,9z M5,7L5,3 7,3 7,7 5,7z\";\n      return null;\n    })();\n    const iconSize = (() => {\n      if (handler.id === \"First\") return 8;\n      if (handler.state === HandlerState.Fail) return 12;\n      return 0;\n    })();\n\n    //determine which side of the handler to render the messageType on. If it's the left side (for a right arrow) then we apply a negative offset\n    const messageTypeOffset = handler.direction === Direction.Right ? ((messageTypeElement?.getBBox().width ?? 0) + 24) * -1 : 20;\n    const left = (endpoint?.centre ?? store.startX) - Handler_Width / 2;\n    const right = (endpoint?.centre ?? store.startX) + Handler_Width / 2;\n    if (endpoint?.centre && left + messageTypeOffset < 0) {\n      store.setStartX(-1 * (left + messageTypeOffset) + 20);\n    }\n\n    return {\n      id: handler.id,\n      messageId: { id: handler.selectedMessage?.message_id, uniqueId: handler.selectedMessage?.id },\n      isError: handler.state === HandlerState.Fail,\n      endpointName: handler.endpoint.name,\n      incomingId: handler.route?.name,\n      left,\n      right,\n      y,\n      height,\n      fill,\n      icon,\n      iconSize,\n      messageType: handler.friendlyName,\n      messageTypeOffset,\n      messageTypeHighlight: handler.route?.name === highlightId.value,\n      messageTypeSelected: handler.route?.name === selectedId.value,\n      setUIRef: (el: SVGElement) => (handler.uiRef = el),\n    };\n  });\n\n  store.setMaxHeight(nextY);\n  store.setHandlerLocations(result.map((handler) => ({ id: handler.id, endpointName: handler.endpointName, left: handler.left, right: handler.right, y: handler.y, height: handler.height })));\n\n  return result;\n});\n\nfunction setMessageTypeRef(el: SVGTextElement, index: number) {\n  if (el) messageTypeRefs.value[index] = el;\n}\n\nfunction scrollToIfSelected(el: SVGElement, handlerId: string | undefined) {\n  if (!hasMadeVisible.value && el && handlerId === selectedId.value) {\n    hasMadeVisible.value = true;\n    selectedElement.value = el;\n    //can't be done immediately since the sequence diagram hasn't completed layout yet\n    setTimeout(() => selectedElement.value!.scrollIntoView(false), 30);\n  }\n}\n</script>\n\n<template>\n  <g v-for=\"(handler, i) in handlerItems\" :key=\"`${handler.id}###${handler.endpointName}`\" :ref=\"(el) => scrollToIfSelected(el as SVGElement, handler.incomingId)\" :transform=\"`translate(${handler.left}, ${handler.y})`\">\n    <!--Handler Activation Box-->\n    <g :ref=\"(el) => handler.setUIRef(el as SVGElement)\" class=\"activation-box\">\n      <rect\n        :width=\"Handler_Width\"\n        :height=\"handler.height\"\n        :class=\"{\n          clickable: handler.incomingId && !handler.messageTypeSelected,\n        }\"\n        :fill=\"handler.fill\"\n        @mouseover=\"() => store.setHighlightId(handler.incomingId)\"\n        @mouseleave=\"() => store.setHighlightId()\"\n        @click=\"handler.incomingId && !handler.messageTypeSelected && store.navigateTo(handler.messageId.uniqueId, handler.messageId.id, handler.isError)\"\n      />\n      <path v-if=\"handler.icon\" :d=\"handler.icon\" fill=\"white\" :transform=\"`translate(${Handler_Width / 2 - handler.iconSize / 2}, ${handler.height / 2 - handler.iconSize / 2})`\" />\n    </g>\n    <!--Message Type and Icon-->\n    <g\n      v-if=\"handler.messageType\"\n      :transform=\"`translate(${handler.messageTypeOffset}, 4)`\"\n      :class=\"{\n        clickable: !handler.messageTypeSelected,\n        'message-type': true,\n        highlight: handler.messageTypeHighlight || handler.messageTypeSelected,\n      }\"\n      @mouseover=\"() => store.setHighlightId(handler.incomingId)\"\n      @mouseleave=\"() => store.setHighlightId()\"\n      @click=\"handler.incomingId && !handler.messageTypeSelected && store.navigateTo(handler.messageId.uniqueId, handler.messageId.id, handler.isError)\"\n    >\n      <path d=\"M9,3L9,3 9,0 0,0 0,3 4,3 4,6 0,6 0,9 4,9 4,12 0,12 0,15 9,15 9,12 5,12 5,9 9,9 9,6 5,6 5,3z\" />\n      <text x=\"14\" y=\"0\" dominant-baseline=\"text-before-edge\" :ref=\"(el) => setMessageTypeRef(el as SVGTextElement, i)\">{{ handler.messageType }}</text>\n    </g>\n  </g>\n</template>\n\n<style scoped>\n.clickable {\n  cursor: pointer;\n}\n\n.activation-box:focus {\n  outline: none;\n}\n\n.message-type {\n  fill: var(--gray40);\n}\n\n.message-type.highlight {\n  fill: var(--highlight);\n}\n</style>\n","<script setup lang=\"ts\">\nimport { Direction, RoutedMessageType } from \"@/resources/SequenceDiagram/RoutedMessage\";\nimport { computed, ref } from \"vue\";\nimport { useSequenceDiagramStore } from \"@/stores/SequenceDiagramStore\";\nimport { storeToRefs } from \"pinia\";\nimport { HandlerState } from \"@/resources/SequenceDiagram/Handler\";\n\nconst Arrow_Head_Width = 10;\nconst Message_Type_Margin = 4;\n\nconst store = useSequenceDiagramStore();\nconst { selectedId, routes, handlerLocations, highlightId } = storeToRefs(store);\n\nconst messageTypeRefs = ref<SVGTextElement[]>([]);\n\nconst arrows = computed(() =>\n  routes.value.map((route, index) => {\n    if (!route.name) return;\n    const fromHandler = route.fromRoutedMessage?.fromHandler;\n    if (!fromHandler) return;\n    const fromHandlerLocation = handlerLocations.value.find((hl) => hl.id === fromHandler.id && hl.endpointName === fromHandler.endpoint.name);\n    if (!fromHandlerLocation) return;\n    const toHandlerLocation = handlerLocations.value.find((hl) => hl.id === route.fromRoutedMessage?.toHandler?.id && hl.endpointName === route.fromRoutedMessage?.receiving.name);\n    if (!toHandlerLocation) return;\n\n    const messageTypeElement = messageTypeRefs.value[index];\n    const messageTypeElementBounds = messageTypeElement?.getBBox();\n    const arrowIndex = fromHandler.outMessages.findIndex((out) => route.fromRoutedMessage?.messageId === out.messageId && route.fromRoutedMessage?.receiving.name === out.receiving.name) + 1;\n    const y = fromHandlerLocation.y + (fromHandlerLocation.height / (fromHandler.outMessages.length + 1)) * arrowIndex; //TODO work out the reason - 15 is applied in WPF;\n\n    const toHandlerCentre = toHandlerLocation.left + (toHandlerLocation.right - toHandlerLocation.left) / 2;\n    const [direction, width, fromX, messageTypeOffset] = (() => {\n      if (fromHandlerLocation.left === toHandlerLocation.left) return [Direction.Right, 15 + Arrow_Head_Width, fromHandlerLocation.right, toHandlerCentre + 45];\n      if (fromHandlerLocation.left < toHandlerLocation.left) return [Direction.Right, toHandlerCentre - fromHandlerLocation.right - Arrow_Head_Width - 1, fromHandlerLocation.right, toHandlerCentre + 3];\n      return [Direction.Left, toHandlerCentre - fromHandlerLocation.left + Arrow_Head_Width + 1, fromHandlerLocation.left, toHandlerCentre - ((messageTypeElementBounds?.width ?? 0) + 15 + Message_Type_Margin * 3 + 3)];\n    })();\n    route.fromRoutedMessage.direction = direction;\n\n    if (messageTypeOffset < 0) {\n      store.setStartX(-1 * messageTypeOffset + 20);\n    }\n\n    return {\n      id: route.name,\n      selected: route.name === selectedId.value,\n      messageId: { uniqueId: route.fromRoutedMessage.selectedMessage.id, id: route.fromRoutedMessage.selectedMessage.message_id },\n      isHandlerError: route.processingHandler?.state === HandlerState.Fail,\n      fromX,\n      y,\n      direction,\n      width,\n      toHandlerCentre,\n      height: Math.abs(y - toHandlerLocation.y),\n      type: route.fromRoutedMessage.type,\n      messageType: route.fromRoutedMessage.name,\n      messageTypeOffset,\n      highlight: highlightId.value === route.name,\n      highlightTextWidth: messageTypeElementBounds?.width,\n      highlightTextHeight: messageTypeElementBounds?.height,\n      setUIRef: (el: SVGElement) => (route.uiRef = el),\n    };\n  })\n);\n\nfunction setMessageTypeRef(el: SVGTextElement, index: number) {\n  if (el) messageTypeRefs.value[index] = el;\n}\n</script>\n\n<template>\n  <template v-for=\"(arrow, i) in arrows\" :key=\"arrow?.id\">\n    <g v-if=\"arrow != null\">\n      <!--Main Arrow-->\n      <g>\n        <path :d=\"`M${arrow.fromX} ${arrow.y} h${arrow.width}`\" stroke-width=\"3.5\" stroke=\"black\" :stroke-dasharray=\"arrow.type === RoutedMessageType.Event ? '12 8' : undefined\" />\n        <path v-if=\"arrow.direction === Direction.Right\" :d=\"`M${arrow.fromX + arrow.width} ${arrow.y - 7.5} l10 7.5 -10,7.5z`\" fill=\"black\" />\n        <path v-if=\"arrow.direction === Direction.Left\" :d=\"`M${arrow.toHandlerCentre + 1} ${arrow.y} l10,-7.5 0,15z`\" fill=\"black\" />\n      </g>\n      <!--Highlight Arrow-->\n      <g v-if=\"arrow.highlight || arrow.selected\" :transform=\"`translate(${arrow.toHandlerCentre},${arrow.y})`\" stroke=\"var(--highlight)\" fill=\"var(--highlight)\">\n        <path :d=\"`M0 0 v${arrow.height - 6}`\" stroke-width=\"2\" />\n        <path :d=\"`M0 ${arrow.height} l-3,-6 6,0z`\" />\n      </g>\n      <!--Message Type and Icon-->\n      <g\n        :class=\"{\n          clickable: !arrow.selected,\n          'message-type': true,\n          highlight: arrow.highlight,\n          selected: arrow.selected,\n        }\"\n        :transform=\"`translate(${arrow.messageTypeOffset}, ${arrow.y - 7.5 - Message_Type_Margin})`\"\n        @mouseover=\"() => store.setHighlightId(arrow.id)\"\n        @mouseleave=\"() => store.setHighlightId()\"\n        @click=\"!arrow.selected && store.navigateTo(arrow.messageId.uniqueId, arrow.messageId.id, arrow.isHandlerError)\"\n        :ref=\"(el) => arrow.setUIRef(el as SVGElement)\"\n      >\n        <!--19 is width of MessageType icon, plus a gap-->\n        <rect\n          v-if=\"(arrow.highlight || arrow.selected) && arrow.messageTypeOffset\"\n          :width=\"(arrow.highlightTextWidth ?? 0) + 19 + Message_Type_Margin + Message_Type_Margin\"\n          :height=\"(arrow.highlightTextHeight ?? 0) + Message_Type_Margin + Message_Type_Margin\"\n          class=\"border\"\n        />\n        <svg :x=\"Message_Type_Margin\" :y=\"Message_Type_Margin\" width=\"15\" height=\"15\" viewBox=\"0 0 32 32\">\n          <path\n            v-if=\"arrow.type === RoutedMessageType.Timeout\"\n            d=\"M21.8 18.5H14V10h2.5v6h5.3L21.8 18.5L21.8 18.5z M25.1 24.4c2-2.2 3.2-5.1 3.2-8.3  c0-6.8-5.5-12.3-12.3-12.3C9.2 3.7 3.7 9.2 3.7 16.1c0 3.2 1.2 6.1 3.2 8.3c-0.6 1.5-1.4 3.6-2 4.9c-0.1 0.2 0 0.4 0.2 0.6  c0.2 0.1 0.4 0.2 0.6 0c1.3-0.8 3.1-2.1 4.5-3c1.7 0.9 3.7 1.5 5.9 1.5s4.1-0.5 5.9-1.5l4.5 3c0.2 0.1 0.4 0.1 0.6 0  c0.2-0.1 0.2-0.4 0.2-0.6L25.1 24.4z M16 25.3c-5.1 0-9.3-4.1-9.3-9.3c0-5.1 4.1-9.3 9.3-9.3c5.1 0 9.3 4.1 9.3 9.3  C25.3 21.2 21.1 25.3 16 25.3z M10.5 2.8C9.6 2.3 8.6 2 7.6 2C4.5 2 2 4.5 2 7.6c0 1 0.3 2 0.8 2.8C4.2 7 7 4.2 10.5 2.8z   M29.2 10.4C29.7 9.6 30 8.6 30 7.6C30 4.5 27.5 2 24.4 2c-1 0-2 0.3-2.9 0.8C25 4.2 27.8 7 29.2 10.4z\"\n          />\n          <path\n            v-else-if=\"arrow.type === RoutedMessageType.Event\"\n            d=\"M 0 2 M 27.8 29.8 M 0 15.9 A 5.2 5.2 90 1 1 10.4 15.9 A 5.2 5.2 90 1 1 0 15.9 M 12.1 13.3 v 5.2 h 8.7 v 1.8 L 27.8 15.9 L 20.8 11.6 v 1.8 M 11.9 19 L 8.3 22.6 L 14.3 28.8 L 13.1 30 L 21.2 31.9 L 19.3 23.9 L 18.1 25.1 M 8.3 9.1 L 11.9 12.9 L 18.1 6.7 L 19.3 7.9 L 21.2 0 L 13.1 1.9 L 14.3 3.1\"\n          />\n          <path v-else-if=\"arrow.type === RoutedMessageType.Command\" d=\"M 0,0 M 32,32 M 0,16 A 6,6 0 1 1 12,16 A 6,6 0 1 1 0,16   M 14,13 v6 h10 v2 L32,16 L24,11 v2 z\" />\n          <path v-else-if=\"arrow.type === RoutedMessageType.Local\" d=\"M 32 6 h -14 v 4 h 10 v 14 H 16 V 19.6 L 4 26 l 12 6.4 V 28 h 16 V 6 z M 16 8.2 C 16 11.4 13.4 14 10 14 S 4 11.4 4 8.2 S 6.6 2 10 2 S 16 4.8 16 8 z\" />\n        </svg>\n        <text :x=\"15 + Message_Type_Margin + Message_Type_Margin\" :y=\"Message_Type_Margin\" dominant-baseline=\"text-before-edge\" :ref=\"(el) => setMessageTypeRef(el as SVGTextElement, i)\">{{ arrow.messageType }}</text>\n      </g>\n    </g>\n  </template>\n</template>\n\n<style scoped>\n.clickable {\n  cursor: pointer;\n}\n\n.message-type {\n  fill: black;\n  outline: none;\n}\n\n.message-type.selected {\n  fill: white;\n}\n\n.message-type .border {\n  fill: var(--highlight-background);\n}\n\n.message-type.selected .border {\n  fill: var(--highlight);\n}\n\n.message-type:not(.selected).highlight {\n  fill: var(--highlight);\n}\n\n.message-type text::selection {\n  fill: white;\n}\n\n.message-type.selected text::selection {\n  background-color: black;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { Endpoint } from \"@/resources/SequenceDiagram/Endpoint\";\n\ndefineProps<{ endpoint: Endpoint }>();\n</script>\n\n<template>\n  <div class=\"endpoint-tooltip\">\n    <label>Name:</label>\n    <span>{{ endpoint.name }}</span>\n    <label>NSB Version:</label>\n    <span>{{ endpoint.version }}</span>\n    <label>Host:</label>\n    <span>{{ endpoint.host }}</span>\n  </div>\n</template>\n\n<style>\n.endpoint-tooltip {\n  display: grid;\n  grid-template-columns: auto auto;\n  column-gap: 0.5em;\n}\n\n.endpoint-tooltip label {\n  grid-column: 1;\n  justify-self: end;\n  font-weight: bold;\n  color: #b3b3b3;\n}\n\n.endpoint-tooltip span {\n  word-break: break-all;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useFormatTime } from \"@/composables/formatter\";\nimport { Handler } from \"@/resources/SequenceDiagram/Handler\";\n\ndefineProps<{ handler: Handler }>();\n\nfunction formatTime(milliseconds: number) {\n  const time = useFormatTime(milliseconds);\n  return `${time.value} ${time.unit}`;\n}\n</script>\n\n<template>\n  <div v-if=\"handler.id === 'First'\">Start of Conversation</div>\n  <div v-else class=\"handler-tooltip\">\n    <div class=\"title\">Processing of Message</div>\n    <div class=\"details\">\n      <label>Processing Time:</label>\n      <span>{{ formatTime(handler.processingTime ?? 0) }}</span>\n      <label>Processing Of:</label>\n      <span>{{ handler.friendlyName }}</span>\n      <label v-if=\"handler.partOfSaga\">Sagas Invoked:</label>\n      <span v-if=\"handler.partOfSaga\">{{ handler.partOfSaga }}</span>\n    </div>\n  </div>\n</template>\n\n<style>\n.handler-tooltip {\n  display: flex;\n  flex-direction: column;\n}\n\n.handler-tooltip .title {\n  font-weight: bold;\n}\n\n.handler-tooltip .details {\n  display: grid;\n  grid-template-columns: auto auto;\n  column-gap: 0.5em;\n}\n\n.handler-tooltip label {\n  grid-column: 1;\n  justify-self: end;\n  font-weight: bold;\n  color: #b3b3b3;\n}\n\n.handler-tooltip span {\n  word-break: break-all;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { RoutedMessage, RoutedMessageType } from \"@/resources/SequenceDiagram/RoutedMessage\";\n\ndefineProps<{ routedMessage: RoutedMessage }>();\n</script>\n\n<template>\n  <div class=\"route-tooltip\">\n    <div class=\"title\">{{ RoutedMessageType[routedMessage.type] }}</div>\n    <div class=\"details\">\n      <label>Message Type:</label>\n      <span>{{ routedMessage.name }}</span>\n      <label>Message Id:</label>\n      <span>{{ routedMessage.messageId }}</span>\n      <label>Sent From:</label>\n      <span>{{ `${routedMessage.sending.name}@${routedMessage.sending.host}` }}</span>\n      <label>Sent To:</label>\n      <span>{{ `${routedMessage.receiving.name}@${routedMessage.receiving.host}` }}</span>\n    </div>\n  </div>\n</template>\n\n<style>\n.route-tooltip {\n  display: flex;\n  flex-direction: column;\n}\n\n.route-tooltip .title {\n  font-weight: bold;\n}\n\n.route-tooltip .details {\n  display: grid;\n  grid-template-columns: auto auto;\n  column-gap: 0.5em;\n}\n\n.route-tooltip label {\n  grid-column: 1;\n  justify-self: end;\n  font-weight: bold;\n  color: #b3b3b3;\n}\n\n.route-tooltip span {\n  word-break: break-all;\n}\n</style>\n","import { useSequenceDiagramStore } from \"@/stores/SequenceDiagramStore\";\nimport { storeToRefs } from \"pinia\";\nimport { h, watch } from \"vue\";\nimport { useTippy } from \"vue-tippy\";\nimport EndpointTooltip from \"./EndpointTooltip.vue\";\nimport HandlerTooltip from \"./HandlerTooltip.vue\";\nimport RouteTooltip from \"./RouteTooltip.vue\";\nimport { HandlerState } from \"@/resources/SequenceDiagram/Handler\";\n\nexport default function useTooltips() {\n  const store = useSequenceDiagramStore();\n  const { endpoints, handlers, routes } = storeToRefs(store);\n\n  watch(\n    () => endpoints.value.map((endpoint) => endpoint.uiRef),\n    () =>\n      endpoints.value\n        .filter((endpoint) => endpoint.uiRef)\n        .forEach((endpoint) =>\n          useTippy(endpoint.uiRef, {\n            interactive: true,\n            appendTo: () => document.body,\n            content: h(EndpointTooltip, { endpoint }),\n            placement: \"bottom\",\n            delay: [800, null],\n          })\n        )\n  );\n\n  watch(\n    () => handlers.value.map((handler) => handler.uiRef),\n    () =>\n      handlers.value\n        .filter((handler) => handler.uiRef && handler.state !== HandlerState.Unknown)\n        .forEach((handler) =>\n          useTippy(handler.uiRef, {\n            interactive: true,\n            appendTo: () => document.body,\n            content: h(HandlerTooltip, { handler }),\n            delay: [800, null],\n          })\n        )\n  );\n\n  watch(\n    () => routes.value.map((route) => route.uiRef),\n    () =>\n      routes.value\n        .filter((route) => route.uiRef && route.fromRoutedMessage)\n        .forEach((route) =>\n          useTippy(route.uiRef, {\n            interactive: true,\n            appendTo: () => document.body,\n            content: h(RouteTooltip, { routedMessage: route.fromRoutedMessage! }),\n            delay: [800, null],\n            maxWidth: 400,\n          })\n        )\n  );\n}\n","<script setup lang=\"ts\">\nimport Endpoints from \"./SequenceDiagram/EndpointsComponent.vue\";\nimport Timeline from \"./SequenceDiagram/TimelineComponent.vue\";\nimport Handlers from \"./SequenceDiagram/HandlersComponent.vue\";\nimport Routes from \"./SequenceDiagram/RoutesComponent.vue\";\nimport { useSequenceDiagramStore } from \"@/stores/SequenceDiagramStore\";\nimport { storeToRefs } from \"pinia\";\nimport useTooltips from \"./SequenceDiagram/tooltipOverlay\";\nimport { onMounted, ref } from \"vue\";\nimport LoadingSpinner from \"@/components/LoadingSpinner.vue\";\nimport FAIcon from \"@/components/FAIcon.vue\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons\";\nconst store = useSequenceDiagramStore();\nconst { maxWidth, maxHeight, isLoading } = storeToRefs(store);\nconst endpointYOffset = ref(0);\n\nuseTooltips();\n\nonMounted(() => store.refreshConversation());\n</script>\n\n<template>\n  <div class=\"wrapper\">\n    <div class=\"toolbar\">\n      <a class=\"help-link\" target=\"_blank\" href=\"https://docs.particular.net/servicepulse/sequence-diagram\"><FAIcon :icon=\"faInfoCircle\" /> Sequence Diagram Help</a>\n    </div>\n    <LoadingSpinner v-if=\"isLoading\" />\n    <div class=\"outer\" @scroll=\"(ev) => (endpointYOffset = (ev.target as Element).scrollTop)\">\n      <svg class=\"sequence-diagram\" :style=\"{ width: `max(100%, ${isNaN(maxWidth) ? 0 : maxWidth}px)` }\" :height=\"maxHeight + 20\">\n        <Timeline />\n        <Handlers />\n        <Routes />\n        <Endpoints :yOffset=\"endpointYOffset\" />\n      </svg>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.wrapper {\n  margin-top: 5px;\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  background: white;\n  display: flex;\n  flex-direction: column;\n}\n.toolbar {\n  background-color: #f3f3f3;\n  border: #8c8c8c 1px solid;\n  border-radius: 3px;\n  padding: 5px;\n  margin-bottom: 0.5rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: end;\n  min-height: 40px;\n}\n.outer {\n  max-width: 100%;\n  max-height: calc(100vh - 27rem);\n  overflow: auto;\n}\n\n.sequence-diagram {\n  --error: red;\n  --gray20: #333333;\n  --gray30: #444444;\n  --gray40: #666666;\n  --gray60: #999999;\n  --gray80: #cccccc;\n  --gray90: #e6e6e6;\n  --gray95: #b3b3b3;\n  --highlight: #0b6eef;\n  --highlight-background: #c5dee9;\n  background: white;\n}\n\n.help-link {\n  display: flex;\n  align-items: center;\n  justify-content: end;\n  gap: 0.15rem;\n}\n</style>\n","import { CodeLanguage } from \"@/components/codeEditorTypes\";\n\nfunction parseContentType(contentType: string | undefined): { isSupported: boolean; language?: CodeLanguage } {\n  if (contentType === undefined) {\n    return {\n      isSupported: false,\n    };\n  }\n\n  // remove content type parameter, e.g. charset=utf-8\n  contentType = contentType.split(\";\")[0].trim();\n\n  if (contentType === \"application/json\") {\n    return {\n      isSupported: true,\n      language: \"json\",\n    };\n  }\n\n  if (contentType === \"text/xml\") {\n    return {\n      isSupported: true,\n      language: \"xml\",\n    };\n  }\n\n  if (contentType.startsWith(\"text/\")) {\n    return {\n      isSupported: true,\n    };\n  }\n\n  if (contentType === \"application/xml\") {\n    return {\n      isSupported: true,\n      language: \"xml\",\n    };\n  }\n\n  if (contentType.startsWith(\"application/\")) {\n    // Some examples:\n    // application/atom+xml\n    // application/ld+json\n    // application/vnd.masstransit+json\n    if (contentType.endsWith(\"+json\")) {\n      return {\n        isSupported: true,\n        language: \"json\",\n      };\n    } else if (contentType.endsWith(\"+xml\")) {\n      return {\n        isSupported: true,\n        language: \"xml\",\n      };\n    }\n  }\n\n  return {\n    isSupported: false,\n  };\n}\n\nexport default parseContentType;\n","<script setup lang=\"ts\">\nimport { computed, watch } from \"vue\";\nimport CodeEditor from \"@/components/CodeEditor.vue\";\nimport parseContentType from \"@/composables/contentTypeParser\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport LoadingSpinner from \"@/components/LoadingSpinner.vue\";\nimport { storeToRefs } from \"pinia\";\n\nconst store = useMessageStore();\nconst { body: bodyState, state } = storeToRefs(store);\n\nwatch(\n  () => state.value.data.body_url,\n  async () => {\n    await store.downloadBody();\n  },\n  { immediate: true }\n);\nconst contentType = computed(() => parseContentType(bodyState.value.data.content_type));\nconst body = computed(() => bodyState.value.data.value);\n</script>\n\n<template>\n  <div class=\"gap\">\n    <div v-if=\"bodyState.not_found\" class=\"alert alert-info\">Could not find the message body. This could be because the message URL is invalid or the corresponding message was processed and is no longer tracked by ServiceControl.</div>\n    <div v-else-if=\"bodyState.failed_to_load\" class=\"alert alert-info\">Message body unavailable.</div>\n    <LoadingSpinner v-else-if=\"bodyState.loading\" />\n    <div v-else-if=\"bodyState.data.no_content\" class=\"alert alert-info\">\n      Body was too large and not stored. Edit <a href=\"https://docs.particular.net/servicecontrol/audit-instances/configuration#performance-tuning-servicecontrol-auditmaxbodysizetostore\">ServiceControl/MaxBodySizeToStore</a> to be larger in the\n      ServiceControl configuration.\n    </div>\n    <CodeEditor v-else-if=\"body !== undefined && contentType.isSupported\" :model-value=\"body\" :language=\"contentType.language\" :read-only=\"true\" :show-gutter=\"true\"></CodeEditor>\n    <div v-else-if=\"body && !contentType.isSupported\" class=\"alert alert-warning\">Message body cannot be displayed because content type \"{{ bodyState.data.content_type }}\" is not supported.</div>\n  </div>\n</template>\n\n<style scoped>\n.gap {\n  margin-top: 5px;\n}\n</style>\n","<script setup lang=\"ts\">\nimport CopyToClipboard from \"@/components/CopyToClipboard.vue\";\nimport { computed, ref } from \"vue\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport { storeToRefs } from \"pinia\";\nimport FilterInput from \"@/components/FilterInput.vue\";\n\nconst { headers } = storeToRefs(useMessageStore());\n\nconst hoverStates = ref<Record<number, boolean>>({});\nconst searchTerm = ref<string>(\"\");\nconst toggleHover = (index: number, state: boolean) => {\n  hoverStates.value[index] = state;\n};\n// Computed property to filter headers based on search term\nconst filteredHeaders = computed(() => {\n  if (!searchTerm.value) {\n    return headers.value.data;\n  }\n  return headers.value.data.filter((header) => header.key.toLowerCase().includes(searchTerm.value.toLowerCase()) || header.value?.toLowerCase().includes(searchTerm.value.toLowerCase()));\n});\n</script>\n\n<template>\n  <div class=\"wrapper\">\n    <div class=\"filters\">\n      <div class=\"text-search-container\">\n        <div class=\"text-search\">\n          <FilterInput v-model=\"searchTerm\" :aria-label=\"`Search for a header key or value`\" :placeholder=\"'Search for a header key or value...'\" />\n        </div>\n      </div>\n    </div>\n    <div class=\"header-list\" v-if=\"filteredHeaders.length > 0 && !headers.not_found\">\n      <template v-for=\"(header, index) in filteredHeaders\" :key=\"index\">\n        <div class=\"header-key\">{{ header.key }}</div>\n        <div class=\"header-value\" @mouseover=\"toggleHover(index, true)\" @mouseleave=\"toggleHover(index, false)\">\n          <pre class=\"removeBootStrap\">{{ header.value }}</pre>\n          <div class=\"clippy-button\"><CopyToClipboard v-if=\"header.value && hoverStates[index]\" :value=\"header.value\" :isIconOnly=\"true\" /></div>\n        </div>\n      </template>\n    </div>\n  </div>\n\n  <!-- Message if filtered list is empty -->\n  <div v-if=\"filteredHeaders.length <= 0 && !headers.not_found\" class=\"alert alert-warning\">No headers found matching the search term.</div>\n  <div v-if=\"headers.not_found\" class=\"alert alert-info\">Could not find message headers. This could be because the message URL is invalid or the corresponding message was processed and is no longer tracked by ServiceControl.</div>\n</template>\n\n<style scoped>\n.wrapper {\n  margin-top: 5px;\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  background: white;\n}\n\n.removeBootStrap {\n  background: initial;\n  border: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*  empty filtered list message */\n.alert-warning {\n  margin-top: 10px;\n  color: #856404;\n  background-color: #fff3cd;\n  border-color: #ffeeba;\n  padding: 10px;\n  border-radius: 5px;\n}\n\n.text-search-container {\n  display: flex;\n  flex-direction: row;\n}\n.text-search {\n  width: 100%;\n  max-width: 40rem;\n}\n.filters {\n  top: -2.5rem;\n  position: sticky;\n  z-index: 100;\n  background-color: #f3f3f3;\n  border: #8c8c8c 1px solid;\n  border-radius: 3px;\n  padding: 5px;\n}\n\n.header-list {\n  margin-bottom: 1rem;\n  margin-top: 0.5rem;\n  display: grid;\n  grid-template-columns: 20rem 1fr;\n  align-items: flex-start;\n  justify-content: center;\n  row-gap: 2px;\n  background-color: #f3f3f3;\n}\n\n.header-value,\n.header-key {\n  padding: 1rem;\n  display: flex;\n  height: 100%;\n  min-height: 2rem;\n  position: relative;\n  background: white;\n}\n\n.header-value {\n  padding-left: 2.7rem;\n}\n\n.clippy-button {\n  position: absolute;\n  left: 0;\n  top: 0.3rem;\n}\n</style>\n","<script lang=\"ts\" setup>\nimport { ref, watch } from \"vue\";\n\n// Define TypeScript interfaces for settings and supported languages\ninterface NetStackOptions {\n  frame?: string;\n  type?: string;\n  method?: string;\n  paramsList?: string;\n  paramType?: string;\n  paramName?: string;\n  file?: string;\n  line?: string;\n}\n\ninterface Language {\n  name: string;\n  at: string;\n  in: string;\n  line: string;\n}\n\ntype Text = string;\n\ninterface Node {\n  params: Array<{ name: string; type: string }>;\n  type: string;\n  lineNumber?: number;\n  file?: string;\n  method: string;\n  spaces: string;\n}\n\ntype Element = Text | Node;\n\n// Props\nconst props = withDefaults(defineProps<{ stackTrace: string; options?: NetStackOptions }>(), {\n  options: () => ({\n    frame: \"st-frame\",\n    type: \"st-type\",\n    method: \"st-method\",\n    paramsList: \"st-frame-params\",\n    paramType: \"st-param-type\",\n    paramName: \"st-param-name\",\n    file: \"st-file\",\n    line: \"st-line\",\n  }),\n});\n\n// Supported languages and their keywords\nconst languages: Language[] = [\n  { name: \"english\", at: \"at\", in: \"in\", line: \"line\" },\n  { name: \"danish\", at: \"ved\", in: \"i\", line: \"linje\" },\n  { name: \"german\", at: \"bei\", in: \"in\", line: \"Zeile\" },\n  { name: \"spanish\", at: \"en\", in: \"en\", line: \"lnea\" },\n  { name: \"russian\", at: \"\", in: \"\", line: \"\" },\n  { name: \"chinese\", at: \"\", in: \"\", line: \"\" },\n];\n\n// Reactive variables and setup state\nconst formattedStack = ref<Element[]>([]);\nconst selectedLanguage = ref<Language>(languages[0]);\n\n// Helper function to detect languages in the stack trace\nconst detectLanguagesInOrder = (text: string): Language[] => {\n  const languageRegexes = {\n    english: /\\s+at .*?\\)/g,\n    danish: /\\s+ved .*?\\)/g,\n    german: /\\s+bei .*?\\)/g,\n    spanish: /\\s+en .*?\\)/g,\n    russian: /\\s+ .*?\\)/g,\n    chinese: /\\s+ .*?\\)/g,\n  };\n\n  const detectedLanguages: Language[] = [];\n  for (const lang in languageRegexes) {\n    if (languageRegexes[lang as keyof typeof languageRegexes].test(text)) {\n      const foundLang = languages.find((l) => l.name === lang);\n      if (foundLang) {\n        detectedLanguages.push(foundLang);\n      }\n    }\n  }\n\n  return detectedLanguages;\n};\n\n// Core formatting logic\nconst formatStackTrace = (stackTrace: string, selectedLang: Language): Element[] => {\n  const lines = stackTrace.split(\"\\n\");\n  const fileAndLineNumberRegEx = new RegExp(`${selectedLang.in} (.+):${selectedLang.line} (\\\\d+)`);\n  const atRegex = new RegExp(`(\\\\s*)(${selectedLang.at}) (.+?)\\\\((.*?)\\\\)`);\n\n  return lines.map((line) => {\n    const match = line.match(atRegex);\n    if (match) {\n      const [, spaces, , methodWithType, paramsWithFile] = match;\n\n      const [type, method] = (() => {\n        const parts = methodWithType.split(\".\");\n        const method = parts.pop() ?? \"\";\n        const type = parts.join(\".\");\n        return [type, method];\n      })();\n\n      const params = paramsWithFile.split(\", \").map((param) => {\n        const [paramType, paramName] = param.split(\" \");\n        return { name: paramName, type: paramType };\n      });\n\n      const matchFile = line.match(fileAndLineNumberRegEx);\n      let file, lineNumber;\n      if (matchFile) {\n        [, file, lineNumber] = matchFile;\n      }\n\n      return <Node>{ method, type, params, file, lineNumber, spaces };\n    } else {\n      return line;\n    }\n  });\n};\n\n// Process the provided stack trace\nconst processStackTrace = (): void => {\n  const rawContent = props.stackTrace;\n  const detectedLanguages = detectLanguagesInOrder(rawContent);\n\n  if (!detectedLanguages.length) {\n    formattedStack.value = [rawContent]; // If no language detected, output raw content\n    return;\n  }\n\n  selectedLanguage.value = detectedLanguages[0]; // Use the first detected language\n  formattedStack.value = formatStackTrace(rawContent, selectedLanguage.value);\n};\n\nwatch(\n  () => props.stackTrace,\n  () => {\n    processStackTrace();\n  },\n  { immediate: true }\n);\n</script>\n\n<template>\n  <div class=\"stack-trace-container\">\n    <template v-for=\"line in formattedStack\" :key=\"line\">\n      <template v-if=\"typeof line === 'string'\">\n        <span>{{ line }}</span>\n      </template>\n      <div v-else>\n        {{ line.spaces }}{{ selectedLanguage.at }}\n        <span :class=\"props.options.frame\">\n          <span :class=\"props.options.type\">{{ line.type }}</span\n          >.<span :class=\"props.options.method\">{{ line.method }}</span\n          >(<span :class=\"props.options.paramsList\">\n            <template v-for=\"(param, index) in line.params\" :key=\"param.name\">\n              <span :class=\"props.options.paramType\"> {{ param.type }}</span> <span :class=\"props.options.paramName\">{{ param.name }}</span>\n              <span v-if=\"index !== line.params.length - 1\">, </span>\n            </template> </span\n          >)\n        </span>\n        <template v-if=\"line.file\">\n          {{ selectedLanguage.in }} <span :class=\"props.options.file\">{{ line.file }}</span\n          >:{{ selectedLanguage.line }} <span :class=\"props.options.line\">{{ line.lineNumber }}</span>\n        </template>\n      </div>\n    </template>\n  </div>\n</template>\n\n<style scoped>\n.stack-trace-container {\n  font-family: monospace;\n  white-space: pre-wrap;\n}\n\n.st-frame {\n  color: #00729c;\n}\n\n.st-type {\n  color: #a11;\n}\n\n.st-method {\n  color: #164;\n}\n\n.st-file {\n  color: #c67b3d;\n}\n\n.st-line {\n  color: #6c757d;\n}\n\n.st-param-type {\n  font-style: italic;\n  color: #6b82ce;\n}\n\n.st-param-name {\n  font-weight: bold;\n  color: #343a40;\n}\n\n.st-frame-params {\n  color: #495057;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport LoadingSpinner from \"@/components/LoadingSpinner.vue\";\nimport { storeToRefs } from \"pinia\";\nimport StacktraceFormatter from \"@/components/messages/StacktraceFormatter.vue\";\nimport CopyToClipboard from \"@/components/CopyToClipboard.vue\";\n\nconst { state } = storeToRefs(useMessageStore());\n</script>\n\n<template>\n  <div v-if=\"state.failed_to_load\" class=\"alert alert-info\">Stacktrace not available.</div>\n  <LoadingSpinner v-else-if=\"state.loading\" />\n  <div v-else class=\"wrapper\">\n    <div class=\"toolbar\">\n      <CopyToClipboard class=\"clipboard\" :value=\"state.data.failure_metadata.exception?.stack_trace!\" />\n    </div>\n    <StacktraceFormatter :stack-trace=\"state.data.failure_metadata.exception?.stack_trace!\" />\n  </div>\n</template>\n\n<style scoped>\n.toolbar {\n  background-color: #f3f3f3;\n  border: #8c8c8c 1px solid;\n  border-radius: 3px;\n  padding: 5px;\n  margin-bottom: 0.5rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n}\n\n.wrapper {\n  margin-top: 5px;\n  margin-bottom: 15px;\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  background: white;\n}\n</style>\n","<script setup lang=\"ts\">\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport ActionButton from \"@/components/ActionButton.vue\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport { computed, ref } from \"vue\";\nimport { showToastAfterOperation } from \"@/composables/toast\";\nimport { TYPE } from \"vue-toastification\";\nimport { MessageStatus } from \"@/resources/Message\";\nimport { storeToRefs } from \"pinia\";\nimport { FailedMessageStatus } from \"@/resources/FailedMessage\";\nimport { faTrash } from \"@fortawesome/free-solid-svg-icons\";\n\nconst store = useMessageStore();\nconst { state } = storeToRefs(store);\nconst isConfirmDialogVisible = ref(false);\n\nconst failureStatus = computed(() => state.value.data.failure_status);\nconst isDisabled = computed(() => failureStatus.value.retried || failureStatus.value.resolved);\nconst isVisible = computed(() => !failureStatus.value.archived && state.value.data.status !== MessageStatus.Successful && state.value.data.status !== MessageStatus.ResolvedSuccessfully);\n\nconst handleConfirm = async () => {\n  isConfirmDialogVisible.value = false;\n\n  const message = `Deleting the message ${state.value.data.id} ...`;\n  await showToastAfterOperation(store.archiveMessage, TYPE.INFO, \"Info\", message);\n\n  await store.pollForNextUpdate(FailedMessageStatus.Archived);\n};\n</script>\n\n<template>\n  <template v-if=\"isVisible\">\n    <ActionButton :icon=\"faTrash\" :disabled=\"isDisabled\" @click=\"isConfirmDialogVisible = true\">Delete message</ActionButton>\n    <Teleport to=\"#modalDisplay\">\n      <ConfirmDialog\n        v-if=\"isConfirmDialogVisible\"\n        @cancel=\"isConfirmDialogVisible = false\"\n        @confirm=\"handleConfirm\"\n        heading=\"Are you sure you want to delete this message?\"\n        body=\"If it is deleted, this message won't be available for retrying unless it is later restored.\"\n      />\n    </Teleport>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport ActionButton from \"@/components/ActionButton.vue\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport { computed, ref } from \"vue\";\nimport { showToastAfterOperation } from \"@/composables/toast\";\nimport { TYPE } from \"vue-toastification\";\nimport { storeToRefs } from \"pinia\";\nimport { FailedMessageStatus } from \"@/resources/FailedMessage\";\nimport { faUndo } from \"@fortawesome/free-solid-svg-icons\";\n\nconst store = useMessageStore();\nconst { state } = storeToRefs(store);\nconst isConfirmDialogVisible = ref(false);\n\nconst isVisible = computed(() => state.value.data.failure_status.archived);\n\nconst handleConfirm = async () => {\n  isConfirmDialogVisible.value = false;\n\n  const message = `Restoring the message ${state.value.data.id} ...`;\n  await showToastAfterOperation(store.restoreMessage, TYPE.INFO, \"Info\", message);\n\n  await store.pollForNextUpdate(FailedMessageStatus.Unresolved);\n};\n</script>\n\n<template>\n  <template v-if=\"isVisible\">\n    <ActionButton :icon=\"faUndo\" @click=\"isConfirmDialogVisible = true\">Restore</ActionButton>\n    <Teleport to=\"#modalDisplay\">\n      <ConfirmDialog\n        v-if=\"isConfirmDialogVisible\"\n        @cancel=\"isConfirmDialogVisible = false\"\n        @confirm=\"handleConfirm\"\n        heading=\"Are you sure you want to restore this message?\"\n        body=\"The restored message will be moved back to the list of failed messages.\"\n      />\n    </Teleport>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport ActionButton from \"@/components/ActionButton.vue\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport { computed, ref } from \"vue\";\nimport { showToastAfterOperation } from \"@/composables/toast\";\nimport { TYPE } from \"vue-toastification\";\nimport { MessageStatus } from \"@/resources/Message\";\nimport { storeToRefs } from \"pinia\";\nimport { FailedMessageStatus } from \"@/resources/FailedMessage\";\nimport { faRefresh } from \"@fortawesome/free-solid-svg-icons\";\n\nconst store = useMessageStore();\nconst { state } = storeToRefs(store);\nconst isConfirmDialogVisible = ref(false);\n\nconst failureStatus = computed(() => state.value.data.failure_status);\nconst isDisabled = computed(() => failureStatus.value.retried || failureStatus.value.archived || failureStatus.value.resolved);\nconst isVisible = computed(() => state.value.data.status !== MessageStatus.Successful && state.value.data.status !== MessageStatus.ResolvedSuccessfully);\n\nconst handleConfirm = async () => {\n  isConfirmDialogVisible.value = false;\n\n  const message = `Retrying the message ${state.value.data.id} ...`;\n  await showToastAfterOperation(store.retryMessage, TYPE.INFO, \"Info\", message);\n\n  await store.pollForNextUpdate(FailedMessageStatus.Resolved);\n};\n</script>\n\n<template>\n  <template v-if=\"isVisible\">\n    <ActionButton :icon=\"faRefresh\" :disabled=\"isDisabled\" @click=\"isConfirmDialogVisible = true\">Retry message</ActionButton>\n    <Teleport to=\"#modalDisplay\">\n      <ConfirmDialog v-if=\"isConfirmDialogVisible\" @cancel=\"isConfirmDialogVisible = false\" @confirm=\"handleConfirm\" heading=\"Retry Message\" body=\"Are you sure you want to retry this message?\" />\n    </Teleport>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from \"vue\";\nimport FAIcon from \"@/components/FAIcon.vue\";\nimport { faExclamationTriangle, faLock, faPencil, faTrash, faUndo } from \"@fortawesome/free-solid-svg-icons\";\n\ninterface MessageHeader {\n  key: string;\n  value?: string;\n  isChanged: boolean;\n  isMarkedAsRemoved: boolean;\n  isLocked: boolean;\n  isSensitive: boolean;\n}\n\nconst settings = defineProps<{\n  header: MessageHeader;\n}>();\n\nlet origHeaderValue: string | undefined;\nconst header = ref<MessageHeader>(settings.header);\n\nconst headerValue = computed(() => settings.header.value);\nwatch(headerValue, (newValue) => {\n  header.value.isChanged = newValue !== origHeaderValue;\n});\n\nfunction resetHeaderChanges() {\n  header.value.value = origHeaderValue;\n  header.value.isMarkedAsRemoved = false;\n  header.value.isChanged = false;\n}\n\nfunction markHeaderAsRemoved() {\n  header.value.isMarkedAsRemoved = true;\n  header.value.isChanged = true;\n}\n\nonMounted(() => {\n  origHeaderValue = settings.header.value;\n});\n</script>\n\n<template>\n  <td nowrap=\"nowrap\">\n    <span :class=\"{ 'header-removed': header.isMarkedAsRemoved }\">{{ settings.header.key }}</span>\n    <FAIcon v-if=\"header.isLocked\" :icon=\"faLock\" class=\"icon\" v-tippy=\"`Protected system header`\" />\n    <FAIcon\n      v-if=\"(header.isChanged || header.isMarkedAsRemoved) && header.isSensitive\"\n      :icon=\"faExclamationTriangle\"\n      class=\"icon warning\"\n      size=\"lg\"\n      v-tippy=\"`This is a sensitive message header that if changed can the system behavior. Proceed with caution.`\"\n    />\n    <FAIcon v-if=\"header.isChanged\" :icon=\"faPencil\" class=\"icon edit\" v-tippy=\"`Edited`\" />\n  </td>\n  <td>\n    <input :class=\"{ 'header-removed': header.isMarkedAsRemoved }\" class=\"form-control\" :disabled=\"header.isLocked\" v-model=\"header.value\" />\n  </td>\n  <td>\n    <div class=\"actions\">\n      <a v-if=\"!header.isLocked && !header.isMarkedAsRemoved\" @click=\"markHeaderAsRemoved()\">\n        <FAIcon :icon=\"faTrash\" class=\"remove\" v-tippy=\"`Remove header`\" />\n      </a>\n      <a v-if=\"header.isChanged\" @click=\"resetHeaderChanges()\">\n        <FAIcon :icon=\"faUndo\" class=\"undo\" v-tippy=\"`Reset changes`\" />\n      </a>\n    </div>\n  </td>\n</template>\n\n<style scoped>\nspan.header-removed {\n  text-decoration: line-through 2px solid #ce4844;\n}\n\ninput.header-removed {\n  opacity: 0.3;\n  pointer-events: none;\n}\n\ntd[nowrap=\"nowrap\"] {\n  font-weight: bold;\n}\n\ntd:first-child {\n  padding-top: 15px;\n  padding-left: 0;\n  width: 30%;\n}\n\ntd:first-child .warning {\n  color: #ff9000;\n}\n\ntd:first-child .edit {\n  color: #8543e9;\n  font-size: 1.1em;\n}\n\ntd:nth-child(3) {\n  width: 60px;\n  padding: 12px 0 0 10px;\n}\n\ntd:nth-child(3) a {\n  font-size: 18px;\n}\n\ntd:nth-child(3) a:hover {\n  cursor: pointer;\n}\n\ntd:nth-child(3) .remove {\n  color: #555;\n}\n\ntd:nth-child(3) .undo {\n  color: var(--sp-blue);\n}\n\ntd:nth-child(3) i.fa:hover {\n  opacity: 0.8;\n}\n\n.actions {\n  display: flex;\n  gap: 10px;\n}\n\n.icon {\n  color: var(--reduced-emphasis);\n  margin-left: 6px;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from \"vue\";\nimport MessageHeader from \"./EditMessageHeader.vue\";\nimport type Header from \"@/resources/Header\";\nimport parseContentType from \"@/composables/contentTypeParser\";\nimport { CodeLanguage } from \"@/components/codeEditorTypes\";\nimport CodeEditor from \"@/components/CodeEditor.vue\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport { storeToRefs } from \"pinia\";\nimport LoadingSpinner from \"@/components/LoadingSpinner.vue\";\nimport FAIcon from \"@/components/FAIcon.vue\";\nimport { faExclamationCircle, faExclamationTriangle, faUndo } from \"@fortawesome/free-solid-svg-icons\";\nimport { HeaderWithEditing } from \"@/resources/EditMessage\";\nimport { useDebounceFn } from \"@vueuse/core\";\n\nconst emit = defineEmits<{\n  cancel: [];\n  confirm: [];\n}>();\n\ninterface LocalMessageState {\n  isBodyChanged: boolean;\n  isBodyEmpty: boolean;\n  isContentTypeSupported: boolean;\n  language?: CodeLanguage;\n  bodyContentType: string | undefined;\n  bodyUnavailable: boolean;\n  isEvent: boolean;\n  retried: boolean;\n  headers: HeaderWithEditing[];\n  messageBody: string;\n}\n\nconst panel = ref(0);\nconst localMessage = ref<LocalMessageState>({\n  isBodyChanged: false,\n  isBodyEmpty: false,\n  isContentTypeSupported: false,\n  bodyContentType: undefined,\n  bodyUnavailable: false,\n  isEvent: false,\n  retried: false,\n  headers: [],\n  messageBody: \"\",\n});\nconst showEditAndRetryConfirmation = ref(false);\nconst showCancelConfirmation = ref(false);\nconst showEditRetryGenericError = ref(false);\nconst messageStore = useMessageStore();\nconst { state, headers, body, edit_and_retry_config } = storeToRefs(messageStore);\n\nconst id = computed(() => state.value.data.id ?? \"\");\nconst uneditedMessageBody = computed(() => body.value.data.value ?? \"\");\nconst regExToPruneLineEndings = new RegExp(/[\\n\\r]*/, \"g\");\nconst debounceBodyUpdate = useDebounceFn((value: string) => {\n  const newValue = value.replaceAll(regExToPruneLineEndings, \"\");\n  localMessage.value.isBodyChanged = newValue !== uneditedMessageBody.value.replaceAll(regExToPruneLineEndings, \"\");\n  localMessage.value.isBodyEmpty = newValue === \"\";\n}, 100);\n\nwatch(\n  () => localMessage.value.messageBody,\n  (newValue) => {\n    debounceBodyUpdate(newValue);\n  }\n);\n\nfunction close() {\n  emit(\"cancel\");\n}\n\nfunction confirmEditAndRetry() {\n  showEditAndRetryConfirmation.value = true;\n}\n\nfunction confirmCancel() {\n  if (localMessage.value.isBodyChanged) {\n    showCancelConfirmation.value = true;\n    return;\n  }\n\n  if (localMessage.value.headers.some((header: HeaderWithEditing) => header.isChanged)) {\n    showCancelConfirmation.value = true;\n    return;\n  }\n\n  close();\n}\n\nfunction resetBodyChanges() {\n  localMessage.value.messageBody = uneditedMessageBody.value;\n  localMessage.value.isBodyChanged = false;\n}\n\nfunction removeHeadersMarkedAsRemoved() {\n  localMessage.value.headers = localMessage.value.headers.filter((header: HeaderWithEditing) => !header.isMarkedAsRemoved);\n}\n\nasync function retryEditedMessage() {\n  removeHeadersMarkedAsRemoved();\n  try {\n    await messageStore.retryEditedMessage(id.value, localMessage);\n    localMessage.value.retried = true;\n    return emit(\"confirm\");\n  } catch {\n    showEditAndRetryConfirmation.value = false;\n    showEditRetryGenericError.value = true;\n  }\n}\n\nfunction initializeMessageBodyAndHeaders() {\n  function getHeaderValue(key: string) {\n    const header = local.headers.find((header: HeaderWithEditing) => header.key === key);\n    return header?.value;\n  }\n\n  const local = <LocalMessageState>{\n    isBodyChanged: false,\n    isBodyEmpty: false,\n    isContentTypeSupported: false,\n    bodyContentType: undefined,\n    bodyUnavailable: body.value.not_found ?? false,\n    isEvent: false,\n    retried: state.value.data.failure_status.retried ?? false,\n    headers: headers.value.data.map((header: Header) => ({ ...header })) as HeaderWithEditing[],\n    messageBody: body.value.data.value ?? \"\",\n  };\n\n  const contentType = getHeaderValue(\"NServiceBus.ContentType\");\n  local.bodyContentType = contentType;\n  const parsedContentType = parseContentType(contentType);\n  local.isContentTypeSupported = parsedContentType.isSupported;\n  local.language = parsedContentType.language;\n\n  const messageIntent = getHeaderValue(\"NServiceBus.MessageIntent\");\n  local.isEvent = messageIntent === \"Publish\";\n\n  for (let index = 0; index < headers.value.data.length; index++) {\n    const header: HeaderWithEditing = headers.value.data[index] as HeaderWithEditing;\n\n    header.isLocked = false;\n    header.isSensitive = false;\n    header.isMarkedAsRemoved = false;\n    header.isChanged = false;\n\n    if (edit_and_retry_config.value.locked_headers.includes(header.key)) {\n      header.isLocked = true;\n    } else if (edit_and_retry_config.value.sensitive_headers.includes(header.key)) {\n      header.isSensitive = true;\n    }\n\n    local.headers[index] = header;\n  }\n\n  localMessage.value = local;\n}\n\nfunction togglePanel(panelNum: number) {\n  panel.value = panelNum;\n}\n\nonMounted(() => {\n  togglePanel(1);\n  initializeMessageBodyAndHeaders();\n});\n</script>\n\n<template>\n  <section name=\"failed_message_editor\">\n    <div class=\"model modal-msg-editor\" style=\"z-index: 1050; display: block\" role=\"dialog\" aria-label=\"edit and retry message\">\n      <div class=\"modal-mask\">\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <div class=\"modal-title\">\n                <h3>Edit and retry message</h3>\n              </div>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"row\">\n                <div class=\"col-sm-12\">\n                  <div class=\"row msg-editor-tabs\">\n                    <div class=\"col-sm-12 no-side-padding\">\n                      <div role=\"tablist\" class=\"tabs msg-tabs\">\n                        <h5 role=\"tab\" :class=\"{ active: panel === 1 }\" class=\"nav-item\" @click.prevent=\"togglePanel(1)\"><a href=\"#\">Headers</a></h5>\n                        <h5 role=\"tab\" :class=\"{ active: panel === 2 }\" class=\"nav-item\" @click.prevent=\"togglePanel(2)\"><a href=\"#\">Message body</a></h5>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"row msg-editor-content\">\n                    <div class=\"col-sm-12 no-side-padding\">\n                      <div class=\"alert alert-warning\" v-if=\"localMessage.isEvent\">\n                        <div class=\"col-sm-12\">\n                          <FAIcon :icon=\"faExclamationCircle\" /> This message is an event. If it was already successfully handled by other subscribers, editing it now has the risk of changing the semantic meaning of the event and may result in\n                          altering the system behavior.\n                        </div>\n                      </div>\n                      <div class=\"alert alert-warning\" v-if=\"!localMessage.isContentTypeSupported || localMessage.bodyUnavailable\">\n                        <div role=\"status\" aria-label=\"cannot edit message body\" class=\"col-sm-12\">\n                          <FAIcon :icon=\"faExclamationCircle\" /> Message body cannot be edited because content type \"{{ localMessage.bodyContentType }}\" is not supported. Only messages with content types \"application/json\" and \"text/xml\" can be\n                          edited.\n                        </div>\n                      </div>\n                      <div class=\"row alert alert-danger\" v-if=\"showEditRetryGenericError\">\n                        <div class=\"col-sm-12\"><FAIcon :icon=\"faExclamationTriangle\" class=\"error\" /> An error occurred while retrying the message, please check the ServiceControl logs for more details on the failure.</div>\n                      </div>\n                      <table role=\"tabpanel\" class=\"table\" v-if=\"panel === 1\">\n                        <tbody>\n                          <tr class=\"interactiveList\" v-for=\"header in localMessage.headers\" :key=\"header.key\">\n                            <MessageHeader :header=\"header\"></MessageHeader>\n                          </tr>\n                        </tbody>\n                      </table>\n                      <template v-if=\"panel === 2\">\n                        <div role=\"tabpanel\" v-if=\"!localMessage.bodyUnavailable\">\n                          <div style=\"margin-top: 1.25rem\">\n                            <LoadingSpinner v-if=\"body.loading\" />\n                            <CodeEditor v-else aria-label=\"message body\" :read-only=\"!localMessage.isContentTypeSupported\" v-model=\"localMessage.messageBody\" :language=\"localMessage.language\" :show-gutter=\"true\">\n                              <template #toolbarLeft>\n                                <span class=\"empty-error\" v-if=\"localMessage.isBodyEmpty\"><FAIcon :icon=\"faExclamationTriangle\" class=\"error\" /> Message body cannot be empty</span>\n                              </template>\n                              <template #toolbarRight>\n                                <button v-if=\"localMessage.isBodyChanged\" type=\"button\" class=\"btn btn-secondary btn-sm\" @click=\"resetBodyChanges\"><FAIcon :icon=\"faUndo\" /> Reset changes</button>\n                              </template>\n                            </CodeEditor>\n                          </div>\n                        </div>\n                        <div role=\"tabpanel\" class=\"alert alert-info\" v-else>{{ localMessage.bodyUnavailable }}</div>\n                      </template>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\" v-if=\"!showEditAndRetryConfirmation && !showCancelConfirmation\">\n              <button class=\"btn btn-default\" @click=\"confirmCancel()\">Cancel</button>\n              <button class=\"btn btn-primary\" :disabled=\"localMessage.isBodyEmpty || localMessage.bodyUnavailable\" @click=\"confirmEditAndRetry()\">Retry</button>\n            </div>\n            <div class=\"modal-footer cancel-confirmation\" v-if=\"showCancelConfirmation\">\n              <div>Are you sure you want to cancel? Any changes you made will be lost.</div>\n              <button class=\"btn btn-default\" @click=\"close()\">Yes</button>\n              <button class=\"btn btn-primary\" @click=\"showCancelConfirmation = false\">No</button>\n            </div>\n            <div class=\"modal-footer edit-retry-confirmation\" v-if=\"showEditAndRetryConfirmation\">\n              <div>Are you sure you want to continue? If you edited the message, it may cause unexpected consequences in the system.</div>\n              <button class=\"btn btn-default\" @click=\"retryEditedMessage()\">Yes</button>\n              <button class=\"btn btn-primary\" @click=\"showEditAndRetryConfirmation = false\">No</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n@import \"@/components/modal.css\";\n\n.cancel-confirmation,\n.edit-retry-confirmation {\n  background: #181919;\n  color: #fff;\n  border-bottom-right-radius: 6px;\n  border-bottom-left-radius: 6px;\n}\n\n.cancel-confirmation div,\n.edit-retry-confirmation div {\n  display: inline-block;\n  font-weight: bold;\n  font-size: 14px;\n  position: relative;\n  top: 1px;\n  margin-right: 20px;\n}\n\n.modal-msg-editor .reset-body a:hover {\n  cursor: pointer;\n}\n\n.modal-msg-editor .empty-error {\n  color: #ce4844;\n  font-weight: bold;\n}\n\n.modal-msg-editor .empty-error .error {\n  color: #ce4844;\n}\n\n.modal-msg-editor .row.alert.alert-danger .error {\n  color: #ce4844;\n}\n\n.modal-msg-editor .modal-dialog {\n  width: 70%;\n}\n\n.modal-msg-editor .modal-body {\n  overflow-y: auto;\n  height: 80vh;\n}\n\n.modal-msg-editor .msg-tabs {\n  margin-top: 20px;\n}\n\n.modal-msg-editor .row.msg-editor-tabs {\n  height: 52px;\n  position: relative;\n  box-shadow: -10px 20px 20px #fff;\n  z-index: 10;\n}\n\n.modal-msg-editor .row.msg-editor-content table {\n  margin-top: 20px;\n}\n\n.modal-msg-editor .row,\n.modal-msg-editor .col-sm-12 {\n  height: 100%;\n}\n\n.modal-msg-editor .row.msg-editor-content {\n  height: calc(100% - 37px);\n  overflow-y: auto;\n  padding-right: 15px;\n}\n</style>\n","<script setup lang=\"ts\">\nconst emit = defineEmits<{\n  close: [];\n}>();\n\nfunction closeDialog() {\n  emit(\"close\");\n}\n</script>\n\n<template>\n  <section name=\"edit_ignored_dialog\">\n    <div class=\"modal\" style=\"z-index: 1050; display: block\" role=\"dialog\" aria-label=\"edit ignored\">\n      <div class=\"modal-mask\">\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <div class=\"modal-title\">\n                <h3>Edit Ignored</h3>\n              </div>\n            </div>\n            <div class=\"modal-body\">\n              <p>This retry was ignored because another edit had already been processed.</p>\n            </div>\n            <div class=\"modal-footer\">\n              <button class=\"btn btn-primary\" @click=\"closeDialog()\">Ok</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n@import \"@/components/modal.css\";\n</style>\n","<script setup lang=\"ts\">\nimport ActionButton from \"@/components/ActionButton.vue\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport { computed, ref } from \"vue\";\nimport { useShowToast } from \"@/composables/toast\";\nimport { TYPE } from \"vue-toastification\";\nimport EditRetryDialog from \"@/components/failedmessages/EditRetryDialog.vue\";\nimport EditIgnoredDialog from \"@/components/failedmessages/EditIgnoredDialog.vue\";\nimport { MessageStatus } from \"@/resources/Message\";\nimport { storeToRefs } from \"pinia\";\nimport { FailedMessageStatus } from \"@/resources/FailedMessage\";\nimport { faPencil } from \"@fortawesome/free-solid-svg-icons\";\n\nconst store = useMessageStore();\nconst { state, edit_and_retry_config, editRetryResponse } = storeToRefs(store);\nconst isConfirmDialogVisible = ref(false);\nconst isEditIgnoredDialogVisible = ref(false);\n\nconst failureStatus = computed(() => state.value.data.failure_status);\nconst isDisabled = computed(() => failureStatus.value.retried || failureStatus.value.archived || failureStatus.value.resolved);\nconst isVisible = computed(() => edit_and_retry_config.value.enabled && state.value.data.status !== MessageStatus.Successful && state.value.data.status !== MessageStatus.ResolvedSuccessfully);\n\nconst handleIgnoreClose = async () => {\n  isEditIgnoredDialogVisible.value = false;\n  await store.pollForNextUpdate(FailedMessageStatus.Resolved);\n};\n\nconst handleConfirm = async () => {\n  isConfirmDialogVisible.value = false;\n\n  if (editRetryResponse.value?.edit_ignored) {\n    isEditIgnoredDialogVisible.value = true;\n  } else {\n    const message = `Retrying the edited message ${state.value.data.id} ...`;\n    useShowToast(TYPE.INFO, \"Info\", message);\n    await store.pollForNextUpdate(FailedMessageStatus.Resolved);\n  }\n};\n\nasync function openDialog() {\n  await store.downloadBody();\n  isConfirmDialogVisible.value = true;\n}\n</script>\n\n<template>\n  <template v-if=\"isVisible\">\n    <ActionButton :icon=\"faPencil\" aria-label=\"Edit & retry\" :disabled=\"isDisabled\" @click=\"openDialog\">Edit & retry</ActionButton>\n    <Teleport to=\"#modalDisplay\">\n      <EditRetryDialog v-if=\"isConfirmDialogVisible\" @cancel=\"isConfirmDialogVisible = false\" @confirm=\"handleConfirm\"></EditRetryDialog>\n      <EditIgnoredDialog v-if=\"isEditIgnoredDialogVisible\" @close=\"handleIgnoreClose\"></EditIgnoredDialog>\n    </Teleport>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport ActionButton from \"@/components/ActionButton.vue\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport { downloadFileFromString } from \"@/composables/fileDownloadCreator\";\nimport { showToastAfterOperation } from \"@/composables/toast\";\nimport { TYPE } from \"vue-toastification\";\nimport { ref } from \"vue\";\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\n\nconst store = useMessageStore();\nconst executing = ref(false);\n\nasync function exportMessage() {\n  executing.value = true;\n  await showToastAfterOperation(\n    async () => {\n      const exportedString = await store.exportMessage();\n      downloadFileFromString(exportedString, \"text/txt\", \"message.txt\");\n    },\n    TYPE.INFO,\n    \"Info\",\n    \"Message export completed.\"\n  );\n  executing.value = false;\n}\n</script>\n\n<template>\n  <ActionButton :icon=\"faDownload\" :loading=\"executing\" @click=\"exportMessage\">Export message</ActionButton>\n</template>\n","<script setup lang=\"ts\">\nimport { ref, type Component, type DefineComponent, shallowRef, watch } from \"vue\";\n\ninterface Tab {\n  text: string;\n  component: Component | DefineComponent;\n}\n\nconst props = defineProps<{ tabs: Tab[] }>();\nconst activePanel = ref(props.tabs[0].text);\nconst activeComponent = shallowRef(props.tabs[0].component);\n\nfunction togglePanel(panel: string) {\n  activePanel.value = panel;\n  activeComponent.value = props.tabs.find((value) => value.text === panel)!.component;\n}\n\nwatch(\n  () => props.tabs,\n  (newTabs) => {\n    // Reset selected tab to first one if the previous selected tab no longer exists\n    if (!newTabs.find((value) => value.text === activePanel.value)) {\n      togglePanel(newTabs[0].text);\n    }\n  }\n);\n</script>\n\n<template>\n  <div class=\"nav tabs msg-tabs\">\n    <h5 :class=\"{ active: activePanel === tab.text }\" class=\"nav-item\" @click.prevent=\"togglePanel(tab.text)\" v-for=\"tab in props.tabs\" :key=\"tab.text\">\n      <a href=\"#\">{{ tab.text }}</a>\n    </h5>\n  </div>\n  <keep-alive>\n    <component v-bind:is=\"activeComponent\"></component>\n  </keep-alive>\n</template>\n\n<style scoped></style>\n","<script setup lang=\"ts\">\nconst props = defineProps<{ tooltip: string; type: \"info\" | \"warning\" | \"important\"; text: string }>();\n</script>\n<template>\n  <span v-tippy=\"props.tooltip\" class=\"label sidebar-label metadata-label\" :class=\"`label-${props.type}`\">{{ props.text }}</span>\n</template>\n","import { acceptHMRUpdate, defineStore } from \"pinia\";\nimport { ref, watch } from \"vue\";\nimport { SagaHistory, SagaMessage } from \"@/resources/SagaHistory\";\nimport Message from \"@/resources/Message\";\nimport { parse, stringify } from \"lossless-json\";\nimport xmlFormat from \"xml-formatter\";\nimport { DataContainer } from \"./DataContainer\";\nimport { useMessageStore } from \"./MessageStore\";\nimport { useServiceControlStore } from \"./ServiceControlStore\";\n\nexport interface SagaMessageData {\n  message_id: string;\n  body: DataContainer<{ value?: string; content_type?: string; no_content?: boolean }>;\n}\nexport const useSagaDiagramStore = defineStore(\"SagaDiagramStore\", () => {\n  const sagaHistory = ref<SagaHistory | null>(null);\n  const sagaId = ref<string | null>(null);\n  const loading = ref(false);\n  const messageDataLoading = ref(false);\n  const error = ref<string | null>(null);\n  const showMessageData = ref(false);\n  const fetchedMessages = ref(new Set<string>());\n  const messagesData = ref<SagaMessageData[]>([]);\n  const selectedMessageId = ref<string | null>(null);\n  const scrollToTimeoutRequest = ref(false);\n  const scrollToTimeout = ref(false);\n  const MessageBodyEndpoint = \"messages/{0}/body\";\n  const messageStore = useMessageStore();\n  const serviceControlStore = useServiceControlStore();\n\n  watch(\n    () => messageStore.state.data.message_id,\n    (newMessageId) => {\n      if (newMessageId) {\n        setSelectedMessageId(newMessageId);\n      }\n    },\n    { immediate: true }\n  );\n\n  // Watch the sagaId and fetch saga history when it changes\n  watch(sagaId, async (newSagaId) => {\n    if (newSagaId) {\n      await fetchSagaHistory(newSagaId);\n    } else {\n      clearSagaHistory();\n    }\n  });\n\n  // Watch both showMessageData and sagaHistory together\n  watch([showMessageData, sagaHistory], async ([show, history]) => {\n    if (show && history) {\n      await fetchMessagesData(history);\n    }\n  });\n\n  function setSagaId(id: string | null) {\n    sagaId.value = id;\n  }\n\n  async function fetchSagaHistory(id: string) {\n    if (!id) return;\n\n    loading.value = true;\n    error.value = null;\n\n    try {\n      const response = await serviceControlStore.fetchFromServiceControl(`sagas/${id}`);\n\n      if (response.status === 404) {\n        sagaHistory.value = null;\n        error.value = \"Saga history not found\";\n      } else if (!response.ok) {\n        sagaHistory.value = null;\n        error.value = \"Failed to fetch saga history\";\n      } else {\n        const data = await response.json();\n        sagaHistory.value = data;\n      }\n    } catch (e) {\n      error.value = e instanceof Error ? e.message : \"Unknown error occurred\";\n      sagaHistory.value = null;\n    } finally {\n      loading.value = false;\n    }\n  }\n\n  async function fetchSagaMessageData(message: SagaMessage): Promise<SagaMessageData> {\n    const bodyUrl = (message.body_url ?? formatUrl(MessageBodyEndpoint, message.message_id)).replace(/^\\//, \"\");\n    const result: SagaMessageData = {\n      message_id: message.message_id,\n      body: { data: {} },\n    };\n\n    result.body.loading = true;\n    result.body.failed_to_load = false;\n\n    try {\n      const response = await serviceControlStore.fetchFromServiceControl(bodyUrl);\n      if (response.status === 404) {\n        result.body.not_found = true;\n        return result;\n      }\n\n      if (response.status === 204) {\n        result.body.data.no_content = true;\n        return result;\n      }\n\n      const contentType = response.headers.get(\"content-type\");\n      result.body.data.content_type = contentType ?? \"text/plain\";\n      result.body.data.value = await response.text();\n\n      if (contentType === \"application/json\" && result.body.data.value) {\n        // Only format non-empty JSON objects\n        result.body.data.value = result.body.data.value !== \"{}\" ? (stringify(parse(result.body.data.value), null, 2) ?? result.body.data.value) : \"\";\n      } else if (contentType === \"text/xml\" && result.body.data.value) {\n        // Format XML if it has content in the root element\n        const xmlRootElement = getContentOfXmlRootElement(result.body.data.value);\n        result.body.data.value = xmlRootElement ? xmlFormat(result.body.data.value, { indentation: \"  \", collapseContent: true }) : \"\";\n      }\n    } catch {\n      result.body.failed_to_load = true;\n    } finally {\n      result.body.loading = false;\n    }\n\n    return result;\n  }\n\n  function getContentOfXmlRootElement(xml: string): string {\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(xml, \"text/xml\");\n    const rootElement = doc.documentElement;\n    if (rootElement) {\n      const rootElementText = rootElement.textContent;\n      if (rootElementText) {\n        return rootElementText;\n      }\n    }\n    return \"\";\n  }\n\n  async function getAuditMessages(sagaId: string) {\n    try {\n      const response = await serviceControlStore.fetchFromServiceControl(`messages/search?q=${sagaId}`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error(\"Error fetching audit messages:\", error);\n      return { result: [] };\n    }\n  }\n\n  function clearSagaHistory() {\n    sagaHistory.value = null;\n    sagaId.value = null;\n    error.value = null;\n    fetchedMessages.value.clear();\n    messagesData.value = [];\n    selectedMessageId.value = null;\n    scrollToTimeoutRequest.value = false;\n  }\n\n  function formatUrl(template: string, id: string): string {\n    return template.replace(\"{0}\", id);\n  }\n\n  function toggleMessageData() {\n    showMessageData.value = !showMessageData.value;\n  }\n\n  async function fetchMessagesData(history: SagaHistory) {\n    messageDataLoading.value = true;\n    error.value = null;\n\n    try {\n      // Get all messages from changes array - both initiating and outgoing\n      const messagesToFetch = history.changes.flatMap((change) => {\n        const messages: SagaMessage[] = [];\n\n        // Add initiating message if it exists and hasn't been fetched\n        if (change.initiating_message && !fetchedMessages.value.has(change.initiating_message.message_id)) {\n          messages.push(change.initiating_message);\n        }\n\n        // Add all unfetched outgoing messages\n        if (change.outgoing_messages) {\n          messages.push(...change.outgoing_messages.filter((msg) => !fetchedMessages.value.has(msg.message_id)));\n        }\n        return messages;\n      });\n\n      // Check if any messages need body_url\n      const needsBodyUrl = messagesToFetch.every((msg) => !msg.body_url);\n      if (needsBodyUrl && messagesToFetch.length > 0) {\n        const auditMessages = await getAuditMessages(sagaId.value!);\n        messagesToFetch.forEach((message) => {\n          const auditMessage = auditMessages.find((x: Message) => x.message_id === message.message_id);\n          if (auditMessage) {\n            message.body_url = auditMessage.body_url;\n          }\n        });\n      }\n\n      // Fetch data for each unfetched message in parallel and store results\n      const fetchPromises = messagesToFetch.map(async (message) => {\n        const data = await fetchSagaMessageData(message);\n        fetchedMessages.value.add(message.message_id);\n        return data;\n      });\n\n      const newMessageData = await Promise.all(fetchPromises);\n      // Add new message data to the existing array\n      messagesData.value = [...messagesData.value, ...newMessageData];\n    } catch (e) {\n      error.value = e instanceof Error ? e.message : \"Unknown error occurred\";\n    } finally {\n      messageDataLoading.value = false;\n    }\n  }\n\n  function setSelectedMessageId(messageId: string | null) {\n    selectedMessageId.value = messageId;\n  }\n\n  return {\n    sagaHistory,\n    sagaId,\n    loading,\n    messageDataLoading,\n    error,\n    showMessageData,\n    messagesData,\n    selectedMessageId,\n    scrollToTimeoutRequest,\n    scrollToTimeout,\n    setSagaId,\n    clearSagaHistory,\n    toggleMessageData,\n    setSelectedMessageId,\n  };\n});\n\nif (import.meta.hot) {\n  import.meta.hot.accept(acceptHMRUpdate(useSagaDiagramStore, import.meta.hot));\n}\n\nexport type SagaDiagramStore = ReturnType<typeof useSagaDiagramStore>;\n","export function typeToName(type: string | null | undefined): string | null {\n  if (!type) {\n    return null;\n  }\n\n  const className = type.split(\",\")[0];\n  let objectName = className.split(\".\").pop() || \"\";\n  objectName = objectName.replace(/\\+/g, \".\");\n\n  return objectName;\n}\n","export function parseDeliveryDelay(delay: string): { days: number; hours: number; minutes: number; seconds: number } {\n  // Split on period first to handle multi-digit days\n  const parts = delay.split(\".\");\n  let days = 0;\n  let timeComponent = delay;\n\n  if (parts.length > 1) {\n    days = parseInt(parts[0], 10);\n    timeComponent = parts[1];\n  }\n\n  const [hours, minutes, seconds] = timeComponent.split(\":\").map(Number);\n  return { days, hours, minutes, seconds };\n}\n\nfunction getFriendly(time: number, text: string): string {\n  return time > 0 ? `${time}${text}` : \"\";\n}\n\nexport function getTimeoutFriendly(delivery_delay: string): string {\n  const { days, hours, minutes, seconds } = parseDeliveryDelay(delivery_delay);\n\n  return `${getFriendly(days, \"d\")}${getFriendly(hours, \"h\")}${getFriendly(minutes, \"m\")}${getFriendly(seconds, \"s\")}`;\n}\n","import { SagaHistory } from \"@/resources/SagaHistory\";\nimport { typeToName } from \"@/composables/typeHumanizer\";\nimport { SagaMessageData } from \"@/stores/SagaDiagramStore\";\nimport { getTimeoutFriendly } from \"@/composables/deliveryDelayParser\";\n\nexport interface SagaMessageViewModel {\n  MessageId: string;\n  FriendlyTypeName: string;\n  FormattedTimeSent: string;\n  Data: SagaMessageData;\n  IsEventMessage: boolean;\n  IsCommandMessage: boolean;\n}\nexport interface InitiatingMessageViewModel {\n  FriendlyTypeName: string;\n  IsSagaTimeoutMessage: boolean;\n  FormattedMessageTimestamp: string;\n  IsEventMessage: boolean;\n  MessageData: SagaMessageData;\n  HasRelatedTimeoutRequest?: boolean;\n  MessageId: string;\n}\nexport interface SagaTimeoutMessageViewModel extends SagaMessageViewModel {\n  TimeoutFriendly: string;\n  HasBeenProcessed: boolean;\n}\n\nexport interface SagaUpdateViewModel {\n  MessageId: string;\n  StartTime: Date;\n  FinishTime: Date;\n  FormattedStartTime: string;\n  InitiatingMessage: InitiatingMessageViewModel;\n  Status: string;\n  StatusDisplay: string;\n  HasTimeout: boolean;\n  IsFirstNode: boolean;\n  OutgoingMessages: SagaMessageViewModel[];\n  OutgoingTimeoutMessages: SagaTimeoutMessageViewModel[];\n  HasOutgoingMessages: boolean;\n  HasOutgoingTimeoutMessages: boolean;\n  showUpdatedPropertiesOnly: boolean;\n  stateAfterChange: string;\n  previousStateAfterChange?: string;\n}\n\nexport interface SagaViewModel {\n  SagaTitle: string;\n  SagaGuid: string;\n  ParticipatedInSaga: boolean;\n  HasSagaData: boolean;\n  ShowNoPluginActiveLegend: boolean;\n  SagaCompleted: boolean;\n  FormattedCompletionTime: string;\n  SagaUpdates: SagaUpdateViewModel[];\n  ShowMessageData: boolean;\n}\n\nexport function parseSagaUpdates(sagaHistory: SagaHistory | null, messagesData: SagaMessageData[]): SagaUpdateViewModel[] {\n  if (!sagaHistory || !sagaHistory.changes || !sagaHistory.changes.length) return [];\n\n  const timeoutMessageIds = new Set<string>();\n  sagaHistory.changes.forEach((update) => {\n    if (update.outgoing_messages) {\n      update.outgoing_messages.forEach((msg) => {\n        const delivery_delay = msg.delivery_delay || \"00:00:00\";\n        if (delivery_delay && delivery_delay !== \"00:00:00\") {\n          timeoutMessageIds.add(msg.message_id);\n        }\n      });\n    }\n  });\n\n  const updates = sagaHistory.changes\n    .map((update) => {\n      const startTime = new Date(update.start_time);\n      const finishTime = new Date(update.finish_time);\n      const initiatingMessageTimestamp = new Date(update.initiating_message?.time_sent || Date.now());\n\n      // Find message data for initiating message\n      const initiatingMessageData = update.initiating_message ? findMessageData(messagesData, update.initiating_message.message_id) : createEmptyMessageData();\n\n      // Create common base message objects with shared properties\n      const outgoingMessages = update.outgoing_messages.map((msg) => {\n        const delivery_delay = msg.delivery_delay || \"00:00:00\";\n        const timeSent = new Date(msg.time_sent);\n        const hasTimeout = !!delivery_delay && delivery_delay !== \"00:00:00\";\n        const timeoutSeconds = delivery_delay.split(\":\")[2] || \"0\";\n        const isEventMessage = msg.intent === \"Publish\";\n\n        // Find corresponding message data\n        const messageData = findMessageData(messagesData, msg.message_id);\n        return {\n          MessageType: msg.message_type || \"\",\n          MessageId: msg.message_id,\n          FormattedTimeSent: timeSent.toLocaleString(),\n          HasTimeout: hasTimeout,\n          TimeoutSeconds: timeoutSeconds,\n          TimeoutFriendly: getTimeoutFriendly(delivery_delay),\n          FriendlyTypeName: typeToName(msg.message_type || \"\"),\n          Data: messageData,\n          IsEventMessage: isEventMessage,\n          IsCommandMessage: !isEventMessage,\n        };\n      });\n\n      const outgoingTimeoutMessages = outgoingMessages\n        .filter((msg) => msg.HasTimeout)\n        .map((msg) => {\n          // Check if this timeout message has been processed by checking if there's an initiating message with matching ID\n          const hasBeenProcessed = sagaHistory.changes.some((update) => update.initiating_message?.message_id === msg.MessageId);\n\n          return {\n            ...msg,\n            TimeoutFriendly: `${msg.TimeoutFriendly}`,\n            HasBeenProcessed: hasBeenProcessed,\n          } as SagaTimeoutMessageViewModel;\n        });\n\n      const regularMessages = outgoingMessages.filter((msg) => !msg.HasTimeout) as SagaMessageViewModel[];\n\n      const hasTimeout = outgoingTimeoutMessages.length > 0;\n\n      // Check if initiating message is a timeout and if so, if it has a corresponding request in the diagram\n      const hasRelatedTimeoutRequest = update.initiating_message?.is_saga_timeout_message && timeoutMessageIds.has(update.initiating_message?.message_id);\n\n      return <SagaUpdateViewModel>{\n        MessageId: update.initiating_message?.message_id || \"\",\n        StartTime: startTime,\n        FinishTime: finishTime,\n        FormattedStartTime: startTime.toLocaleString(),\n        Status: update.status,\n        StatusDisplay: update.status === \"new\" ? \"Saga Initiated\" : \"Saga Updated\",\n        InitiatingMessage: <InitiatingMessageViewModel>{\n          FriendlyTypeName: typeToName(update.initiating_message?.message_type || \"Unknown Message\") || \"\",\n          MessageId: update.initiating_message?.message_id || \"\",\n          FormattedMessageTimestamp: initiatingMessageTimestamp.toLocaleString(),\n          MessageData: initiatingMessageData,\n          IsEventMessage: update.initiating_message?.intent === \"Publish\",\n          IsSagaTimeoutMessage: update.initiating_message?.is_saga_timeout_message || false,\n          HasRelatedTimeoutRequest: hasRelatedTimeoutRequest,\n        },\n        HasTimeout: hasTimeout,\n        IsFirstNode: update.status === \"new\",\n        OutgoingTimeoutMessages: outgoingTimeoutMessages,\n        OutgoingMessages: regularMessages,\n        HasOutgoingMessages: regularMessages.length > 0,\n        HasOutgoingTimeoutMessages: outgoingTimeoutMessages.length > 0,\n        showUpdatedPropertiesOnly: true, // Default to showing only updated properties\n        stateAfterChange: update.state_after_change || \"{}\",\n      };\n    })\n    .sort((a, b) => a.StartTime.getTime() - b.StartTime.getTime())\n    .sort((a, b) => a.FinishTime.getTime() - b.FinishTime.getTime());\n\n  // Add reference to previous state for each update except the first one\n  for (let i = 1; i < updates.length; i++) {\n    updates[i].previousStateAfterChange = updates[i - 1].stateAfterChange;\n  }\n\n  return updates;\n}\n\n// Helper function to find message data or create empty data if not found\nfunction findMessageData(messagesData: SagaMessageData[], messageId: string): SagaMessageData {\n  const messageData = messagesData.find((m) => m.message_id === messageId);\n  return messageData || createEmptyMessageData();\n}\n\n// Helper function to create an empty message data object\nfunction createEmptyMessageData(): SagaMessageData {\n  return {\n    message_id: \"\",\n    body: {\n      data: {},\n      loading: false,\n      failed_to_load: false,\n      not_found: false,\n    },\n  };\n}\n","export default \"data:image/svg+xml,%3csvg%20width='128'%20height='128'%20viewBox='0%200%20128%20128'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M44%2042.9C29.7%2037.2%2019.1%2027.3%2019.1%200h-16c0%2040.7%2020.6%2053.3%2040.9%2059.9V42.9z'%20fill='%23D3D3D3'%20fill-rule='nonzero'%20/%3e%3cpath%20d='M114.3%2097C110.1%2067.7%2093%2057.7%2075%2052.1V69c12%204.5%2020.4%2012%2023.3%2029.1l-9.4%200.2l18.5%2029.7L124%2097H114.3z'%20fill='%23D3D3D3'%20fill-rule='nonzero'%20/%3e%3cpolygon%20points='68,98%2068,0%2051,0%2051,98%2041.6,98%2059.1,128%2076.7,98'%20fill='%23E4E4E4'%20fill-rule='nonzero'%20/%3e%3c/svg%3e\"","<script setup lang=\"ts\">\nimport NoSagaIcon from \"@/assets/NoSaga.svg\";\n</script>\n\n<template>\n  <div class=\"body\">\n    <div class=\"saga-message\">\n      <div class=\"saga-message-container\">\n        <img class=\"saga-message-image\" :src=\"NoSagaIcon\" alt=\"No saga data found\" />\n        <h1 role=\"status\" aria-label=\"message-not-involved-in-saga\" class=\"saga-message-title\">This message is not part of any saga</h1>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.body {\n  display: flex;\n  flex: 1;\n  justify-content: center;\n}\n\n.saga-message {\n  display: flex;\n  align-items: center;\n}\n\n.saga-message-image {\n  display: block;\n  margin: auto;\n}\n\n.saga-message-title {\n  text-align: center;\n  margin: 0.2rem 0 0;\n  font-size: 1.5rem;\n  color: #cccccc;\n}\n</style>\n","<script setup lang=\"ts\">\nimport NoSagaIcon from \"@/assets/NoSaga.svg\";\nimport CopyToClipboard from \"@/components/CopyToClipboard.vue\";\n</script>\n\n<template>\n  <div class=\"body\" role=\"status\" aria-label=\"saga-plugin-needed\">\n    <div class=\"saga-message\">\n      <div class=\"saga-message-container\">\n        <img class=\"saga-message-image\" :src=\"NoSagaIcon\" alt=\"Saga plugin required\" />\n        <h1 class=\"saga-message-title\">Saga audit plugin needed to visualize saga</h1>\n        <div class=\"saga-message-box\">\n          <p class=\"saga-message-text\">To visualize your saga, please install the appropriate nuget package in your endpoint</p>\n          <a href=\"https://www.nuget.org/packages/NServiceBus.SagaAudit\" class=\"saga-message-link\">install-package NServiceBus.SagaAudit</a>\n          <span class=\"clippy-button\"><CopyToClipboard value=\"install-package NServiceBus.SagaAudit\" :isIconOnly=\"true\" /></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.body {\n  display: flex;\n  flex: 1;\n  justify-content: center;\n}\n\n.saga-message {\n  display: flex;\n  align-items: center;\n}\n\n.saga-message-image {\n  display: block;\n  margin: auto;\n}\n\n.saga-message-title {\n  text-align: center;\n  margin: 0.2rem 0 0;\n  font-size: 1.5rem;\n  color: #cccccc;\n}\n\n.saga-message-box {\n  margin-top: 1rem;\n  padding: 1.5rem 2rem;\n  color: #535353;\n  font-size: 1rem;\n  font-weight: 900;\n  text-align: center;\n  background-color: #e4e4e4;\n}\n\n.saga-message-text {\n  margin: 0;\n}\n\n.saga-message-link {\n  font-family: \"Courier New\", Courier, monospace;\n  color: #aaaaaa;\n}\n\n.clippy-button {\n  white-space: pre;\n}\n\n.clippy-button::before {\n  content: \"\\00a0\";\n}\n</style>\n","<script setup lang=\"ts\">\ndefineProps<{\n  sagaTitle: string;\n  sagaGuid: string;\n}>();\n</script>\n\n<template>\n  <div class=\"block\">\n    <div class=\"row row--center\">\n      <div class=\"cell cell--center\">\n        <div class=\"cell-inner cell-inner-center\">\n          <h1 aria-label=\"saga name\" class=\"main-title\">{{ sagaTitle }}</h1>\n          <div>\n            <b>guid</b> <span role=\"note\" aria-label=\"saga guid\">{{ sagaGuid }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.block {\n  /* empty block class for component structure */\n}\n\n.row {\n  display: flex;\n}\n\n.row--center {\n  justify-content: center;\n}\n\n.cell--center {\n  width: 50%;\n  background-color: #f2f2f2;\n  border: 0;\n}\n\n.cell-inner-center {\n  padding: 0.5rem;\n}\n\n.main-title {\n  margin: 0.3rem 0;\n  padding-bottom: 0.5rem;\n  border-bottom: solid 2px var(--sp-blue);\n  font-size: 1.5rem;\n}\n</style>\n","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%203V9H5V5H9V3H3ZM3%2021H9V19H5V15H3V21ZM21%203H15V5H19V9H21V3ZM15%2021H21V15H19V19H15V21Z'%20fill='currentColor'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18%206L6%2018M6%206L18%2018'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e\"","<script setup lang=\"ts\">\nimport { ref, onMounted, onBeforeUnmount } from \"vue\";\nimport CodeEditor from \"@/components/CodeEditor.vue\";\nimport DiffMaximizeIcon from \"@/assets/diff-maximize.svg\";\nimport DiffCloseIcon from \"@/assets/diff-close.svg\";\nimport { Extension } from \"@codemirror/state\";\nimport { CodeLanguage } from \"@/components/codeEditorTypes\";\n\nconst modelValue = defineModel<string>({ required: true });\n\nwithDefaults(\n  defineProps<{\n    language?: CodeLanguage;\n    readOnly?: boolean;\n    showGutter?: boolean;\n    ariaLabel?: string;\n    extensions?: Extension[];\n    modalTitle?: string;\n  }>(),\n  {\n    readOnly: false,\n    showGutter: false,\n    extensions: () => [],\n    modalTitle: \"Code View\",\n  }\n);\n\n// Component state for maximize functionality\nconst showMaximizeModal = ref(false);\nconst showMaximizeButton = ref(false);\n\n// Handle maximize functionality\nconst toggleMaximizeModal = () => {\n  showMaximizeModal.value = !showMaximizeModal.value;\n};\n\n// Handle mouse enter/leave for showing maximize button\nconst onEditorMouseEnter = () => {\n  showMaximizeButton.value = true;\n};\n\nconst onEditorMouseLeave = () => {\n  showMaximizeButton.value = false;\n};\n\n// Handle ESC key to close modal\nconst handleKeyDown = (event: KeyboardEvent) => {\n  if (event.key === \"Escape\" && showMaximizeModal.value) {\n    showMaximizeModal.value = false;\n  }\n};\n\n// Setup keyboard events for maximize modal\nonMounted(() => {\n  window.addEventListener(\"keydown\", handleKeyDown);\n});\n\n// Clean up event listeners when component is destroyed\nonBeforeUnmount(() => {\n  window.removeEventListener(\"keydown\", handleKeyDown);\n});\n</script>\n\n<template>\n  <div class=\"code-editor-wrapper\" @mouseenter=\"onEditorMouseEnter\" @mouseleave=\"onEditorMouseLeave\">\n    <!-- Regular CodeEditor -->\n    <div class=\"editor-container\">\n      <CodeEditor class=\"maximazable-code-editor--inline-instance\" v-model=\"modelValue\" :language=\"language\" :read-only=\"readOnly\" :show-gutter=\"showGutter\" :show-copy-to-clipboard=\"false\" :aria-label=\"ariaLabel\" :extensions=\"extensions\">\n        <template #toolbarLeft>\n          <slot name=\"toolbarLeft\"></slot>\n        </template>\n        <template #toolbarRight>\n          <slot name=\"toolbarRight\">\n            <!-- Maximize Button (shown on hover) -->\n            <button v-if=\"showMaximizeButton\" @click=\"toggleMaximizeModal\" class=\"maximize-button\" v-tippy=\"`Maximize view`\">\n              <img :src=\"DiffMaximizeIcon\" alt=\"Maximize\" width=\"14\" height=\"14\" />\n            </button>\n          </slot>\n        </template>\n      </CodeEditor>\n    </div>\n\n    <!-- Maximize modal for CodeEditor -->\n    <div v-if=\"showMaximizeModal\" class=\"maximize-modal\">\n      <div class=\"maximize-modal-content\">\n        <div class=\"maximize-modal-toolbar\">\n          <span class=\"maximize-modal-title\">{{ modalTitle }}</span>\n          <button @click=\"toggleMaximizeModal\" class=\"maximize-modal-close\" v-tippy=\"`Close`\">\n            <img :src=\"DiffCloseIcon\" alt=\"Close\" width=\"16\" height=\"16\" />\n          </button>\n        </div>\n        <div class=\"maximize-modal-body\">\n          <CodeEditor class=\"maximazable-code-editor--pop-up-instance\" v-model=\"modelValue\" :language=\"language\" :read-only=\"readOnly\" :show-copy-to-clipboard=\"true\" :show-gutter=\"true\" :aria-label=\"ariaLabel\" :extensions=\"[]\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.code-editor-wrapper {\n  position: relative;\n  width: 100%;\n}\n\n.maximize-button {\n  position: absolute;\n  right: 0.375rem;\n  top: 0.375rem;\n  z-index: 10;\n  background-color: rgba(255, 255, 255, 0.7);\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 0.25rem;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n\n.maximize-button:hover {\n  opacity: 1;\n}\n\n.maximize-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 1000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.maximize-modal-content {\n  background-color: white;\n  width: 95vw;\n  height: 90vh;\n  border-radius: 4px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.maximize-modal-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.625rem 0.9375rem;\n  background-color: #f8f8f8;\n  border-bottom: 1px solid #ddd;\n}\n\n.maximize-modal-title {\n  font-weight: bold;\n  font-size: 1rem;\n}\n\n.maximize-modal-close {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0.3125rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.maximize-modal-body {\n  flex: 1;\n  overflow: auto;\n  padding: 0;\n}\n\n/* Ensure the CodeEditor wrapper fills the modal body */\n.maximize-modal-body :deep(.wrapper) {\n  height: 100%;\n  border-radius: 0;\n}\n\n.maximize-modal-body :deep(.cm-editor),\n.maximize-modal-body :deep(.cm-scroller) {\n  height: 100%;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { SagaMessageData, useSagaDiagramStore } from \"@/stores/SagaDiagramStore\";\nimport { storeToRefs } from \"pinia\";\nimport LoadingSpinner from \"@/components/LoadingSpinner.vue\";\nimport MaximizableCodeEditor from \"@/components/MaximizableCodeEditor.vue\";\nimport { computed } from \"vue\";\nimport parseContentType from \"@/composables/contentTypeParser\";\n\nconst props = defineProps<{\n  messageData: SagaMessageData;\n  maximizedTitle?: string;\n}>();\n\nconst modalTitle = computed(() => {\n  return props.maximizedTitle ? `Message Data - ${props.maximizedTitle}` : \"Message Data\";\n});\n\nconst sagaDiagramStore = useSagaDiagramStore();\nconst { messageDataLoading } = storeToRefs(sagaDiagramStore);\n\nconst contentType = computed(() => parseContentType(props.messageData.body.data.content_type));\n\nconst body = computed(() => props.messageData.body.data.value || \"\");\n</script>\n\n<template>\n  <div v-if=\"messageDataLoading\" class=\"message-data-loading\">\n    <LoadingSpinner />\n  </div>\n  <div v-else-if=\"messageData.body.failed_to_load\" class=\"message-data-box message-data-box-error\">\n    <span class=\"message-data-box-text--error\">Failed to load message data, there might be a connection issue or the message may no longer be available.</span>\n  </div>\n  <div v-else-if=\"!messageDataLoading && (!messageData.body.data.value || messageData.body.not_found || messageData.body.data.no_content)\" class=\"message-data-box\">\n    <span class=\"message-data-box-text--empty\">No message body data available</span>\n  </div>\n  <div v-else-if=\"contentType.isSupported\" class=\"message-data-box message-data-box-content\">\n    <MaximizableCodeEditor :model-value=\"body\" :language=\"contentType.language\" :readOnly=\"true\" :showGutter=\"false\" :modalTitle=\"modalTitle\" />\n  </div>\n  <div v-else class=\"message-data-box message-data-box-error\">\n    <span class=\"message-data-box-text--unsupported\">Message body cannot be displayed because content type \"{{ messageData.body.data.content_type }}\" is not supported.</span>\n  </div>\n</template>\n\n<style scoped>\n.message-data-box {\n  display: flex;\n}\n\n.message-data-box-content {\n  display: block;\n}\n\n.message-data-box-text {\n  display: inline-block;\n  margin-right: 0.25rem;\n}\n\n.message-data-box-text--ellipsis {\n  display: inline-block;\n  overflow: hidden;\n  max-width: 100%;\n  padding: 0%;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.message-data-box-text--empty {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: #666;\n  font-style: italic;\n}\n\n.message-data-box-text--error {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: #a94442;\n  font-style: italic;\n}\n\n.message-data-box-text--unsupported {\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: #8a6d3b;\n  font-style: italic;\n}\n\n.message-data-loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.message-data-box-error {\n  padding: 1rem;\n  justify-content: center;\n}\n.message-data-box-content :deep(.wrapper.maximazable-code-editor--inline-instance) {\n  border: none;\n  border-radius: 0;\n  margin-top: 0;\n  font-size: 0.75rem;\n}\n\n.message-data-box-content :deep(.wrapper.maximazable-code-editor--inline-instance .toolbar) {\n  border: none;\n  border-radius: 0;\n  background-color: transparent;\n  padding: 0;\n  margin-bottom: 0;\n}\n\n.message-data-box-content :deep(.wrapper.maximazable-code-editor--inline-instance .cm-editor) {\n  /* Override any borders from the default theme */\n  border: none;\n}\n</style>\n","export default \"data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.8%2018.5H14V10h2.5v6h5.3L21.8%2018.5L21.8%2018.5z%20M25.1%2024.4c2-2.2%203.2-5.1%203.2-8.3%20c0-6.8-5.5-12.3-12.3-12.3C9.2%203.7%203.7%209.2%203.7%2016.1c0%203.2%201.2%206.1%203.2%208.3c-0.6%201.5-1.4%203.6-2%204.9c-0.1%200.2%200%200.4%200.2%200.6%20c0.2%200.1%200.4%200.2%200.6%200c1.3-0.8%203.1-2.1%204.5-3c1.7%200.9%203.7%201.5%205.9%201.5s4.1-0.5%205.9-1.5l4.5%203c0.2%200.1%200.4%200.1%200.6%200%20c0.2-0.1%200.2-0.4%200.2-0.6L25.1%2024.4z%20M16%2025.3c-5.1%200-9.3-4.1-9.3-9.3c0-5.1%204.1-9.3%209.3-9.3c5.1%200%209.3%204.1%209.3%209.3%20C25.3%2021.2%2021.1%2025.3%2016%2025.3z%20M10.5%202.8C9.6%202.3%208.6%202%207.6%202C4.5%202%202%204.5%202%207.6c0%201%200.3%202%200.8%202.8C4.2%207%207%204.2%2010.5%202.8z%20M29.2%2010.4C29.7%209.6%2030%208.6%2030%207.6C30%204.5%2027.5%202%2024.4%202c-1%200-2%200.3-2.9%200.8C25%204.2%2027.8%207%2029.2%2010.4z'%20fill='currentColor'%20fill-rule='nonzero'%20/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0'%20y='0'%20width='15'%20height='15'%20fill='%23333333'%20/%3e%3cpath%20d='M10.986%208h-4V4h1v3h3V8z%20M7.486%203.201c-2.376%200-4.299%201.923-4.299%204.299%20c0%202.376%201.923%204.299%204.299%204.299c2.376%200%204.299-1.923%204.299-4.299C11.784%205.124%209.861%203.201%207.486%203.201%20M7.486%202%20c3.038%200%205.5%202.462%205.5%205.5s-2.462%205.5-5.5%205.5s-5.5-2.462-5.5-5.5S4.448%202%207.486%202z'%20fill='%23CCCCCC'%20fill-rule='nonzero'%20/%3e%3c/svg%3e\"","<script setup lang=\"ts\">\nimport { SagaTimeoutMessageViewModel } from \"./SagaDiagramParser\";\nimport MessageDataBox from \"./MessageDataBox.vue\";\nimport TimeoutIcon from \"@/assets/TimeoutIcon.svg\";\nimport SagaTimeoutIcon from \"@/assets/SagaTimeoutIcon.svg\";\nimport { useSagaDiagramStore } from \"@/stores/SagaDiagramStore\";\nimport { computed, ref, watch } from \"vue\";\n\nconst props = defineProps<{\n  message: SagaTimeoutMessageViewModel;\n  isLastMessage: boolean;\n  showMessageData?: boolean;\n}>();\n\nconst store = useSagaDiagramStore();\nconst timeoutMessageRef = ref<HTMLElement | null>(null);\nconst shouldBeActive = computed(() => {\n  return store.selectedMessageId === props.message.MessageId;\n});\n\n// This sets the store with the required values so the timeout invocation node exists, it will react by scrolling to the node\nconst navigateToTimeout = () => {\n  // Set the selected message ID in the store\n  store.setSelectedMessageId(props.message.MessageId);\n  store.scrollToTimeout = true;\n};\n\nwatch(\n  [() => store.scrollToTimeoutRequest, () => shouldBeActive.value, () => timeoutMessageRef.value !== null],\n  ([scrollRequest, shouldScroll, refExists]) => {\n    if (scrollRequest && shouldScroll && refExists && timeoutMessageRef.value) {\n      timeoutMessageRef.value.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"center\",\n      });\n\n      store.scrollToTimeoutRequest = false;\n    }\n  },\n  { immediate: true }\n);\n</script>\n\n<template>\n  <div class=\"row row--right\">\n    <div class=\"cell cell--center\">\n      <div class=\"cell-inner cell-inner-line\">\n        <img class=\"saga-icon saga-icon--center-cell saga-icon--overlap\" :src=\"SagaTimeoutIcon\" alt=\"Timeout Request\" />\n        <a v-if=\"message.HasBeenProcessed\" v-tippy=\"`View timeout processing details`\" class=\"timeout-status\" href=\"#\" @click.prevent=\"navigateToTimeout\" aria-label=\"timeout requested\">Timeout Requested = {{ message.TimeoutFriendly }}</a>\n        <span v-else class=\"timeout-status\" aria-label=\"timeout requested\" v-tippy=\"`This timeout has been requested but not yet processed`\">Timeout Requested = {{ message.TimeoutFriendly }}</span>\n      </div>\n    </div>\n    <div class=\"cell cell--side\"></div>\n    <div class=\"cell cell--center cell--top-border\">\n      <div class=\"cell-inner cell-inner-top\"></div>\n      <div v-if=\"!isLastMessage\" class=\"cell-inner cell-inner-line\"></div>\n    </div>\n    <div class=\"cell cell--side\">\n      <div class=\"cell-inner cell-inner-right\"></div>\n      <div\n        ref=\"timeoutMessageRef\"\n        :class=\"{\n          'cell-inner': true,\n          'cell-inner-side': true,\n          'cell-inner-side--active': shouldBeActive,\n        }\"\n      >\n        <img class=\"saga-icon saga-icon--side-cell\" :src=\"TimeoutIcon\" alt=\"\" v-tippy=\"`Timeout Message`\" />\n        <h2 class=\"message-title\" aria-label=\"timeout message type\" v-tippy=\"message.FriendlyTypeName\">{{ message.FriendlyTypeName }}</h2>\n        <div class=\"timestamp\" aria-label=\"timeout message timestamp\" v-tippy=\"`Sent at: ${message.FormattedTimeSent}`\">{{ message.FormattedTimeSent }}</div>\n      </div>\n      <div v-if=\"showMessageData\" class=\"message-data message-data--active\">\n        <MessageDataBox :messageData=\"message.Data\" :maximizedTitle=\"message.FriendlyTypeName\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.row {\n  display: flex;\n}\n\n.row--right {\n  justify-content: right;\n}\n\n.cell {\n  padding: 0;\n}\n\n.cell--center {\n  width: 50%;\n  background-color: #f2f2f2;\n  border: 0;\n}\n\n.cell--side {\n  align-self: flex-end;\n  width: 25%;\n  padding: 0;\n}\n\n.cell--top-border {\n  display: flex;\n  flex-direction: column;\n}\n\n.cell-inner-top {\n  border-top: solid 2px #000000;\n  margin-left: 1rem;\n}\n\n.cell-inner-line {\n  flex-grow: 1;\n  padding: 0.25rem 0.5rem;\n  border-left: solid 2px #000000;\n  margin-left: 1rem;\n}\n\n.cell-inner-side {\n  padding: 0.25rem 0.25rem 0;\n  border: solid 2px #cccccc;\n  background-color: #cccccc;\n}\n\n.cell-inner-side--active {\n  border: solid 5px #0b6eef;\n  animation: blink-border 1.8s ease-in-out;\n}\n\n.cell-inner-right {\n  position: relative;\n  min-height: 2.5rem;\n  border: solid 2px #000000;\n  border-left: 0;\n  border-bottom: 0;\n  margin-right: 50%;\n}\n\n.cell-inner-right:after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  border: solid 6px #000000;\n  border-top-width: 10px;\n  border-left-color: transparent;\n  border-right-color: transparent;\n  border-bottom: 0;\n  bottom: 0;\n  margin-left: 100%;\n  left: -5px;\n}\n\n.message-title {\n  margin: 0;\n  font-size: 0.9rem;\n  font-weight: 900;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.timestamp {\n  font-size: 0.9rem;\n}\n\n.message-data {\n  display: none;\n  padding: 0.2rem;\n  background-color: #ffffff;\n  border: solid 1px #cccccc;\n  font-size: 0.75rem;\n}\n\n.message-data--active {\n  display: block;\n}\n\n.timeout-status {\n  display: inline-block;\n  font-size: 1rem;\n  font-weight: 900;\n}\n\n.saga-icon {\n  display: block;\n  float: left;\n  margin-right: 0.35rem;\n}\n\n.saga-icon--side-cell {\n  width: 2rem;\n  height: 2rem;\n  padding: 0.23rem;\n}\n\n.saga-icon--center-cell {\n  float: none;\n  display: inline;\n  width: 1rem;\n  height: 1rem;\n  margin-top: -0.3rem;\n}\n\n.saga-icon--overlap {\n  margin-left: -1rem;\n}\n\n@keyframes blink-border {\n  0%,\n  100% {\n    border-color: #0b6eef;\n  }\n  20%,\n  60% {\n    border-color: #cccccc;\n  }\n  40%,\n  80% {\n    border-color: #0b6eef;\n  }\n}\n</style>\n","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2015%206'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-540,-191)'%3e%3cg%20id='command'%3e%3cg%20transform='matrix(0,1,-1,0,542.944,197)'%3e%3cpath%20d='M-2.944,-3.056C-1.318,-3.056%20-0,-1.713%20-0,-0.056C-0,1.601%20-1.318,2.944%20-2.944,2.944C-4.57,2.944%20-6,1.601%20-6,-0.056C-6,-1.713%20-4.57,-3.056%20-2.944,-3.056'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3cg%20transform='matrix(1,0,0,-1,555,194)'%3e%3cpath%20d='M0,0L-4,3L-4,1L-8,1L-8,-1L-4,-1L-4,-3L0,0Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2016%2016'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-1268,-330)'%3e%3cg%20id='event'%3e%3cg%20transform='matrix(0,1,-1,0,1271.05,341)'%3e%3cpath%20d='M-3,-3C-1.374,-3%200,-1.657%200,0C0,1.657%20-1.374,3%20-3,3C-4.626,3%20-6,1.657%20-6,0C-6,-1.657%20-4.626,-3%20-3,-3'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3cg%20transform='matrix(1,0,0,-1,1283.05,338)'%3e%3cpath%20d='M0,0L-4,3L-4,1L-8,1L-8,-1L-4,-1L-4,-3L0,0Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3cg%20transform='matrix(1,0,0,-1,1279.05,335.879)'%3e%3cpath%20d='M0,5.879L-4,5.879L-3.05,4.243L-5.878,1.415L-4.464,0L-1.323,3.016L0,1.879L0,5.879Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3cg%20transform='matrix(1,0,0,-1,1279.05,340.121)'%3e%3cpath%20d='M0,-5.879L0,-1.879L-1.636,-2.829L-4.465,0L-5.879,-1.414L-3.05,-4.243L-4,-5.879L0,-5.879Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e\"","<script setup lang=\"ts\">\nimport MessageDataBox from \"./MessageDataBox.vue\";\nimport CommandIcon from \"@/assets/command.svg\";\nimport EventIcon from \"@/assets/event.svg\";\nimport { SagaMessageViewModel } from \"./SagaDiagramParser\";\nimport { useSagaDiagramStore } from \"@/stores/SagaDiagramStore\";\nimport { computed } from \"vue\";\n\nconst shouldBeActive = computed(() => {\n  return store.selectedMessageId === props.message.MessageId;\n});\n\nconst store = useSagaDiagramStore();\n\nconst props = defineProps<{\n  message: SagaMessageViewModel;\n  showMessageData?: boolean;\n}>();\n</script>\n\n<template>\n  <div\n    :class=\"{\n      'cell-inner': true,\n      'cell-inner-side': true,\n      'cell-inner-side--active': shouldBeActive,\n    }\"\n  >\n    <img class=\"saga-icon saga-icon--side-cell\" :src=\"message.IsEventMessage ? EventIcon : CommandIcon\" :alt=\"message.IsEventMessage ? 'Event' : 'Command'\" v-tippy=\"message.IsEventMessage ? `Event Message` : `Command Message`\" />\n    <h2 class=\"message-title\" v-tippy=\"message.FriendlyTypeName\">{{ message.FriendlyTypeName }}</h2>\n    <div class=\"timestamp\" v-tippy=\"`Sent at: ${message.FormattedTimeSent}`\">{{ message.FormattedTimeSent }}</div>\n  </div>\n  <div v-if=\"showMessageData\" class=\"message-data message-data--active\">\n    <MessageDataBox :messageData=\"message.Data\" :maximizedTitle=\"message.FriendlyTypeName\" />\n  </div>\n</template>\n\n<style scoped>\n.row {\n  display: flex;\n}\n\n.row--right {\n  justify-content: right;\n}\n\n.cell {\n  padding: 0;\n}\n\n.cell--center {\n  width: 50%;\n  background-color: #f2f2f2;\n  border: 0;\n}\n\n.cell--side {\n  align-self: flex-end;\n  width: 25%;\n  padding: 0;\n}\n\n.cell--top-border {\n  display: flex;\n  flex-direction: column;\n}\n\n.cell-inner-top {\n  border-top: solid 2px #000000;\n  margin-left: 1rem;\n}\n\n.cell-inner-line {\n  flex-grow: 1;\n  padding: 0.25rem 0.5rem;\n  border-left: solid 2px #000000;\n  margin-left: 1rem;\n}\n\n.cell-inner-right {\n  position: relative;\n  min-height: 2.5rem;\n  border: solid 2px #000000;\n  border-left: 0;\n  border-bottom: 0;\n  margin-right: 50%;\n}\n\n.cell-inner-right:after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  border: solid 6px #000000;\n  border-top-width: 10px;\n  border-left-color: transparent;\n  border-right-color: transparent;\n  border-bottom: 0;\n  bottom: 0;\n  margin-left: 100%;\n  left: -5px;\n}\n\n.message-title {\n  margin: 0;\n  font-size: 0.9rem;\n  font-weight: 900;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.timestamp {\n  font-size: 0.9rem;\n}\n\n.message-data {\n  display: none;\n  padding: 0.2rem;\n  background-color: #ffffff;\n  border: solid 1px #cccccc;\n  font-size: 0.75rem;\n}\n\n.message-data--active {\n  display: block;\n}\n\n.timeout-status {\n  display: inline-block;\n  font-size: 1rem;\n  font-weight: 900;\n}\n\n.saga-icon--center-cell {\n  float: none;\n  display: inline;\n  width: 1rem;\n  height: 1rem;\n  margin-top: -0.3rem;\n}\n\n.saga-icon--overlap {\n  margin-left: -1rem;\n}\n\n.cell-inner-side:nth-child(-n + 2) {\n  margin-top: 0;\n}\n\n.cell-inner-side {\n  margin-top: 1rem;\n  padding: 0.25rem 0.25rem 0;\n  border: solid 2px #cccccc;\n  background-color: #cccccc;\n}\n\n.cell-inner-side--active {\n  border: solid 5px #0b6eef;\n  animation: blink-border 1.8s ease-in-out;\n}\n\n.saga-icon {\n  display: block;\n  float: left;\n  margin-right: 0.35rem;\n}\n\n.saga-icon--side-cell {\n  width: 2rem;\n  height: 2rem;\n  padding: 0.23rem;\n}\n@keyframes blink-border {\n  0%,\n  100% {\n    border-color: #0b6eef;\n  }\n  20%,\n  60% {\n    border-color: #cccccc;\n  }\n  40%,\n  80% {\n    border-color: #0b6eef;\n  }\n}\n</style>\n","export default class Diff {\n    diff(oldStr, newStr, \n    // Type below is not accurate/complete - see above for full possibilities - but it compiles\n    options = {}) {\n        let callback;\n        if (typeof options === 'function') {\n            callback = options;\n            options = {};\n        }\n        else if ('callback' in options) {\n            callback = options.callback;\n        }\n        // Allow subclasses to massage the input prior to running\n        const oldString = this.castInput(oldStr, options);\n        const newString = this.castInput(newStr, options);\n        const oldTokens = this.removeEmpty(this.tokenize(oldString, options));\n        const newTokens = this.removeEmpty(this.tokenize(newString, options));\n        return this.diffWithOptionsObj(oldTokens, newTokens, options, callback);\n    }\n    diffWithOptionsObj(oldTokens, newTokens, options, callback) {\n        var _a;\n        const done = (value) => {\n            value = this.postProcess(value, options);\n            if (callback) {\n                setTimeout(function () { callback(value); }, 0);\n                return undefined;\n            }\n            else {\n                return value;\n            }\n        };\n        const newLen = newTokens.length, oldLen = oldTokens.length;\n        let editLength = 1;\n        let maxEditLength = newLen + oldLen;\n        if (options.maxEditLength != null) {\n            maxEditLength = Math.min(maxEditLength, options.maxEditLength);\n        }\n        const maxExecutionTime = (_a = options.timeout) !== null && _a !== void 0 ? _a : Infinity;\n        const abortAfterTimestamp = Date.now() + maxExecutionTime;\n        const bestPath = [{ oldPos: -1, lastComponent: undefined }];\n        // Seed editLength = 0, i.e. the content starts with the same values\n        let newPos = this.extractCommon(bestPath[0], newTokens, oldTokens, 0, options);\n        if (bestPath[0].oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n            // Identity per the equality and tokenizer\n            return done(this.buildValues(bestPath[0].lastComponent, newTokens, oldTokens));\n        }\n        // Once we hit the right edge of the edit graph on some diagonal k, we can\n        // definitely reach the end of the edit graph in no more than k edits, so\n        // there's no point in considering any moves to diagonal k+1 any more (from\n        // which we're guaranteed to need at least k+1 more edits).\n        // Similarly, once we've reached the bottom of the edit graph, there's no\n        // point considering moves to lower diagonals.\n        // We record this fact by setting minDiagonalToConsider and\n        // maxDiagonalToConsider to some finite value once we've hit the edge of\n        // the edit graph.\n        // This optimization is not faithful to the original algorithm presented in\n        // Myers's paper, which instead pointlessly extends D-paths off the end of\n        // the edit graph - see page 7 of Myers's paper which notes this point\n        // explicitly and illustrates it with a diagram. This has major performance\n        // implications for some common scenarios. For instance, to compute a diff\n        // where the new text simply appends d characters on the end of the\n        // original text of length n, the true Myers algorithm will take O(n+d^2)\n        // time while this optimization needs only O(n+d) time.\n        let minDiagonalToConsider = -Infinity, maxDiagonalToConsider = Infinity;\n        // Main worker method. checks all permutations of a given edit length for acceptance.\n        const execEditLength = () => {\n            for (let diagonalPath = Math.max(minDiagonalToConsider, -editLength); diagonalPath <= Math.min(maxDiagonalToConsider, editLength); diagonalPath += 2) {\n                let basePath;\n                const removePath = bestPath[diagonalPath - 1], addPath = bestPath[diagonalPath + 1];\n                if (removePath) {\n                    // No one else is going to attempt to use this value, clear it\n                    // @ts-expect-error - perf optimisation. This type-violating value will never be read.\n                    bestPath[diagonalPath - 1] = undefined;\n                }\n                let canAdd = false;\n                if (addPath) {\n                    // what newPos will be after we do an insertion:\n                    const addPathNewPos = addPath.oldPos - diagonalPath;\n                    canAdd = addPath && 0 <= addPathNewPos && addPathNewPos < newLen;\n                }\n                const canRemove = removePath && removePath.oldPos + 1 < oldLen;\n                if (!canAdd && !canRemove) {\n                    // If this path is a terminal then prune\n                    // @ts-expect-error - perf optimisation. This type-violating value will never be read.\n                    bestPath[diagonalPath] = undefined;\n                    continue;\n                }\n                // Select the diagonal that we want to branch from. We select the prior\n                // path whose position in the old string is the farthest from the origin\n                // and does not pass the bounds of the diff graph\n                if (!canRemove || (canAdd && removePath.oldPos < addPath.oldPos)) {\n                    basePath = this.addToPath(addPath, true, false, 0, options);\n                }\n                else {\n                    basePath = this.addToPath(removePath, false, true, 1, options);\n                }\n                newPos = this.extractCommon(basePath, newTokens, oldTokens, diagonalPath, options);\n                if (basePath.oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n                    // If we have hit the end of both strings, then we are done\n                    return done(this.buildValues(basePath.lastComponent, newTokens, oldTokens)) || true;\n                }\n                else {\n                    bestPath[diagonalPath] = basePath;\n                    if (basePath.oldPos + 1 >= oldLen) {\n                        maxDiagonalToConsider = Math.min(maxDiagonalToConsider, diagonalPath - 1);\n                    }\n                    if (newPos + 1 >= newLen) {\n                        minDiagonalToConsider = Math.max(minDiagonalToConsider, diagonalPath + 1);\n                    }\n                }\n            }\n            editLength++;\n        };\n        // Performs the length of edit iteration. Is a bit fugly as this has to support the\n        // sync and async mode which is never fun. Loops over execEditLength until a value\n        // is produced, or until the edit length exceeds options.maxEditLength (if given),\n        // in which case it will return undefined.\n        if (callback) {\n            (function exec() {\n                setTimeout(function () {\n                    if (editLength > maxEditLength || Date.now() > abortAfterTimestamp) {\n                        return callback(undefined);\n                    }\n                    if (!execEditLength()) {\n                        exec();\n                    }\n                }, 0);\n            }());\n        }\n        else {\n            while (editLength <= maxEditLength && Date.now() <= abortAfterTimestamp) {\n                const ret = execEditLength();\n                if (ret) {\n                    return ret;\n                }\n            }\n        }\n    }\n    addToPath(path, added, removed, oldPosInc, options) {\n        const last = path.lastComponent;\n        if (last && !options.oneChangePerToken && last.added === added && last.removed === removed) {\n            return {\n                oldPos: path.oldPos + oldPosInc,\n                lastComponent: { count: last.count + 1, added: added, removed: removed, previousComponent: last.previousComponent }\n            };\n        }\n        else {\n            return {\n                oldPos: path.oldPos + oldPosInc,\n                lastComponent: { count: 1, added: added, removed: removed, previousComponent: last }\n            };\n        }\n    }\n    extractCommon(basePath, newTokens, oldTokens, diagonalPath, options) {\n        const newLen = newTokens.length, oldLen = oldTokens.length;\n        let oldPos = basePath.oldPos, newPos = oldPos - diagonalPath, commonCount = 0;\n        while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(oldTokens[oldPos + 1], newTokens[newPos + 1], options)) {\n            newPos++;\n            oldPos++;\n            commonCount++;\n            if (options.oneChangePerToken) {\n                basePath.lastComponent = { count: 1, previousComponent: basePath.lastComponent, added: false, removed: false };\n            }\n        }\n        if (commonCount && !options.oneChangePerToken) {\n            basePath.lastComponent = { count: commonCount, previousComponent: basePath.lastComponent, added: false, removed: false };\n        }\n        basePath.oldPos = oldPos;\n        return newPos;\n    }\n    equals(left, right, options) {\n        if (options.comparator) {\n            return options.comparator(left, right);\n        }\n        else {\n            return left === right\n                || (!!options.ignoreCase && left.toLowerCase() === right.toLowerCase());\n        }\n    }\n    removeEmpty(array) {\n        const ret = [];\n        for (let i = 0; i < array.length; i++) {\n            if (array[i]) {\n                ret.push(array[i]);\n            }\n        }\n        return ret;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    castInput(value, options) {\n        return value;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tokenize(value, options) {\n        return Array.from(value);\n    }\n    join(chars) {\n        // Assumes ValueT is string, which is the case for most subclasses.\n        // When it's false, e.g. in diffArrays, this method needs to be overridden (e.g. with a no-op)\n        // Yes, the casts are verbose and ugly, because this pattern - of having the base class SORT OF\n        // assume tokens and values are strings, but not completely - is weird and janky.\n        return chars.join('');\n    }\n    postProcess(changeObjects, \n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    options) {\n        return changeObjects;\n    }\n    get useLongestToken() {\n        return false;\n    }\n    buildValues(lastComponent, newTokens, oldTokens) {\n        // First we convert our linked list of components in reverse order to an\n        // array in the right order:\n        const components = [];\n        let nextComponent;\n        while (lastComponent) {\n            components.push(lastComponent);\n            nextComponent = lastComponent.previousComponent;\n            delete lastComponent.previousComponent;\n            lastComponent = nextComponent;\n        }\n        components.reverse();\n        const componentLen = components.length;\n        let componentPos = 0, newPos = 0, oldPos = 0;\n        for (; componentPos < componentLen; componentPos++) {\n            const component = components[componentPos];\n            if (!component.removed) {\n                if (!component.added && this.useLongestToken) {\n                    let value = newTokens.slice(newPos, newPos + component.count);\n                    value = value.map(function (value, i) {\n                        const oldValue = oldTokens[oldPos + i];\n                        return oldValue.length > value.length ? oldValue : value;\n                    });\n                    component.value = this.join(value);\n                }\n                else {\n                    component.value = this.join(newTokens.slice(newPos, newPos + component.count));\n                }\n                newPos += component.count;\n                // Common case\n                if (!component.added) {\n                    oldPos += component.count;\n                }\n            }\n            else {\n                component.value = this.join(oldTokens.slice(oldPos, oldPos + component.count));\n                oldPos += component.count;\n            }\n        }\n        return components;\n    }\n}\n","import Diff from './base.js';\nclass CharacterDiff extends Diff {\n}\nexport const characterDiff = new CharacterDiff();\nexport function diffChars(oldStr, newStr, options) {\n    return characterDiff.diff(oldStr, newStr, options);\n}\n","export function longestCommonPrefix(str1, str2) {\n    let i;\n    for (i = 0; i < str1.length && i < str2.length; i++) {\n        if (str1[i] != str2[i]) {\n            return str1.slice(0, i);\n        }\n    }\n    return str1.slice(0, i);\n}\nexport function longestCommonSuffix(str1, str2) {\n    let i;\n    // Unlike longestCommonPrefix, we need a special case to handle all scenarios\n    // where we return the empty string since str1.slice(-0) will return the\n    // entire string.\n    if (!str1 || !str2 || str1[str1.length - 1] != str2[str2.length - 1]) {\n        return '';\n    }\n    for (i = 0; i < str1.length && i < str2.length; i++) {\n        if (str1[str1.length - (i + 1)] != str2[str2.length - (i + 1)]) {\n            return str1.slice(-i);\n        }\n    }\n    return str1.slice(-i);\n}\nexport function replacePrefix(string, oldPrefix, newPrefix) {\n    if (string.slice(0, oldPrefix.length) != oldPrefix) {\n        throw Error(`string ${JSON.stringify(string)} doesn't start with prefix ${JSON.stringify(oldPrefix)}; this is a bug`);\n    }\n    return newPrefix + string.slice(oldPrefix.length);\n}\nexport function replaceSuffix(string, oldSuffix, newSuffix) {\n    if (!oldSuffix) {\n        return string + newSuffix;\n    }\n    if (string.slice(-oldSuffix.length) != oldSuffix) {\n        throw Error(`string ${JSON.stringify(string)} doesn't end with suffix ${JSON.stringify(oldSuffix)}; this is a bug`);\n    }\n    return string.slice(0, -oldSuffix.length) + newSuffix;\n}\nexport function removePrefix(string, oldPrefix) {\n    return replacePrefix(string, oldPrefix, '');\n}\nexport function removeSuffix(string, oldSuffix) {\n    return replaceSuffix(string, oldSuffix, '');\n}\nexport function maximumOverlap(string1, string2) {\n    return string2.slice(0, overlapCount(string1, string2));\n}\n// Nicked from https://stackoverflow.com/a/60422853/1709587\nfunction overlapCount(a, b) {\n    // Deal with cases where the strings differ in length\n    let startA = 0;\n    if (a.length > b.length) {\n        startA = a.length - b.length;\n    }\n    let endB = b.length;\n    if (a.length < b.length) {\n        endB = a.length;\n    }\n    // Create a back-reference for each index\n    //   that should be followed in case of a mismatch.\n    //   We only need B to make these references:\n    const map = Array(endB);\n    let k = 0; // Index that lags behind j\n    map[0] = 0;\n    for (let j = 1; j < endB; j++) {\n        if (b[j] == b[k]) {\n            map[j] = map[k]; // skip over the same character (optional optimisation)\n        }\n        else {\n            map[j] = k;\n        }\n        while (k > 0 && b[j] != b[k]) {\n            k = map[k];\n        }\n        if (b[j] == b[k]) {\n            k++;\n        }\n    }\n    // Phase 2: use these references while iterating over A\n    k = 0;\n    for (let i = startA; i < a.length; i++) {\n        while (k > 0 && a[i] != b[k]) {\n            k = map[k];\n        }\n        if (a[i] == b[k]) {\n            k++;\n        }\n    }\n    return k;\n}\n/**\n * Returns true if the string consistently uses Windows line endings.\n */\nexport function hasOnlyWinLineEndings(string) {\n    return string.includes('\\r\\n') && !string.startsWith('\\n') && !string.match(/[^\\r]\\n/);\n}\n/**\n * Returns true if the string consistently uses Unix line endings.\n */\nexport function hasOnlyUnixLineEndings(string) {\n    return !string.includes('\\r\\n') && string.includes('\\n');\n}\nexport function trailingWs(string) {\n    // Yes, this looks overcomplicated and dumb - why not replace the whole function with\n    //     return string match(/\\s*$/)[0]\n    // you ask? Because:\n    // 1. the trap described at https://markamery.com/blog/quadratic-time-regexes/ would mean doing\n    //    this would cause this function to take O(n) time in the worst case (specifically when\n    //    there is a massive run of NON-TRAILING whitespace in `string`), and\n    // 2. the fix proposed in the same blog post, of using a negative lookbehind, is incompatible\n    //    with old Safari versions that we'd like to not break if possible (see\n    //    https://github.com/kpdecker/jsdiff/pull/550)\n    // It feels absurd to do this with an explicit loop instead of a regex, but I really can't see a\n    // better way that doesn't result in broken behaviour.\n    let i;\n    for (i = string.length - 1; i >= 0; i--) {\n        if (!string[i].match(/\\s/)) {\n            break;\n        }\n    }\n    return string.substring(i + 1);\n}\nexport function leadingWs(string) {\n    // Thankfully the annoying considerations described in trailingWs don't apply here:\n    const match = string.match(/^\\s*/);\n    return match ? match[0] : '';\n}\n","import Diff from './base.js';\nimport { longestCommonPrefix, longestCommonSuffix, replacePrefix, replaceSuffix, removePrefix, removeSuffix, maximumOverlap, leadingWs, trailingWs } from '../util/string.js';\n// Based on https://en.wikipedia.org/wiki/Latin_script_in_Unicode\n//\n// Ranges and exceptions:\n// Latin-1 Supplement, 008000FF\n//  - U+00D7   Multiplication sign\n//  - U+00F7   Division sign\n// Latin Extended-A, 0100017F\n// Latin Extended-B, 0180024F\n// IPA Extensions, 025002AF\n// Spacing Modifier Letters, 02B002FF\n//  - U+02C7   &#711;  Caron\n//  - U+02D8   &#728;  Breve\n//  - U+02D9   &#729;  Dot Above\n//  - U+02DA   &#730;  Ring Above\n//  - U+02DB   &#731;  Ogonek\n//  - U+02DC   &#732;  Small Tilde\n//  - U+02DD   &#733;  Double Acute Accent\n// Latin Extended Additional, 1E001EFF\nconst extendedWordChars = 'a-zA-Z0-9_\\\\u{C0}-\\\\u{FF}\\\\u{D8}-\\\\u{F6}\\\\u{F8}-\\\\u{2C6}\\\\u{2C8}-\\\\u{2D7}\\\\u{2DE}-\\\\u{2FF}\\\\u{1E00}-\\\\u{1EFF}';\n// Each token is one of the following:\n// - A punctuation mark plus the surrounding whitespace\n// - A word plus the surrounding whitespace\n// - Pure whitespace (but only in the special case where this the entire text\n//   is just whitespace)\n//\n// We have to include surrounding whitespace in the tokens because the two\n// alternative approaches produce horribly broken results:\n// * If we just discard the whitespace, we can't fully reproduce the original\n//   text from the sequence of tokens and any attempt to render the diff will\n//   get the whitespace wrong.\n// * If we have separate tokens for whitespace, then in a typical text every\n//   second token will be a single space character. But this often results in\n//   the optimal diff between two texts being a perverse one that preserves\n//   the spaces between words but deletes and reinserts actual common words.\n//   See https://github.com/kpdecker/jsdiff/issues/160#issuecomment-1866099640\n//   for an example.\n//\n// Keeping the surrounding whitespace of course has implications for .equals\n// and .join, not just .tokenize.\n// This regex does NOT fully implement the tokenization rules described above.\n// Instead, it gives runs of whitespace their own \"token\". The tokenize method\n// then handles stitching whitespace tokens onto adjacent word or punctuation\n// tokens.\nconst tokenizeIncludingWhitespace = new RegExp(`[${extendedWordChars}]+|\\\\s+|[^${extendedWordChars}]`, 'ug');\nclass WordDiff extends Diff {\n    equals(left, right, options) {\n        if (options.ignoreCase) {\n            left = left.toLowerCase();\n            right = right.toLowerCase();\n        }\n        return left.trim() === right.trim();\n    }\n    tokenize(value, options = {}) {\n        let parts;\n        if (options.intlSegmenter) {\n            const segmenter = options.intlSegmenter;\n            if (segmenter.resolvedOptions().granularity != 'word') {\n                throw new Error('The segmenter passed must have a granularity of \"word\"');\n            }\n            parts = Array.from(segmenter.segment(value), segment => segment.segment);\n        }\n        else {\n            parts = value.match(tokenizeIncludingWhitespace) || [];\n        }\n        const tokens = [];\n        let prevPart = null;\n        parts.forEach(part => {\n            if ((/\\s/).test(part)) {\n                if (prevPart == null) {\n                    tokens.push(part);\n                }\n                else {\n                    tokens.push(tokens.pop() + part);\n                }\n            }\n            else if (prevPart != null && (/\\s/).test(prevPart)) {\n                if (tokens[tokens.length - 1] == prevPart) {\n                    tokens.push(tokens.pop() + part);\n                }\n                else {\n                    tokens.push(prevPart + part);\n                }\n            }\n            else {\n                tokens.push(part);\n            }\n            prevPart = part;\n        });\n        return tokens;\n    }\n    join(tokens) {\n        // Tokens being joined here will always have appeared consecutively in the\n        // same text, so we can simply strip off the leading whitespace from all the\n        // tokens except the first (and except any whitespace-only tokens - but such\n        // a token will always be the first and only token anyway) and then join them\n        // and the whitespace around words and punctuation will end up correct.\n        return tokens.map((token, i) => {\n            if (i == 0) {\n                return token;\n            }\n            else {\n                return token.replace((/^\\s+/), '');\n            }\n        }).join('');\n    }\n    postProcess(changes, options) {\n        if (!changes || options.oneChangePerToken) {\n            return changes;\n        }\n        let lastKeep = null;\n        // Change objects representing any insertion or deletion since the last\n        // \"keep\" change object. There can be at most one of each.\n        let insertion = null;\n        let deletion = null;\n        changes.forEach(change => {\n            if (change.added) {\n                insertion = change;\n            }\n            else if (change.removed) {\n                deletion = change;\n            }\n            else {\n                if (insertion || deletion) { // May be false at start of text\n                    dedupeWhitespaceInChangeObjects(lastKeep, deletion, insertion, change);\n                }\n                lastKeep = change;\n                insertion = null;\n                deletion = null;\n            }\n        });\n        if (insertion || deletion) {\n            dedupeWhitespaceInChangeObjects(lastKeep, deletion, insertion, null);\n        }\n        return changes;\n    }\n}\nexport const wordDiff = new WordDiff();\nexport function diffWords(oldStr, newStr, options) {\n    // This option has never been documented and never will be (it's clearer to\n    // just call `diffWordsWithSpace` directly if you need that behavior), but\n    // has existed in jsdiff for a long time, so we retain support for it here\n    // for the sake of backwards compatibility.\n    if ((options === null || options === void 0 ? void 0 : options.ignoreWhitespace) != null && !options.ignoreWhitespace) {\n        return diffWordsWithSpace(oldStr, newStr, options);\n    }\n    return wordDiff.diff(oldStr, newStr, options);\n}\nfunction dedupeWhitespaceInChangeObjects(startKeep, deletion, insertion, endKeep) {\n    // Before returning, we tidy up the leading and trailing whitespace of the\n    // change objects to eliminate cases where trailing whitespace in one object\n    // is repeated as leading whitespace in the next.\n    // Below are examples of the outcomes we want here to explain the code.\n    // I=insert, K=keep, D=delete\n    // 1. diffing 'foo bar baz' vs 'foo baz'\n    //    Prior to cleanup, we have K:'foo ' D:' bar ' K:' baz'\n    //    After cleanup, we want:   K:'foo ' D:'bar ' K:'baz'\n    //\n    // 2. Diffing 'foo bar baz' vs 'foo qux baz'\n    //    Prior to cleanup, we have K:'foo ' D:' bar ' I:' qux ' K:' baz'\n    //    After cleanup, we want K:'foo ' D:'bar' I:'qux' K:' baz'\n    //\n    // 3. Diffing 'foo\\nbar baz' vs 'foo baz'\n    //    Prior to cleanup, we have K:'foo ' D:'\\nbar ' K:' baz'\n    //    After cleanup, we want K'foo' D:'\\nbar' K:' baz'\n    //\n    // 4. Diffing 'foo baz' vs 'foo\\nbar baz'\n    //    Prior to cleanup, we have K:'foo\\n' I:'\\nbar ' K:' baz'\n    //    After cleanup, we ideally want K'foo' I:'\\nbar' K:' baz'\n    //    but don't actually manage this currently (the pre-cleanup change\n    //    objects don't contain enough information to make it possible).\n    //\n    // 5. Diffing 'foo   bar baz' vs 'foo  baz'\n    //    Prior to cleanup, we have K:'foo  ' D:'   bar ' K:'  baz'\n    //    After cleanup, we want K:'foo  ' D:' bar ' K:'baz'\n    //\n    // Our handling is unavoidably imperfect in the case where there's a single\n    // indel between keeps and the whitespace has changed. For instance, consider\n    // diffing 'foo\\tbar\\nbaz' vs 'foo baz'. Unless we create an extra change\n    // object to represent the insertion of the space character (which isn't even\n    // a token), we have no way to avoid losing information about the texts'\n    // original whitespace in the result we return. Still, we do our best to\n    // output something that will look sensible if we e.g. print it with\n    // insertions in green and deletions in red.\n    // Between two \"keep\" change objects (or before the first or after the last\n    // change object), we can have either:\n    // * A \"delete\" followed by an \"insert\"\n    // * Just an \"insert\"\n    // * Just a \"delete\"\n    // We handle the three cases separately.\n    if (deletion && insertion) {\n        const oldWsPrefix = leadingWs(deletion.value);\n        const oldWsSuffix = trailingWs(deletion.value);\n        const newWsPrefix = leadingWs(insertion.value);\n        const newWsSuffix = trailingWs(insertion.value);\n        if (startKeep) {\n            const commonWsPrefix = longestCommonPrefix(oldWsPrefix, newWsPrefix);\n            startKeep.value = replaceSuffix(startKeep.value, newWsPrefix, commonWsPrefix);\n            deletion.value = removePrefix(deletion.value, commonWsPrefix);\n            insertion.value = removePrefix(insertion.value, commonWsPrefix);\n        }\n        if (endKeep) {\n            const commonWsSuffix = longestCommonSuffix(oldWsSuffix, newWsSuffix);\n            endKeep.value = replacePrefix(endKeep.value, newWsSuffix, commonWsSuffix);\n            deletion.value = removeSuffix(deletion.value, commonWsSuffix);\n            insertion.value = removeSuffix(insertion.value, commonWsSuffix);\n        }\n    }\n    else if (insertion) {\n        // The whitespaces all reflect what was in the new text rather than\n        // the old, so we essentially have no information about whitespace\n        // insertion or deletion. We just want to dedupe the whitespace.\n        // We do that by having each change object keep its trailing\n        // whitespace and deleting duplicate leading whitespace where\n        // present.\n        if (startKeep) {\n            const ws = leadingWs(insertion.value);\n            insertion.value = insertion.value.substring(ws.length);\n        }\n        if (endKeep) {\n            const ws = leadingWs(endKeep.value);\n            endKeep.value = endKeep.value.substring(ws.length);\n        }\n        // otherwise we've got a deletion and no insertion\n    }\n    else if (startKeep && endKeep) {\n        const newWsFull = leadingWs(endKeep.value), delWsStart = leadingWs(deletion.value), delWsEnd = trailingWs(deletion.value);\n        // Any whitespace that comes straight after startKeep in both the old and\n        // new texts, assign to startKeep and remove from the deletion.\n        const newWsStart = longestCommonPrefix(newWsFull, delWsStart);\n        deletion.value = removePrefix(deletion.value, newWsStart);\n        // Any whitespace that comes straight before endKeep in both the old and\n        // new texts, and hasn't already been assigned to startKeep, assign to\n        // endKeep and remove from the deletion.\n        const newWsEnd = longestCommonSuffix(removePrefix(newWsFull, newWsStart), delWsEnd);\n        deletion.value = removeSuffix(deletion.value, newWsEnd);\n        endKeep.value = replacePrefix(endKeep.value, newWsFull, newWsEnd);\n        // If there's any whitespace from the new text that HASN'T already been\n        // assigned, assign it to the start:\n        startKeep.value = replaceSuffix(startKeep.value, newWsFull, newWsFull.slice(0, newWsFull.length - newWsEnd.length));\n    }\n    else if (endKeep) {\n        // We are at the start of the text. Preserve all the whitespace on\n        // endKeep, and just remove whitespace from the end of deletion to the\n        // extent that it overlaps with the start of endKeep.\n        const endKeepWsPrefix = leadingWs(endKeep.value);\n        const deletionWsSuffix = trailingWs(deletion.value);\n        const overlap = maximumOverlap(deletionWsSuffix, endKeepWsPrefix);\n        deletion.value = removeSuffix(deletion.value, overlap);\n    }\n    else if (startKeep) {\n        // We are at the END of the text. Preserve all the whitespace on\n        // startKeep, and just remove whitespace from the start of deletion to\n        // the extent that it overlaps with the end of startKeep.\n        const startKeepWsSuffix = trailingWs(startKeep.value);\n        const deletionWsPrefix = leadingWs(deletion.value);\n        const overlap = maximumOverlap(startKeepWsSuffix, deletionWsPrefix);\n        deletion.value = removePrefix(deletion.value, overlap);\n    }\n}\nclass WordsWithSpaceDiff extends Diff {\n    tokenize(value) {\n        // Slightly different to the tokenizeIncludingWhitespace regex used above in\n        // that this one treats each individual newline as a distinct tokens, rather\n        // than merging them into other surrounding whitespace. This was requested\n        // in https://github.com/kpdecker/jsdiff/issues/180 &\n        //    https://github.com/kpdecker/jsdiff/issues/211\n        const regex = new RegExp(`(\\\\r?\\\\n)|[${extendedWordChars}]+|[^\\\\S\\\\n\\\\r]+|[^${extendedWordChars}]`, 'ug');\n        return value.match(regex) || [];\n    }\n}\nexport const wordsWithSpaceDiff = new WordsWithSpaceDiff();\nexport function diffWordsWithSpace(oldStr, newStr, options) {\n    return wordsWithSpaceDiff.diff(oldStr, newStr, options);\n}\n","export function generateOptions(options, defaults) {\n    if (typeof options === 'function') {\n        defaults.callback = options;\n    }\n    else if (options) {\n        for (const name in options) {\n            /* istanbul ignore else */\n            if (Object.prototype.hasOwnProperty.call(options, name)) {\n                defaults[name] = options[name];\n            }\n        }\n    }\n    return defaults;\n}\n","import Diff from './base.js';\nimport { generateOptions } from '../util/params.js';\nclass LineDiff extends Diff {\n    constructor() {\n        super(...arguments);\n        this.tokenize = tokenize;\n    }\n    equals(left, right, options) {\n        // If we're ignoring whitespace, we need to normalise lines by stripping\n        // whitespace before checking equality. (This has an annoying interaction\n        // with newlineIsToken that requires special handling: if newlines get their\n        // own token, then we DON'T want to trim the *newline* tokens down to empty\n        // strings, since this would cause us to treat whitespace-only line content\n        // as equal to a separator between lines, which would be weird and\n        // inconsistent with the documented behavior of the options.)\n        if (options.ignoreWhitespace) {\n            if (!options.newlineIsToken || !left.includes('\\n')) {\n                left = left.trim();\n            }\n            if (!options.newlineIsToken || !right.includes('\\n')) {\n                right = right.trim();\n            }\n        }\n        else if (options.ignoreNewlineAtEof && !options.newlineIsToken) {\n            if (left.endsWith('\\n')) {\n                left = left.slice(0, -1);\n            }\n            if (right.endsWith('\\n')) {\n                right = right.slice(0, -1);\n            }\n        }\n        return super.equals(left, right, options);\n    }\n}\nexport const lineDiff = new LineDiff();\nexport function diffLines(oldStr, newStr, options) {\n    return lineDiff.diff(oldStr, newStr, options);\n}\nexport function diffTrimmedLines(oldStr, newStr, options) {\n    options = generateOptions(options, { ignoreWhitespace: true });\n    return lineDiff.diff(oldStr, newStr, options);\n}\n// Exported standalone so it can be used from jsonDiff too.\nexport function tokenize(value, options) {\n    if (options.stripTrailingCr) {\n        // remove one \\r before \\n to match GNU diff's --strip-trailing-cr behavior\n        value = value.replace(/\\r\\n/g, '\\n');\n    }\n    const retLines = [], linesAndNewlines = value.split(/(\\n|\\r\\n)/);\n    // Ignore the final empty token that occurs if the string ends with a new line\n    if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n        linesAndNewlines.pop();\n    }\n    // Merge the content and line separators into single tokens\n    for (let i = 0; i < linesAndNewlines.length; i++) {\n        const line = linesAndNewlines[i];\n        if (i % 2 && !options.newlineIsToken) {\n            retLines[retLines.length - 1] += line;\n        }\n        else {\n            retLines.push(line);\n        }\n    }\n    return retLines;\n}\n","import Diff from './base.js';\nfunction isSentenceEndPunct(char) {\n    return char == '.' || char == '!' || char == '?';\n}\nclass SentenceDiff extends Diff {\n    tokenize(value) {\n        var _a;\n        // If in future we drop support for environments that don't support lookbehinds, we can replace\n        // this entire function with:\n        //     return value.split(/(?<=[.!?])(\\s+|$)/);\n        // but until then, for similar reasons to the trailingWs function in string.ts, we are forced\n        // to do this verbosely \"by hand\" instead of using a regex.\n        const result = [];\n        let tokenStartI = 0;\n        for (let i = 0; i < value.length; i++) {\n            if (i == value.length - 1) {\n                result.push(value.slice(tokenStartI));\n                break;\n            }\n            if (isSentenceEndPunct(value[i]) && value[i + 1].match(/\\s/)) {\n                // We've hit a sentence break - i.e. a punctuation mark followed by whitespace.\n                // We now want to push TWO tokens to the result:\n                // 1. the sentence\n                result.push(value.slice(tokenStartI, i + 1));\n                // 2. the whitespace\n                i = tokenStartI = i + 1;\n                while ((_a = value[i + 1]) === null || _a === void 0 ? void 0 : _a.match(/\\s/)) {\n                    i++;\n                }\n                result.push(value.slice(tokenStartI, i + 1));\n                // Then the next token (a sentence) starts on the character after the whitespace.\n                // (It's okay if this is off the end of the string - then the outer loop will terminate\n                // here anyway.)\n                tokenStartI = i + 1;\n            }\n        }\n        return result;\n    }\n}\nexport const sentenceDiff = new SentenceDiff();\nexport function diffSentences(oldStr, newStr, options) {\n    return sentenceDiff.diff(oldStr, newStr, options);\n}\n","import Diff from './base.js';\nclass CssDiff extends Diff {\n    tokenize(value) {\n        return value.split(/([{}:;,]|\\s+)/);\n    }\n}\nexport const cssDiff = new CssDiff();\nexport function diffCss(oldStr, newStr, options) {\n    return cssDiff.diff(oldStr, newStr, options);\n}\n","<script setup lang=\"ts\">\nimport { ref, computed, watch } from \"vue\";\nimport { diffLines, diffWords, diffWordsWithSpace, diffChars, diffTrimmedLines, diffSentences, diffCss } from \"diff\";\n\n// Types needed for the diff viewer\ninterface DiffChange {\n  value: string;\n  added?: boolean;\n  removed?: boolean;\n}\n\ninterface LineInformation {\n  left: DiffInformation;\n  right: DiffInformation;\n}\n\ninterface DiffInformation {\n  value: string;\n  lineNumber?: number;\n  type: DiffType;\n}\n\nenum DiffType {\n  DEFAULT = 0,\n  ADDED = 1,\n  REMOVED = 2,\n}\n\n// Types for rendered diff items\ninterface FoldItem {\n  type: \"fold\";\n  count: number;\n  blockNumber: number;\n  leftLineNumber?: number;\n  rightLineNumber?: number;\n}\n\ninterface LineItem {\n  type: \"line\";\n  lineInfo: LineInformation;\n  index: number;\n}\n\ntype DiffItem = FoldItem | LineItem;\n\ninterface Props {\n  oldValue: string;\n  newValue: string;\n  splitView?: boolean;\n  hideLineNumbers?: boolean;\n  showDiffOnly?: boolean;\n  extraLinesSurroundingDiff?: number;\n  leftTitle?: string;\n  rightTitle?: string;\n  compareMethod?: \"diffChars\" | \"diffWords\" | \"diffWordsWithSpace\" | \"diffLines\" | \"diffTrimmedLines\" | \"diffSentences\" | \"diffCss\";\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  splitView: true,\n  hideLineNumbers: false,\n  showDiffOnly: false,\n  extraLinesSurroundingDiff: 3,\n  leftTitle: \"Previous\",\n  rightTitle: \"Current\",\n  compareMethod: \"diffLines\",\n});\n\n// Component state\nconst lineInformation = ref<LineInformation[]>([]);\nconst diffLineIndexes = ref<number[]>([]);\nconst expandedBlocks = ref<number[]>([]);\n\n// Compute diff when inputs change\nconst computeDiff = (): void => {\n  const { oldValue, newValue, compareMethod } = props;\n\n  // Skip processing if values are identical\n  if (oldValue === newValue) {\n    const lines = newValue.split(\"\\n\");\n    if (lines[lines.length - 1] === \"\") {\n      lines.pop();\n    }\n\n    const result: LineInformation[] = [];\n    let lineNumber = 1;\n\n    lines.forEach((line) => {\n      result.push({\n        left: { value: line, lineNumber: lineNumber, type: DiffType.DEFAULT },\n        right: { value: line, lineNumber: lineNumber++, type: DiffType.DEFAULT },\n      });\n    });\n\n    lineInformation.value = result;\n    diffLineIndexes.value = [];\n    return;\n  }\n\n  // Generate diff based on selected method\n  let diffOutput: DiffChange[];\n  switch (compareMethod) {\n    case \"diffChars\":\n      diffOutput = diffChars(oldValue, newValue);\n      break;\n    case \"diffWords\":\n      diffOutput = diffWords(oldValue, newValue);\n      break;\n    case \"diffWordsWithSpace\":\n      diffOutput = diffWordsWithSpace(oldValue, newValue);\n      break;\n    case \"diffTrimmedLines\":\n      diffOutput = diffTrimmedLines(oldValue, newValue);\n      break;\n    case \"diffSentences\":\n      diffOutput = diffSentences(oldValue, newValue);\n      break;\n    case \"diffCss\":\n      diffOutput = diffCss(oldValue, newValue);\n      break;\n    case \"diffLines\":\n    default:\n      diffOutput = diffLines(oldValue, newValue);\n      break;\n  }\n\n  // Process the diff output into line information\n  const result: LineInformation[] = [];\n  const diffLinesArray: number[] = [];\n  let leftLineNumber = 1;\n  let rightLineNumber = 1;\n  let counter = 0;\n\n  diffOutput.forEach((part) => {\n    const lines = part.value.split(\"\\n\");\n    // Remove empty line at the end if it exists\n    if (lines[lines.length - 1] === \"\") {\n      lines.pop();\n    }\n\n    if (!part.added && !part.removed) {\n      // Unchanged lines\n      lines.forEach((line) => {\n        result.push({\n          left: { value: line, lineNumber: leftLineNumber++, type: DiffType.DEFAULT },\n          right: { value: line, lineNumber: rightLineNumber++, type: DiffType.DEFAULT },\n        });\n        counter++;\n      });\n    } else if (part.removed) {\n      // Removed lines (left side)\n      lines.forEach((line) => {\n        diffLinesArray.push(counter);\n        result.push({\n          left: { value: line, lineNumber: leftLineNumber++, type: DiffType.REMOVED },\n          right: { value: \"\", type: DiffType.DEFAULT },\n        });\n        counter++;\n      });\n    } else if (part.added) {\n      // Added lines (right side)\n      lines.forEach((line) => {\n        diffLinesArray.push(counter);\n        result.push({\n          left: { value: \"\", type: DiffType.DEFAULT },\n          right: { value: line, lineNumber: rightLineNumber++, type: DiffType.ADDED },\n        });\n        counter++;\n      });\n    }\n  });\n\n  lineInformation.value = result;\n  diffLineIndexes.value = diffLinesArray;\n\n  // Reset expanded blocks when diff changes\n  expandedBlocks.value = [];\n};\n\n// Toggle a code fold block\nconst onBlockExpand = (id: number): void => {\n  if (!expandedBlocks.value.includes(id)) {\n    expandedBlocks.value.push(id);\n  }\n};\n\n// Render the diff with code folding for unchanged lines\nconst renderDiff = computed<DiffItem[]>(() => {\n  if (!lineInformation.value.length) return [];\n\n  const { showDiffOnly, extraLinesSurroundingDiff } = props;\n  const extraLines = extraLinesSurroundingDiff < 0 ? 0 : extraLinesSurroundingDiff;\n\n  let skippedLines: number[] = [];\n  const result: DiffItem[] = [];\n\n  // Create a mutable copy of diffLines for manipulation in the loop\n  const currentDiffLines = [...diffLineIndexes.value];\n\n  lineInformation.value.forEach((line, i) => {\n    const diffBlockStart = currentDiffLines[0];\n    const currentPosition = diffBlockStart !== undefined ? diffBlockStart - i : undefined;\n\n    // Check if this line should be shown or folded\n    if (showDiffOnly) {\n      // At boundary of diff section, process any accumulated skipped lines\n      if (currentPosition === -extraLines) {\n        skippedLines = [];\n        currentDiffLines.shift();\n      }\n\n      // If this is a default line far from changes and not in an expanded block, accumulate it\n      if (line.left.type === DiffType.DEFAULT && ((currentPosition !== undefined && currentPosition > extraLines) || typeof diffBlockStart === \"undefined\") && !expandedBlocks.value.includes(diffBlockStart)) {\n        skippedLines.push(i + 1);\n\n        // If we're at the end and have accumulated skipped lines, render the fold indicator\n        if (i === lineInformation.value.length - 1 && skippedLines.length > 1) {\n          result.push({\n            type: \"fold\",\n            count: skippedLines.length,\n            blockNumber: diffBlockStart,\n            leftLineNumber: line.left.lineNumber,\n            rightLineNumber: line.right.lineNumber,\n          });\n        }\n        return;\n      }\n    }\n\n    // If we have accumulated skipped lines and this line should be shown, display the fold indicator\n    if (currentPosition === extraLines && skippedLines.length > 0) {\n      const count = skippedLines.length;\n      skippedLines = [];\n\n      result.push({\n        type: \"fold\",\n        count,\n        blockNumber: diffBlockStart,\n        leftLineNumber: line.left.lineNumber,\n        rightLineNumber: line.right.lineNumber,\n      });\n    }\n\n    // Add the actual line content\n    result.push({\n      type: \"line\",\n      lineInfo: line,\n      index: i,\n    });\n  });\n\n  return result;\n});\n\n// Compute the diff on initial load and when inputs change\nwatch(\n  () => [props.oldValue, props.newValue, props.compareMethod, props.showDiffOnly, props.extraLinesSurroundingDiff],\n  () => {\n    computeDiff();\n  },\n  { immediate: true }\n);\n</script>\n\n<template>\n  <div class=\"diff-container\" :class=\"{ 'split-view': splitView }\">\n    <!-- Headers -->\n    <div v-if=\"leftTitle || rightTitle\" class=\"diff-headers\">\n      <div class=\"diff-header\">{{ leftTitle }}</div>\n      <div v-if=\"splitView\" class=\"diff-header\">{{ rightTitle }}</div>\n    </div>\n\n    <!-- Diff content -->\n    <div class=\"diff-content\">\n      <!-- Left side (old) -->\n      <div v-if=\"splitView\" class=\"diff-column\">\n        <div class=\"diff-lines\">\n          <template v-for=\"(item, itemIndex) in renderDiff\" :key=\"`diff-left-${itemIndex}`\">\n            <!-- Code fold indicator -->\n            <div v-if=\"item.type === 'fold'\" class=\"diff-fold\">\n              <button @click=\"onBlockExpand(item.blockNumber)\" class=\"diff-fold-button\">\n                {{ ` Expand ${item.count} lines... ` }}\n              </button>\n            </div>\n\n            <!-- Regular line content -->\n            <div v-else-if=\"item.type === 'line'\" :class=\"['diff-line', { 'diff-line-removed': item.lineInfo.left.type === DiffType.REMOVED }]\">\n              <span v-if=\"!hideLineNumbers\" class=\"diff-line-number\">{{ item.lineInfo.left.lineNumber }}</span>\n              <span class=\"diff-line-content\">{{ item.lineInfo.left.value }}</span>\n            </div>\n          </template>\n        </div>\n      </div>\n\n      <!-- Right side (new) -->\n      <div class=\"diff-column\">\n        <div class=\"diff-lines\">\n          <template v-for=\"(item, itemIndex) in renderDiff\" :key=\"`diff-right-${itemIndex}`\">\n            <!-- Code fold indicator -->\n            <div v-if=\"item.type === 'fold'\" class=\"diff-fold\">\n              <button @click=\"onBlockExpand(item.blockNumber)\" class=\"diff-fold-button\">\n                {{ ` Expand ${item.count} lines... ` }}\n              </button>\n            </div>\n\n            <!-- Regular line content -->\n            <div v-else-if=\"item.type === 'line'\" :class=\"['diff-line', { 'diff-line-added': item.lineInfo.right.type === DiffType.ADDED }]\">\n              <span v-if=\"!hideLineNumbers\" class=\"diff-line-number\">{{ item.lineInfo.right.lineNumber }}</span>\n              <span class=\"diff-line-content\">{{ item.lineInfo.right.value }}</span>\n            </div>\n          </template>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.diff-container {\n  width: 100%;\n}\n\n.diff-headers {\n  display: flex;\n  border-bottom: 1px solid #ddd;\n  background-color: #f1f1f1;\n}\n\n.diff-header {\n  flex: 1;\n  padding: 6px 10px;\n  font-weight: bold;\n  font-size: 0.8rem;\n  text-align: center;\n}\n\n.diff-content {\n  display: flex;\n}\n\n.diff-column {\n  flex: 1;\n  overflow: visible;\n}\n\n.split-view .diff-column:first-child {\n  border-right: 1px solid #ddd;\n}\n\n.diff-lines {\n  padding: 5px 0;\n}\n\n.diff-line {\n  padding: 0 5px;\n  white-space: pre-wrap;\n  word-break: break-all;\n  display: flex;\n}\n\n.diff-line-number {\n  min-width: 40px;\n  color: #999;\n  text-align: right;\n  padding-right: 10px;\n  user-select: none;\n}\n\n.diff-line-content {\n  flex: 1;\n}\n\n.diff-line-added {\n  background-color: #e6ffed;\n  color: #28a745;\n}\n\n.diff-line-removed {\n  background-color: #ffeef0;\n  color: #d73a49;\n}\n\n/* Code fold styling */\n.diff-fold {\n  text-align: center;\n  padding: 2px 0;\n}\n\n.diff-fold-button {\n  background: none;\n  border: none;\n  color: #0366d6;\n  padding: 2px 8px;\n  font-size: 0.7rem;\n  cursor: pointer;\n  font-family: monospace;\n}\n\n.diff-fold-button:hover {\n  text-decoration: underline;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { ref, onMounted, onBeforeUnmount } from \"vue\";\nimport DiffContent from \"./DiffContent.vue\";\nimport DiffMaximizeIcon from \"@/assets/diff-maximize.svg\";\nimport DiffCloseIcon from \"@/assets/diff-close.svg\";\n\ninterface Props {\n  oldValue: string;\n  newValue: string;\n  splitView?: boolean;\n  hideLineNumbers?: boolean;\n  showDiffOnly?: boolean;\n  extraLinesSurroundingDiff?: number;\n  leftTitle?: string;\n  rightTitle?: string;\n  compareMethod?: \"diffChars\" | \"diffWords\" | \"diffWordsWithSpace\" | \"diffLines\" | \"diffTrimmedLines\" | \"diffSentences\" | \"diffCss\";\n  showMaximizeIcon?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  splitView: true,\n  hideLineNumbers: false,\n  showDiffOnly: false,\n  extraLinesSurroundingDiff: 3,\n  leftTitle: \"Previous\",\n  rightTitle: \"Current\",\n  compareMethod: \"diffLines\",\n  showMaximizeIcon: false,\n});\n\n// Component state for maximize functionality\nconst showMaximizeModal = ref(false);\nconst showMaximizeButton = ref(false);\n\n// Handle maximize functionality\nconst toggleMaximizeModal = () => {\n  showMaximizeModal.value = !showMaximizeModal.value;\n};\n\n// Handle ESC key to close modal\nconst handleKeyDown = (event: KeyboardEvent) => {\n  if (event.key === \"Escape\" && showMaximizeModal.value) {\n    showMaximizeModal.value = false;\n  }\n};\n\n// Handle mouse enter/leave for showing maximize button\nconst onDiffMouseEnter = () => {\n  if (props.showMaximizeIcon) {\n    showMaximizeButton.value = true;\n  }\n};\n\nconst onDiffMouseLeave = () => {\n  showMaximizeButton.value = false;\n};\n\n// Setup keyboard events\nonMounted(() => {\n  if (props.showMaximizeIcon) {\n    window.addEventListener(\"keydown\", handleKeyDown);\n  }\n});\n\n// Clean up event listeners when component is destroyed\nonBeforeUnmount(() => {\n  window.removeEventListener(\"keydown\", handleKeyDown);\n});\n</script>\n\n<template>\n  <div class=\"diff-viewer\" @mouseenter=\"onDiffMouseEnter\" @mouseleave=\"onDiffMouseLeave\">\n    <div class=\"diff-wrapper\">\n      <!-- Maximize Button -->\n      <button v-if=\"showMaximizeIcon && showMaximizeButton\" @click=\"toggleMaximizeModal\" class=\"maximize-button\" title=\"Maximize diff view\">\n        <img :src=\"DiffMaximizeIcon\" alt=\"Maximize\" width=\"14\" height=\"14\" />\n      </button>\n\n      <!-- Regular DiffContent -->\n      <DiffContent\n        :old-value=\"oldValue\"\n        :new-value=\"newValue\"\n        :split-view=\"splitView\"\n        :hide-line-numbers=\"hideLineNumbers\"\n        :show-diff-only=\"showDiffOnly\"\n        :extra-lines-surrounding-diff=\"extraLinesSurroundingDiff\"\n        :left-title=\"leftTitle\"\n        :right-title=\"rightTitle\"\n        :compare-method=\"compareMethod\"\n      />\n    </div>\n\n    <!-- Maximize Modal with separate DiffContent instance -->\n    <div v-if=\"showMaximizeModal\" class=\"maximize-modal\">\n      <div class=\"maximize-modal-content\">\n        <div class=\"maximize-modal-toolbar\">\n          <span class=\"maximize-modal-title\">{{ leftTitle }} vs {{ rightTitle }}</span>\n          <button @click=\"toggleMaximizeModal\" class=\"maximize-modal-close\" title=\"Close\">\n            <img :src=\"DiffCloseIcon\" alt=\"Close\" width=\"16\" height=\"16\" />\n          </button>\n        </div>\n        <div class=\"maximize-modal-body\">\n          <!-- Separate DiffContent instance for modal -->\n          <DiffContent\n            :old-value=\"oldValue\"\n            :new-value=\"newValue\"\n            :split-view=\"splitView\"\n            :hide-line-numbers=\"hideLineNumbers\"\n            :show-diff-only=\"showDiffOnly\"\n            :extra-lines-surrounding-diff=\"extraLinesSurroundingDiff\"\n            :left-title=\"leftTitle\"\n            :right-title=\"rightTitle\"\n            :compare-method=\"compareMethod\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.diff-viewer {\n  width: 100%;\n  overflow: hidden;\n  font-family: monospace;\n  font-size: 0.75rem;\n  position: relative;\n}\n\n.diff-wrapper {\n  width: 100%;\n  position: relative;\n}\n\n/* Maximize button styles */\n.maximize-button {\n  position: absolute;\n  right: 6px;\n  z-index: 10;\n  background-color: rgba(255, 255, 255, 0.7);\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 4px;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n\n.maximize-button:hover {\n  opacity: 1;\n}\n\n/* Modal styles */\n.maximize-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 1000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.maximize-modal-content {\n  background-color: white;\n  width: 95vw;\n  height: 90vh;\n  border-radius: 4px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.maximize-modal-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 15px;\n  background-color: #f8f8f8;\n  border-bottom: 1px solid #ddd;\n}\n\n.maximize-modal-title {\n  font-weight: bold;\n  font-size: 1rem;\n}\n\n.maximize-modal-close {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #666;\n}\n\n.maximize-modal-close:hover {\n  color: #000;\n}\n\n.maximize-modal-body {\n  flex: 1;\n  overflow: auto;\n  padding: 0;\n}\n\n.maximize-modal-body :deep(.diff-container) {\n  height: 100%;\n}\n\n.maximize-modal-body :deep(.diff-content) {\n  max-height: calc(100% - 35px);\n  overflow: auto;\n}\n</style>\n","export default \"data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='15'%20height='15'%20fill='%23333333'%20/%3e%3cpolygon%20points='4.986,4%2011.048,7.5%204.986,11'%20fill='%23CCCCCC'%20fill-rule='nonzero'%20/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='15'%20height='15'%20fill='%23333333'%20/%3e%3cpath%20fill='%23CCCCCC'%20fill-rule='nonzero'%20d='M3.612%205.274l2.74%200.885V3H8.62v3.159l2.74-0.885l0.616%201.953L9.183%208.086l1.822%202.609l-1.678%201.193L7.51%209.423l-1.879%202.464l-1.678-1.193l1.835-2.609L2.996%207.228L3.612%205.274z'%20/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2016%2016'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-581,-742)'%3e%3cg%20id='timeout'%20transform='matrix(1,0,0,1,596.565,753.212)'%3e%3cpath%20d='M0,-6.402C0.276,-6.875%200.435,-7.425%200.435,-8.013C0.435,-9.78%20-0.997,-11.212%20-2.764,-11.212C-3.361,-11.212%20-3.919,-11.048%20-4.397,-10.764C-2.425,-9.938%20-0.841,-8.366%200,-6.402M-10.728,-10.764C-11.206,-11.048%20-11.764,-11.212%20-12.36,-11.212C-14.127,-11.212%20-15.56,-9.78%20-15.56,-8.013C-15.56,-7.425%20-15.401,-6.875%20-15.125,-6.402C-14.284,-8.366%20-12.699,-9.938%20-10.728,-10.764M-7.562,2.12C-10.489,2.12%20-12.858,-0.248%20-12.858,-3.176C-12.858,-6.103%20-10.49,-8.472%20-7.562,-8.472C-4.636,-8.472%20-2.266,-6.103%20-2.266,-3.176C-2.266,-0.249%20-4.635,2.12%20-7.562,2.12M-2.357,1.581C-1.211,0.327%20-0.511,-1.342%20-0.511,-3.176C-0.511,-7.07%20-3.668,-10.227%20-7.562,-10.227C-11.457,-10.227%20-14.614,-7.07%20-14.614,-3.176C-14.614,-1.342%20-13.914,0.327%20-12.767,1.581C-13.12,2.46%20-13.583,3.612%20-13.896,4.391C-13.944,4.508%20-13.909,4.643%20-13.81,4.723C-13.712,4.803%20-13.573,4.809%20-13.468,4.739C-12.75,4.259%20-11.683,3.545%20-10.913,3.03C-9.917,3.569%20-8.775,3.876%20-7.562,3.876C-6.349,3.876%20-5.208,3.569%20-4.211,3.03L-1.657,4.739C-1.552,4.81%20-1.413,4.803%20-1.314,4.723C-1.216,4.643%20-1.181,4.509%20-1.228,4.391L-2.357,1.581ZM-4.27,-1.802L-8.687,-1.802L-8.687,-6.655L-7.282,-6.655L-7.282,-3.206L-4.27,-3.206L-4.27,-1.802Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e\"","<script setup lang=\"ts\">\nimport { SagaUpdateViewModel } from \"./SagaDiagramParser\";\nimport MessageDataBox from \"./MessageDataBox.vue\";\nimport SagaOutgoingTimeoutMessage from \"./SagaOutgoingTimeoutMessage.vue\";\nimport SagaOutgoingMessage from \"./SagaOutgoingMessage.vue\";\nimport DiffViewer from \"@/components/messages/DiffViewer.vue\";\nimport MaximizableCodeEditor from \"@/components/MaximizableCodeEditor.vue\";\nimport { useSagaDiagramStore } from \"@/stores/SagaDiagramStore\";\nimport { ref, watch, computed } from \"vue\";\nimport { EditorView } from \"@codemirror/view\";\nimport { parse, stringify } from \"lossless-json\";\n\n// Import the images directly\nimport CommandIcon from \"@/assets/command.svg\";\nimport SagaInitiatedIcon from \"@/assets/SagaInitiatedIcon.svg\";\nimport SagaUpdatedIcon from \"@/assets/SagaUpdatedIcon.svg\";\nimport TimeoutIcon from \"@/assets/timeout.svg\";\nimport EventIcon from \"@/assets/event.svg\";\nimport SagaTimeoutIcon from \"@/assets/SagaTimeoutIcon.svg\";\n\n// Define monospace theme with specific selectors for this component\nconst monospaceTheme = EditorView.baseTheme({\n  \".maximazable-code-editor--inline-instance .cm-editor\": {\n    fontFamily: \"monospace\",\n    fontSize: \"0.75rem\",\n    backgroundColor: \"#f2f2f2\",\n  },\n  \".maximazable-code-editor--inline-instance .cm-scroller\": {\n    backgroundColor: \"#f2f2f2\",\n  },\n});\n\nconst props = defineProps<{\n  update: SagaUpdateViewModel;\n  showMessageData?: boolean;\n}>();\n\nconst store = useSagaDiagramStore();\nconst initiatingMessageRef = ref<HTMLElement | null>(null);\nconst hasParsingError = ref(false);\n\nconst shouldBeActive = computed(() => {\n  return store.selectedMessageId === props.update.MessageId;\n});\n\nconst navigateToTimeoutRequest = () => {\n  store.setSelectedMessageId(props.update.InitiatingMessage.MessageId);\n  store.scrollToTimeoutRequest = true;\n};\n\nwatch(\n  [() => store.scrollToTimeout, () => shouldBeActive.value, () => initiatingMessageRef.value !== null],\n  ([scrollTimeout, shouldScroll, refExists]) => {\n    if (scrollTimeout && shouldScroll && refExists && initiatingMessageRef.value) {\n      initiatingMessageRef.value.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"center\",\n      });\n\n      store.scrollToTimeout = false;\n    }\n  },\n  { immediate: true }\n);\n\n// Format a JSON value for display\nconst formatJsonValue = (value: unknown): string => {\n  if (value === null || value === undefined) return \"null\";\n  if (typeof value === \"object\") {\n    return stringify(value as object, null, 2) || \"{}\";\n  }\n  return String(value);\n};\n\n// Process JSON state and remove standard properties\nconst processState = (state: string | undefined): object => {\n  if (!state) return {};\n\n  let stateObj: Record<string, unknown>;\n  try {\n    const parsedState = parse(state);\n\n    stateObj = parsedState as Record<string, unknown>;\n  } catch (e) {\n    console.error(\"Error parsing state:\", e);\n    hasParsingError.value = true;\n    return {};\n  }\n\n  // Filter out standard properties using delete\n  const standardKeys = [\"$type\", \"Id\", \"Originator\", \"OriginalMessageId\"];\n  standardKeys.forEach((key) => {\n    if (key in stateObj) {\n      delete stateObj[key];\n    }\n  });\n\n  return stateObj;\n};\n\nconst sagaUpdateStateChanges = computed(() => {\n  const currentState = processState(props.update.stateAfterChange);\n  const previousState = processState(props.update.previousStateAfterChange);\n  const isFirstNode = props.update.IsFirstNode;\n\n  // Format the current state\n  const currentFormatted = formatJsonValue(currentState);\n\n  // If it's the first node, just return the current state\n  if (isFirstNode) {\n    return {\n      formattedState: currentFormatted,\n      // Provide default empty strings for diff view to prevent type errors\n      previousFormatted: \"\",\n      currentFormatted: currentFormatted,\n    };\n  }\n\n  // Format the JSON state objects\n  const previousFormatted = formatJsonValue(previousState);\n\n  return {\n    previousFormatted,\n    currentFormatted,\n  };\n});\n\n// Determine if there are changes to display\nconst hasStateChanges = computed(() => {\n  if (props.update.IsFirstNode) return true;\n\n  const currentState = processState(props.update.stateAfterChange);\n  const previousState = processState(props.update.previousStateAfterChange);\n\n  return stringify(currentState) !== stringify(previousState);\n});\n</script>\n\n<template>\n  <div class=\"block\" role=\"row\">\n    <!-- Initiating message and saga status header -->\n    <div class=\"row\">\n      <div class=\"cell cell--side\">\n        <div\n          ref=\"initiatingMessageRef\"\n          :class=\"{\n            'cell-inner': true,\n            'cell-inner-side': true,\n            'cell-inner-side--active': shouldBeActive || (update.InitiatingMessage.IsSagaTimeoutMessage && update.MessageId === store.selectedMessageId),\n          }\"\n          :data-message-id=\"update.InitiatingMessage.IsSagaTimeoutMessage ? update.MessageId : ''\"\n        >\n          <img\n            class=\"saga-icon saga-icon--side-cell\"\n            :src=\"update.InitiatingMessage.IsSagaTimeoutMessage ? TimeoutIcon : update.InitiatingMessage.IsEventMessage ? EventIcon : CommandIcon\"\n            alt=\"\"\n            v-tippy=\"update.InitiatingMessage.IsSagaTimeoutMessage ? `Timeout Message` : update.InitiatingMessage.IsEventMessage ? `Event Message` : `Command Message`\"\n          />\n          <h2 class=\"message-title\" aria-label=\"initiating message type\" v-tippy=\"update.InitiatingMessage.FriendlyTypeName\">{{ update.InitiatingMessage.FriendlyTypeName }}</h2>\n          <div class=\"timestamp\" aria-label=\"initiating message timestamp\" v-tippy=\"`Received at: ${update.InitiatingMessage.FormattedMessageTimestamp}`\">{{ update.InitiatingMessage.FormattedMessageTimestamp }}</div>\n        </div>\n      </div>\n      <div class=\"cell cell--center cell-flex\">\n        <div class=\"cell-inner cell-inner-center cell-inner--align-bottom\">\n          <template v-if=\"update.InitiatingMessage.IsSagaTimeoutMessage\">\n            <img class=\"saga-icon saga-icon--center-cell\" :src=\"SagaTimeoutIcon\" alt=\"\" v-tippy=\"`Saga Timeout`\" />\n            <a\n              v-if=\"update.InitiatingMessage.HasRelatedTimeoutRequest\"\n              v-tippy=\"`View original timeout request`\"\n              href=\"#\"\n              @click.prevent=\"navigateToTimeoutRequest\"\n              class=\"saga-status-title saga-status-title--inline timeout-status\"\n              aria-label=\"timeout invoked\"\n            >\n              Timeout Invoked\n            </a>\n            <h2 v-else class=\"saga-status-title saga-status-title--inline timeout-status\" aria-label=\"timeout invoked\">Timeout Invoked</h2>\n            <br />\n          </template>\n          <img class=\"saga-icon saga-icon--center-cell\" :src=\"update.IsFirstNode ? SagaInitiatedIcon : SagaUpdatedIcon\" alt=\"\" v-tippy=\"update.IsFirstNode ? `Saga Initiated` : `Saga Updated`\" />\n          <h2 class=\"saga-status-title saga-status-title--inline\">\n            {{ update.StatusDisplay }}\n          </h2>\n          <div class=\"timestamp timestamp--inline\" aria-label=\"time stamp\" v-tippy=\"`Update time: ${update.FormattedStartTime}`\">\n            {{ update.FormattedStartTime }}\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Saga properties and outgoing messages -->\n    <div class=\"row\">\n      <!-- Left side - Message Data box -->\n      <div class=\"cell cell--side cell--left-border cell--aling-top\">\n        <div v-if=\"showMessageData\" class=\"message-data message-data--active\">\n          <!-- Generic message data box -->\n          <MessageDataBox v-if=\"update.InitiatingMessage\" :messageData=\"update.InitiatingMessage.MessageData\" :maximizedTitle=\"update.InitiatingMessage.FriendlyTypeName\" />\n        </div>\n      </div>\n\n      <!-- Center - Saga properties -->\n      <div class=\"cell cell--center cell--center--border\">\n        <div :class=\"{ 'cell-inner': true, 'cell-inner-line': update.HasTimeout, 'cell-inner-center': !update.HasTimeout }\">\n          <div class=\"saga-state-container\">\n            <h3 class=\"saga-state-title\" v-if=\"update.IsFirstNode\">Initial Saga State</h3>\n            <h3 class=\"saga-state-title\" v-else>State Changes</h3>\n\n            <!-- Error message when parsing fails -->\n            <div v-if=\"hasParsingError\" class=\"json-container\">\n              <div class=\"parsing-error-message\">An error occurred while parsing and displaying the saga state for this update</div>\n            </div>\n\n            <!-- Initial state display -->\n            <div v-else-if=\"update.IsFirstNode\" class=\"json-container json-container--first-node\">\n              <MaximizableCodeEditor :model-value=\"sagaUpdateStateChanges.formattedState || ''\" language=\"json\" :showGutter=\"false\" modalTitle=\"Initial Saga State\" :extensions=\"[monospaceTheme]\" />\n            </div>\n\n            <!-- No changes message -->\n            <div v-else-if=\"!hasStateChanges\" class=\"json-container\">\n              <div class=\"no-changes-message\">No state changes in this update</div>\n            </div>\n\n            <!-- Side-by-side diff view for state changes -->\n            <div v-else-if=\"hasStateChanges && !update.IsFirstNode\">\n              <DiffViewer\n                :hide-line-numbers=\"true\"\n                :showDiffOnly=\"true\"\n                :oldValue=\"sagaUpdateStateChanges.previousFormatted\"\n                :newValue=\"sagaUpdateStateChanges.currentFormatted\"\n                leftTitle=\"Previous State\"\n                rightTitle=\"Updated State\"\n                :showMaximizeIcon=\"true\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Right side - outgoing messages (non-timeout) -->\n      <div class=\"cell cell--side cell--aling-top\" v-if=\"update.HasOutgoingMessages\">\n        <div class=\"cell-inner cell-inner-right\"></div>\n        <SagaOutgoingMessage v-for=\"(msg, msgIndex) in update.OutgoingMessages\" :key=\"msgIndex\" :message=\"msg\" :showMessageData=\"showMessageData\" />\n      </div>\n    </div>\n\n    <!-- Display each outgoing timeout message in separate rows -->\n    <SagaOutgoingTimeoutMessage v-for=\"(msg, msgIndex) in update.OutgoingTimeoutMessages\" :key=\"'timeout-' + msgIndex\" :message=\"msg\" :isLastMessage=\"msgIndex === update.OutgoingTimeoutMessages.length - 1\" :showMessageData=\"showMessageData\" />\n  </div>\n</template>\n\n<style scoped>\n.row {\n  display: flex;\n}\n\n.row--right {\n  justify-content: right;\n}\n\n.cell {\n  padding: 0;\n}\n\n.cell-flex {\n  display: flex;\n}\n\n.cell--side {\n  align-self: flex-end;\n  width: 25%;\n  padding: 0;\n}\n\n.cell--aling-top {\n  align-self: flex-start;\n}\n\n.cell--left-border {\n  border-top: solid 2px #000000;\n}\n\n.cell--center {\n  width: 50%;\n  background-color: #f2f2f2;\n  border: 0;\n}\n\n.cell--center--border {\n  display: flex;\n  flex-direction: column;\n  border-top: solid 2px #000000;\n}\n\n.cell-inner-center {\n  padding: 0.5rem;\n}\n\n.cell-inner-center:first-child {\n  flex-grow: 1;\n}\n\n.cell-inner-line {\n  flex-grow: 1;\n  padding: 0.25rem 0.5rem;\n  border-left: solid 2px #000000;\n  margin-left: 1rem;\n}\n\n.cell-inner-line:first-child {\n  flex-grow: 1;\n}\n\n.cell-inner-side {\n  margin-top: 1rem;\n  padding: 0.25rem 0.25rem 0;\n  border: solid 2px #cccccc;\n  background-color: #cccccc;\n}\n\n.cell-inner-side:nth-child(-n + 2) {\n  margin-top: 0;\n}\n\n.cell-inner-side--active {\n  border: solid 5px #0b6eef;\n  animation: blink-border 1.8s ease-in-out;\n}\n\n.cell-inner-right {\n  position: relative;\n  min-height: 2.5rem;\n  border: solid 2px #000000;\n  border-left: 0;\n  border-bottom: 0;\n  margin-right: 50%;\n}\n\n.cell-inner-right:after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  border: solid 6px #000000;\n  border-top-width: 10px;\n  border-left-color: transparent;\n  border-right-color: transparent;\n  border-bottom: 0;\n  bottom: 0;\n  margin-left: 100%;\n  left: -5px;\n}\n\n.cell-inner--align-bottom {\n  align-self: flex-end;\n}\n\n.message-title {\n  margin: 0;\n  font-size: 0.9rem;\n  font-weight: 900;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.saga-status-title {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 900;\n}\n\n.saga-status-title--inline {\n  display: inline-block;\n}\n\n.timestamp {\n  font-size: 0.9rem;\n}\n\n.timestamp--inline {\n  display: inline-block;\n  margin-left: 0.5rem;\n  font-size: 0.8rem;\n}\n\n.message-data {\n  display: none;\n  padding: 0.2rem;\n  background-color: #ffffff;\n  border: solid 1px #cccccc;\n}\n\n.message-data--active {\n  display: block;\n}\n\n.saga-icon {\n  display: block;\n  float: left;\n  margin-right: 0.35rem;\n}\n\n.saga-icon--side-cell {\n  width: 2rem;\n  height: 2rem;\n  padding: 0.23rem;\n}\n\n.saga-icon--center-cell {\n  float: none;\n  display: inline;\n  width: 1rem;\n  height: 1rem;\n  margin-top: -0.3rem;\n}\n\n.timeout-status {\n  display: inline-block;\n  font-size: 1rem;\n  font-weight: 900;\n}\n\n/* Styles for DiffViewer integration */\n.saga-state-container {\n  padding: 0.5rem;\n}\n\n.saga-state-title {\n  margin: 0 0 0.5rem 0;\n  font-size: 0.9rem;\n  font-weight: bold;\n}\n\n.json-container {\n  background-color: transparent;\n}\n\n.json-container--first-node {\n  max-height: 300px;\n  overflow: auto;\n}\n\n/* Override CodeEditor wrapper styles */\n.json-container :deep(.wrapper.maximazable-code-editor--inline-instance) {\n  border-radius: 0;\n  border: none;\n  background-color: #f2f2f2;\n  margin-top: 0;\n  font-size: 0.75rem;\n}\n.json-container :deep(.wrapper.maximazable-code-editor--inline-instance .toolbar) {\n  border: none;\n  border-radius: 0;\n  background-color: transparent;\n  padding: 0;\n  margin-bottom: 0;\n}\n\n/* :deep(.maximazable-code-editor--inline-instance .cm-scroller) {\n  background-color: #f2f2f2;\n} */\n\n.no-changes-message {\n  padding: 1rem;\n  text-align: center;\n  font-style: italic;\n  color: #666;\n}\n\n.parsing-error-message {\n  padding: 1rem;\n  text-align: center;\n  font-style: italic;\n  color: #a94442;\n}\n\n@keyframes blink-border {\n  0%,\n  100% {\n    border-color: #0b6eef;\n  }\n  20%,\n  60% {\n    border-color: #cccccc;\n  }\n  40%,\n  80% {\n    border-color: #0b6eef;\n  }\n}\n</style>\n","export default \"data:image/svg+xml,%3csvg%20width='15'%20height='15'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0'%20y='0'%20width='15'%20height='15'%20fill='%23333333'%20/%3e%3crect%20x='4'%20y='4'%20width='7'%20height='7'%20fill='%23CCCCCC'%20/%3e%3c/svg%3e\"","<script setup lang=\"ts\">\nimport SagaCompletedIcon from \"@/assets/SagaCompletedIcon.svg\";\n\ndefineProps<{\n  completionTime: string;\n}>();\n</script>\n\n<template>\n  <div class=\"block\">\n    <div class=\"row row--center\">\n      <div class=\"cell cell--center cell--inverted\">\n        <div class=\"cell-inner cell-inner-center\">\n          <img class=\"saga-icon saga-icon--center-cell\" :src=\"SagaCompletedIcon\" alt=\"Saga Completed\" />\n          <h2 class=\"saga-status-title saga-status-title--inline\" v-tippy=\"`The saga has completed its lifecycle`\">Saga Completed</h2>\n          <div class=\"timestamp\" v-tippy=\"`Completion timestamp: ${completionTime}`\">{{ completionTime }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.block {\n  /* block container styles */\n}\n\n.row {\n  display: flex;\n}\n\n.row--center {\n  justify-content: center;\n}\n\n.cell--center {\n  width: 50%;\n  background-color: #f2f2f2;\n  border: 0;\n}\n\n.cell--inverted {\n  background-color: #333333;\n  color: #ffffff;\n  margin-bottom: 2rem;\n}\n\n.cell-inner-center {\n  padding: 0.5rem;\n}\n\n.saga-status-title {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 900;\n}\n\n.saga-status-title--inline {\n  display: inline-block;\n}\n\n.cell--inverted .saga-status-title {\n  font-size: 0.9rem;\n}\n\n.timestamp {\n  font-size: 0.9rem;\n}\n\n.cell--inverted .timestamp {\n  margin-left: 1.2rem;\n}\n\n.saga-icon {\n  display: block;\n  float: left;\n  margin-right: 0.35rem;\n}\n\n.saga-icon--center-cell {\n  float: none;\n  display: inline;\n  width: 1rem;\n  height: 1rem;\n  margin-top: -0.3rem;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, onUnmounted, watch } from \"vue\";\nimport { useSagaDiagramStore } from \"@/stores/SagaDiagramStore\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport { storeToRefs } from \"pinia\";\nimport { SagaViewModel, parseSagaUpdates } from \"./SagaDiagram/SagaDiagramParser\";\nimport { typeToName } from \"@/composables/typeHumanizer\";\nimport LoadingSpinner from \"@/components/LoadingSpinner.vue\";\nimport FAIcon from \"@/components/FAIcon.vue\";\nimport { faListUl } from \"@fortawesome/free-solid-svg-icons\";\n\n//Subcomponents\nimport NoSagaData from \"./SagaDiagram/NoSagaData.vue\";\nimport SagaPluginNeeded from \"./SagaDiagram/SagaPluginNeeded.vue\";\nimport SagaHeader from \"./SagaDiagram/SagaHeader.vue\";\nimport SagaUpdateNode from \"./SagaDiagram/SagaUpdateNode.vue\";\nimport SagaCompletedNode from \"./SagaDiagram/SagaCompletedNode.vue\";\n\nconst sagaDiagramStore = useSagaDiagramStore();\nconst { showMessageData, loading } = storeToRefs(sagaDiagramStore);\n\nconst messageStore = useMessageStore();\n\nwatch(\n  () => messageStore.state.data.invoked_saga?.has_saga,\n  (hasSaga) => {\n    const saga = messageStore.state.data.invoked_saga;\n    if (hasSaga && saga?.saga_id) {\n      sagaDiagramStore.setSagaId(saga.saga_id);\n    } else {\n      sagaDiagramStore.clearSagaHistory();\n    }\n  },\n  { immediate: true }\n);\n\nonUnmounted(() => {\n  sagaDiagramStore.clearSagaHistory();\n});\n\nconst vm = computed<SagaViewModel>(() => {\n  const completedUpdate = sagaDiagramStore.sagaHistory?.changes.find((update) => update.status === \"completed\");\n  const completionTime = completedUpdate ? new Date(completedUpdate.finish_time) : null;\n\n  const { data } = messageStore.state;\n  const { invoked_saga: saga } = data;\n  const sagaHistory = sagaDiagramStore.sagaHistory;\n\n  return {\n    // Saga metadata\n    SagaTitle: typeToName(saga.saga_type) || \"Unknown saga\",\n    SagaGuid: saga.saga_id || \"Missing guid\",\n\n    // Status flags\n    ParticipatedInSaga: saga.has_saga || false,\n    HasSagaData: !!sagaHistory,\n    ShowNoPluginActiveLegend: (!sagaHistory && saga.has_saga) || false,\n    SagaCompleted: !!completedUpdate,\n\n    // Display data\n    FormattedCompletionTime: completionTime ? completionTime.toLocaleString() : \"\",\n    SagaUpdates: parseSagaUpdates(sagaHistory, sagaDiagramStore.messagesData),\n    ShowMessageData: showMessageData.value,\n  };\n});\n</script>\n\n<template>\n  <div class=\"saga-container\">\n    <!-- Toolbar header -->\n    <div v-if=\"vm.HasSagaData\" class=\"toolbar\">\n      <button type=\"button\" class=\"btn btn-secondary btn-sm\" aria-label=\"show-message-data-button\" @click=\"sagaDiagramStore.toggleMessageData\"><FAIcon :icon=\"faListUl\" /> {{ vm.ShowMessageData ? \"Hide Message Data\" : \"Show Message Data\" }}</button>\n    </div>\n\n    <!-- Loading Spinner -->\n    <div v-if=\"loading\" class=\"loading-container\">\n      <LoadingSpinner />\n    </div>\n\n    <!-- No saga Data Available container -->\n    <NoSagaData v-else-if=\"!vm.ParticipatedInSaga\" />\n\n    <!-- Saga Audit Plugin Needed container -->\n    <SagaPluginNeeded v-else-if=\"vm.ShowNoPluginActiveLegend\" />\n\n    <!-- Main Saga Data container -->\n    <div v-else-if=\"vm.HasSagaData\" role=\"table\" aria-label=\"saga-sequence-list\" class=\"body\" style=\"display: flex\">\n      <div class=\"container\">\n        <!-- Saga header with title and navigation -->\n        <SagaHeader :saga-title=\"vm.SagaTitle\" :saga-guid=\"vm.SagaGuid\" />\n\n        <!-- Iterate through each saga update -->\n        <SagaUpdateNode v-for=\"(update, index) in vm.SagaUpdates\" :key=\"index\" :update=\"update\" :show-message-data=\"vm.ShowMessageData\" />\n\n        <!-- Saga Completed section -->\n        <SagaCompletedNode v-if=\"vm.SagaCompleted\" :completion-time=\"vm.FormattedCompletionTime\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* Layout styles */\n\n.saga-container {\n  display: flex;\n  flex-direction: column;\n  margin-top: 5px;\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  background: white;\n}\n\n/* Main containers */\n\n.toolbar {\n  background-color: #f3f3f3;\n  border: #8c8c8c 1px solid;\n  border-radius: 3px;\n  padding: 5px;\n  margin-bottom: 0.5rem;\n  display: flex;\n  flex-direction: row;\n  min-height: 40px;\n}\n.body {\n  display: flex;\n  flex: 1;\n  justify-content: center;\n}\n\n.container {\n  min-width: 50rem;\n  max-width: 100rem;\n}\n\n.loading-container {\n  display: flex;\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n  min-height: 200px;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from \"vue\";\nimport { RouteLocationAsPathGeneric, RouterLink, useRoute } from \"vue-router\";\nimport NoData from \"../NoData.vue\";\nimport TimeSince from \"../TimeSince.vue\";\nimport FlowDiagram from \"./FlowDiagram/FlowDiagram.vue\";\nimport SequenceDiagram from \"./SequenceDiagram.vue\";\nimport routeLinks from \"@/router/routeLinks\";\nimport BodyView from \"@/components/messages/BodyView.vue\";\nimport HeadersView from \"@/components/messages/HeadersView.vue\";\nimport StackTraceView from \"@/components/messages/StacktraceView.vue\";\nimport { useMessageStore } from \"@/stores/MessageStore\";\nimport DeleteMessageButton from \"@/components/messages/DeleteMessageButton.vue\";\nimport RestoreMessageButton from \"@/components/messages/RestoreMessageButton.vue\";\nimport RetryMessageButton from \"@/components/messages/RetryMessageButton.vue\";\nimport EditAndRetryButton from \"@/components/messages/EditAndRetryButton.vue\";\nimport ExportMessageButton from \"@/components/messages/ExportMessageButton.vue\";\nimport TabsLayout from \"@/components/TabsLayout.vue\";\nimport { storeToRefs } from \"pinia\";\nimport MetadataLabel from \"@/components/messages/MetadataLabel.vue\";\nimport MetadataItem from \"@/components/MetadataItem.vue\";\nimport { hexToCSSFilter } from \"hex-to-css-filter\";\nimport SagaDiagram from \"./SagaDiagram.vue\";\nimport FAIcon from \"@/components/FAIcon.vue\";\nimport { faChevronLeft, faTrash, faLaptop, faClockRotateLeft, faClock } from \"@fortawesome/free-solid-svg-icons\";\nimport { useConfigurationStore } from \"@/stores/ConfigurationStore\";\n\nconst route = useRoute();\nconst id = computed(() => route.params.id as string);\nconst messageId = computed(() => route.params.messageId as string);\nconst isError = computed(() => messageId.value === undefined);\nconst backLink = ref<RouteLocationAsPathGeneric>({ path: routeLinks.failedMessage.failedMessages.link });\n\nconst configurationStore = useConfigurationStore();\nconst { isMassTransitConnected } = storeToRefs(configurationStore);\nconst store = useMessageStore();\nconst { state } = storeToRefs(store);\n\nconst hasParticipatedInSaga = computed(() => store.state.data.invoked_saga?.has_saga);\n\nconst tabs = computed(() => {\n  const currentTabs = [\n    {\n      text: \"Message body\",\n      component: BodyView,\n    },\n    {\n      text: \"Headers\",\n      component: HeadersView,\n    },\n  ];\n\n  if (isError.value) {\n    currentTabs.unshift({\n      text: \"Stacktrace\",\n      component: StackTraceView,\n    });\n  }\n\n  if (!isMassTransitConnected.value) {\n    currentTabs.push({\n      text: \"Flow Diagram\",\n      component: FlowDiagram,\n    });\n    currentTabs.push({\n      text: \"Sequence Diagram\",\n      component: SequenceDiagram,\n    });\n    // Add the \"Saga Diagram\" tab only if the saga has been participated in\n    if (hasParticipatedInSaga?.value) {\n      currentTabs.push({\n        text: \"Saga Diagram\",\n        component: SagaDiagram,\n      });\n    }\n  }\n\n  return currentTabs;\n});\n\nwatch(\n  [id, messageId],\n  async ([newId, newMessageId], [oldId, oldMessageId]) => {\n    if (newId !== oldId || newMessageId !== oldMessageId) {\n      store.reset();\n    }\n\n    if (newMessageId !== undefined) {\n      await store.loadMessage(newMessageId, newId);\n    } else {\n      await store.loadFailedMessage(newId);\n    }\n  },\n  { immediate: true }\n);\nconst endpointColor = hexToCSSFilter(\"#929E9E\").filter;\n\nonMounted(() => {\n  const { back, ...otherArgs } = route.query;\n  if (back) {\n    backLink.value = { path: back.toString(), query: otherArgs };\n  }\n});\n</script>\n\n<template>\n  <div class=\"container\">\n    <section>\n      <no-data v-if=\"state.not_found\" title=\"message failures\" message=\"Could not find message. This could be because the message URL is invalid or the corresponding message was processed and is no longer tracked by ServiceControl.\"></no-data>\n      <no-data v-else-if=\"state.failed_to_load\" title=\"message failures\" message=\"An error occurred while trying to load the message. Please check the ServiceControl logs to learn what the issue is.\"></no-data>\n      <template v-else>\n        <div class=\"row\">\n          <div class=\"col-sm-12 no-side-padding\">\n            <RouterLink :to=\"backLink\"><FAIcon :icon=\"faChevronLeft\" size=\"sm\" /> Back</RouterLink>\n            <div class=\"active break group-title\">\n              <h1 class=\"message-type-title\">{{ state.data.message_type }}</h1>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-sm-12 no-side-padding\">\n            <div class=\"metadata group-message-count message-metadata\">\n              <MetadataLabel v-if=\"state.data.failure_status.retry_in_progress\" tooltip=\"Message is being added to the retries queue\" type=\"info\" text=\"Requesting retry...\" />\n              <MetadataLabel v-if=\"state.data.failure_status.retried\" tooltip=\"Message is enqueued to be retried\" type=\"info\" text=\"Waiting for retry\" />\n              <MetadataLabel v-if=\"state.data.failure_status.restoring\" tooltip=\"Message is being restored\" type=\"info\" text=\"Restoring...\" />\n              <MetadataLabel v-if=\"state.data.failure_status.archiving\" tooltip=\"Message is being deleted\" type=\"info\" text=\"Deleting...\" />\n              <MetadataLabel v-if=\"state.data.failure_status.archived\" tooltip=\"Message is deleted\" type=\"warning\" text=\"Deleted\" />\n              <MetadataLabel v-if=\"state.data.failure_status.resolved\" tooltip=\"Message was processed successfully\" type=\"warning\" text=\"Processed\" />\n              <MetadataLabel\n                v-if=\"state.data.failure_metadata.number_of_processing_attempts !== undefined && state.data.failure_metadata.number_of_processing_attempts > 1\"\n                :tooltip=\"`This message has already failed ${state.data.failure_metadata.number_of_processing_attempts} times`\"\n                type=\"important\"\n                :text=\"`${(state.data.failure_metadata.number_of_processing_attempts ?? 0) - 1} Retry Failures`\"\n              />\n              <template v-if=\"state.data.failure_metadata.edited\">\n                <MetadataLabel tooltip=\"Message was edited\" type=\"info\" text=\"Edited\" />\n                <MetadataItem v-if=\"state.data.failure_metadata.edit_of\" :icon=\"faClockRotateLeft\" class=\"metadata-link\">\n                  <RouterLink :to=\"{ path: routeLinks.messages.failedMessage.link(state.data.failure_metadata.edit_of), query: route.query }\">View previous version</RouterLink>\n                </MetadataItem>\n              </template>\n              <MetadataItem v-if=\"state.data.failure_metadata.time_of_failure\" :icon=\"faClock\">Failed: <time-since :date-utc=\"state.data.failure_metadata.time_of_failure\"></time-since></MetadataItem>\n              <MetadataItem v-else :icon=\"faClock\">Processed at: <time-since :date-utc=\"state.data.processed_at\"></time-since></MetadataItem>\n              <template v-if=\"state.data.receiving_endpoint\">\n                <span class=\"metadata\"><i class=\"fa pa-endpoint\" :style=\"{ filter: endpointColor }\"></i> Endpoint: {{ state.data.receiving_endpoint.name }}</span>\n                <MetadataItem :icon=\"faLaptop\">Machine: {{ state.data.receiving_endpoint.host }}</MetadataItem>\n              </template>\n              <span v-if=\"state.data.failure_metadata.redirect\" class=\"metadata\"><i class=\"fa pa-redirect-source pa-redirect-small\"></i> Redirect: {{ state.data.failure_metadata.redirect }}</span>\n              <template v-if=\"state.data.failure_status.archived\">\n                <MetadataItem :icon=\"faClock\">Deleted: <time-since :date-utc=\"state.data.failure_metadata.last_modified\"></time-since></MetadataItem>\n                <MetadataItem v-if=\"state.data.failure_status.delete_soon\" :icon=\"faTrash\" class=\"danger\">Scheduled for permanent deletion: immediately</MetadataItem>\n                <MetadataItem v-else :icon=\"faTrash\" class=\"danger\">Scheduled for permanent deletion: <time-since :date-utc=\"state.data.failure_metadata.deleted_in\"></time-since></MetadataItem>\n              </template>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-sm-12 no-side-padding\">\n            <div class=\"btn-toolbar message-toolbar\">\n              <DeleteMessageButton />\n              <RestoreMessageButton />\n              <RetryMessageButton />\n              <EditAndRetryButton />\n              <ExportMessageButton />\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-sm-12 no-side-padding\">\n            <TabsLayout :tabs=\"tabs\" />\n          </div>\n        </div>\n      </template>\n    </section>\n  </div>\n</template>\n\n<style scoped>\n@import \"../list.css\";\n\nh1.message-type-title {\n  margin: 0 0 8px;\n  font-size: 24px;\n}\n\n.message-metadata {\n  display: flex;\n}\n\ndiv.btn-toolbar.message-toolbar {\n  margin-bottom: 20px;\n}\n\nbutton img {\n  position: relative;\n  top: -1px;\n  width: 17px;\n}\n\n.pa-redirect-source {\n  background-image: url(\"@/assets/redirect-source.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n}\n\n.pa-redirect-small {\n  position: relative;\n  top: 1px;\n  height: 14px;\n  width: 14px;\n}\n\n.pa-endpoint {\n  position: relative;\n  top: 3px;\n  background-image: url(\"@/assets/endpoint.svg\");\n  background-position: center;\n  background-repeat: no-repeat;\n  display: inline-block;\n  height: 15px;\n  width: 15px;\n}\n</style>\n"],"names":["tryOnScopeDispose","fn","getCurrentScope","onScopeDispose","toValue","r","unref","isClient","isDef$1","val","toString","isObject","noop$3","createFilterWrapper","filter2","wrapper","args","resolve","reject","bypassFilter","invoke","pausableFilter","extendFilter","isActive","ref","pause","resume","eventFilter","readonly","promiseTimeout","ms","throwOnTimeout","reason","watchWithFilter","source","cb","options","watchOptions","watch","watchPausable","toRefs","objectRef","isRef","toRefs$1","result","key","customRef","v","_a","copy","newObject","createUntil","isNot","toMatch","condition","flush","deep","timeout2","stop","promises","toBe","value","v1","v2","toBeTruthy","toBeNull","toBeUndefined","toBeNaN","toContains","array2","changed","changedTimes","n","count","until","unrefElement","elRef","plain","defaultWindow","useEventListener","target","events","listeners","cleanups","cleanup","register","el","event","listener","options2","stopWatch","optionsClone","createKeyPredicate$1","keyFilter","onKeyStroke","handler","eventName","passive","dedupe","predicate","e","cloneFnJSON","useVModel","props","emit","_b","_c","clone","defaultValue","shouldEmit","vm","getCurrentInstance","_emit","cloneFn","getValue","triggerEmit","initialValue","proxy","isUpdating","nextTick","computed","noop$2","dispatch","i","_","t","Dispatch","parseTypenames$1","typenames","types","name","typename","callback","T","get$1","set$1","type","that","c","xhtml","namespaces","namespace","prefix","creatorInherit","document2","uri","creatorFixed","fullname","creator","none","selector","selector2","selection_select","select2","groups","m","subgroups","j","group","subgroup","node","subnode","Selection$1","array","x","empty","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","find","childFind","match","childFirst","selection_selectChild","filter","children","childrenFilter","selection_selectChildren","selection_filter","sparse","update","selection_enter","EnterNode","parent","datum2","child","next","constant$3","bindIndex","enter","exit","data","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","datum","selection_data","bind","arraylike","enterGroup","updateGroup","exitGroup","i0","i1","previous","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","context","selection2","groups0","groups1","m0","m1","merges","group0","group1","merge","selection_order","selection_sort","compare","ascending","compareNode","a","b","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","size","selection_empty","selection_each","attrRemove$1","attrRemoveNS$1","attrConstant$1","attrConstantNS$1","attrFunction$1","attrFunctionNS$1","selection_attr","defaultView","styleRemove$1","styleConstant$1","priority","styleFunction$1","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant$1","textFunction$1","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","create2","constantNull","selection_insert","before","remove","selection_remove","selection_cloneShallow","selection_cloneDeep","selection_clone","selection_datum","contextListener","parseTypenames","onRemove","on","o","onAdd","selection_on","dispatchEvent","params","window2","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","root","selection","selection_selection","select","sourceEvent","sourceEvent2","pointer","svg","point","rect","nonpassive","nonpassivecapture","nopropagation$1","noevent$1","dragDisable","view","root2","yesdrag","noclick","constant$2","DragEvent","subject","identifier","active","y","dx","dy","dispatch2","defaultFilter$1","defaultContainer","defaultSubject","d","defaultTouchable$1","drag","container","touchable","gestures","mousedownx","mousedowny","mousemoving","touchending","clickDistance2","drag2","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","touches","container2","touch","p","s","event2","touch2","p0","define","constructor","factory","prototype","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","color","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","format","l","rgbn","Rgb","rgba","hsla","g","rgbConvert","rgb","opacity","k","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","hex","h2","Hsl","min","max","hsl","m2","hsl2rgb","clamph","clampt","constant$1","linear","exponential","gamma","nogamma","interpolateRgb","rgbGamma","color2","rgb$1","start2","end","numberArray","isNumberArray","genericArray","nb","na","interpolate$1","date","interpolateNumber","object","reA","reB","zero","one","interpolateString","bi","am","bm","bs","q","i2","degrees","identity$1","decompose","f","scaleX","scaleY","skewX","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","rotate","scale","interpolateTransformCss","interpolateTransformSvg","epsilon2","cosh","sinh","tanh","interpolateZoom","zoomRho","rho","rho2","rho4","zoom2","p1","ux0","uy0","w0","ux1","uy1","w1","d2","S","d1","b0","b1","r0","r1","coshr0","u","_1","_2","_4","frame","timeout$1","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","delay","time","sleep","timerFlush","wake","nap","poke","now2","t0","t1","t2","timeout","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","id2","index","timing","schedules","create","init","schedule2","get","set","self","tween","tick","interrupt","empty2","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","interpolate","attrRemove","attrRemoveNS","attrConstant","interpolate2","value1","string00","string1","interpolate0","string0","attrConstantNS","attrFunction","string10","attrFunctionNS","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","start","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","children2","inherit2","Selection","transition_selection","styleNull","styleRemove","styleConstant","styleFunction","styleMaybeRemove","listener0","remove2","transition_style","styleInterpolate","styleTween","transition_styleTween","textConstant","textFunction","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","cancel","id","selection_prototype","cubicInOut","defaultTiming","inherit","selection_transition","constant","ZoomEvent","transform","Transform","location","identity","nopropagation","noevent","defaultFilter","defaultExtent","defaultTransform","defaultWheelDelta","defaultTouchable","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","zoom","constrain","wheelDelta2","scaleExtent","duration","touchstarting","touchfirst","touchDelay","wheelDelay","tapDistance","wheeled","dblclicked","collection","k0","k1","centroid","extent2","w","clean","Gesture","wheelidled","currentTarget","x0","y0","started","l0","l1","dp","dl","Position","Position2","SelectionMode","SelectionMode2","ConnectionLineType","ConnectionLineType2","ConnectionMode","ConnectionMode2","MarkerType","MarkerType2","PanOnScrollMode","PanOnScrollMode2","PanelPosition","PanelPosition2","inputTags","defaultDoc","isInputDOMNode","hasAttribute","closest","wasModifierPressed","isKeyMatch","pressedKey","keyToMatch","pressedKeys","isKeyUp","keyCombination","isMatch","createKeyPredicate","keyOrCode","useKeyOrCode","code","keysToWatch","useKeyPress","toValue$1","isPressed","shallowRef","modifierPressed","currentFilter","createKeyFilterFn","nextKeyFilter","previousKeyFilter","reset","actInsideInputWithModifier","preventDefault","target2","isInteractiveElement","keyFilter2","ARIA_NODE_DESC_KEY","ARIA_EDGE_DESC_KEY","ARIA_LIVE_MESSAGE","elementSelectionKeys","arrowKeyDiffs","nodeToRect","getOverlappingArea","rectA","rectB","xOverlap","yOverlap","getDimensions","clamp","clampPosition","position","getHostForElement","element","doc","isEdge","isNode","isGraphNode","isNumeric","isRect","obj","parseNode","existingNode","parentNode","initialState","markRaw","isDef","parseEdge","edge","existingEdge","defaultEdgeOptions","getConnectedElements","nodeOrId","nodes","edges","dir","connectedIds","origin","getOutgoers","nodeOrId2","elements","nodeId","getIncomers","getEdgeId","sourceHandle","targetHandle","connectionExists","rendererPointToPoint","tx","ty","tScale","pointToRendererPoint","snapToGrid","snapGrid","snapPosition","getBoundsOfBoxes","box1","box2","rectToBox","width","height","boxToRect","x2","y2","getRectOfNodes","box","getNodesInside","viewport","partially","excludeNonSelectableNodes","paneRect","visibleNodes","dimensions","selectable","hidden","overlappingArea","notInitialized","partiallyVisible","area","getConnectedEdges","nodesOrId","nodeIds","parsePadding","padding","paddingValue","warn","parsePaddings","paddingY","paddingX","top","bottom","left","right","calculateAppliedPaddings","bounds","boundRight","boundBottom","getTransformForBounds","minZoom","maxZoom","xZoom","yZoom","clampedZoom","boundsCenterX","boundsCenterY","newPadding","offset","getXYZPos","parentPos","computedPosition","isParentSelected","nodeLookup","getMarkerId","marker","vueFlowId","wheelDelta","factor","isMacOs","calcAutoPanVelocity","calcAutoPan","pos","speed","distance2","xMovement","yMovement","handleParentExpand","updateItem","extendWidth","extendHeight","parentStyles","currWidth","xDiff","yDiff","styleFunc","applyChanges","changes","addRemoveChanges","change","elementIds","currentChange","createSelectionChange","selected","createAdditionChange","item","createNodeRemoveChange","createEdgeRemoveChange","getSelectionChanges","items","selectedIds","mutateItem","willBeSelected","noop$1","createExtendedEventHook","defaultHandler","emitter","hasEmitListeners","hasListeners","setEmitter","removeEmitter","setHasEmitListeners","removeHasEmitListeners","off","offFn","param","queue","hasSelector","current","getDragItems","nodesDraggable","mousePos","dragItems","getEventHandlerParams","findNode","extendedDragItems","dragItem","getExtentPadding","getParentExtent","currentExtent","getExtent","triggerError","parentExtent","VueFlowError","ErrorCode","parentX","parentY","clampNodeExtent","calcNextPosition","nextPosition","nodeExtent","clampedPos","getHandlePosition","handle","fallbackPosition","center","getNodeDimensions","getEdgeHandle","handleId","isEdgeVisible","sourcePos","targetPos","sourceWidth","sourceHeight","targetWidth","targetHeight","edgeBox","viewBox","getEdgeZIndex","elevateEdgesOnSelect","hasZIndex","z","ErrorCode2","messages","parentId","isMouseEvent","isUseDragEvent","getEventPosition","isMouse","evtX","evtY","alwaysValid$1","resetRecentHandle","handleDomNode","getNodesWithinDistance","ADDITIONAL_DISTANCE","getClosestHandle","connectionRadius","fromHandle","closestHandles","minDistance","closeNodes","allHandles","oppositeHandleType","isValidHandle","connectionMode","fromNodeId","fromHandleId","fromType","lib","flowId","isValidConnection","isTarget","handleBelow","handleToCheck","handleType","getHandleType","handleNodeId","connectable","connectableEnd","connection","isValid","getHandle","edgeUpdaterType","getConnectionStatus","isInsideConnectionRadius","isHandleValid","connectionStatus","isConnectionValid","withAbsolutePosition","handles","oppositePosition","productionEnvs","message","isDev","getHandleBounds","nodeElement","nodeBounds","handleBounds","handleNodeClick","multiSelectionActive","addSelectedNodes","removeSelectedNodes","nodesSelectionActive","unselect","nodeEl","addEdgeToStore","edgeParams","updateEdgeAction","newConnection","prevEdge","shouldReplaceId","rest","createGraphNodes","parentNodes","nextNodes","parsed","addConnectionToLookup","connectionKey","connectionLookup","nodeMap","typeMap","handleMap","updateConnectionLookup","edgeLookup","sourceNode","targetNode","sourceKey","targetKey","areSetsEqual","createGraphEdges","nextEdges","findEdge","onError","validEdges","edgeOrConnection","VueFlow","NodeId","NodeRef","EdgeId","EdgeRef","Slots","useDrag","vueFlowRef","noDragClassName","nodeDragThreshold","autoPanOnNodeDrag","autoPanSpeed","panBy","selectNodesOnDrag","removeSelectedElements","updateNodePositions","emits","useVueFlow","onStart","onDrag","onStop","onClick","disabled","dragHandle","dragging","dragHandler","containerBounds","lastPos","mousePosition","dragEvent","dragStarted","nodePositionsChanged","autoPanId","autoPanStarted","getPointerPosition","useGetPointerPosition","updateNodes","hasChange","currentNode","autoPan","nextPos","startDrag","pointerPos","eventStart","eventDrag","eventEnd","isClick","evt","isDisabled","onCleanup","unrefDragHandle","createEdgeHooks","useEdgeHooks","edgeHooks","hooks","xSnapped","ySnapped","alwaysValid","useHandle","onEdgeUpdate","onEdgeUpdateEnd","connectOnClick","connectionClickStartHandle","nodesConnectable","autoPanOnConnect","startConnection","updateConnection","endConnection","isValidConnectionProp","handlePointerDown","isMouseTriggered","clickedHandle","onPointerMove","connectionPosition","closestHandle","isValidConnectionHandler","newConnection2","previousConnection","connectingHandle","prevActiveHandle","onPointerUp","fromHandleInternal","fromNodeInternal","handleClick","isOwnHandle","useNodeId","inject","useNode","createNodeHooks","useNodeHooks","nodeHooks","useUpdateNodePositions","getSelectedNodes","positionDiff","isShiftPressed","xVelo","yVelo","positionDiffX","positionDiffY","nodeUpdates","DEFAULT_PADDING","defaultEase","noop","initialViewportHelper","useViewportHelper","state","transitionOptions","getD3Transition","transformViewport","zoom22","clampedX","clampedY","nextTransform","zoomLevel","nodesToFit","nextZoom","centerX","centerY","domX","domY","correctedPosition","ease","onEnd","hasDuration","useWatchProps","models","store","scope","effectScope","watchModelValue","pauseModel","pauseStore","immediateStore","watchNodesValue","watchEdgesValue","watchMaxZoom","watchMinZoom","watchTranslateExtent","watchNodeExtent","watchApplyDefault","watchAutoConnect","autoConnector","autoConnectEnabled","watchRest","skip","propKey","propValue","toRef","storeRef","nextValue","createHooks","err","useHooks","inst","onBeforeMount","hasVNodeListener","toHandlerKey","head","useState","storeOptionsToSkip","useActions","viewportHelper","updateNodeInternals","ids","updateIds","getIncomers$1","getOutgoers$1","getConnectedEdges$1","getHandleConnections","handleSuffix","updateNodeDimensions","updates","viewportNode","style","elementSelectionHandler","edgeIds","changedNodes","changedEdges","edgeId","nodeChanges","addSelectedEdges","addSelectedElements","removeSelectedEdges","edgeChanges","changes2","curr","selectionChange","setMinZoom","setMaxZoom","setTranslateExtent","setNodeExtent","setPaneClickDistance","clickDistance","setInteractive","isInteractive","setNodes","setEdges","setElements","nextElements","addNodes","graphNodes","addEdges","removeNodes","removeConnectedEdges","removeChildren","nodesToRemove","createEdgeRemovalChanges","nodes2","connectedEdges","createChildrenRemovalChanges","currNode","removeEdges","edgesToRemove","currEdge","updateEdge2","oldEdge","prevEdgeIndex","newEdge","validEdge","updateEdgeData","dataUpdate","nextData","applyNodeChanges2","applyEdgeChanges2","updateNode","nodeUpdate","nextNode","updateNodeData","startHandle","status","getNodeRect","nodeOrRect","isRectObj","getIntersectingNodes","nodeRect","isRect2","intersections","currNodeRect","isNodeIntersecting","delta","d3Zoom","d3Selection","constrainedTransform","transformChanged","setState","opts","exclude","setSkippedOptions","option","transitionOpts","__","___","____","_____","______","_______","_________","resetState","updatedTransform","bbox","_hoisted_1$9","__default__$f","_sfc_main$f","defineComponent","__props","__expose","createPropsRestProxy","connectionStartHandle","connectionEndHandle","noPanClassName","isConnectableStart","isConnectableEnd","isConnecting","_d","_e","_f","isClickConnecting","isConnectable","onMounted","existingBounds","nextBounds","onPointerDown","_ctx","_cache","openBlock","createElementBlock","normalizeClass","renderSlot","DefaultNode","sourcePosition","targetPosition","_label","isValidTargetPos","isValidSourcePos","label","h","Fragment","DefaultNode$1","OutputNode","OutputNode$1","InputNode","InputNode$1","_hoisted_1$8","_hoisted_2$2","_hoisted_3$1","__default__$e","_sfc_main$e","getBox","nextBox","normalizeStyle","createCommentVNode","createElementVNode","mergeProps","createBlock","resolveDynamicComponent","createTextVNode","toDisplayString","_hoisted_1$7","_hoisted_2$1","__default__$d","_sfc_main$d","pathEl","interactionEl","labelEl","attrs","useAttrs","getSimpleEdgeCenter","sourceX","sourceY","targetX","targetY","xOffset","yOffset","getBezierEdgeCenter","sourceControlX","sourceControlY","targetControlX","targetControlY","offsetX","offsetY","calculateControlOffset","curvature","getControlWithCurvature","x1","y1","ctX","ctY","getBezierPath","bezierPathParams","labelX","labelY","getControl","getSimpleBezierPath","simpleBezierPathParams","handleDirections","getDirection","distance","getPoints","sourceDir","targetDir","sourceGapped","targetGapped","dirAccessor","currDir","points","sourceGapOffset","targetGapOffset","defaultCenterX","defaultCenterY","defaultOffsetX","defaultOffsetY","verticalSplit","horizontalSplit","sourceTarget","targetSource","diff","gapOffset","dirAccessorOpposite","isSameDir","sourceGtTargetOppo","sourceLtTargetOppo","sourceGapPoint","targetGapPoint","maxXDistance","maxYDistance","getBend","bendSize","xDir2","yDir2","xDir","yDir","getSmoothStepPath","smoothStepPathParams","borderRadius","res","segment","getStraightPath","straightEdgeParams","StraightEdge","path","StraightEdge$1","SmoothStepEdge","SmoothStepEdge$1","StepEdge","StepEdge$1","BezierEdge","BezierEdge$1","SimpleBezierEdge","SimpleBezierEdge$1","defaultNodeTypes","defaultEdgeTypes","useGetters","getNode","getEdge","getEdgeTypes","edgeTypes","keys","getNodeTypes","nodeTypes","getNodes","getEdges","visibleEdges","getElements","selectedNodes","getSelectedEdges","selectedEdges","getSelectedElements","getNodesInitialized","initializedNodes","areNodesInitialized","Storage","vueApp","existingInstance","flow","preloadedState","reactiveState","reactive","hooksOn","nodesMap","edgesMap","getters","actions","idOrOpts","storage","isOptsObj","vueFlow","injectedState","shouldApplyDefault","nodesChangeHandler","edgesChangeHandler","storedInstance","provide","instance","useResizeHandler","viewportEl","resizeObserver","updateDimensions","onBeforeUnmount","__default__$c","_sfc_main$c","_hoisted_1$6","__default__$b","_sfc_main$b","disableKeyboardA11y","userSelectionActive","updatePositions","selectedNodesBBox","innerStyle","onContextMenu","onKeyDown","getMousePosition","__default__$a","_sfc_main$a","userSelectionRect","elementsSelectable","selectionMode","deleteKeyCode","multiSelectionKeyCode","selectedNodeIds","selectedEdgeIds","hasActiveSelection","connectionInProgress","selectionInProgress","selectionStarted","deleteKeyPressed","multiSelectKeyPressed","isKeyPressed","wrapHandler","containerRef","onWheel","mouseX","mouseY","startX","startY","nextUserSelectRect","prevSelectedNodeIds","prevSelectedEdgeIds","edgesSelectable","connections","$event","__default__$9","_sfc_main$9","fitViewOnInit","fitViewOnInitDone","isHidden","__default__$8","_sfc_main$8","defaultViewport","zoomActivationKeyCode","selectionKeyCode","panActivationKeyCode","panOnScroll","panOnScrollMode","panOnScrollSpeed","panOnDrag","zoomOnDoubleClick","zoomOnPinch","zoomOnScroll","preventScrolling","noWheelClassName","paneDragging","storeD3Zoom","storeD3Selection","storeD3ZoomHandler","viewportRef","paneClickDistance","isZoomingOrPanning","isPanScrolling","panScrollTimeout","zoomedWithRightMouseButton","mouseButton","prevTransform","panKeyPressed","selectionKeyPressed","zoomKeyPressed","shouldPanOnDrag","shouldPanOnScroll","isSelecting","viewportElement","d3ZoomHandler","flowTransform","eventToFlowTransform","isRightClickPan","viewChanged","zoomScroll","pinchZoom","eventButton","isWheelEvent","isWrappedWithClass","buttonAllowed","currentZoom","_isMacOs","pinchDelta","deltaNormalize","deltaX","deltaY","nextViewport","invalidEvent","pan","usedButton","prevViewport","eventTransform","className","createVNode","withCtx","_hoisted_1$5","_hoisted_2","_hoisted_3","__default__$7","_sfc_main$7","ariaLiveMessage","useOnInitHandler","vfInstance","isInitialized","shiftX","shift","shiftY","EdgeAnchor","radius","EdgeAnchor$1","EdgeWrapper","edgeUpdaterRadius","edgesUpdatable","edgesFocusable","slots","mouseOver","updating","edgeEl","isSelectable","isUpdatable","isFocusable","edgeClass","edgeStyle","edgeCmp","slot","edgeType","components","resolveComponent","pathOptions","sourceNodeHandles","targetNodeHandles","onEdgeClick","onEdgeContextMenu","onDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdaterSourceMouseDown","onEdgeUpdaterMouseEnter","onEdgeUpdaterMouseOut","onEdgeUpdaterTargetMouseDown","handleEdgeUpdater","isSourceHandle","EdgeWrapper$1","ConnectionLine","connectionLineType","connectionLineStyle","connectionLineOptions","connectionLineComponent","fromNode","_a2","toNode","toXY","markerStart","markerEnd","startHandleId","fromHandleBounds","oppositeBounds","fromPosition","fromX","fromY","toHandle","_a3","toPosition","dAttr","pathParams","ConnectionLine$1","_hoisted_1$4","__default__$6","_sfc_main$6","_hoisted_1$3","__default__$5","_sfc_main$5","defaultColor","markers","markers2","createMarkers","markerId","renderList","__default__$4","_sfc_main$4","NodeWrapper","onUpdateNodeInternals","elevateNodesOnSelect","nodesFocusable","isDraggable","hasPointerEvents","isInit","nodeCmp","nodeType","onSelectNode","getClass","getStyle","styles","zIndex","updateInternals","newX","newY","parentZ","nodeZIndex","xyzPos","nodeExtent2","globalExtent","oldNodeExtent","oldGlobalExtent","clampPosition2","onMouseEnter","onMouseMove","onMouseLeave","NodeWrapper$1","useNodesInitialized","_hoisted_1$1","__default__$2","_sfc_main$2","nodesInitialized","entries","entry","_cached","_memo","isMemoSame","_item","useStylesLoadedWarning","pane","_hoisted_1","__default__$1","_sfc_main$1","useSlots","modelValue","modelNodes","modelEdges","disposeWatchers","onUnmounted","__default__","_sfc_main","positionClasses","NServiceBusHeaders","_export_sfc","sfc","_sfc_render","$props","$setup","$data","$options","ControlButton","_hoisted_2$4","_hoisted_3$4","render$4","PlusIcon","_hoisted_2$3","_hoisted_3$3","render$3","MinusIcon","_hoisted_1$2","_hoisted_3$2","render$2","FitView","render$1","Lock","render","Unlock","zoomIn","zoomOut","fitView","minZoomReached","maxZoomReached","onZoomInHandler","onZoomOutHandler","onFitViewHandler","onInteractiveChangeHandler","Panel","textContainer","tooltipText","updateTooltip","_createElementBlock","_normalizeClass","displayText","formatTypeName","_createVNode","TextEllipses","_createBlock","_resolveDynamicComponent","TypeNameDisplay","DEFAULT_EDGE_NAME","GRAPH_NODE","EDGE_KEY_DELIM","Graph","newDefault","vs","removeEdge","ancestor","predsV","sucsV","preds","union","succ","neighbors","findParent","valueSpecified","arg0","edgeArgsToId","edgeObj","edgeArgsToObj","incrementOrInitEntry","edgeObjToId","decrementOrRemoveEntry","inV","outV","inEdges","map","isDirected","v_","w_","tmp","graph","version","require$$0","require$$1","json","write","read","writeNodes","writeEdges","nodeValue","edgeValue","components_1","visited","cmpts","cmpt","dfs","PriorityQueue","keyIndices","arr","largest","origArrI","origArrJ","priorityQueue","dijkstra_1","dijkstra","DEFAULT_WEIGHT_FUNC","weightFn","edgeFn","runDijkstra","results","pq","vEntry","updateNeighbors","wEntry","weight","dijkstraAll_1","dijkstraAll","weightFunc","edgeFunc","acc","tarjan_1","tarjan","stack","findCycles_1","findCycles","floydWarshall_1","floydWarshall","runFloydWarshall","rowK","rowI","ik","kj","ij","altDistance","topsort","visit","CycleException","topsort_1","isAcyclic_1","isAcyclic","dfs_1","order","navigation","orderFunc","postOrderDfs","preOrderDfs","forEachRight","iteratee","length","postorder_1","postorder","preorder_1","preorder","prim_1","prim","pri","edgeWeight","alg","require$$2","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","graphlib","List","sentinel","unlink","strs","filterOutLinks","greedyFas","greedyFAS","DEFAULT_WEIGHT_FN","buildState","doGreedyFAS","buckets","zeroIdx","sources","sinks","removeNode","collectPredecessors","uEntry","assignBucket","fasGraph","maxIn","maxOut","prevWeight","range","limit","util","addBorderNode","addDummyNode","applyWithChunking","asNonCompoundGraph","buildLayerMatrix","intersectRect","mapValues","maxRank","normalizeRanks","notime","partition","pick","predecessorWeights","removeEmptyRanks","simplify","successorWeights","uniqueId","zipObject","simplified","simpleLabel","weightMap","sucs","sx","sy","layering","rank","nodeRanks","layers","nodeRankFactor","splitToChunks","chunkSize","CHUNKING_THRESHOLD","chunks","chunk","argsArray","idCounter","step","endCon","dest","funcOrProp","func","values","acyclic","run","undo","dfsFAS","fas","forwardName","normalize","normalizeEdge","vRank","wRank","edgeLabel","labelRank","dummy","origLabel","longestPath","slack","outEdgesMinLens","feasibleTree_1","feasibleTree","tightTree","findMinSlackEdge","shiftRanks","edgeV","edgeSlack","initRank","networkSimplex_1","networkSimplex","initLowLimValues","initCutValues","calcCutValue","leaveEdge","enterEdge","exchangeEdges","assignCutValue","childLab","childIsTail","graphEdge","cutValue","isOutEdge","other","pointsToHead","otherWeight","isTreeEdge","otherCutValue","tree","dfsAssignLowLim","nextLim","low","vLabel","wLabel","tailLabel","flip","candidates","isDescendant","updateRanks","flipped","rootLabel","rankUtil","rank_1","ranker","networkSimplexRanker","tightTreeRanker","longestPathRanker","parentDummyChains_1","parentDummyChains","postorderNums","pathData","findPath","lca","pathIdx","pathV","vPath","wPath","lim","nestingGraph","depths","treeDepths","depthsArr","nodeSep","sumWeights","childNode","childTop","childBottom","thisWeight","minlen","depth","graphLabel","addBorderSegments_1","addBorderSegments","prop","sg","sgNode","prev","coordinateSystem","adjust","rankDir","swapWidthHeight","reverseY","swapXY","swapWidthHeightOne","reverseYOne","swapXYOne","initOrder_1","initOrder","simpleNodes","simpleNodesRanks","crossCount_1","crossCount","cc","twoLayerCrossCount","northLayer","southLayer","southPos","southEntries","firstIndex","treeSize","weightSum","barycenter_1","barycenter","movable","nodeU","resolveConflicts_1","resolveConflicts","cg","mappedEntries","entryV","entryW","sourceSet","doResolveConflicts","handleIn","mergeEntries","handleOut","sum","sort_1","sort","biasRight","parts","sortable","unsortable","vsIndex","compareWithBias","consumeUnsortable","last","bias","sortSubgraph_1","sortSubgraph","bl","br","subgraphs","barycenters","subgraphResult","mergeBarycenters","expandSubgraphs","blPred","brPred","buildLayerGraph_1","buildLayerGraph","relationship","nodesWithRank","createRootNode","addSubgraphConstraints_1","addSubgraphConstraints","rootPrev","prevChild","order_1","downLayerGraphs","buildLayerGraphs","upLayerGraphs","assignOrder","bestCC","best","lastBest","sweepLayerGraphs","ranks","nodesByRank","addNodeToRank","layerGraphs","lg","sorted","layer","bk","positionX","findType1Conflicts","findType2Conflicts","addConflict","hasConflict","verticalAlignment","horizontalCompaction","alignCoordinates","findSmallestWidthAlignment","balance","conflicts","visitLayer","prevLayer","scanPos","prevLayerLength","lastNode","findOtherInnerSegmentNode","scanNode","uLabel","uPos","scan","south","southEnd","prevNorthBorder","nextNorthBorder","uNode","north","prevNorthPos","nextNorthPos","southLookahead","predecessors","conflictsV","neighborFn","align","prevIdx","ws","mp","il","reverseSep","xs","blockG","buildBlockGraph","borderType","iterate","setXsFunc","nextNodesFunc","elem","pass1","pass2","blockGraph","sepFn","sep","vRoot","uRoot","prevMax","xss","currentMinAndXs","halfWidth","newMin","alignTo","alignToVals","alignToMin","alignToMax","vert","horiz","alignment","xsVals","num","adjustedLayering","inner","smallestWidth","edgeSep","position_1","positionY","rankSep","prevY","maxHeight","layout_1","layout","layoutGraph","buildLayoutGraph","runLayout","updateInputGraph","makeSpaceForEdgeLabels","removeSelfEdges","injectEdgeLabelProxies","assignRankMinMax","removeEdgeLabelProxies","insertSelfEdges","positionSelfEdges","removeBorderNodes","fixupEdgeLabelCoords","translateGraph","assignNodeIntersects","reversePointsForReversedEdges","inputGraph","inputLabel","layoutLabel","graphNumAttrs","graphDefaults","graphAttrs","nodeNumAttrs","nodeDefaults","edgeNumAttrs","edgeDefaults","edgeAttrs","canonicalize","selectNumberAttrs","newNode","minX","maxX","minY","maxY","marginX","marginY","getExtremes","nodeV","nodeW","p2","orderShift","selfEdge","selfNode","newAttrs","debug","debugOrdering","layerMatrix","layerV","dagre","useLayout","dagreGraph","graphNode","nodeWithPosition","useMessageStore","conversationData","storeToRefs","getConversation","conversationId","SagaInvocation","saga","sagaIdHeader","getHeaderByKey","originatedSagaIdHeader","MessageNode","isPublished","MessageIntent","isTimeout","sagas","MessageStatus","constructNodes","messageMap","header","constructEdges","relatedTo","parentMessages","parentMessage","addConnection","childMessage","backLink","routeLinks","back","useRouter","errorColor","hexToCSSFilter","selectedErrorColor","_openBlock","_unref","LoadingSpinner","_withCtx","_createElementVNode","_hoisted_4","_normalizeStyle","_directive_tippy","_hoisted_5","_component_RouterLink","_hoisted_6","TimeSince","_hoisted_7","_Fragment","_renderList","SagaName","Controls","Direction","RoutedMessageType","createRoute","routedMessage","processingHandler","MessageProcessingRouteItem","createRoutedMessage","RoutedMessageItem","friendlyTypeName","createProcessingEndpoint","EndpointItem","createSendingEndpoint","EndpointRegistry","#store","endpoint","host","initialHost","Host","hostId","versions","HandlerState","ConversationStartHandlerName","createSendingHandler","sendingEndpoint","HandlerItem","createProcessingHandler","processingEndpoint","updateProcessingHandler","HandlerRegistry","endpointName","existing","hh","mm","ss","timeSent","messageType","ModelCreator","#endpoints","#handlers","#processingRoutes","endpointRegistry","handlerRegistry","firstOrderHandlers","messagesInOrder","MessageTreeNode","sendingHandler","sendingHandlerIsNew","processingHandlerIsNew","orderByHandledAt","#message","#parent","#children","resolved","Endpoint_Width","useSequenceDiagramStore","defineStore","messageStore","router","endpoints","handlers","routes","endpointCentrePoints","maxWidth","handlerLocations","highlightId","isLoading","selectedId","model","setStartX","newValue","setMaxWidth","setMaxHeight","setEndpointCentrePoints","centrePoints","setHandlerLocations","locations","setHighlightId","refreshConversation","navigateTo","messageUniqueId","messageId","isError","Endpoint_Gap","Endpoint_Image_Width","epTextRefs","endpointItems","previousEndpoint","lastEndpoint","setEndpointTextRef","_toDisplayString","timeline","Height_Per_Out","Handler_Gap","Handler_Width","messageTypeRefs","hasMadeVisible","selectedElement","onActivated","scrollToIfSelected","handlerItems","nextY","cp","messageTypeElement","fill","icon","iconSize","messageTypeOffset","setMessageTypeRef","handlerId","Arrow_Head_Width","Message_Type_Margin","arrows","route","fromHandler","fromHandlerLocation","hl","toHandlerLocation","messageTypeElementBounds","arrowIndex","out","toHandlerCentre","direction","arrow","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","formatTime","milliseconds","useFormatTime","useTooltips","useTippy","EndpointTooltip","HandlerTooltip","RouteTooltip","endpointYOffset","FAIcon","faInfoCircle","ev","Timeline","Handlers","Routes","Endpoints","parseContentType","contentType","bodyState","body","CodeEditor","headers","hoverStates","searchTerm","toggleHover","filteredHeaders","FilterInput","_hoisted_8","_hoisted_9","CopyToClipboard","languages","formattedStack","selectedLanguage","detectLanguagesInOrder","text","languageRegexes","detectedLanguages","lang","foundLang","formatStackTrace","stackTrace","selectedLang","lines","fileAndLineNumberRegEx","atRegex","line","spaces","methodWithType","paramsWithFile","method","paramType","paramName","matchFile","file","lineNumber","processStackTrace","rawContent","_createTextVNode","StacktraceFormatter","isConfirmDialogVisible","failureStatus","isVisible","handleConfirm","showToastAfterOperation","TYPE","FailedMessageStatus","ActionButton","faTrash","_Teleport","ConfirmDialog","faUndo","faRefresh","settings","origHeaderValue","headerValue","resetHeaderChanges","markHeaderAsRemoved","faLock","faExclamationTriangle","faPencil","_vModelText","__emit","panel","localMessage","showEditAndRetryConfirmation","showCancelConfirmation","showEditRetryGenericError","edit_and_retry_config","uneditedMessageBody","regExToPruneLineEndings","debounceBodyUpdate","useDebounceFn","close","confirmEditAndRetry","confirmCancel","resetBodyChanges","removeHeadersMarkedAsRemoved","retryEditedMessage","initializeMessageBodyAndHeaders","getHeaderValue","local","parsedContentType","messageIntent","togglePanel","panelNum","_hoisted_15","faExclamationCircle","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","MessageHeader","_hoisted_24","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","closeDialog","editRetryResponse","isEditIgnoredDialogVisible","handleIgnoreClose","useShowToast","openDialog","EditRetryDialog","EditIgnoredDialog","executing","exportMessage","exportedString","downloadFileFromString","faDownload","activePanel","activeComponent","newTabs","tab","_withModifiers","_KeepAlive","useSagaDiagramStore","sagaHistory","sagaId","loading","messageDataLoading","error","showMessageData","fetchedMessages","messagesData","selectedMessageId","scrollToTimeoutRequest","scrollToTimeout","MessageBodyEndpoint","serviceControlStore","useServiceControlStore","newMessageId","setSelectedMessageId","newSagaId","fetchSagaHistory","clearSagaHistory","show","history","fetchMessagesData","setSagaId","response","fetchSagaMessageData","bodyUrl","formatUrl","stringify","xmlRootElement","getContentOfXmlRootElement","xmlFormat","xml","rootElement","rootElementText","getAuditMessages","template","toggleMessageData","messagesToFetch","msg","auditMessages","auditMessage","fetchPromises","newMessageData","typeToName","objectName","parseDeliveryDelay","days","timeComponent","hours","minutes","seconds","getFriendly","getTimeoutFriendly","delivery_delay","parseSagaUpdates","timeoutMessageIds","startTime","finishTime","initiatingMessageTimestamp","initiatingMessageData","findMessageData","createEmptyMessageData","outgoingMessages","hasTimeout","timeoutSeconds","isEventMessage","messageData","outgoingTimeoutMessages","hasBeenProcessed","regularMessages","hasRelatedTimeoutRequest","NoSagaIcon","DiffMaximizeIcon","DiffCloseIcon","_useModel","showMaximizeModal","showMaximizeButton","toggleMaximizeModal","onEditorMouseEnter","onEditorMouseLeave","handleKeyDown","_renderSlot","modalTitle","sagaDiagramStore","MaximizableCodeEditor","TimeoutIcon$1","SagaTimeoutIcon","timeoutMessageRef","shouldBeActive","navigateToTimeout","scrollRequest","shouldScroll","refExists","_withDirectives","TimeoutIcon","MessageDataBox","CommandIcon","EventIcon","Diff","oldStr","newStr","oldString","newString","oldTokens","newTokens","done","newLen","oldLen","editLength","maxEditLength","maxExecutionTime","abortAfterTimestamp","bestPath","newPos","minDiagonalToConsider","maxDiagonalToConsider","execEditLength","diagonalPath","basePath","removePath","addPath","canAdd","addPathNewPos","canRemove","exec","ret","added","removed","oldPosInc","oldPos","commonCount","chars","changeObjects","lastComponent","nextComponent","componentLen","componentPos","component","oldValue","CharacterDiff","characterDiff","diffChars","longestCommonPrefix","str1","str2","longestCommonSuffix","replacePrefix","oldPrefix","newPrefix","replaceSuffix","oldSuffix","newSuffix","removePrefix","removeSuffix","maximumOverlap","string2","overlapCount","startA","endB","trailingWs","leadingWs","extendedWordChars","tokenizeIncludingWhitespace","WordDiff","segmenter","tokens","prevPart","part","token","lastKeep","insertion","deletion","dedupeWhitespaceInChangeObjects","wordDiff","diffWords","startKeep","endKeep","oldWsPrefix","oldWsSuffix","newWsPrefix","newWsSuffix","commonWsPrefix","commonWsSuffix","newWsFull","delWsStart","delWsEnd","newWsStart","newWsEnd","endKeepWsPrefix","deletionWsSuffix","overlap","startKeepWsSuffix","deletionWsPrefix","WordsWithSpaceDiff","regex","wordsWithSpaceDiff","diffWordsWithSpace","generateOptions","defaults","LineDiff","tokenize","lineDiff","diffLines","diffTrimmedLines","retLines","linesAndNewlines","isSentenceEndPunct","char","SentenceDiff","tokenStartI","sentenceDiff","diffSentences","CssDiff","cssDiff","diffCss","lineInformation","diffLineIndexes","expandedBlocks","computeDiff","compareMethod","diffOutput","diffLinesArray","leftLineNumber","rightLineNumber","counter","onBlockExpand","renderDiff","showDiffOnly","extraLinesSurroundingDiff","extraLines","skippedLines","currentDiffLines","diffBlockStart","currentPosition","itemIndex","onDiffMouseEnter","onDiffMouseLeave","DiffContent","SagaInitiatedIcon","SagaUpdatedIcon","monospaceTheme","EditorView","initiatingMessageRef","hasParsingError","navigateToTimeoutRequest","scrollTimeout","formatJsonValue","processState","stateObj","sagaUpdateStateChanges","currentState","previousState","isFirstNode","currentFormatted","hasStateChanges","DiffViewer","msgIndex","SagaOutgoingMessage","SagaOutgoingTimeoutMessage","SagaCompletedIcon","hasSaga","completedUpdate","completionTime","faListUl","SagaPluginNeeded","SagaHeader","SagaUpdateNode","SagaCompletedNode","NoSagaData","useRoute","configurationStore","useConfigurationStore","isMassTransitConnected","hasParticipatedInSaga","tabs","currentTabs","BodyView","HeadersView","StackTraceView","FlowDiagram","SequenceDiagram","SagaDiagram","oldId","oldMessageId","endpointColor","otherArgs","NoData","RouterLink","faChevronLeft","MetadataLabel","MetadataItem","faClockRotateLeft","faClock","faLaptop","DeleteMessageButton","RestoreMessageButton","RetryMessageButton","EditAndRetryButton","ExportMessageButton","TabsLayout"],"mappings":"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","x_google_ignoreList":[0,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,102,103,104,105,106,107,108,109]}