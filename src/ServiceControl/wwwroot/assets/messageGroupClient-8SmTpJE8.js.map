{"version":3,"file":"messageGroupClient-8SmTpJE8.js","sources":["../../../../frontend/src/components/failedmessages/messageGroupClient.ts"],"sourcesContent":["import { ServiceControlStore, useServiceControlStore } from \"@/stores/ServiceControlStore\";\nimport type GroupOperation from \"@/resources/GroupOperation\";\n\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\nexport interface SuccessResponse {}\nexport interface ErrorResponse {\n  message: string;\n}\n\nclass MessageGroupClient {\n  serviceControlStore: ServiceControlStore;\n  constructor() {\n    //this module is only called from within view setup or other pinia stores, so this call is lifecycle safe\n    this.serviceControlStore = useServiceControlStore();\n  }\n\n  public async getExceptionGroups(classifier: string = \"\") {\n    const [, data] = await this.serviceControlStore.fetchTypedFromServiceControl<GroupOperation[]>(`recoverability/groups/${classifier}`);\n    return data;\n  }\n\n  public async getExceptionGroupsForEndpoint(classifier: string = \"\", classiferFilter = \"\") {\n    const [, data] = await this.serviceControlStore.fetchTypedFromServiceControl<GroupOperation[]>(`recoverability/groups/${classifier}?classifierFilter=${classiferFilter}`);\n    return data;\n  }\n\n  //delete note by group id\n  public async deleteNote(groupId: string) {\n    return this.evaluateResponse(await this.serviceControlStore.deleteFromServiceControl(`recoverability/groups/${groupId}/comment`));\n  }\n\n  //edit or create note by group id\n  public async editOrCreateNote(groupId: string, comment: string) {\n    return this.evaluateResponse(await this.serviceControlStore.postToServiceControl(`recoverability/groups/${groupId}/comment?comment=${comment}`));\n  }\n\n  //archive exception group by group id\n  //archiveGroup\n  public async archiveExceptionGroup(groupId: string) {\n    return this.evaluateResponse(await this.serviceControlStore.postToServiceControl(`recoverability/groups/${groupId}/errors/archive`));\n  }\n\n  //restore group by group id\n  public async restoreGroup(groupId: string) {\n    return this.evaluateResponse(await this.serviceControlStore.postToServiceControl(`recoverability/groups/${groupId}/errors/unarchive`));\n  }\n\n  //retry exception group by group id\n  //retryGroup\n  public async retryExceptionGroup(groupId: string) {\n    return this.evaluateResponse(await this.serviceControlStore.postToServiceControl(`recoverability/groups/${groupId}/errors/retry`));\n  }\n\n  //acknowledge archive exception group by group id\n  public async acknowledgeArchiveGroup(groupId: string) {\n    return this.evaluateResponse(await this.serviceControlStore.deleteFromServiceControl(`recoverability/unacknowledgedgroups/${groupId}`));\n  }\n\n  evaluateResponse(response: Response): SuccessResponse | ErrorResponse {\n    return response.ok ? ({} as SuccessResponse) : ({ message: response.statusText } as ErrorResponse);\n  }\n\n  public isError(obj: SuccessResponse | ErrorResponse): obj is ErrorResponse {\n    return (obj as ErrorResponse).message !== undefined;\n  }\n}\n\nexport default () => new MessageGroupClient();\n"],"names":["MessageGroupClient","useServiceControlStore","classifier","data","classiferFilter","groupId","comment","response","obj","createMessageGroupClient"],"mappings":"wCASA,MAAMA,CAAmB,CACvB,oBACA,aAAc,CAEZ,KAAK,oBAAsBC,EAAA,CAC7B,CAEA,MAAa,mBAAmBC,EAAqB,GAAI,CACvD,KAAM,CAAA,CAAGC,CAAI,EAAI,MAAM,KAAK,oBAAoB,6BAA+C,yBAAyBD,CAAU,EAAE,EACpI,OAAOC,CACT,CAEA,MAAa,8BAA8BD,EAAqB,GAAIE,EAAkB,GAAI,CACxF,KAAM,EAAGD,CAAI,EAAI,MAAM,KAAK,oBAAoB,6BAA+C,yBAAyBD,CAAU,qBAAqBE,CAAe,EAAE,EACxK,OAAOD,CACT,CAGA,MAAa,WAAWE,EAAiB,CACvC,OAAO,KAAK,iBAAiB,MAAM,KAAK,oBAAoB,yBAAyB,yBAAyBA,CAAO,UAAU,CAAC,CAClI,CAGA,MAAa,iBAAiBA,EAAiBC,EAAiB,CAC9D,OAAO,KAAK,iBAAiB,MAAM,KAAK,oBAAoB,qBAAqB,yBAAyBD,CAAO,oBAAoBC,CAAO,EAAE,CAAC,CACjJ,CAIA,MAAa,sBAAsBD,EAAiB,CAClD,OAAO,KAAK,iBAAiB,MAAM,KAAK,oBAAoB,qBAAqB,yBAAyBA,CAAO,iBAAiB,CAAC,CACrI,CAGA,MAAa,aAAaA,EAAiB,CACzC,OAAO,KAAK,iBAAiB,MAAM,KAAK,oBAAoB,qBAAqB,yBAAyBA,CAAO,mBAAmB,CAAC,CACvI,CAIA,MAAa,oBAAoBA,EAAiB,CAChD,OAAO,KAAK,iBAAiB,MAAM,KAAK,oBAAoB,qBAAqB,yBAAyBA,CAAO,eAAe,CAAC,CACnI,CAGA,MAAa,wBAAwBA,EAAiB,CACpD,OAAO,KAAK,iBAAiB,MAAM,KAAK,oBAAoB,yBAAyB,uCAAuCA,CAAO,EAAE,CAAC,CACxI,CAEA,iBAAiBE,EAAqD,CACpE,OAAOA,EAAS,GAAM,CAAA,EAA0B,CAAE,QAASA,EAAS,UAAA,CACtE,CAEO,QAAQC,EAA4D,CACzE,OAAQA,EAAsB,UAAY,MAC5C,CACF,CAEA,MAAAC,EAAe,IAAM,IAAIT"}