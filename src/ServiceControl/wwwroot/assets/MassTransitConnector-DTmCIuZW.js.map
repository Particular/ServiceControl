{"version":3,"file":"MassTransitConnector-DTmCIuZW.js","sources":["../../../../frontend/src/components/StatusIcon.vue","../../../../frontend/src/components/configuration/MassTransitConnector.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport FAIcon from \"@/components/FAIcon.vue\";\nimport { IconDefinition, faCheck, faTimes, faExclamationTriangle, faInfoCircle } from \"@fortawesome/free-solid-svg-icons\";\n\nexport type StatusType = \"success\" | \"error\" | \"warning\" | \"info\";\n\ninterface Props {\n  status: StatusType;\n  message?: string;\n  icon?: IconDefinition;\n  size?: \"2xs\" | \"xs\" | \"sm\" | \"lg\" | \"xl\" | \"2xl\" | \"1x\" | \"2x\" | \"3x\" | \"4x\" | \"5x\" | \"6x\" | \"7x\" | \"8x\" | \"9x\" | \"10x\";\n  showMessage?: boolean;\n  customClass?: string;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  message: \"\",\n  size: \"1x\",\n  showMessage: true,\n  customClass: \"\",\n});\n\nconst statusConfig = {\n  success: {\n    icon: faCheck,\n    class: \"text-success\",\n    defaultMessage: \"Success\",\n  },\n  error: {\n    icon: faTimes,\n    class: \"text-danger\",\n    defaultMessage: \"Error\",\n  },\n  warning: {\n    icon: faExclamationTriangle,\n    class: \"text-warning\",\n    defaultMessage: \"Warning\",\n  },\n  info: {\n    icon: faInfoCircle,\n    class: \"text-info\",\n    defaultMessage: \"Info\",\n  },\n};\n\nconst currentConfig = statusConfig[props.status];\nconst displayIcon = props.icon || currentConfig.icon;\nconst displayMessage = props.message || currentConfig.defaultMessage;\nconst cssClass = props.customClass || currentConfig.class;\n</script>\n\n<template>\n  <span :class=\"['status-icon', cssClass]\">\n    <FAIcon :icon=\"displayIcon\" :size=\"size\" :title=\"showMessage ? displayMessage : undefined\" />\n    <span v-if=\"showMessage && message\" class=\"status-message\">{{ displayMessage }}</span>\n  </span>\n</template>\n\n<style scoped>\n.status-icon {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n}\n\n.text-success {\n  color: #28a745;\n}\n\n.text-danger {\n  color: #dc3545;\n}\n\n.text-warning {\n  color: #ffc107;\n}\n\n.text-info {\n  color: #17a2b8;\n}\n\n.info-color {\n  color: #17a2b8;\n}\n\n.error-color {\n  color: #dc3545;\n}\n\n.status-message {\n  margin-left: 0.25rem;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useDateFormatter } from \"@/composables/dateFormatter\";\nimport StatusIcon from \"@/components/StatusIcon.vue\";\nimport { useConfigurationStore } from \"@/stores/ConfigurationStore\";\nimport { storeToRefs } from \"pinia\";\n\nconst configurationStore = useConfigurationStore();\nconst { configuration } = storeToRefs(configurationStore);\nconst { formatDate } = useDateFormatter();\n</script>\n\n<template>\n  <div class=\"box\" v-if=\"configuration?.mass_transit_connector !== undefined\">\n    <div class=\"row margin-bottom-10\">\n      <h4>\n        Connector Version: <span class=\"version-format\">{{ configuration.mass_transit_connector.version }}</span>\n      </h4>\n    </div>\n    <div class=\"row margin-bottom-10\">\n      <h4>List of error queues configured in the connector.</h4>\n      <div class=\"queues-container\">\n        <div class=\"margin-gap hover-highlight\" v-for=\"queue in configuration.mass_transit_connector.error_queues\" :key=\"queue.name\">\n          <StatusIcon :status=\"queue.ingesting ? 'success' : 'error'\" :message=\"queue.ingesting ? '' : 'Not ingesting from this queue. Check the logs below for more information.'\" :show-message=\"false\" />\n          <span>{{ queue.name }}</span>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <h4>The entries below are the most recent warning and error-level events recorded on the ServiceControl Connector.</h4>\n      <div class=\"logs-container\">\n        <div v-if=\"configuration.mass_transit_connector.logs.length === 0\">No warning or error logs</div>\n        <div v-else class=\"row margin-gap hover-highlight\" v-for=\"log in [...configuration.mass_transit_connector.logs].reverse()\" :key=\"log.date\">\n          <div class=\"col-2\">{{ formatDate(log.date) }}</div>\n          <div class=\"col-1\" :class=\"`${log.level.toLowerCase()}-color`\">{{ log.level }}</div>\n          <div class=\"col-9\" :class=\"`${log.level.toLowerCase()}-color`\">\n            <pre>{{ log.message }}</pre>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" v-else>\n    <p>MassTransit Connector for ServiceControl is not configured.</p>\n    <p><a target=\"_blank\" href=\"https://particular.net/learn-more-about-masstransit-connector\">Learn more about the MassTransit Connector.</a></p>\n  </div>\n</template>\n\n<style scoped>\n.hover-highlight:hover {\n  background-color: #ededed;\n}\n\n.margin-gap {\n  margin-bottom: 3px;\n}\n\n.queues-container {\n  padding: 0.75rem;\n}\n.queues-container > div {\n  display: flex;\n  align-items: center;\n  gap: 0.5em;\n}\n.queues-container > div div {\n  overflow-wrap: anywhere;\n}\n\n.logs-container {\n  padding: 0.75rem;\n}\n.version-format {\n  font-weight: bold;\n}\n.box > .row:not(:last-child) {\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid #ccc;\n  margin-bottom: 0.5rem;\n}\n\n.logs-container pre {\n  all: revert;\n  margin: 0;\n  font-size: 0.9rem;\n  overflow-wrap: break-word;\n  text-wrap: auto;\n}\n\n.warning-color {\n  color: var(--bs-warning);\n}\n.error-color {\n  color: var(--bs-danger);\n}\n.info-color {\n  color: var(--bs-success);\n}\n</style>\n"],"names":["props","__props","currentConfig","faCheck","faTimes","faExclamationTriangle","faInfoCircle","displayIcon","displayMessage","cssClass","_createElementBlock","_unref","_createVNode","FAIcon","_hoisted_1","_toDisplayString","configurationStore","useConfigurationStore","configuration","storeToRefs","formatDate","useDateFormatter","_openBlock","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_cache","_hoisted_5","_Fragment","queue","StatusIcon","_hoisted_6","_hoisted_7","_renderList","log","_hoisted_9","_hoisted_10"],"mappings":"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"}