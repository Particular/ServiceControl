{"version":3,"file":"OrderBy-Bnnuz_3H.js","sources":["../../../../frontend/src/components/OrderBy.vue"],"sourcesContent":["<script setup generic=\"T\" lang=\"ts\">\nimport { onMounted, ref } from \"vue\";\nimport { useCookies } from \"vue3-cookies\";\nimport SortOptions, { SortDirection } from \"@/resources/SortOptions\";\nimport getSortFunction from \"@/components/getSortFunction\";\nimport FAIcon from \"@/components/FAIcon.vue\";\n\nconst emit = defineEmits<{\n  sortUpdated: [option: SortOptions<T>];\n}>();\n\nconst props = withDefaults(\n  defineProps<{\n    hideSort?: boolean;\n    sortOptions: SortOptions<T>[];\n    sortSavePrefix?: string;\n  }>(),\n  {\n    hideSort: false,\n  }\n);\n\nconst cookies = useCookies().cookies;\n\nconst selectedSort = ref(props.sortOptions[0].description);\n\nfunction getSortOptions() {\n  return props.sortOptions;\n}\n\nfunction saveSortOption(sortCriteria: string, sortDirection: SortDirection) {\n  cookies.set(`${props.sortSavePrefix ? props.sortSavePrefix : \"\"}sortCriteria`, sortCriteria);\n  cookies.set(`${props.sortSavePrefix ? props.sortSavePrefix : \"\"}sortDirection`, sortDirection);\n}\n\nfunction loadSavedSortOption() {\n  const criteria = cookies.get(`${props.sortSavePrefix ? props.sortSavePrefix : \"\"}sortCriteria`);\n  const direction = cookies.get(`${props.sortSavePrefix ? props.sortSavePrefix : \"\"}sortDirection`) as SortDirection;\n\n  if (criteria && direction) {\n    const sortBy = getSortOptions().find((sort) => {\n      return sort.description.toLowerCase() === criteria.toLowerCase();\n    });\n    if (sortBy) {\n      return {\n        ...sortBy,\n        sort: getSortFunction(sortBy.selector, direction),\n        dir: direction,\n      };\n    }\n  }\n\n  return props.sortOptions[0];\n}\n\nfunction sortUpdated(sort: SortOptions<T>, dir: SortDirection) {\n  selectedSort.value = sort.description + (dir === SortDirection.Descending ? \" (Descending)\" : \"\");\n  saveSortOption(sort.description, dir);\n\n  emit(\"sortUpdated\", {\n    ...sort,\n    dir: dir,\n    sort: getSortFunction<T>(sort.selector, dir),\n  });\n}\n\nfunction setSortOptions() {\n  const savedSort = loadSavedSortOption();\n  selectedSort.value = `${savedSort.description}${savedSort.dir === SortDirection.Descending ? \" (Descending)\" : \"\"}`;\n\n  emit(\"sortUpdated\", savedSort);\n}\n\nonMounted(() => {\n  setSortOptions();\n});\n</script>\n\n<template>\n  <div class=\"msg-group-menu dropdown\" v-show=\"!props.hideSort\">\n    <label class=\"control-label\">Sort by:</label>\n    <button type=\"button\" class=\"btn dropdown-toggle sp-btn-menu\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n      {{ selectedSort }}\n      <span class=\"caret\"></span>\n    </button>\n    <ul class=\"dropdown-menu\">\n      <span v-for=\"(sort, index) in getSortOptions()\" :key=\"index\">\n        <li>\n          <button @click=\"sortUpdated(sort, SortDirection.Ascending)\"><FAIcon :icon=\"sort.iconAsc\" class=\"icon\" /> {{ sort.description }}</button>\n        </li>\n        <li>\n          <button @click=\"sortUpdated(sort, SortDirection.Descending)\"><FAIcon :icon=\"sort.iconDesc\" class=\"icon\" /> {{ sort.description }}<span> (Descending)</span></button>\n        </li>\n      </span>\n    </ul>\n  </div>\n</template>\n\n<style scoped>\n@import \"@/assets/dropdown.css\";\n\n.dropdown-menu .fa {\n  padding-right: 5px;\n}\n\n.btn.sp-btn-menu {\n  background: none;\n  border: none;\n  color: var(--sp-blue);\n  padding-right: 16px;\n  padding-left: 16px;\n}\n\n.sp-btn-menu:hover {\n  background: none;\n  border: none;\n  color: var(--sp-blue);\n  text-decoration: underline;\n}\n\n.msg-group-menu {\n  margin: 21px 0px 0 6px;\n  padding-right: 15px;\n  float: right;\n}\n\n.btn.sp-btn-menu:active {\n  background: none;\n  border: none;\n  color: var(--sp-blue);\n  text-decoration: underline;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n\n.sp-btn-menu > i {\n  color: var(--sp-blue);\n}\n\n.dropdown-menu li button {\n  width: 100%;\n  text-align: left;\n}\n\n.icon {\n  color: var(--reduced-emphasis);\n}\n</style>\n"],"names":["emit","__emit","props","__props","cookies","useCookies","selectedSort","ref","getSortOptions","saveSortOption","sortCriteria","sortDirection","loadSavedSortOption","criteria","direction","sortBy","sort","getSortFunction","sortUpdated","dir","SortDirection","setSortOptions","savedSort","onMounted","_withDirectives","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_createTextVNode","_toDisplayString","_hoisted_3","_Fragment","_renderList","index","_unref","_createVNode","FAIcon","_vShow"],"mappings":"whBAOA,MAAMA,EAAOC,EAIPC,EAAQC,EAWRC,EAAUC,IAAa,QAEvBC,EAAeC,EAAIL,EAAM,YAAY,CAAC,EAAE,WAAW,EAEzD,SAASM,GAAiB,CACxB,OAAON,EAAM,WACf,CAEA,SAASO,EAAeC,EAAsBC,EAA8B,CAC1EP,EAAQ,IAAI,GAAGF,EAAM,eAAiBA,EAAM,eAAiB,EAAE,eAAgBQ,CAAY,EAC3FN,EAAQ,IAAI,GAAGF,EAAM,eAAiBA,EAAM,eAAiB,EAAE,gBAAiBS,CAAa,CAC/F,CAEA,SAASC,GAAsB,CAC7B,MAAMC,EAAWT,EAAQ,IAAI,GAAGF,EAAM,eAAiBA,EAAM,eAAiB,EAAE,cAAc,EACxFY,EAAYV,EAAQ,IAAI,GAAGF,EAAM,eAAiBA,EAAM,eAAiB,EAAE,eAAe,EAEhG,GAAIW,GAAYC,EAAW,CACzB,MAAMC,EAASP,EAAA,EAAiB,KAAMQ,GAC7BA,EAAK,YAAY,YAAA,IAAkBH,EAAS,YAAA,CACpD,EACD,GAAIE,EACF,MAAO,CACL,GAAGA,EACH,KAAME,EAAgBF,EAAO,SAAUD,CAAS,EAChD,IAAKA,CAAA,CAGX,CAEA,OAAOZ,EAAM,YAAY,CAAC,CAC5B,CAEA,SAASgB,EAAYF,EAAsBG,EAAoB,CAC7Db,EAAa,MAAQU,EAAK,aAAeG,IAAQC,EAAc,WAAa,gBAAkB,IAC9FX,EAAeO,EAAK,YAAaG,CAAG,EAEpCnB,EAAK,cAAe,CAClB,GAAGgB,EACH,IAAAG,EACA,KAAMF,EAAmBD,EAAK,SAAUG,CAAG,CAAA,CAC5C,CACH,CAEA,SAASE,GAAiB,CACxB,MAAMC,EAAYV,EAAA,EAClBN,EAAa,MAAQ,GAAGgB,EAAU,WAAW,GAAGA,EAAU,MAAQF,EAAc,WAAa,gBAAkB,EAAE,GAEjHpB,EAAK,cAAesB,CAAS,CAC/B,CAEA,OAAAC,EAAU,IAAM,CACdF,EAAA,CACF,CAAC,SAICG,GAAAC,EAAA,EAAAC,EAgBM,MAhBNC,EAgBM,CAfJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAA6C,QAAA,CAAtC,MAAM,eAAA,EAAgB,WAAQ,EAAA,GACrCA,EAGS,SAHTC,EAGS,CAFJC,EAAAC,EAAA1B,EAAA,KAAY,EAAG,IAClB,CAAA,cAAAuB,EAA2B,OAAA,CAArB,MAAM,SAAO,KAAA,EAAA,EAAA,GAErBA,EASK,KATLI,EASK,EARHR,EAAA,EAAA,EAAAC,EAOOQ,EAAA,KAAAC,EAPuB3B,EAAA,EAAc,CAA9BQ,EAAMoB,SAApBV,EAOO,OAAA,CAP0C,IAAKU,GAAK,CACzDP,EAEK,KAAA,KAAA,CADHA,EAAwI,SAAA,CAA/H,WAAOX,EAAYF,EAAMqB,EAAAjB,CAAA,EAAc,SAAS,CAAA,GAAGkB,EAA4CC,EAAA,CAAnC,KAAMvB,EAAK,QAAS,MAAM,MAAA,qBAAS,IAACgB,EAAGhB,EAAK,WAAW,EAAA,CAAA,CAAA,SAE9Ha,EAEK,KAAA,KAAA,CADHA,EAAoK,SAAA,CAA3J,WAAOX,EAAYF,EAAMqB,EAAAjB,CAAA,EAAc,UAAU,CAAA,GAAGkB,EAA6CC,EAAA,CAApC,KAAMvB,EAAK,SAAU,MAAM,MAAA,qBAAS,IAACgB,EAAGhB,EAAK,WAAW,EAAA,CAAA,EAAGY,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAA0B,YAApB,gBAAa,EAAA,EAAA,6BAZ9G,CAAAW,EAAA,CAAAtC,EAAM,QAAQ,CAAA"}