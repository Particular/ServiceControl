{"version":3,"file":"EndpointInstances-CHxxJzJ9.js","sources":["../../../../frontend/src/stores/HeartbeatInstancesStore.ts","../../../../frontend/src/composables/useHeartbeatInstancesStoreAutoRefresh.ts","../../../../frontend/src/components/heartbeats/EndpointInstances.vue"],"sourcesContent":["import { acceptHMRUpdate, defineStore, storeToRefs } from \"pinia\";\nimport { computed, ref, watch } from \"vue\";\nimport moment from \"moment\";\nimport type { SortInfo } from \"@/components/SortInfo\";\nimport { type GroupPropertyType, SortDirection } from \"@/resources/SortOptions\";\nimport getSortFunction from \"@/components/getSortFunction\";\nimport { useHeartbeatsStore } from \"@/stores/HeartbeatsStore\";\nimport { EndpointsView } from \"@/resources/EndpointView\";\nimport { useServiceControlStore } from \"./ServiceControlStore\";\n\nexport enum ColumnNames {\n  InstanceName = \"name\",\n  LastHeartbeat = \"latestHeartbeat\",\n  MuteToggle = \"toggleMuteAlerts\",\n}\n\nconst columnSortings = new Map<string, (endpoint: EndpointsView) => GroupPropertyType>([\n  [ColumnNames.InstanceName, (endpoint) => endpoint.host_display_name],\n  [ColumnNames.LastHeartbeat, (endpoint) => moment.utc(endpoint.heartbeat_information?.last_report_at ?? \"1975-01-01T00:00:00\")],\n  [ColumnNames.MuteToggle, (endpoint) => !endpoint.monitor_heartbeat],\n]);\n\nexport const useHeartbeatInstancesStore = defineStore(\"HeartbeatInstancesStore\", () => {\n  const serviceControlStore = useServiceControlStore();\n\n  const instanceFilterString = ref(\"\");\n  const store = useHeartbeatsStore();\n  const { endpointInstances } = storeToRefs(store);\n  const sortByInstances = ref<SortInfo>({\n    property: ColumnNames.InstanceName,\n    isAscending: true,\n  });\n\n  const sortedInstances = computed<EndpointsView[]>(() => endpointInstances.value.sort(getSortFunction(columnSortings.get(sortByInstances.value.property), sortByInstances.value.isAscending ? SortDirection.Ascending : SortDirection.Descending)));\n  const filteredInstances = computed<EndpointsView[]>(() => sortedInstances.value.filter((instance) => !instanceFilterString.value || instance.host_display_name.toLowerCase().includes(instanceFilterString.value.toLowerCase())));\n\n  const refresh = () => store.refresh();\n\n  watch(instanceFilterString, (newValue) => {\n    setInstanceFilterString(newValue);\n  });\n\n  function setInstanceFilterString(filter: string) {\n    instanceFilterString.value = filter;\n  }\n\n  async function deleteEndpointInstance(endpoint: EndpointsView) {\n    await serviceControlStore.deleteFromServiceControl(`endpoints/${endpoint.id}`);\n    await store.refresh();\n  }\n\n  async function toggleEndpointMonitor(endpoints: EndpointsView[]) {\n    await Promise.all(endpoints.map((endpoint) => serviceControlStore.patchToServiceControl(`endpoints/${endpoint.id}`, { monitor_heartbeat: !endpoint.monitor_heartbeat })));\n    await store.refresh();\n  }\n\n  return {\n    refresh,\n    sortedInstances,\n    filteredInstances,\n    instanceFilterString,\n    deleteEndpointInstance,\n    toggleEndpointMonitor,\n    sortByInstances,\n  };\n});\n\nif (import.meta.hot) {\n  import.meta.hot.accept(acceptHMRUpdate(useHeartbeatInstancesStore, import.meta.hot));\n}\n\nexport type HeartbeatInstancesStore = ReturnType<typeof useHeartbeatInstancesStore>;\n","import { useHeartbeatInstancesStore } from \"@/stores/HeartbeatInstancesStore\";\nimport { useStoreAutoRefresh } from \"./useAutoRefresh\";\n\nexport default useStoreAutoRefresh(\"heartbeatInstances\", useHeartbeatInstancesStore, 5000);\n","<script setup lang=\"ts\">\nimport NoData from \"../NoData.vue\";\nimport { storeToRefs } from \"pinia\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { computed, onMounted, ref } from \"vue\";\nimport { EndpointStatus } from \"@/resources/Heartbeat\";\nimport ColumnHeader from \"@/components/ColumnHeader.vue\";\nimport DataView from \"@/components/DataView.vue\";\nimport OnOffSwitch from \"../OnOffSwitch.vue\";\nimport routeLinks from \"@/router/routeLinks\";\nimport { useShowToast } from \"@/composables/toast\";\nimport { TYPE } from \"vue-toastification\";\nimport { ColumnNames } from \"@/stores/HeartbeatInstancesStore\";\nimport { EndpointsView } from \"@/resources/EndpointView\";\nimport { EndpointSettings } from \"@/resources/EndpointSettings\";\nimport ConfirmDialog from \"@/components/ConfirmDialog.vue\";\nimport LastHeartbeat from \"@/components/heartbeats/LastHeartbeat.vue\";\nimport FilterInput from \"../FilterInput.vue\";\nimport ResultsCount from \"../ResultsCount.vue\";\nimport { faBell, faBellSlash, faChevronLeft, faHeartbeat, faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport FAIcon from \"@/components/FAIcon.vue\";\nimport useHeartbeatInstancesStoreAutoRefresh from \"@/composables/useHeartbeatInstancesStoreAutoRefresh\";\nimport { useEndpointSettingsStore } from \"@/stores/EndpointSettingsStore\";\n\nenum Operation {\n  Mute = \"mute\",\n  Unmute = \"unmute\",\n}\n\nconst route = useRoute();\nconst router = useRouter();\nconst endpointName = route.params.endpointName.toString();\nconst { store } = useHeartbeatInstancesStoreAutoRefresh();\nconst { filteredInstances, sortedInstances, instanceFilterString, sortByInstances } = storeToRefs(store);\nconst endpointSettingsStore = useEndpointSettingsStore();\nconst endpointSettings = ref<EndpointSettings[]>([endpointSettingsStore.defaultEndpointSettingsValue]);\n\nconst backLink = ref<string>(routeLinks.heartbeats.root);\nconst filterToValidInstances = (data: EndpointsView[]) =>\n  data\n    .filter((instance) => instance.name === endpointName)\n    .filter((instance) => {\n      const trackInstances = (endpointSettings.value.find((value) => value.name === instance.name) ?? endpointSettings.value.find((value) => value.name === \"\"))!.track_instances;\n      if (!trackInstances && !instance.is_sending_heartbeats) {\n        return false;\n      }\n\n      return true;\n    });\nconst filteredValidInstances = computed(() => filterToValidInstances(filteredInstances.value));\nconst totalValidInstances = computed(() => filterToValidInstances(sortedInstances.value));\nconst showBulkWarningDialog = ref(false);\nconst dialogWarningOperation = ref(Operation.Mute);\n\nonMounted(async () => {\n  const back = useRouter().currentRoute.value.query.back as string;\n  if (back) {\n    backLink.value = back;\n  }\n  endpointSettings.value = await endpointSettingsStore.getEndpointSettings();\n});\n\nfunction showBulkOperationWarningDialog(operation: Operation) {\n  dialogWarningOperation.value = operation;\n  showBulkWarningDialog.value = true;\n}\n\nfunction cancelWarningDialog() {\n  showBulkWarningDialog.value = false;\n}\n\nasync function proceedWarningDialog() {\n  showBulkWarningDialog.value = false;\n\n  try {\n    await store.toggleEndpointMonitor(\n      filteredValidInstances.value.filter((instance) => (dialogWarningOperation.value === Operation.Unmute && !instance.monitor_heartbeat) || (dialogWarningOperation.value === Operation.Mute && instance.monitor_heartbeat))\n    );\n    useShowToast(TYPE.SUCCESS, `All endpoint instances ${dialogWarningOperation.value}`, \"\", false, { timeout: 1000 });\n  } catch {\n    useShowToast(TYPE.ERROR, \"Save failed\", \"\", false, { timeout: 3000 });\n  }\n}\n\nasync function deleteInstance(instance: EndpointsView) {\n  try {\n    await store.deleteEndpointInstance(instance);\n    useShowToast(TYPE.SUCCESS, \"Endpoint instance deleted\", \"\", false, { timeout: 1000 });\n  } catch {\n    useShowToast(TYPE.ERROR, \"Delete failed\", \"\", false, { timeout: 3000 });\n  }\n}\n\nasync function deleteAllInstances() {\n  try {\n    await Promise.all(sortedInstances.value.filter((instance) => instance.name === endpointName).map((instance) => store.deleteEndpointInstance(instance)));\n    useShowToast(TYPE.SUCCESS, \"Endpoint deleted\", \"\", false, { timeout: 1000 });\n    await router.replace(backLink.value);\n  } catch {\n    useShowToast(TYPE.ERROR, \"Delete failed\", \"\", false, { timeout: 3000 });\n  }\n}\n\nasync function toggleAlerts(instance: EndpointsView) {\n  try {\n    await store.toggleEndpointMonitor([instance]);\n    useShowToast(TYPE.SUCCESS, `Endpoint instance ${!instance.monitor_heartbeat ? \"muted\" : \"unmuted\"}`, \"\", false, { timeout: 1000 });\n  } catch {\n    useShowToast(TYPE.ERROR, \"Save failed\", \"\", false, { timeout: 3000 });\n  }\n}\n</script>\n\n<template>\n  <Teleport to=\"#modalDisplay\">\n    <ConfirmDialog\n      v-if=\"showBulkWarningDialog\"\n      heading=\"Proceed with bulk operation\"\n      :body=\"`Are you sure you want to ${dialogWarningOperation} ${filteredValidInstances.length} endpoint instance(s)?`\"\n      @cancel=\"cancelWarningDialog\"\n      @confirm=\"proceedWarningDialog\"\n    />\n  </Teleport>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-8 instances-heading\">\n        <RouterLink :to=\"backLink\"><FAIcon :icon=\"faChevronLeft\" size=\"sm\" /> Back</RouterLink>\n        <h1 :style=\"{ overflowWrap: 'break-word' }\">{{ endpointName }} Instances</h1>\n      </div>\n      <div class=\"col-4 align-content-center\">\n        <div class=\"searchContainer\">\n          <FilterInput v-model=\"instanceFilterString\" />\n        </div>\n      </div>\n    </div>\n    <div class=\"row filters\">\n      <div class=\"col-sm-12\">\n        <span class=\"buttonsContainer\">\n          <button type=\"button\" class=\"btn btn-warning btn-sm\" :disabled=\"filteredValidInstances.length === 0\" @click=\"showBulkOperationWarningDialog(Operation.Mute)\">\n            <FAIcon :icon=\"faBellSlash\" class=\"icon\" :class=\"{ 'text-black': filteredValidInstances.length > 0 }\" />\n            Mute Alerts on All\n          </button>\n          <button type=\"button\" class=\"btn btn-default btn-sm\" :disabled=\"filteredValidInstances.length === 0\" @click=\"showBulkOperationWarningDialog(Operation.Unmute)\">\n            <FAIcon :icon=\"faBell\" class=\"icon\" :class=\"{ 'text-black': filteredValidInstances.length > 0 }\" />\n            Unmute Alerts on All\n          </button>\n        </span>\n      </div>\n    </div>\n    <div class=\"row\">\n      <ResultsCount :displayed=\"filteredValidInstances.length\" :total=\"totalValidInstances.length\" />\n    </div>\n    <section role=\"table\" aria-label=\"endpoint-instances\">\n      <!--Table headings-->\n      <div role=\"row\" aria-label=\"column-headers\" class=\"row table-head-row\" :style=\"{ borderTop: 0 }\">\n        <ColumnHeader :name=\"ColumnNames.InstanceName\" label=\"Host Name\" class=\"col-6\" v-model=\"sortByInstances\" sortable default-ascending />\n        <ColumnHeader :name=\"ColumnNames.LastHeartbeat\" label=\"Last Heartbeat\" class=\"col-2\" v-model=\"sortByInstances\" sortable />\n        <ColumnHeader :name=\"ColumnNames.MuteToggle\" label=\"Mute Alerts\" class=\"col-2 centre\">\n          <template #help>Mute an instance when you are planning to take the instance offline to do maintenance or some other reason. This will prevent alerts on the dashboard.</template>\n        </ColumnHeader>\n        <ColumnHeader name=\"actions\" label=\"Actions\" class=\"col-1\">\n          <template #help>\n            <div class=\"d-flex align-items-center p-1\">\n              <button type=\"button\" class=\"btn btn-danger btn-ms text-nowrap me-3\"><FAIcon :icon=\"faTrash\" class=\"icon text-white\" /> Delete</button>\n              <span>Delete an instance when that instance has been decommissioned.</span>\n            </div>\n          </template>\n        </ColumnHeader>\n      </div>\n      <no-data v-if=\"filteredValidInstances.length === 0\" message=\"No endpoint instances found. For untracked endpoints, disconnected instances are automatically pruned.\">\n        <div class=\"delete-all\">\n          <span>You may</span>\n          <button type=\"button\" @click=\"deleteAllInstances()\" class=\"btn btn-danger btn-sm\"><FAIcon :icon=\"faTrash\" class=\"icon text-white\" /> Delete</button>\n          <span>this endpoint</span>\n        </div>\n      </no-data>\n      <!--Table rows-->\n      <DataView :data=\"filteredValidInstances\" :show-items-per-page=\"true\" :items-per-page=\"20\">\n        <template #data=\"{ pageData }\">\n          <div role=\"rowgroup\" aria-label=\"endpoints\">\n            <div role=\"row\" :aria-label=\"instance.name\" class=\"row grid-row\" v-for=\"instance in pageData\" :key=\"instance.id\">\n              <div role=\"cell\" class=\"col-6 host-name\">\n                <span role=\"status\" class=\"status-icon\">\n                  <FAIcon v-if=\"instance.heartbeat_information?.reported_status !== EndpointStatus.Alive\" aria-label=\"instance dead\" :icon=\"faHeartbeat\" class=\"text-danger\" />\n                  <FAIcon v-else aria-label=\"instance alive\" :icon=\"faHeartbeat\" class=\"text-success\" />\n                </span>\n                <span class=\"lead\" aria-label=\"instance-name\">{{ instance.host_display_name }}</span>\n              </div>\n              <div role=\"cell\" aria-label=\"last-heartbeat\" class=\"col-2 last-heartbeat\">\n                <LastHeartbeat :date=\"instance.heartbeat_information?.last_report_at\" tooltip-target=\"instance\" />\n              </div>\n              <div role=\"cell\" aria-label=\"mute toggle\" class=\"col-2 centre\">\n                <div class=\"switch\">\n                  <OnOffSwitch :id=\"instance.host_display_name\" @toggle=\"toggleAlerts(instance)\" :value=\"!instance.monitor_heartbeat\" />\n                </div>\n              </div>\n              <div role=\"cell\" aria-label=\"actions\" class=\"col-1 actions\">\n                <button v-if=\"instance.heartbeat_information?.reported_status !== EndpointStatus.Alive\" type=\"button\" @click=\"deleteInstance(instance)\" class=\"btn btn-danger btn-sm\"><FAIcon :icon=\"faTrash\" class=\"icon text-white\" /> Delete</button>\n              </div>\n            </div>\n          </div>\n        </template>\n      </DataView>\n    </section>\n  </div>\n</template>\n\n<style scoped>\n@import \"../list.css\";\n@import \"./heartbeats.css\";\n\n.searchContainer {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.instances-heading h1 {\n  margin-bottom: 10px;\n}\n\n.status-icon {\n  width: 16px;\n  margin-right: 4px;\n}\n\n.actions {\n  display: flex;\n}\n\n.filters {\n  margin-top: 0.25em;\n  margin-bottom: 0.25em;\n}\n\n.buttonsContainer {\n  background-color: #f3f3f3;\n  display: flex;\n  gap: 0.5em;\n  border: #8c8c8c 1px solid;\n  border-radius: 3px;\n  padding: 0.4em;\n}\n\n.delete-all {\n  display: flex;\n  align-items: center;\n  gap: 0.4em;\n}\n\n.icon {\n  color: var(--reduced-emphasis);\n}\n</style>\n"],"names":["ColumnNames","columnSortings","endpoint","moment","useHeartbeatInstancesStore","defineStore","serviceControlStore","useServiceControlStore","instanceFilterString","ref","store","useHeartbeatsStore","endpointInstances","storeToRefs","sortByInstances","sortedInstances","computed","getSortFunction","SortDirection","filteredInstances","instance","refresh","watch","newValue","setInstanceFilterString","filter","deleteEndpointInstance","toggleEndpointMonitor","endpoints","useHeartbeatInstancesStoreAutoRefresh","useStoreAutoRefresh","route","useRoute","router","useRouter","endpointName","endpointSettingsStore","useEndpointSettingsStore","endpointSettings","backLink","routeLinks","filterToValidInstances","data","value","filteredValidInstances","totalValidInstances","showBulkWarningDialog","dialogWarningOperation","onMounted","back","showBulkOperationWarningDialog","operation","cancelWarningDialog","proceedWarningDialog","useShowToast","TYPE","deleteInstance","deleteAllInstances","toggleAlerts","_createBlock","_Teleport","ConfirmDialog","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_RouterLink","FAIcon","_unref","faChevronLeft","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","FilterInput","$event","_hoisted_7","_hoisted_8","_hoisted_9","_cache","faBellSlash","_normalizeClass","faBell","_hoisted_12","ResultsCount","_hoisted_13","_hoisted_14","ColumnHeader","_hoisted_15","_hoisted_16","faTrash","NoData","_hoisted_17","DataView","_withCtx","pageData","_hoisted_18","_createElementBlock","_Fragment","_renderList","_hoisted_20","_hoisted_21","EndpointStatus","faHeartbeat","_hoisted_22","_hoisted_23","LastHeartbeat","_hoisted_24","_hoisted_25","OnOffSwitch","_hoisted_26"],"mappings":"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"}