import{e as ue,aR as gr,aS as Gt,aT as mr,w as ve,aU as jl,ad as vr,m as D,n as S,v as ee,Z as De,x as ke,q as M,z as R,aV as qt,aW as Xl,c as Z,aX as An,an as Fe,E as Ee,r as X,aY as Zl,o as Ve,K as pe,L as ze,aZ as nt,a_ as ro,t as U,a$ as Kl,p as de,b0 as rn,b1 as Te,B as ne,D as Qi,b2 as Jl,b3 as Ql,b4 as zt,l as es,b5 as Ce,b6 as be,b7 as eu,am as pr,b8 as tu,b9 as mt,y as ye,ba as zn,bb as nu,aM as ut,a7 as Ne,U as $e,bc as Ii,s as Le,k as kt,i as yr,aL as Ti,a6 as Jt,bd as Di,be as je,bf as Tt,d as _r,bg as ou,bh as iu,bi as xo,aE as su,_ as Ge,F as au,ah as yn,J as Yn,C as ts,T as lo,bj as uo,Q as _n,aC as ln,bk as ns,bl as ru,bm as lu,ao as Oi,ak as wr,ae as uu,ai as un,bn as _s,bo as cu,P as du,aA as fu,aB as hu,bp as gu,u as mu,bq as vu,br as pu,bs as yu,f as _u,aD as wu,A as bu,bt as ws,bu as xu,bv as Eo,aQ as Eu,N as bs}from"./index-C-3C3fiy.js";import{g as Su,u as He,s as Vn,p as br,x as ku}from"./MessageStore-BIIxDMkG.js";import{C as Wn,_ as os,E as Cu}from"./CodeEditor-a-l87Jnu.js";import{M as _t}from"./MetadataItem-CccIzZNT.js";function cn(e){return gr()?(An(e),!0):!1}function at(e){return typeof e=="function"?e():R(e)}const Mu=typeof window<"u"&&typeof document<"u",Nu=e=>typeof e<"u",$u=Object.prototype.toString,Iu=e=>$u.call(e)==="[object Object]",Tu=()=>{};function Du(e,t){function n(...i){return new Promise((o,s)=>{Promise.resolve(e(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(o).catch(s)})}return n}const xr=e=>e();function Ou(e=xr){const t=X(!0);function n(){t.value=!1}function i(){t.value=!0}const o=(...s)=>{t.value&&e(...s)};return{isActive:nu(t),pause:n,resume:i,eventFilter:o}}function xs(e,t=!1,n="Timeout"){return new Promise((i,o)=>{setTimeout(t?()=>o(n):i,e)})}function Pu(e,t,n={}){const{eventFilter:i=xr,...o}=n;return ve(e,Du(i,t),o)}function Dt(e,t,n={}){const{eventFilter:i,...o}=n,{eventFilter:s,pause:a,resume:l,isActive:r}=Ou(i);return{stop:Pu(e,t,{...o,eventFilter:s}),pause:a,resume:l,isActive:r}}function Ru(e,t={}){if(!Qi(e))return Jl(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const i in e.value)n[i]=Ql(()=>({get(){return e.value[i]},set(o){var s;if((s=at(t.replaceRef))!=null?s:!0)if(Array.isArray(e.value)){const l=[...e.value];l[i]=o,e.value=l}else{const l={...e.value,[i]:o};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[i]=o}}));return n}function Pi(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:g,throwOnTimeout:p}={}){let m=null;const y=[new Promise(v=>{m=ve(e,w=>{d(w)!==t&&(m?.(),v(w))},{flush:f,deep:h,immediate:!0})})];return g!=null&&y.push(xs(g,p).then(()=>at(e)).finally(()=>m?.())),Promise.race(y)}function i(d,f){if(!Qi(d))return n(w=>w===d,f);const{flush:h="sync",deep:g=!1,timeout:p,throwOnTimeout:m}=f??{};let b=null;const v=[new Promise(w=>{b=ve([e,d],([O,L])=>{t!==(O===L)&&(b?.(),w(O))},{flush:h,deep:g,immediate:!0})})];return p!=null&&v.push(xs(p,m).then(()=>at(e)).finally(()=>(b?.(),at(e)))),Promise.race(v)}function o(d){return n(f=>!!f,d)}function s(d){return i(null,d)}function a(d){return i(void 0,d)}function l(d){return n(Number.isNaN,d)}function r(d,f){return n(h=>{const g=Array.from(h);return g.includes(d)||g.includes(at(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(at(e))?{toMatch:n,toContains:r,changed:u,changedTimes:c,get not(){return Pi(e,!t)}}:{toMatch:n,toBe:i,toBeTruthy:o,toBeNull:s,toBeNaN:l,toBeUndefined:a,changed:u,changedTimes:c,get not(){return Pi(e,!t)}}}function Ri(e){return Pi(e)}function Lu(e){var t;const n=at(e);return(t=n?.$el)!=null?t:n}const Er=Mu?window:void 0;function Sr(...e){let t,n,i,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,o]=e,t=Er):[t,n,i,o]=e,!t)return Tu;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const s=[],a=()=>{s.forEach(c=>c()),s.length=0},l=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),r=ve(()=>[Lu(t),at(o)],([c,d])=>{if(a(),!c)return;const f=Iu(d)?{...d}:d;s.push(...n.flatMap(h=>i.map(g=>l(c,h,g,f))))},{immediate:!0,flush:"post"}),u=()=>{r(),a()};return cn(u),u}function Au(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Es(...e){let t,n,i={};e.length===3?(t=e[0],n=e[1],i=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],i=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:o=Er,eventName:s="keydown",passive:a=!1,dedupe:l=!1}=i,r=Au(t);return Sr(o,s,c=>{c.repeat&&at(l)||r(c)&&n(c)},a)}function zu(e){return JSON.parse(JSON.stringify(e))}function So(e,t,n,i={}){var o,s,a;const{clone:l=!1,passive:r=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=i,h=qt(),g=n||h?.emit||((o=h?.$emit)==null?void 0:o.bind(h))||((a=(s=h?.proxy)==null?void 0:s.$emit)==null?void 0:a.bind(h?.proxy));let p=u;t||(t="modelValue"),p=p||`update:${t.toString()}`;const m=v=>l?typeof l=="function"?l(v):zu(v):v,b=()=>Nu(e[t])?m(e[t]):d,y=v=>{f?f(v)&&g(p,v):g(p,v)};if(r){const v=b(),w=X(v);let O=!1;return ve(()=>e[t],L=>{O||(O=!0,w.value=m(L),nt(()=>O=!1))}),ve(w,L=>{!O&&(L!==e[t]||c)&&y(L)},{deep:c}),w}else return Z({get(){return b()},set(v){y(v)}})}var Vu={value:()=>{}};function co(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Bn(n)}function Bn(e){this._=e}function Bu(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Bn.prototype=co.prototype={constructor:Bn,on:function(e,t){var n=this._,i=Bu(e+"",n),o,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((o=(e=i[s]).type)&&(o=Fu(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(o=(e=i[s]).type)n[o]=Ss(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ss(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Bn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,s;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,o=s.length;i<o;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,s=i.length;o<s;++o)i[o].value.apply(t,n)}};function Fu(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function Ss(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=Vu,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Li="http://www.w3.org/1999/xhtml";const ks={svg:"http://www.w3.org/2000/svg",xhtml:Li,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ks.hasOwnProperty(t)?{space:ks[t],local:e}:e}function Hu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Li&&t.documentElement.namespaceURI===Li?t.createElement(e):t.createElementNS(n,e)}}function Gu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kr(e){var t=fo(e);return(t.local?Gu:Hu)(t)}function qu(){}function is(e){return e==null?qu:function(){return this.querySelector(e)}}function Yu(e){typeof e!="function"&&(e=is(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var s=t[o],a=s.length,l=i[o]=new Array(a),r,u,c=0;c<a;++c)(r=s[c])&&(u=e.call(r,r.__data__,c,s))&&("__data__"in r&&(u.__data__=r.__data__),l[c]=u);return new qe(i,this._parents)}function Wu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Uu(){return[]}function Cr(e){return e==null?Uu:function(){return this.querySelectorAll(e)}}function ju(e){return function(){return Wu(e.apply(this,arguments))}}function Xu(e){typeof e=="function"?e=ju(e):e=Cr(e);for(var t=this._groups,n=t.length,i=[],o=[],s=0;s<n;++s)for(var a=t[s],l=a.length,r,u=0;u<l;++u)(r=a[u])&&(i.push(e.call(r,r.__data__,u,a)),o.push(r));return new qe(i,o)}function Mr(e){return function(){return this.matches(e)}}function Nr(e){return function(t){return t.matches(e)}}var Zu=Array.prototype.find;function Ku(e){return function(){return Zu.call(this.children,e)}}function Ju(){return this.firstElementChild}function Qu(e){return this.select(e==null?Ju:Ku(typeof e=="function"?e:Nr(e)))}var ec=Array.prototype.filter;function tc(){return Array.from(this.children)}function nc(e){return function(){return ec.call(this.children,e)}}function oc(e){return this.selectAll(e==null?tc:nc(typeof e=="function"?e:Nr(e)))}function ic(e){typeof e!="function"&&(e=Mr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var s=t[o],a=s.length,l=i[o]=[],r,u=0;u<a;++u)(r=s[u])&&e.call(r,r.__data__,u,s)&&l.push(r);return new qe(i,this._parents)}function $r(e){return new Array(e.length)}function sc(){return new qe(this._enter||this._groups.map($r),this._parents)}function Un(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Un.prototype={constructor:Un,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ac(e){return function(){return e}}function rc(e,t,n,i,o,s){for(var a=0,l,r=t.length,u=s.length;a<u;++a)(l=t[a])?(l.__data__=s[a],i[a]=l):n[a]=new Un(e,s[a]);for(;a<r;++a)(l=t[a])&&(o[a]=l)}function lc(e,t,n,i,o,s,a){var l,r,u=new Map,c=t.length,d=s.length,f=new Array(c),h;for(l=0;l<c;++l)(r=t[l])&&(f[l]=h=a.call(r,r.__data__,l,t)+"",u.has(h)?o[l]=r:u.set(h,r));for(l=0;l<d;++l)h=a.call(e,s[l],l,s)+"",(r=u.get(h))?(i[l]=r,r.__data__=s[l],u.delete(h)):n[l]=new Un(e,s[l]);for(l=0;l<c;++l)(r=t[l])&&u.get(f[l])===r&&(o[l]=r)}function uc(e){return e.__data__}function cc(e,t){if(!arguments.length)return Array.from(this,uc);var n=t?lc:rc,i=this._parents,o=this._groups;typeof e!="function"&&(e=ac(e));for(var s=o.length,a=new Array(s),l=new Array(s),r=new Array(s),u=0;u<s;++u){var c=i[u],d=o[u],f=d.length,h=dc(e.call(c,c&&c.__data__,u,i)),g=h.length,p=l[u]=new Array(g),m=a[u]=new Array(g),b=r[u]=new Array(f);n(c,d,p,m,b,h,t);for(var y=0,v=0,w,O;y<g;++y)if(w=p[y]){for(y>=v&&(v=y+1);!(O=m[v])&&++v<g;);w._next=O||null}}return a=new qe(a,i),a._enter=l,a._exit=r,a}function dc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fc(){return new qe(this._exit||this._groups.map($r),this._parents)}function hc(e,t,n){var i=this.enter(),o=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),i&&o?i.merge(o).order():o}function gc(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,s=i.length,a=Math.min(o,s),l=new Array(o),r=0;r<a;++r)for(var u=n[r],c=i[r],d=u.length,f=l[r]=new Array(d),h,g=0;g<d;++g)(h=u[g]||c[g])&&(f[g]=h);for(;r<o;++r)l[r]=n[r];return new qe(l,this._parents)}function mc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,s=i[o],a;--o>=0;)(a=i[o])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function vc(e){e||(e=pc);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,o=new Array(i),s=0;s<i;++s){for(var a=n[s],l=a.length,r=o[s]=new Array(l),u,c=0;c<l;++c)(u=a[c])&&(r[c]=u);r.sort(t)}return new qe(o,this._parents).order()}function pc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _c(){return Array.from(this)}function wc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,s=i.length;o<s;++o){var a=i[o];if(a)return a}return null}function bc(){let e=0;for(const t of this)++e;return e}function xc(){return!this.node()}function Ec(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],s=0,a=o.length,l;s<a;++s)(l=o[s])&&e.call(l,l.__data__,s,o);return this}function Sc(e){return function(){this.removeAttribute(e)}}function kc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cc(e,t){return function(){this.setAttribute(e,t)}}function Mc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Nc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function $c(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ic(e,t){var n=fo(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?kc:Sc:typeof t=="function"?n.local?$c:Nc:n.local?Mc:Cc)(n,t))}function Ir(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Tc(e){return function(){this.style.removeProperty(e)}}function Dc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Oc(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Pc(e,t,n){return arguments.length>1?this.each((t==null?Tc:typeof t=="function"?Oc:Dc)(e,t,n??"")):Vt(this.node(),e)}function Vt(e,t){return e.style.getPropertyValue(t)||Ir(e).getComputedStyle(e,null).getPropertyValue(t)}function Rc(e){return function(){delete this[e]}}function Lc(e,t){return function(){this[e]=t}}function Ac(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zc(e,t){return arguments.length>1?this.each((t==null?Rc:typeof t=="function"?Ac:Lc)(e,t)):this.node()[e]}function Tr(e){return e.trim().split(/^|\s+/)}function ss(e){return e.classList||new Dr(e)}function Dr(e){this._node=e,this._names=Tr(e.getAttribute("class")||"")}Dr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Or(e,t){for(var n=ss(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function Pr(e,t){for(var n=ss(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function Vc(e){return function(){Or(this,e)}}function Bc(e){return function(){Pr(this,e)}}function Fc(e,t){return function(){(t.apply(this,arguments)?Or:Pr)(this,e)}}function Hc(e,t){var n=Tr(e+"");if(arguments.length<2){for(var i=ss(this.node()),o=-1,s=n.length;++o<s;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Fc:t?Vc:Bc)(n,t))}function Gc(){this.textContent=""}function qc(e){return function(){this.textContent=e}}function Yc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Wc(e){return arguments.length?this.each(e==null?Gc:(typeof e=="function"?Yc:qc)(e)):this.node().textContent}function Uc(){this.innerHTML=""}function jc(e){return function(){this.innerHTML=e}}function Xc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Zc(e){return arguments.length?this.each(e==null?Uc:(typeof e=="function"?Xc:jc)(e)):this.node().innerHTML}function Kc(){this.nextSibling&&this.parentNode.appendChild(this)}function Jc(){return this.each(Kc)}function Qc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ed(){return this.each(Qc)}function td(e){var t=typeof e=="function"?e:kr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nd(){return null}function od(e,t){var n=typeof e=="function"?e:kr(e),i=t==null?nd:typeof t=="function"?t:is(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function id(){var e=this.parentNode;e&&e.removeChild(this)}function sd(){return this.each(id)}function ad(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ld(e){return this.select(e?rd:ad)}function ud(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cd(e){return function(t){e.call(this,t,this.__data__)}}function dd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function fd(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function hd(e,t,n){return function(){var i=this.__on,o,s=cd(t);if(i){for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(o):this.__on=[o]}}function gd(e,t,n){var i=dd(e+""),o,s=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var r=0,u=l.length,c;r<u;++r)for(o=0,c=l[r];o<s;++o)if((a=i[o]).type===c.type&&a.name===c.name)return c.value}return}for(l=t?hd:fd,o=0;o<s;++o)this.each(l(i[o],t,n));return this}function Rr(e,t,n){var i=Ir(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function md(e,t){return function(){return Rr(this,e,t)}}function vd(e,t){return function(){return Rr(this,e,t.apply(this,arguments))}}function pd(e,t){return this.each((typeof t=="function"?vd:md)(e,t))}function*yd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,s=i.length,a;o<s;++o)(a=i[o])&&(yield a)}var Lr=[null];function qe(e,t){this._groups=e,this._parents=t}function wn(){return new qe([[document.documentElement]],Lr)}function _d(){return this}qe.prototype=wn.prototype={constructor:qe,select:Yu,selectAll:Xu,selectChild:Qu,selectChildren:oc,filter:ic,data:cc,enter:sc,exit:fc,join:hc,merge:gc,selection:_d,order:mc,sort:vc,call:yc,nodes:_c,node:wc,size:bc,empty:xc,each:Ec,attr:Ic,style:Pc,property:zc,classed:Hc,text:Wc,html:Zc,raise:Jc,lower:ed,append:td,insert:od,remove:sd,clone:ld,datum:ud,on:gd,dispatch:pd,[Symbol.iterator]:yd};function We(e){return typeof e=="string"?new qe([[document.querySelector(e)]],[document.documentElement]):new qe([[e]],Lr)}function wd(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Je(e,t){if(e=wd(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const bd={passive:!1},dn={capture:!0,passive:!1};function ko(e){e.stopImmediatePropagation()}function Pt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ar(e){var t=e.document.documentElement,n=We(e).on("dragstart.drag",Pt,dn);"onselectstart"in t?n.on("selectstart.drag",Pt,dn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function zr(e,t){var n=e.document.documentElement,i=We(e).on("dragstart.drag",null);t&&(i.on("click.drag",Pt,dn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Sn=e=>()=>e;function Ai(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:s,x:a,y:l,dx:r,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:r,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Ai.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xd(e){return!e.ctrlKey&&!e.button}function Ed(){return this.parentNode}function Sd(e,t){return t??{x:e.x,y:e.y}}function kd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cd(){var e=xd,t=Ed,n=Sd,i=kd,o={},s=co("start","drag","end"),a=0,l,r,u,c,d=0;function f(w){w.on("mousedown.drag",h).filter(i).on("touchstart.drag",m).on("touchmove.drag",b,bd).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,O){if(!(c||!e.call(this,w,O))){var L=v(this,t.call(this,w,O),w,O,"mouse");L&&(We(w.view).on("mousemove.drag",g,dn).on("mouseup.drag",p,dn),Ar(w.view),ko(w),u=!1,l=w.clientX,r=w.clientY,L("start",w))}}function g(w){if(Pt(w),!u){var O=w.clientX-l,L=w.clientY-r;u=O*O+L*L>d}o.mouse("drag",w)}function p(w){We(w.view).on("mousemove.drag mouseup.drag",null),zr(w.view,u),Pt(w),o.mouse("end",w)}function m(w,O){if(e.call(this,w,O)){var L=w.changedTouches,A=t.call(this,w,O),_=L.length,k,x;for(k=0;k<_;++k)(x=v(this,A,w,O,L[k].identifier,L[k]))&&(ko(w),x("start",w,L[k]))}}function b(w){var O=w.changedTouches,L=O.length,A,_;for(A=0;A<L;++A)(_=o[O[A].identifier])&&(Pt(w),_("drag",w,O[A]))}function y(w){var O=w.changedTouches,L=O.length,A,_;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<L;++A)(_=o[O[A].identifier])&&(ko(w),_("end",w,O[A]))}function v(w,O,L,A,_,k){var x=s.copy(),I=Je(k||L,O),E,G,C;if((C=n.call(w,new Ai("beforestart",{sourceEvent:L,target:f,identifier:_,active:a,x:I[0],y:I[1],dx:0,dy:0,dispatch:x}),A))!=null)return E=C.x-I[0]||0,G=C.y-I[1]||0,function H(V,W,j){var K=I,J;switch(V){case"start":o[_]=H,J=a++;break;case"end":delete o[_],--a;case"drag":I=Je(j||W,O),J=a;break}x.call(V,w,new Ai(V,{sourceEvent:W,subject:C,target:f,identifier:_,active:J,x:I[0]+E,y:I[1]+G,dx:I[0]-K[0],dy:I[1]-K[1],dispatch:x}),A)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Sn(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:Sn(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Sn(w),f):n},f.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:Sn(!!w),f):i},f.on=function(){var w=s.on.apply(s,arguments);return w===s?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function as(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vr(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function bn(){}var fn=.7,jn=1/fn,Rt="\\s*([+-]?\\d+)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Md=/^#([0-9a-f]{3,8})$/,Nd=new RegExp(`^rgb\\(${Rt},${Rt},${Rt}\\)$`),$d=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),Id=new RegExp(`^rgba\\(${Rt},${Rt},${Rt},${hn}\\)$`),Td=new RegExp(`^rgba\\(${ot},${ot},${ot},${hn}\\)$`),Dd=new RegExp(`^hsl\\(${hn},${ot},${ot}\\)$`),Od=new RegExp(`^hsla\\(${hn},${ot},${ot},${hn}\\)$`),Cs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};as(bn,Nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ms,formatHex:Ms,formatHex8:Pd,formatHsl:Rd,formatRgb:Ns,toString:Ns});function Ms(){return this.rgb().formatHex()}function Pd(){return this.rgb().formatHex8()}function Rd(){return Br(this).formatHsl()}function Ns(){return this.rgb().formatRgb()}function Nt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Md.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$s(t):n===3?new Be(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?kn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?kn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Nd.exec(e))?new Be(t[1],t[2],t[3],1):(t=$d.exec(e))?new Be(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Id.exec(e))?kn(t[1],t[2],t[3],t[4]):(t=Td.exec(e))?kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Dd.exec(e))?Ds(t[1],t[2]/100,t[3]/100,1):(t=Od.exec(e))?Ds(t[1],t[2]/100,t[3]/100,t[4]):Cs.hasOwnProperty(e)?$s(Cs[e]):e==="transparent"?new Be(NaN,NaN,NaN,0):null}function $s(e){return new Be(e>>16&255,e>>8&255,e&255,1)}function kn(e,t,n,i){return i<=0&&(e=t=n=NaN),new Be(e,t,n,i)}function Ld(e){return e instanceof bn||(e=Nt(e)),e?(e=e.rgb(),new Be(e.r,e.g,e.b,e.opacity)):new Be}function zi(e,t,n,i){return arguments.length===1?Ld(e):new Be(e,t,n,i??1)}function Be(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}as(Be,zi,Vr(bn,{brighter(e){return e=e==null?jn:Math.pow(jn,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Be(Ct(this.r),Ct(this.g),Ct(this.b),Xn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Is,formatHex:Is,formatHex8:Ad,formatRgb:Ts,toString:Ts}));function Is(){return`#${Et(this.r)}${Et(this.g)}${Et(this.b)}`}function Ad(){return`#${Et(this.r)}${Et(this.g)}${Et(this.b)}${Et((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ts(){const e=Xn(this.opacity);return`${e===1?"rgb(":"rgba("}${Ct(this.r)}, ${Ct(this.g)}, ${Ct(this.b)}${e===1?")":`, ${e})`}`}function Xn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ct(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Et(e){return e=Ct(e),(e<16?"0":"")+e.toString(16)}function Ds(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ue(e,t,n,i)}function Br(e){if(e instanceof Ue)return new Ue(e.h,e.s,e.l,e.opacity);if(e instanceof bn||(e=Nt(e)),!e)return new Ue;if(e instanceof Ue)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,l=s-o,r=(s+o)/2;return l?(t===s?a=(n-i)/l+(n<i)*6:n===s?a=(i-t)/l+2:a=(t-n)/l+4,l/=r<.5?s+o:2-s-o,a*=60):l=r>0&&r<1?0:a,new Ue(a,l,r,e.opacity)}function zd(e,t,n,i){return arguments.length===1?Br(e):new Ue(e,t,n,i??1)}function Ue(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}as(Ue,zd,Vr(bn,{brighter(e){return e=e==null?jn:Math.pow(jn,e),new Ue(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new Ue(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new Be(Co(e>=240?e-240:e+120,o,i),Co(e,o,i),Co(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new Ue(Os(this.h),Cn(this.s),Cn(this.l),Xn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xn(this.opacity);return`${e===1?"hsl(":"hsla("}${Os(this.h)}, ${Cn(this.s)*100}%, ${Cn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Os(e){return e=(e||0)%360,e<0?e+360:e}function Cn(e){return Math.max(0,Math.min(1,e||0))}function Co(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rs=e=>()=>e;function Vd(e,t){return function(n){return e+n*t}}function Bd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Fd(e){return(e=+e)==1?Fr:function(t,n){return n-t?Bd(t,n,e):rs(isNaN(t)?n:t)}}function Fr(e,t){var n=t-e;return n?Vd(e,n):rs(isNaN(e)?t:e)}const Zn=(function e(t){var n=Fd(t);function i(o,s){var a=n((o=zi(o)).r,(s=zi(s)).r),l=n(o.g,s.g),r=n(o.b,s.b),u=Fr(o.opacity,s.opacity);return function(c){return o.r=a(c),o.g=l(c),o.b=r(c),o.opacity=u(c),o+""}}return i.gamma=e,i})(1);function Hd(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),o;return function(s){for(o=0;o<n;++o)i[o]=e[o]*(1-s)+t[o]*s;return i}}function Gd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qd(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,o=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)o[a]=on(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(l){for(a=0;a<i;++a)s[a]=o[a](l);return s}}function Yd(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Qe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Wd(e,t){var n={},i={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=on(e[o],t[o]):i[o]=t[o];return function(s){for(o in n)i[o]=n[o](s);return i}}var Vi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mo=new RegExp(Vi.source,"g");function Ud(e){return function(){return e}}function jd(e){return function(t){return e(t)+""}}function Hr(e,t){var n=Vi.lastIndex=Mo.lastIndex=0,i,o,s,a=-1,l=[],r=[];for(e=e+"",t=t+"";(i=Vi.exec(e))&&(o=Mo.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,r.push({i:a,x:Qe(i,o)})),n=Mo.lastIndex;return n<t.length&&(s=t.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?r[0]?jd(r[0].x):Ud(t):(t=r.length,function(u){for(var c=0,d;c<t;++c)l[(d=r[c]).i]=d.x(u);return l.join("")})}function on(e,t){var n=typeof t,i;return t==null||n==="boolean"?rs(t):(n==="number"?Qe:n==="string"?(i=Nt(t))?(t=i,Zn):Hr:t instanceof Nt?Zn:t instanceof Date?Yd:Gd(t)?Hd:Array.isArray(t)?qd:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wd:Qe)(e,t)}var Ps=180/Math.PI,Bi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gr(e,t,n,i,o,s){var a,l,r;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(r=e*n+t*i)&&(n-=e*r,i-=t*r),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,r/=l),e*i<t*n&&(e=-e,t=-t,r=-r,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*Ps,skewX:Math.atan(r)*Ps,scaleX:a,scaleY:l}}var Mn;function Xd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Bi:Gr(t.a,t.b,t.c,t.d,t.e,t.f)}function Zd(e){return e==null||(Mn||(Mn=document.createElementNS("http://www.w3.org/2000/svg","g")),Mn.setAttribute("transform",e),!(e=Mn.transform.baseVal.consolidate()))?Bi:(e=e.matrix,Gr(e.a,e.b,e.c,e.d,e.e,e.f))}function qr(e,t,n,i){function o(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,g){if(u!==d||c!==f){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:Qe(u,d)},{i:p-2,x:Qe(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(o(d)+"rotate(",null,i)-2,x:Qe(u,c)})):c&&d.push(o(d)+"rotate("+c+i)}function l(u,c,d,f){u!==c?f.push({i:d.push(o(d)+"skewX(",null,i)-2,x:Qe(u,c)}):c&&d.push(o(d)+"skewX("+c+i)}function r(u,c,d,f,h,g){if(u!==d||c!==f){var p=h.push(o(h)+"scale(",null,",",null,")");g.push({i:p-4,x:Qe(u,d)},{i:p-2,x:Qe(c,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),l(u.skewX,c.skewX,d,f),r(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var g=-1,p=f.length,m;++g<p;)d[(m=f[g]).i]=m.x(h);return d.join("")}}}var Kd=qr(Xd,"px, ","px)","deg)"),Jd=qr(Zd,", ",")",")"),Qd=1e-12;function Rs(e){return((e=Math.exp(e))+1/e)/2}function ef(e){return((e=Math.exp(e))-1/e)/2}function tf(e){return((e=Math.exp(2*e))-1)/(e+1)}const Fn=(function e(t,n,i){function o(s,a){var l=s[0],r=s[1],u=s[2],c=a[0],d=a[1],f=a[2],h=c-l,g=d-r,p=h*h+g*g,m,b;if(p<Qd)b=Math.log(f/u)/t,m=function(A){return[l+A*h,r+A*g,u*Math.exp(t*A*b)]};else{var y=Math.sqrt(p),v=(f*f-u*u+i*p)/(2*u*n*y),w=(f*f-u*u-i*p)/(2*f*n*y),O=Math.log(Math.sqrt(v*v+1)-v),L=Math.log(Math.sqrt(w*w+1)-w);b=(L-O)/t,m=function(A){var _=A*b,k=Rs(O),x=u/(n*y)*(k*tf(t*_+O)-ef(O));return[l+x*h,r+x*g,u*k/Rs(t*_+O)]}}return m.duration=b*1e3*t/Math.SQRT2,m}return o.rho=function(s){var a=Math.max(.001,+s),l=a*a,r=l*l;return e(a,l,r)},o})(Math.SQRT2,2,4);var Bt=0,Qt=0,jt=0,Yr=1e3,Kn,en,Jn=0,$t=0,ho=0,gn=typeof performance=="object"&&performance.now?performance:Date,Wr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ls(){return $t||(Wr(nf),$t=gn.now()+ho)}function nf(){$t=0}function Qn(){this._call=this._time=this._next=null}Qn.prototype=Ur.prototype={constructor:Qn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ls():+n)+(t==null?0:+t),!this._next&&en!==this&&(en?en._next=this:Kn=this,en=this),this._call=e,this._time=n,Fi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fi())}};function Ur(e,t,n){var i=new Qn;return i.restart(e,t,n),i}function of(){ls(),++Bt;for(var e=Kn,t;e;)(t=$t-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Bt}function Ls(){$t=(Jn=gn.now())+ho,Bt=Qt=0;try{of()}finally{Bt=0,af(),$t=0}}function sf(){var e=gn.now(),t=e-Jn;t>Yr&&(ho-=t,Jn=e)}function af(){for(var e,t=Kn,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Kn=n);en=e,Fi(i)}function Fi(e){if(!Bt){Qt&&(Qt=clearTimeout(Qt));var t=e-$t;t>24?(e<1/0&&(Qt=setTimeout(Ls,e-gn.now()-ho)),jt&&(jt=clearInterval(jt))):(jt||(Jn=gn.now(),jt=setInterval(sf,Yr)),Bt=1,Wr(Ls))}}function As(e,t,n){var i=new Qn;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var rf=co("start","end","cancel","interrupt"),lf=[],jr=0,zs=1,Hi=2,Hn=3,Vs=4,Gi=5,Gn=6;function go(e,t,n,i,o,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;uf(e,n,{name:t,index:i,group:o,on:rf,tween:lf,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:jr})}function us(e,t){var n=Ze(e,t);if(n.state>jr)throw new Error("too late; already scheduled");return n}function it(e,t){var n=Ze(e,t);if(n.state>Hn)throw new Error("too late; already running");return n}function Ze(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function uf(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=Ur(s,0,n.time);function s(u){n.state=zs,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,h;if(n.state!==zs)return r();for(c in i)if(h=i[c],h.name===n.name){if(h.state===Hn)return As(a);h.state===Vs?(h.state=Gn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=Gn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(As(function(){n.state===Hn&&(n.state=Vs,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Hi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Hi){for(n.state=Hn,o=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(r),n.state=Gi,1),d=-1,f=o.length;++d<f;)o[d].call(e,c);n.state===Gi&&(n.on.call("end",e,e.__data__,n.index,n.group),r())}function r(){n.state=Gn,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function qn(e,t){var n=e.__transition,i,o,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){s=!1;continue}o=i.state>Hi&&i.state<Gi,i.state=Gn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}s&&delete e.__transition}}function cf(e){return this.each(function(){qn(this,e)})}function df(e,t){var n,i;return function(){var o=it(this,e),s=o.tween;if(s!==n){i=n=s;for(var a=0,l=i.length;a<l;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}o.tween=i}}function ff(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var s=it(this,e),a=s.tween;if(a!==i){o=(i=a).slice();for(var l={name:t,value:n},r=0,u=o.length;r<u;++r)if(o[r].name===t){o[r]=l;break}r===u&&o.push(l)}s.tween=o}}function hf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ze(this.node(),n).tween,o=0,s=i.length,a;o<s;++o)if((a=i[o]).name===e)return a.value;return null}return this.each((t==null?df:ff)(n,e,t))}function cs(e,t,n){var i=e._id;return e.each(function(){var o=it(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Ze(o,i).value[t]}}function Xr(e,t){var n;return(typeof t=="number"?Qe:t instanceof Nt?Zn:(n=Nt(t))?(t=n,Zn):Hr)(e,t)}function gf(e){return function(){this.removeAttribute(e)}}function mf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vf(e,t,n){var i,o=n+"",s;return function(){var a=this.getAttribute(e);return a===o?null:a===i?s:s=t(i=a,n)}}function pf(e,t,n){var i,o=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===i?s:s=t(i=a,n)}}function yf(e,t,n){var i,o,s;return function(){var a,l=n(this),r;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),r=l+"",a===r?null:a===i&&r===o?s:(o=r,s=t(i=a,l)))}}function _f(e,t,n){var i,o,s;return function(){var a,l=n(this),r;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),r=l+"",a===r?null:a===i&&r===o?s:(o=r,s=t(i=a,l)))}}function wf(e,t){var n=fo(e),i=n==="transform"?Jd:Xr;return this.attrTween(e,typeof t=="function"?(n.local?_f:yf)(n,i,cs(this,"attr."+e,t)):t==null?(n.local?mf:gf)(n):(n.local?pf:vf)(n,i,t))}function bf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ef(e,t){var n,i;function o(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&xf(e,s)),n}return o._value=t,o}function Sf(e,t){var n,i;function o(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&bf(e,s)),n}return o._value=t,o}function kf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=fo(e);return this.tween(n,(i.local?Ef:Sf)(i,t))}function Cf(e,t){return function(){us(this,e).delay=+t.apply(this,arguments)}}function Mf(e,t){return t=+t,function(){us(this,e).delay=t}}function Nf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cf:Mf)(t,e)):Ze(this.node(),t).delay}function $f(e,t){return function(){it(this,e).duration=+t.apply(this,arguments)}}function If(e,t){return t=+t,function(){it(this,e).duration=t}}function Tf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$f:If)(t,e)):Ze(this.node(),t).duration}function Df(e,t){if(typeof t!="function")throw new Error;return function(){it(this,e).ease=t}}function Of(e){var t=this._id;return arguments.length?this.each(Df(t,e)):Ze(this.node(),t).ease}function Pf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;it(this,e).ease=n}}function Rf(e){if(typeof e!="function")throw new Error;return this.each(Pf(this._id,e))}function Lf(e){typeof e!="function"&&(e=Mr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var s=t[o],a=s.length,l=i[o]=[],r,u=0;u<a;++u)(r=s[u])&&e.call(r,r.__data__,u,s)&&l.push(r);return new lt(i,this._parents,this._name,this._id)}function Af(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var r=t[l],u=n[l],c=r.length,d=a[l]=new Array(c),f,h=0;h<c;++h)(f=r[h]||u[h])&&(d[h]=f);for(;l<i;++l)a[l]=t[l];return new lt(a,this._parents,this._name,this._id)}function zf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Vf(e,t,n){var i,o,s=zf(t)?us:it;return function(){var a=s(this,e),l=a.on;l!==i&&(o=(i=l).copy()).on(t,n),a.on=o}}function Bf(e,t){var n=this._id;return arguments.length<2?Ze(this.node(),n).on.on(e):this.each(Vf(n,e,t))}function Ff(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Hf(){return this.on("end.remove",Ff(this._id))}function Gf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=is(e));for(var i=this._groups,o=i.length,s=new Array(o),a=0;a<o;++a)for(var l=i[a],r=l.length,u=s[a]=new Array(r),c,d,f=0;f<r;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,go(u[f],t,n,f,u,Ze(c,n)));return new lt(s,this._parents,t,n)}function qf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Cr(e));for(var i=this._groups,o=i.length,s=[],a=[],l=0;l<o;++l)for(var r=i[l],u=r.length,c,d=0;d<u;++d)if(c=r[d]){for(var f=e.call(c,c.__data__,d,r),h,g=Ze(c,n),p=0,m=f.length;p<m;++p)(h=f[p])&&go(h,t,n,p,f,g);s.push(f),a.push(c)}return new lt(s,a,t,n)}var Yf=wn.prototype.constructor;function Wf(){return new Yf(this._groups,this._parents)}function Uf(e,t){var n,i,o;return function(){var s=Vt(this,e),a=(this.style.removeProperty(e),Vt(this,e));return s===a?null:s===n&&a===i?o:o=t(n=s,i=a)}}function Zr(e){return function(){this.style.removeProperty(e)}}function jf(e,t,n){var i,o=n+"",s;return function(){var a=Vt(this,e);return a===o?null:a===i?s:s=t(i=a,n)}}function Xf(e,t,n){var i,o,s;return function(){var a=Vt(this,e),l=n(this),r=l+"";return l==null&&(r=l=(this.style.removeProperty(e),Vt(this,e))),a===r?null:a===i&&r===o?s:(o=r,s=t(i=a,l))}}function Zf(e,t){var n,i,o,s="style."+t,a="end."+s,l;return function(){var r=it(this,e),u=r.on,c=r.value[s]==null?l||(l=Zr(t)):void 0;(u!==n||o!==c)&&(i=(n=u).copy()).on(a,o=c),r.on=i}}function Kf(e,t,n){var i=(e+="")=="transform"?Kd:Xr;return t==null?this.styleTween(e,Uf(e,i)).on("end.style."+e,Zr(e)):typeof t=="function"?this.styleTween(e,Xf(e,i,cs(this,"style."+e,t))).each(Zf(this._id,e)):this.styleTween(e,jf(e,i,t),n).on("end.style."+e,null)}function Jf(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Qf(e,t,n){var i,o;function s(){var a=t.apply(this,arguments);return a!==o&&(i=(o=a)&&Jf(e,a,n)),i}return s._value=t,s}function eh(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Qf(e,t,n??""))}function th(e){return function(){this.textContent=e}}function nh(e){return function(){var t=e(this);this.textContent=t??""}}function oh(e){return this.tween("text",typeof e=="function"?nh(cs(this,"text",e)):th(e==null?"":e+""))}function ih(e){return function(t){this.textContent=e.call(this,t)}}function sh(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&ih(o)),t}return i._value=e,i}function ah(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,sh(e))}function rh(){for(var e=this._name,t=this._id,n=Kr(),i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,r,u=0;u<l;++u)if(r=a[u]){var c=Ze(r,t);go(r,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new lt(i,this._parents,e,n)}function lh(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(s,a){var l={value:a},r={value:function(){--o===0&&s()}};n.each(function(){var u=it(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(r)),u.on=t}),o===0&&s()})}var uh=0;function lt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Kr(){return++uh}var st=wn.prototype;lt.prototype={constructor:lt,select:Gf,selectAll:qf,selectChild:st.selectChild,selectChildren:st.selectChildren,filter:Lf,merge:Af,selection:Wf,transition:rh,call:st.call,nodes:st.nodes,node:st.node,size:st.size,empty:st.empty,each:st.each,on:Bf,attr:wf,attrTween:kf,style:Kf,styleTween:eh,text:oh,textTween:ah,remove:Hf,tween:hf,delay:Nf,duration:Tf,ease:Of,easeVarying:Rf,end:lh,[Symbol.iterator]:st[Symbol.iterator]};function ch(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dh={time:null,delay:0,duration:250,ease:ch};function fh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hh(e){var t,n;e instanceof lt?(t=e._id,e=e._name):(t=Kr(),(n=dh).time=ls(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,r,u=0;u<l;++u)(r=a[u])&&go(r,e,t,u,a,n||fh(r,t));return new lt(i,this._parents,e,t)}wn.prototype.interrupt=cf;wn.prototype.transition=hh;const Nn=e=>()=>e;function gh(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function rt(e,t,n){this.k=e,this.x=t,this.y=n}rt.prototype={constructor:rt,scale:function(e){return e===1?this:new rt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new rt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ft=new rt(1,0,0);rt.prototype;function No(e){e.stopImmediatePropagation()}function Xt(e){e.preventDefault(),e.stopImmediatePropagation()}function mh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bs(){return this.__zoom||Ft}function ph(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function yh(){return navigator.maxTouchPoints||"ontouchstart"in this}function _h(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function wh(){var e=mh,t=vh,n=_h,i=ph,o=yh,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,r=Fn,u=co("start","zoom","end"),c,d,f,h=500,g=150,p=0,m=10;function b(C){C.property("__zoom",Bs).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",x).filter(o).on("touchstart.zoom",I).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(C,H,V,W){var j=C.selection?C.selection():C;j.property("__zoom",Bs),C!==j?O(C,H,V,W):j.interrupt().each(function(){L(this,arguments).event(W).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},b.scaleBy=function(C,H,V,W){b.scaleTo(C,function(){var j=this.__zoom.k,K=typeof H=="function"?H.apply(this,arguments):H;return j*K},V,W)},b.scaleTo=function(C,H,V,W){b.transform(C,function(){var j=t.apply(this,arguments),K=this.__zoom,J=V==null?w(j):typeof V=="function"?V.apply(this,arguments):V,oe=K.invert(J),ge=typeof H=="function"?H.apply(this,arguments):H;return n(v(y(K,ge),J,oe),j,a)},V,W)},b.translateBy=function(C,H,V,W){b.transform(C,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),a)},null,W)},b.translateTo=function(C,H,V,W,j){b.transform(C,function(){var K=t.apply(this,arguments),J=this.__zoom,oe=W==null?w(K):typeof W=="function"?W.apply(this,arguments):W;return n(Ft.translate(oe[0],oe[1]).scale(J.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof V=="function"?-V.apply(this,arguments):-V),K,a)},W,j)};function y(C,H){return H=Math.max(s[0],Math.min(s[1],H)),H===C.k?C:new rt(H,C.x,C.y)}function v(C,H,V){var W=H[0]-V[0]*C.k,j=H[1]-V[1]*C.k;return W===C.x&&j===C.y?C:new rt(C.k,W,j)}function w(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function O(C,H,V,W){C.on("start.zoom",function(){L(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(W).end()}).tween("zoom",function(){var j=this,K=arguments,J=L(j,K).event(W),oe=t.apply(j,K),ge=V==null?w(oe):typeof V=="function"?V.apply(j,K):V,B=Math.max(oe[1][0]-oe[0][0],oe[1][1]-oe[0][1]),z=j.__zoom,F=typeof H=="function"?H.apply(j,K):H,q=r(z.invert(ge).concat(B/z.k),F.invert(ge).concat(B/F.k));return function(Q){if(Q===1)Q=F;else{var re=q(Q),le=B/re[2];Q=new rt(le,ge[0]-re[0]*le,ge[1]-re[1]*le)}J.zoom(null,Q)}})}function L(C,H,V){return!V&&C.__zooming||new A(C,H)}function A(C,H){this.that=C,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,H),this.taps=0}A.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,H){return this.mouse&&C!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var H=We(this.that).datum();u.call(C,this.that,new gh(C,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),H)}};function _(C,...H){if(!e.apply(this,arguments))return;var V=L(this,H).event(C),W=this.__zoom,j=Math.max(s[0],Math.min(s[1],W.k*Math.pow(2,i.apply(this,arguments)))),K=Je(C);if(V.wheel)(V.mouse[0][0]!==K[0]||V.mouse[0][1]!==K[1])&&(V.mouse[1]=W.invert(V.mouse[0]=K)),clearTimeout(V.wheel);else{if(W.k===j)return;V.mouse=[K,W.invert(K)],qn(this),V.start()}Xt(C),V.wheel=setTimeout(J,g),V.zoom("mouse",n(v(y(W,j),V.mouse[0],V.mouse[1]),V.extent,a));function J(){V.wheel=null,V.end()}}function k(C,...H){if(f||!e.apply(this,arguments))return;var V=C.currentTarget,W=L(this,H,!0).event(C),j=We(C.view).on("mousemove.zoom",ge,!0).on("mouseup.zoom",B,!0),K=Je(C,V),J=C.clientX,oe=C.clientY;Ar(C.view),No(C),W.mouse=[K,this.__zoom.invert(K)],qn(this),W.start();function ge(z){if(Xt(z),!W.moved){var F=z.clientX-J,q=z.clientY-oe;W.moved=F*F+q*q>p}W.event(z).zoom("mouse",n(v(W.that.__zoom,W.mouse[0]=Je(z,V),W.mouse[1]),W.extent,a))}function B(z){j.on("mousemove.zoom mouseup.zoom",null),zr(z.view,W.moved),Xt(z),W.event(z).end()}}function x(C,...H){if(e.apply(this,arguments)){var V=this.__zoom,W=Je(C.changedTouches?C.changedTouches[0]:C,this),j=V.invert(W),K=V.k*(C.shiftKey?.5:2),J=n(v(y(V,K),W,j),t.apply(this,H),a);Xt(C),l>0?We(this).transition().duration(l).call(O,J,W,C):We(this).call(b.transform,J,W,C)}}function I(C,...H){if(e.apply(this,arguments)){var V=C.touches,W=V.length,j=L(this,H,C.changedTouches.length===W).event(C),K,J,oe,ge;for(No(C),J=0;J<W;++J)oe=V[J],ge=Je(oe,this),ge=[ge,this.__zoom.invert(ge),oe.identifier],j.touch0?!j.touch1&&j.touch0[2]!==ge[2]&&(j.touch1=ge,j.taps=0):(j.touch0=ge,K=!0,j.taps=1+!!c);c&&(c=clearTimeout(c)),K&&(j.taps<2&&(d=ge[0],c=setTimeout(function(){c=null},h)),qn(this),j.start())}}function E(C,...H){if(this.__zooming){var V=L(this,H).event(C),W=C.changedTouches,j=W.length,K,J,oe,ge;for(Xt(C),K=0;K<j;++K)J=W[K],oe=Je(J,this),V.touch0&&V.touch0[2]===J.identifier?V.touch0[0]=oe:V.touch1&&V.touch1[2]===J.identifier&&(V.touch1[0]=oe);if(J=V.that.__zoom,V.touch1){var B=V.touch0[0],z=V.touch0[1],F=V.touch1[0],q=V.touch1[1],Q=(Q=F[0]-B[0])*Q+(Q=F[1]-B[1])*Q,re=(re=q[0]-z[0])*re+(re=q[1]-z[1])*re;J=y(J,Math.sqrt(Q/re)),oe=[(B[0]+F[0])/2,(B[1]+F[1])/2],ge=[(z[0]+q[0])/2,(z[1]+q[1])/2]}else if(V.touch0)oe=V.touch0[0],ge=V.touch0[1];else return;V.zoom("touch",n(v(J,oe,ge),V.extent,a))}}function G(C,...H){if(this.__zooming){var V=L(this,H).event(C),W=C.changedTouches,j=W.length,K,J;for(No(C),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),K=0;K<j;++K)J=W[K],V.touch0&&V.touch0[2]===J.identifier?delete V.touch0:V.touch1&&V.touch1[2]===J.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(J=Je(J,this),Math.hypot(d[0]-J[0],d[1]-J[1])<m)){var oe=We(this).on("dblclick.zoom");oe&&oe.apply(this,arguments)}}}return b.wheelDelta=function(C){return arguments.length?(i=typeof C=="function"?C:Nn(+C),b):i},b.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Nn(!!C),b):e},b.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:Nn(!!C),b):o},b.extent=function(C){return arguments.length?(t=typeof C=="function"?C:Nn([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),b):t},b.scaleExtent=function(C){return arguments.length?(s[0]=+C[0],s[1]=+C[1],b):[s[0],s[1]]},b.translateExtent=function(C){return arguments.length?(a[0][0]=+C[0][0],a[1][0]=+C[1][0],a[0][1]=+C[0][1],a[1][1]=+C[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(C){return arguments.length?(n=C,b):n},b.duration=function(C){return arguments.length?(l=+C,b):l},b.interpolate=function(C){return arguments.length?(r=C,b):r},b.on=function(){var C=u.on.apply(u,arguments);return C===u?b:C},b.clickDistance=function(C){return arguments.length?(p=(C=+C)*C,b):Math.sqrt(p)},b.tapDistance=function(C){return arguments.length?(m=+C,b):m},b}var ce=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ce||{}),ds=(e=>(e.Partial="partial",e.Full="full",e))(ds||{}),wt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(wt||{}),pt=(e=>(e.Strict="strict",e.Loose="loose",e))(pt||{}),eo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(eo||{}),sn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(sn||{}),Jr=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Jr||{});const bh=["INPUT","SELECT","TEXTAREA"],xh=typeof document<"u"?document:null;function qi(e){var t,n;const i=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,o=typeof i?.hasAttribute=="function"?i.hasAttribute("contenteditable"):!1,s=typeof i?.closest=="function"?i.closest(".nokey"):null;return bh.includes(i?.nodeName)||o||!!s}function Eh(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Fs(e,t,n,i){const o=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(a=>a.trim().toLowerCase());if(o.length===1)return e.toLowerCase()===t.toLowerCase();i||n.add(e.toLowerCase());const s=o.every((a,l)=>n.has(a)&&Array.from(n.values())[l]===o[l]);return i&&n.delete(e.toLowerCase()),s}function Sh(e,t){return n=>{if(!n.code&&!n.key)return!1;const i=kh(n.code,e);return Array.isArray(e)?e.some(o=>Fs(n[i],o,t,n.type==="keyup")):Fs(n[i],e,t,n.type==="keyup")}}function kh(e,t){return t.includes(e)?"code":"key"}function an(e,t){const n=Z(()=>be(t?.target)??xh),i=rn(be(e)===!0);let o=!1;const s=new Set;let a=r(be(e));ve(()=>be(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&l(),a=r(u)},{immediate:!0}),Sr(["blur","contextmenu"],l),Es((...u)=>a(...u),u=>{var c,d;const f=be(t?.actInsideInputWithModifier)??!0,h=be(t?.preventDefault)??!1;if(o=Eh(u),(!o||o&&!f)&&qi(u))return;const p=((d=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:d[0])||u.target,m=p?.nodeName==="BUTTON"||p?.nodeName==="A";!h&&(o||!m)&&u.preventDefault(),i.value=!0},{eventName:"keydown",target:n}),Es((...u)=>a(...u),u=>{const c=be(t?.actInsideInputWithModifier)??!0;if(i.value){if((!o||o&&!c)&&qi(u))return;o=!1,i.value=!1}},{eventName:"keyup",target:n});function l(){o=!1,s.clear(),i.value=be(e)===!0}function r(u){return u===null?(l(),()=>!1):typeof u=="boolean"?(l(),i.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?Sh(u,s):u}return i}const Qr="vue-flow__node-desc",el="vue-flow__edge-desc",Ch="vue-flow__aria-live",tl=["Enter"," ","Escape"],Lt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function to(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function no(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)}function mo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function It(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function nl(e,t){return{x:It(e.x,t[0][0],t[1][0]),y:It(e.y,t[0][1],t[1][1])}}function Hs(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function yt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Mt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!yt(e)}function tn(e){return Mt(e)&&"computedPosition"in e}function $n(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Mh(e){return $n(e.width)&&$n(e.height)&&$n(e.x)&&$n(e.y)}function Nh(e,t,n){const i={id:e.id.toString(),type:e.type??"default",dimensions:zn({width:0,height:0}),computedPosition:zn({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Oe(e.data)?e.data:{},events:zn(Oe(e.events)?e.events:{})};return Object.assign(t??i,e,{id:e.id.toString(),parentNode:n})}function ol(e,t,n){var i,o;const s={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(i=e.sourceHandle)==null?void 0:i.toString(),targetHandle:(o=e.targetHandle)==null?void 0:o.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Oe(e.data)?e.data:{},events:zn(Oe(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??s,e,{id:e.id.toString()})}function il(e,t,n,i){const o=typeof e=="string"?e:e.id,s=new Set,a=i==="source"?"target":"source";for(const l of n)l[a]===o&&s.add(l[i]);return t.filter(l=>s.has(l.id))}function $h(...e){if(e.length===3){const[s,a,l]=e;return il(s,a,l,"target")}const[t,n]=e,i=typeof t=="string"?t:t.id;return n.filter(s=>yt(s)&&s.source===i).map(s=>n.find(a=>Mt(a)&&a.id===s.target))}function Ih(...e){if(e.length===3){const[s,a,l]=e;return il(s,a,l,"source")}const[t,n]=e,i=typeof t=="string"?t:t.id;return n.filter(s=>yt(s)&&s.target===i).map(s=>n.find(a=>Mt(a)&&a.id===s.source))}function sl({source:e,sourceHandle:t,target:n,targetHandle:i}){return`vueflow__edge-${e}${t??""}-${n}${i??""}`}function Th(e,t){return t.some(n=>yt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function mn({x:e,y:t},{x:n,y:i,zoom:o}){return{x:e*o+n,y:t*o+i}}function vn({x:e,y:t},{x:n,y:i,zoom:o},s=!1,a=[1,1]){const l={x:(e-n)/o,y:(t-i)/o};return s?vo(l,a):l}function Dh(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function al({x:e,y:t,width:n,height:i}){return{x:e,y:t,x2:e+n,y2:t+i}}function Oh({x:e,y:t,x2:n,y2:i}){return{x:e,y:t,width:n-e,height:i-t}}function rl(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const i=e[n];t=Dh(t,al({...i.computedPosition,...i.dimensions}))}return Oh(t)}function ll(e,t,n={x:0,y:0,zoom:1},i=!1,o=!1){const s={...vn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const l of e){const{dimensions:r,selectable:u=!0,hidden:c=!1}=l,d=r.width??l.width??null,f=r.height??l.height??null;if(o&&!u||c)continue;const h=no(s,to(l)),g=d===null||f===null,p=i&&h>0,m=(d??0)*(f??0);(g||p||h>=m||l.dragging)&&a.push(l)}return a}function ul(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const i of e)n.add(i.id);return t.filter(i=>n.has(i.source)||n.has(i.target))}function Ot(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return xn(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Ph(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=Ot(e,n),o=Ot(e,t);return{top:i,right:o,bottom:i,left:o,x:o*2,y:i*2}}if(typeof e=="object"){const i=Ot(e.top??e.y??0,n),o=Ot(e.bottom??e.y??0,n),s=Ot(e.left??e.x??0,t),a=Ot(e.right??e.x??0,t);return{top:i,right:a,bottom:o,left:s,x:s+a,y:i+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Rh(e,t,n,i,o,s){const{x:a,y:l}=mn(e,{x:t,y:n,zoom:i}),{x:r,y:u}=mn({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:i}),c=o-r,d=s-u;return{left:Math.floor(a),top:Math.floor(l),right:Math.floor(c),bottom:Math.floor(d)}}function Gs(e,t,n,i,o,s=.1){const a=Ph(s,t,n),l=(t-a.x)/e.width,r=(n-a.y)/e.height,u=Math.min(l,r),c=It(u,i,o),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,g=n/2-f*c,p=Rh(e,h,g,c,t,n),m={left:Math.min(p.left-a.left,0),top:Math.min(p.top-a.top,0),right:Math.min(p.right-a.right,0),bottom:Math.min(p.bottom-a.bottom,0)};return{x:h-m.left+m.right,y:g-m.top+m.bottom,zoom:c}}function Lh(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function cl(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:cl(n,t):!1}function pn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`}function qs(e){const t=e.ctrlKey&&oo()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function Ys(e,t,n){return e<t?It(Math.abs(e-t),1,t)/t:e>n?-It(Math.abs(e-n),1,t)/t:0}function dl(e,t,n=15,i=40){const o=Ys(e.x,i,t.width-i)*n,s=Ys(e.y,i,t.height-i)*n;return[o,s]}function $o(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,i=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||i>0||e.position.x<0||e.position.y<0){let o={};if(typeof t.style=="function"?o={...t.style(t)}:t.style&&(o={...t.style}),o.width=o.width??`${t.dimensions.width}px`,o.height=o.height??`${t.dimensions.height}px`,n>0)if(typeof o.width=="string"){const s=Number(o.width.replace("px",""));o.width=`${s+n}px`}else o.width+=n;if(i>0)if(typeof o.height=="string"){const s=Number(o.height.replace("px",""));o.height=`${s+i}px`}else o.height+=i;if(e.position.x<0){const s=Math.abs(e.position.x);if(t.position.x=t.position.x-s,typeof o.width=="string"){const a=Number(o.width.replace("px",""));o.width=`${a+s}px`}else o.width+=s;e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);if(t.position.y=t.position.y-s,typeof o.height=="string"){const a=Number(o.height.replace("px",""));o.height=`${a+s}px`}else o.height+=s;e.position.y=0}t.dimensions.width=Number(o.width.toString().replace("px","")),t.dimensions.height=Number(o.height.toString().replace("px","")),typeof t.style=="function"?t.style=s=>{const a=t.style;return{...a(s),...o}}:t.style={...t.style,...o}}}}function Ws(e,t){var n,i;const o=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of o)if(a.type==="add")t.findIndex(r=>r.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const l=t.findIndex(r=>r.id===a.id);l!==-1&&t.splice(l,1)}const s=t.map(a=>a.id);for(const a of t)for(const l of e)if(l.id===a.id)switch(l.type){case"select":a.selected=l.selected;break;case"position":if(tn(a)&&(typeof l.position<"u"&&(a.position=l.position),typeof l.dragging<"u"&&(a.dragging=l.dragging),a.expandParent&&a.parentNode)){const r=t[s.indexOf(a.parentNode)];r&&tn(r)&&$o(a,r)}break;case"dimensions":if(tn(a)&&(typeof l.dimensions<"u"&&(a.dimensions=l.dimensions),typeof l.updateStyle<"u"&&l.updateStyle&&(a.style={...a.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(i=l.dimensions)==null?void 0:i.height}px`}),typeof l.resizing<"u"&&(a.resizing=l.resizing),a.expandParent&&a.parentNode)){const r=t[s.indexOf(a.parentNode)];r&&tn(r)&&(!!r.dimensions.width&&!!r.dimensions.height?$o(a,r):nt(()=>{$o(a,r)}))}break}return t}function ht(e,t){return{id:e,type:"select",selected:t}}function Us(e){return{item:e,type:"add"}}function js(e){return{id:e,type:"remove"}}function Xs(e,t,n,i,o){return{id:e,source:t,target:n,sourceHandle:i||null,targetHandle:o||null,type:"remove"}}function gt(e,t=new Set,n=!1){const i=[];for(const[o,s]of e){const a=t.has(o);!(s.selected===void 0&&!a)&&s.selected!==a&&(n&&(s.selected=a),i.push(ht(s.id,a)))}return i}const Zs=()=>{};function te(e){const t=new Set;let n=Zs,i=()=>!1;const o=()=>t.size>0||i(),s=f=>{n=f},a=()=>{n=Zs},l=f=>{i=f},r=()=>{i=()=>!1},u=f=>{t.delete(f)};return{on:f=>{t.add(f);const h=()=>u(f);return cn(h),{off:h}},off:u,trigger:f=>{const h=[n];return o()?h.push(...t):e&&h.push(e),Promise.allSettled(h.map(g=>g(f)))},hasListeners:o,listeners:t,setEmitter:s,removeEmitter:a,setHasEmitListeners:l,removeHasEmitListeners:r}}function Ks(e,t,n){let i=e;do{if(i&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Ah(e,t,n,i){var o,s;const a=new Map;for(const[l,r]of e)(r.selected||r.id===i)&&(!r.parentNode||!cl(r,e))&&(r.draggable||t&&typeof r.draggable>"u")&&e.get(l)&&a.set(l,{id:r.id,position:r.position||{x:0,y:0},distance:{x:n.x-((o=r.computedPosition)==null?void 0:o.x)||0,y:n.y-((s=r.computedPosition)==null?void 0:s.y)||0},from:{x:r.computedPosition.x,y:r.computedPosition.y},extent:r.extent,parentNode:r.parentNode,dimensions:{...r.dimensions},expandParent:r.expandParent});return Array.from(a.values())}function Io({id:e,dragItems:t,findNode:n}){const i=[];for(const o of t){const s=n(o.id);s&&i.push(s)}return[e?i.find(o=>o.id===e):i[0],i]}function fl(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function zh(e,t,n){const[i,o,s,a]=typeof e!="string"?fl(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+i],[n.computedPosition.x+n.dimensions.width-o,n.computedPosition.y+n.dimensions.height-s]]:!1}function Vh(e,t,n,i){let o=e.extent||n;if((o==="parent"||!Array.isArray(o)&&o?.range==="parent")&&!e.expandParent)if(e.parentNode&&i&&e.dimensions.width&&e.dimensions.height){const s=zh(o,e,i);s&&(o=s)}else t(new Ae(Pe.NODE_EXTENT_INVALID,e.id)),o=n;else if(Array.isArray(o)){const s=i?.computedPosition.x||0,a=i?.computedPosition.y||0;o=[[o[0][0]+s,o[0][1]+a],[o[1][0]+s,o[1][1]+a]]}else if(o!=="parent"&&o?.range&&Array.isArray(o.range)){const[s,a,l,r]=fl(o.padding),u=i?.computedPosition.x||0,c=i?.computedPosition.y||0;o=[[o.range[0][0]+u+r,o.range[0][1]+c+s],[o.range[1][0]+u-a,o.range[1][1]+c-l]]}return o==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:o}function Bh({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function fs(e,t,n,i,o){const s=Bh(e.dimensions,Vh(e,n,i,o)),a=nl(t,s);return{position:{x:a.x-(o?.computedPosition.x||0),y:a.y-(o?.computedPosition.y||0)},computedPosition:a}}function Ht(e,t,n=ce.Left,i=!1){const o=(t?.x??0)+e.computedPosition.x,s=(t?.y??0)+e.computedPosition.y,{width:a,height:l}=t??qh(e);if(i)return{x:o+a/2,y:s+l/2};switch(t?.position??n){case ce.Top:return{x:o+a/2,y:s};case ce.Right:return{x:o+a,y:s+l/2};case ce.Bottom:return{x:o+a/2,y:s+l};case ce.Left:return{x:o,y:s+l/2}}}function Js(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Fh({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:o,targetHeight:s,width:a,height:l,viewport:r}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+i,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=al({x:(0-r.x)/r.zoom,y:(0-r.y)/r.zoom,width:a/r.zoom,height:l/r.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function Hh(e,t,n=!1){const i=typeof e.zIndex=="number";let o=i?e.zIndex:0;const s=t(e.source),a=t(e.target);return!s||!a?0:(n&&(o=i?e.zIndex:Math.max(s.computedPosition.z||0,a.computedPosition.z||0)),o)}var Pe=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Pe||{});const Qs={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Ae extends Error{constructor(t,...n){var i;super((i=Qs[t])==null?void 0:i.call(Qs,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function hs(e){return"clientX"in e}function Gh(e){return"sourceEvent"in e}function et(e,t){const n=hs(e);let i,o;return n?(i=e.clientX,o=e.clientY):"touches"in e&&e.touches.length>0?(i=e.touches[0].clientX,o=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(i=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY):(i=0,o=0),{x:i-(t?.left??0),y:o-(t?.top??0)}}const oo=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function qh(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function vo(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const Yh=()=>!0;function To(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Wh(e,t,n){const i=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())no(o,to(s))>0&&i.push(s);return i}const Uh=250;function jh(e,t,n,i){var o,s;let a=[],l=Number.POSITIVE_INFINITY;const r=Wh(e,n,t+Uh);for(const u of r){const c=[...((o=u.handleBounds)==null?void 0:o.source)??[],...((s=u.handleBounds)==null?void 0:s.target)??[]];for(const d of c){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:f,y:h}=Ht(u,d,d.position,!0),g=Math.sqrt((f-e.x)**2+(h-e.y)**2);g>t||(g<l?(a=[{...d,x:f,y:h}],l=g):g===l&&a.push({...d,x:f,y:h}))}}if(!a.length)return null;if(a.length>1){const u=i.type==="source"?"target":"source";return a.find(c=>c.type===u)??a[0]}return a[0]}function ea(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:s,doc:a,lib:l,flowId:r,isValidConnection:u=Yh},c,d,f,h){const g=s==="target",p=t?a.querySelector(`.${l}-flow__handle[data-id="${r}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:m,y:b}=et(e),y=a.elementFromPoint(m,b),v=y?.classList.contains(`${l}-flow__handle`)?y:p,w={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const O=hl(void 0,v),L=v.getAttribute("data-nodeid"),A=v.getAttribute("data-handleid"),_=v.classList.contains("connectable"),k=v.classList.contains("connectableend");if(!L||!O)return w;const x={source:g?L:i,sourceHandle:g?A:o,target:g?i:L,targetHandle:g?o:A};w.connection=x;const E=_&&k&&(n===pt.Strict?g&&O==="source"||!g&&O==="target":L!==i||A!==o);w.isValid=E&&u(x,{nodes:d,edges:c,sourceNode:f(x.source),targetNode:f(x.target)}),w.toHandle=gl(L,O,A,h,n,!0)}return w}function hl(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Xh(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Zh(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function gl(e,t,n,i,o,s=!1){var a,l,r;const u=i.get(e);if(!u)return null;const c=o===pt.Strict?(a=u.handleBounds)==null?void 0:a[t]:[...((l=u.handleBounds)==null?void 0:l.source)??[],...((r=u.handleBounds)==null?void 0:r.target)??[]],d=(n?c?.find(f=>f.id===n):c?.[0])??null;return d&&s?{...d,...Ht(u,d,d.position,!0)}:d}const Yi={[ce.Left]:ce.Right,[ce.Right]:ce.Left,[ce.Top]:ce.Bottom,[ce.Bottom]:ce.Top},Kh=["production","prod"];function xn(e,...t){ml()&&console.warn(`[Vue Flow]: ${e}`,...t)}function ml(){return!Kh.includes("production")}function ta(e,t,n,i,o){const s=t.querySelectorAll(`.vue-flow__handle.${e}`);return s?.length?Array.from(s).map(a=>{const l=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:o,position:a.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...mo(a)}}):null}function Wi(e,t,n,i,o,s=!1,a){o.value=!1,e.selected?(s||e.selected&&t)&&(i([e]),nt(()=>{a.blur()})):n([e])}function Oe(e){return typeof R(e)<"u"}function Jh(e,t,n,i){if(!e||!e.source||!e.target)return n(new Ae(Pe.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let o;return yt(e)?o=e:o={...e,id:sl(e)},o=ol(o,void 0,i),Th(o,t)?!1:o}function Qh(e,t,n,i,o){if(!t.source||!t.target)return o(new Ae(Pe.EDGE_INVALID,e.id)),!1;if(!n)return o(new Ae(Pe.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...a}=e;return{...a,id:i?sl(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function na(e,t,n){const i={},o=[];for(let s=0;s<e.length;++s){const a=e[s];if(!Mt(a)){n(new Ae(Pe.NODE_INVALID,a?.id)||`[ID UNKNOWN|INDEX ${s}]`);continue}const l=Nh(a,t(a.id),a.parentNode);a.parentNode&&(i[a.parentNode]=!0),o[s]=l}for(const s of o){const a=t(s.parentNode)||o.find(l=>l.id===s.parentNode);s.parentNode&&!a&&n(new Ae(Pe.NODE_MISSING_PARENT,s.id,s.parentNode)),(s.parentNode||i[s.id])&&(i[s.id]&&(s.isParent=!0),a&&(a.isParent=!0))}return o}function oa(e,t,n,i,o,s){let a=o;const l=i.get(a)||new Map;i.set(a,l.set(n,t)),a=`${o}-${e}`;const r=i.get(a)||new Map;if(i.set(a,r.set(n,t)),s){a=`${o}-${e}-${s}`;const u=i.get(a)||new Map;i.set(a,u.set(n,t))}}function Do(e,t,n){e.clear();for(const i of n){const{source:o,target:s,sourceHandle:a=null,targetHandle:l=null}=i,r={edgeId:i.id,source:o,target:s,sourceHandle:a,targetHandle:l},u=`${o}-${a}--${s}-${l}`,c=`${s}-${l}--${o}-${a}`;oa("source",r,c,e,o,a),oa("target",r,u,e,s,l)}}function ia(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Oo(e,t,n,i,o,s,a,l){const r=[];for(const u of e){const c=yt(u)?u:Jh(u,l,o,s);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){o(new Ae(Pe.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){o(new Ae(Pe.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){o(new Ae(Pe.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:l,nodes:a,sourceNode:d,targetNode:f})){o(new Ae(Pe.EDGE_INVALID,c.id));continue}const h=i(c.id);r.push({...ol(c,h,s),sourceNode:d,targetNode:f})}return r}const sa=Symbol("vueFlow"),vl=Symbol("nodeId"),pl=Symbol("nodeRef"),eg=Symbol("edgeId"),tg=Symbol("edgeRef"),po=Symbol("slots");function yl(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:i,noDragClassName:o,nodeLookup:s,nodeExtent:a,nodeDragThreshold:l,viewport:r,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:g,nodesSelectionActive:p,selectNodesOnDrag:m,removeSelectedElements:b,addSelectedNodes:y,updateNodePositions:v,emits:w}=Ie(),{onStart:O,onDrag:L,onStop:A,onClick:_,el:k,disabled:x,id:I,selectable:E,dragHandle:G}=e,C=rn(!1);let H=[],V,W=null,j={x:void 0,y:void 0},K={x:0,y:0},J=null,oe=!1,ge=!1,B=0,z=!1;const F=ig(),q=({x:fe,y:me})=>{j={x:fe,y:me};let $=!1;if(H=H.map(N=>{const P={x:fe-N.distance.x,y:me-N.distance.y},{computedPosition:T}=fs(N,n.value?vo(P,i.value):P,w.error,a.value,N.parentNode?h(N.parentNode):void 0);return $=$||N.position.x!==T.x||N.position.y!==T.y,N.position=T,N}),ge=ge||$,!!$&&(v(H,!0,!0),C.value=!0,J)){const[N,P]=Io({id:I,dragItems:H,findNode:h});L({event:J,node:N,nodes:P})}},Q=()=>{if(!W)return;const[fe,me]=dl(K,W,c.value);if(fe!==0||me!==0){const $={x:(j.x??0)-fe/r.value.zoom,y:(j.y??0)-me/r.value.zoom};f({x:fe,y:me})&&q($)}B=requestAnimationFrame(Q)},re=(fe,me)=>{oe=!0;const $=h(I);!m.value&&!g.value&&$&&($.selected||b()),$&&be(E)&&m.value&&Wi($,g.value,y,b,p,!1,me);const N=F(fe.sourceEvent);if(j=N,H=Ah(s.value,d.value,N,I),H.length){const[P,T]=Io({id:I,dragItems:H,findNode:h});O({event:fe.sourceEvent,node:P,nodes:T})}},le=(fe,me)=>{var $;fe.sourceEvent.type==="touchmove"&&fe.sourceEvent.touches.length>1||(ge=!1,l.value===0&&re(fe,me),j=F(fe.sourceEvent),W=(($=t.value)==null?void 0:$.getBoundingClientRect())||null,K=et(fe.sourceEvent,W))},_e=(fe,me)=>{const $=F(fe.sourceEvent);if(!z&&oe&&u.value&&(z=!0,Q()),!oe){const N=$.xSnapped-(j.x??0),P=$.ySnapped-(j.y??0);Math.sqrt(N*N+P*P)>l.value&&re(fe,me)}(j.x!==$.xSnapped||j.y!==$.ySnapped)&&H.length&&oe&&(J=fe.sourceEvent,K=et(fe.sourceEvent,W),q($))},Se=fe=>{let me=!1;if(!oe&&!C.value&&!g.value){const $=fe.sourceEvent,N=F($),P=N.xSnapped-(j.x??0),T=N.ySnapped-(j.y??0),Y=Math.sqrt(P*P+T*T);Y!==0&&Y<=l.value&&(_?.($),me=!0)}if(H.length&&!me){ge&&(v(H,!1,!1),ge=!1);const[$,N]=Io({id:I,dragItems:H,findNode:h});A({event:fe.sourceEvent,node:$,nodes:N})}H=[],C.value=!1,z=!1,oe=!1,j={x:void 0,y:void 0},cancelAnimationFrame(B)};return ve([()=>be(x),k],([fe,me],$,N)=>{if(me){const P=We(me);fe||(V=Cd().on("start",T=>le(T,me)).on("drag",T=>_e(T,me)).on("end",T=>Se(T)).filter(T=>{const Y=T.target,ie=be(G);return!T.button&&(!o.value||!Ks(Y,`.${o.value}`,me)&&(!ie||Ks(Y,ie,me)))}),P.call(V)),N(()=>{P.on(".drag",null),V&&(V.on("start",null),V.on("drag",null),V.on("end",null))})}}),C}function ng(){return{doubleClick:te(),click:te(),mouseEnter:te(),mouseMove:te(),mouseLeave:te(),contextMenu:te(),updateStart:te(),update:te(),updateEnd:te()}}function og(e,t){const n=ng();return n.doubleClick.on(i=>{var o,s;t.edgeDoubleClick(i),(s=(o=e.events)==null?void 0:o.doubleClick)==null||s.call(o,i)}),n.click.on(i=>{var o,s;t.edgeClick(i),(s=(o=e.events)==null?void 0:o.click)==null||s.call(o,i)}),n.mouseEnter.on(i=>{var o,s;t.edgeMouseEnter(i),(s=(o=e.events)==null?void 0:o.mouseEnter)==null||s.call(o,i)}),n.mouseMove.on(i=>{var o,s;t.edgeMouseMove(i),(s=(o=e.events)==null?void 0:o.mouseMove)==null||s.call(o,i)}),n.mouseLeave.on(i=>{var o,s;t.edgeMouseLeave(i),(s=(o=e.events)==null?void 0:o.mouseLeave)==null||s.call(o,i)}),n.contextMenu.on(i=>{var o,s;t.edgeContextMenu(i),(s=(o=e.events)==null?void 0:o.contextMenu)==null||s.call(o,i)}),n.updateStart.on(i=>{var o,s;t.edgeUpdateStart(i),(s=(o=e.events)==null?void 0:o.updateStart)==null||s.call(o,i)}),n.update.on(i=>{var o,s;t.edgeUpdate(i),(s=(o=e.events)==null?void 0:o.update)==null||s.call(o,i)}),n.updateEnd.on(i=>{var o,s;t.edgeUpdateEnd(i),(s=(o=e.events)==null?void 0:o.updateEnd)==null||s.call(o,i)}),Object.entries(n).reduce((i,[o,s])=>(i.emit[o]=s.trigger,i.on[o]=s.on,i),{emit:{},on:{}})}function ig(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:i}=Ie();return o=>{var s;const a=((s=i.value)==null?void 0:s.getBoundingClientRect())??{left:0,top:0},l=Gh(o)?o.sourceEvent:o,{x:r,y:u}=et(l,a),c=vn({x:r,y:u},e.value),{x:d,y:f}=n.value?vo(c,t.value):c;return{xSnapped:d,ySnapped:f,...c}}}function In(){return!0}function _l({handleId:e,nodeId:t,type:n,isValidConnection:i,edgeUpdaterType:o,onEdgeUpdate:s,onEdgeUpdateEnd:a}){const{id:l,vueFlowRef:r,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:g,autoPanSpeed:p,findNode:m,panBy:b,startConnection:y,updateConnection:v,endConnection:w,emits:O,viewport:L,edges:A,nodes:_,isValidConnection:k,nodeLookup:x}=Ie();let I=null,E=!1,G=null;function C(V){var W;const j=be(n)==="target",K=hs(V),J=Hs(V.target),oe=V.currentTarget;if(oe&&(K&&V.button===0||!K)){let ge=function(he){$=et(he,Se),q=jh(vn($,L.value,!1,[1,1]),c.value,x.value,T),N||(P(),N=!0);const we=ea(he,{handle:q,connectionMode:u.value,fromNodeId:be(t),fromHandleId:be(e),fromType:j?"target":"source",isValidConnection:F,doc:J,lib:"vue",flowId:l,nodeLookup:x.value},A.value,_.value,m,x.value);G=we.handleDomNode,I=we.connection,E=Zh(!!q,we.isValid);const xe={...ae,isValid:E,to:we.toHandle&&E?mn({x:we.toHandle.x,y:we.toHandle.y},L.value):$,toHandle:we.toHandle,toPosition:E&&we.toHandle?we.toHandle.position:Yi[T.position],toNode:we.toHandle?x.value.get(we.toHandle.nodeId):null};if(E&&q&&ae?.toHandle&&xe.toHandle&&ae.toHandle.type===xe.toHandle.type&&ae.toHandle.nodeId===xe.toHandle.nodeId&&ae.toHandle.id===xe.toHandle.id&&ae.to.x===xe.to.x&&ae.to.y===xe.to.y)return;const Me=q??we.toHandle;if(v(Me&&E?mn({x:Me.x,y:Me.y},L.value):$,we.toHandle,Xh(!!Me,E)),ae=xe,!q&&!E&&!G)return To(me);I&&I.source!==I.target&&G&&(To(me),me=G,G.classList.add("connecting","vue-flow__handle-connecting"),G.classList.toggle("valid",!!E),G.classList.toggle("vue-flow__handle-valid",!!E))},B=function(he){"touches"in he&&he.touches.length>0||((q||G)&&I&&E&&(s?s(he,I):O.connect(I)),O.connectEnd(he),o&&a?.(he),To(me),cancelAnimationFrame(Q),w(he),N=!1,E=!1,I=null,G=null,J.removeEventListener("mousemove",ge),J.removeEventListener("mouseup",B),J.removeEventListener("touchmove",ge),J.removeEventListener("touchend",B))};const z=m(be(t));let F=be(i)||k.value||In;!F&&z&&(F=(j?z.isValidSourcePos:z.isValidTargetPos)||In);let q,Q=0;const{x:re,y:le}=et(V),_e=hl(be(o),oe),Se=(W=r.value)==null?void 0:W.getBoundingClientRect();if(!Se||!_e)return;const fe=gl(be(t),_e,be(e),x.value,u.value);if(!fe)return;let me,$=et(V,Se),N=!1;const P=()=>{if(!g.value)return;const[he,we]=dl($,Se,p.value);b({x:he,y:we}),Q=requestAnimationFrame(P)},T={...fe,nodeId:be(t),type:_e,position:fe.position},Y=x.value.get(be(t)),se={inProgress:!0,isValid:null,from:Ht(Y,T,ce.Left,!0),fromHandle:T,fromPosition:T.position,fromNode:Y,to:$,toHandle:null,toPosition:Yi[T.position],toNode:null};y({nodeId:be(t),id:be(e),type:_e,position:oe?.getAttribute("data-handlepos")||ce.Top,...$},{x:re-Se.left,y:le-Se.top}),O.connectStart({event:V,nodeId:be(t),handleId:be(e),handleType:_e});let ae=se;J.addEventListener("mousemove",ge),J.addEventListener("mouseup",B),J.addEventListener("touchmove",ge),J.addEventListener("touchend",B)}}function H(V){var W,j;if(!d.value)return;const K=be(n)==="target";if(!f.value){O.clickConnectStart({event:V,nodeId:be(t),handleId:be(e)}),y({nodeId:be(t),type:be(n),id:be(e),position:ce.Top,...et(V)},void 0,!0);return}let J=be(i)||k.value||In;const oe=m(be(t));if(!J&&oe&&(J=(K?oe.isValidSourcePos:oe.isValidTargetPos)||In),oe&&(typeof oe.connectable>"u"?h.value:oe.connectable)===!1)return;const ge=Hs(V.target),B=ea(V,{handle:{nodeId:be(t),id:be(e),type:be(n),position:ce.Top,...et(V)},connectionMode:u.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:J,doc:ge,lib:"vue",flowId:l,nodeLookup:x.value},A.value,_.value,m,x.value),z=((W=B.connection)==null?void 0:W.source)===((j=B.connection)==null?void 0:j.target);B.isValid&&B.connection&&!z&&O.connect(B.connection),O.clickConnectEnd(V),w(V,!0)}return{handlePointerDown:C,handleClick:H}}function sg(){return Gt(vl,"")}function wl(e){const t=e??sg()??"",n=Gt(pl,X(null)),{findNode:i,edges:o,emits:s}=Ie(),a=i(t);return a||s.error(new Ae(Pe.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:Z(()=>i(a.parentNode)),connectedEdges:Z(()=>ul([a],o.value))}}function ag(){return{doubleClick:te(),click:te(),mouseEnter:te(),mouseMove:te(),mouseLeave:te(),contextMenu:te(),dragStart:te(),drag:te(),dragStop:te()}}function rg(e,t){const n=ag();return n.doubleClick.on(i=>{var o,s;t.nodeDoubleClick(i),(s=(o=e.events)==null?void 0:o.doubleClick)==null||s.call(o,i)}),n.click.on(i=>{var o,s;t.nodeClick(i),(s=(o=e.events)==null?void 0:o.click)==null||s.call(o,i)}),n.mouseEnter.on(i=>{var o,s;t.nodeMouseEnter(i),(s=(o=e.events)==null?void 0:o.mouseEnter)==null||s.call(o,i)}),n.mouseMove.on(i=>{var o,s;t.nodeMouseMove(i),(s=(o=e.events)==null?void 0:o.mouseMove)==null||s.call(o,i)}),n.mouseLeave.on(i=>{var o,s;t.nodeMouseLeave(i),(s=(o=e.events)==null?void 0:o.mouseLeave)==null||s.call(o,i)}),n.contextMenu.on(i=>{var o,s;t.nodeContextMenu(i),(s=(o=e.events)==null?void 0:o.contextMenu)==null||s.call(o,i)}),n.dragStart.on(i=>{var o,s;t.nodeDragStart(i),(s=(o=e.events)==null?void 0:o.dragStart)==null||s.call(o,i)}),n.drag.on(i=>{var o,s;t.nodeDrag(i),(s=(o=e.events)==null?void 0:o.drag)==null||s.call(o,i)}),n.dragStop.on(i=>{var o,s;t.nodeDragStop(i),(s=(o=e.events)==null?void 0:o.dragStop)==null||s.call(o,i)}),Object.entries(n).reduce((i,[o,s])=>(i.emit[o]=s.trigger,i.on[o]=s.on,i),{emit:{},on:{}})}function bl(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:i,snapGrid:o,snapToGrid:s,nodesDraggable:a,emits:l}=Ie();return(r,u=!1)=>{const c=s.value?o.value[0]:5,d=s.value?o.value[1]:5,f=u?4:1,h=r.x*c*f,g=r.y*d*f,p=[];for(const m of e.value)if(m.draggable||a&&typeof m.draggable>"u"){const b={x:m.computedPosition.x+h,y:m.computedPosition.y+g},{computedPosition:y}=fs(m,b,l.error,t.value,m.parentNode?i(m.parentNode):void 0);p.push({id:m.id,position:y,from:m.position,distance:{x:r.x,y:r.y},dimensions:m.dimensions})}n(p,!0,!1)}}const Tn=.1,lg=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function ct(){return xn("Viewport not initialized yet."),Promise.resolve(!1)}const ug={zoomIn:ct,zoomOut:ct,zoomTo:ct,fitView:ct,setCenter:ct,fitBounds:ct,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:ct,setTransform:ct,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function cg(e){function t(i,o){return new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(o?.interpolate==="linear"?on:Fn).scaleBy(Po(e.d3Selection,o?.duration,o?.ease,()=>{s(!0)}),i):s(!1)})}function n(i,o,s,a){return new Promise(l=>{var r;const{x:u,y:c}=nl({x:-i,y:-o},e.translateExtent),d=Ft.translate(-u,-c).scale(s);e.d3Selection&&e.d3Zoom?(r=e.d3Zoom)==null||r.interpolate(a?.interpolate==="linear"?on:Fn).transform(Po(e.d3Selection,a?.duration,a?.ease,()=>{l(!0)}),d):l(!1)})}return Z(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:o=>t(1.2,o),zoomOut:o=>t(1/1.2,o),zoomTo:(o,s)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(s?.interpolate==="linear"?on:Fn).scaleTo(Po(e.d3Selection,s?.duration,s?.ease,()=>{a(!0)}),o):a(!1)}),setViewport:(o,s)=>n(o.x,o.y,o.zoom,s),setTransform:(o,s)=>n(o.x,o.y,o.zoom,s),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(o={padding:Tn,includeHiddenNodes:!1,duration:0})=>{var s,a;const l=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&(o?.includeHiddenNodes||!f.hidden)&&(!((s=o.nodes)!=null&&s.length)||(a=o.nodes)!=null&&a.length&&o.nodes.includes(f.id))&&l.push(f);if(!l.length)return Promise.resolve(!1);const r=rl(l),{x:u,y:c,zoom:d}=Gs(r,e.dimensions.width,e.dimensions.height,o.minZoom??e.minZoom,o.maxZoom??e.maxZoom,o.padding??Tn);return n(u,c,d,o)},setCenter:(o,s,a)=>{const l=typeof a?.zoom<"u"?a.zoom:e.maxZoom,r=e.dimensions.width/2-o*l,u=e.dimensions.height/2-s*l;return n(r,u,l,a)},fitBounds:(o,s={padding:Tn})=>{const{x:a,y:l,zoom:r}=Gs(o,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,s.padding??Tn);return n(a,l,r,s)},project:o=>vn(o,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:o=>{if(e.vueFlowRef){const{x:s,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:o.x-s,y:o.y-a};return vn(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:o=>{if(e.vueFlowRef){const{x:s,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:o.x+s,y:o.y+a};return mn(l,e.viewport)}return{x:0,y:0}}}:ug)}function Po(e,t=0,n=lg,i=()=>{}){const o=typeof t=="number"&&t>0;return o||i(),o?e.transition().duration(t).ease(n).on("end",i):e}function dg(e,t,n){const i=mr(!0);return i.run(()=>{const o=()=>{i.run(()=>{let p,m,b=!!(n.nodes.value.length||n.edges.value.length);p=Dt([e.modelValue,()=>{var y,v;return(v=(y=e.modelValue)==null?void 0:y.value)==null?void 0:v.length}],([y])=>{y&&Array.isArray(y)&&(m?.pause(),n.setElements(y),!m&&!b&&y.length?b=!0:m?.resume())}),m=Dt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([y,v])=>{var w;(w=e.modelValue)!=null&&w.value&&Array.isArray(e.modelValue.value)&&(p?.pause(),e.modelValue.value=[...y,...v],nt(()=>{p?.resume()}))},{immediate:b}),An(()=>{p?.stop(),m?.stop()})})},s=()=>{i.run(()=>{let p,m,b=!!n.nodes.value.length;p=Dt([e.nodes,()=>{var y,v;return(v=(y=e.nodes)==null?void 0:y.value)==null?void 0:v.length}],([y])=>{y&&Array.isArray(y)&&(m?.pause(),n.setNodes(y),!m&&!b&&y.length?b=!0:m?.resume())}),m=Dt([n.nodes,()=>n.nodes.value.length],([y])=>{var v;(v=e.nodes)!=null&&v.value&&Array.isArray(e.nodes.value)&&(p?.pause(),e.nodes.value=[...y],nt(()=>{p?.resume()}))},{immediate:b}),An(()=>{p?.stop(),m?.stop()})})},a=()=>{i.run(()=>{let p,m,b=!!n.edges.value.length;p=Dt([e.edges,()=>{var y,v;return(v=(y=e.edges)==null?void 0:y.value)==null?void 0:v.length}],([y])=>{y&&Array.isArray(y)&&(m?.pause(),n.setEdges(y),!m&&!b&&y.length?b=!0:m?.resume())}),m=Dt([n.edges,()=>n.edges.value.length],([y])=>{var v;(v=e.edges)!=null&&v.value&&Array.isArray(e.edges.value)&&(p?.pause(),e.edges.value=[...y],nt(()=>{p?.resume()}))},{immediate:b}),An(()=>{p?.stop(),m?.stop()})})},l=()=>{i.run(()=>{ve(()=>t.maxZoom,()=>{t.maxZoom&&Oe(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},r=()=>{i.run(()=>{ve(()=>t.minZoom,()=>{t.minZoom&&Oe(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{i.run(()=>{ve(()=>t.translateExtent,()=>{t.translateExtent&&Oe(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{i.run(()=>{ve(()=>t.nodeExtent,()=>{t.nodeExtent&&Oe(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{i.run(()=>{ve(()=>t.applyDefault,()=>{Oe(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{i.run(()=>{const p=async m=>{let b=m;typeof t.autoConnect=="function"&&(b=await t.autoConnect(m)),b!==!1&&n.addEdges([b])};ve(()=>t.autoConnect,()=>{Oe(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),ve(n.autoConnect,(m,b,y)=>{m?n.onConnect(p):n.hooks.value.connect.off(p),y(()=>{n.hooks.value.connect.off(p)})},{immediate:!0})})},h=()=>{const p=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const m of Object.keys(t)){const b=m;if(!p.includes(b)){const y=Te(()=>t[b]),v=n[b];Qi(v)&&i.run(()=>{ve(y,w=>{Oe(w)&&(v.value=w)},{immediate:!0})})}}};(()=>{o(),s(),a(),r(),l(),u(),c(),d(),f(),h()})()}),()=>i.stop()}function fg(){return{edgesChange:te(),nodesChange:te(),nodeDoubleClick:te(),nodeClick:te(),nodeMouseEnter:te(),nodeMouseMove:te(),nodeMouseLeave:te(),nodeContextMenu:te(),nodeDragStart:te(),nodeDrag:te(),nodeDragStop:te(),nodesInitialized:te(),miniMapNodeClick:te(),miniMapNodeDoubleClick:te(),miniMapNodeMouseEnter:te(),miniMapNodeMouseMove:te(),miniMapNodeMouseLeave:te(),connect:te(),connectStart:te(),connectEnd:te(),clickConnectStart:te(),clickConnectEnd:te(),paneReady:te(),init:te(),move:te(),moveStart:te(),moveEnd:te(),selectionDragStart:te(),selectionDrag:te(),selectionDragStop:te(),selectionContextMenu:te(),selectionStart:te(),selectionEnd:te(),viewportChangeStart:te(),viewportChange:te(),viewportChangeEnd:te(),paneScroll:te(),paneClick:te(),paneContextMenu:te(),paneMouseEnter:te(),paneMouseMove:te(),paneMouseLeave:te(),edgeContextMenu:te(),edgeMouseEnter:te(),edgeMouseMove:te(),edgeMouseLeave:te(),edgeDoubleClick:te(),edgeClick:te(),edgeUpdateStart:te(),edgeUpdate:te(),edgeUpdateEnd:te(),updateNodeInternals:te(),error:te(e=>xn(e.message))}}function hg(e,t){const n=qt();Zl(()=>{for(const[o,s]of Object.entries(t.value)){const a=l=>{e(o,l)};s.setEmitter(a),cn(s.removeEmitter),s.setHasEmitListeners(()=>i(o)),cn(s.removeHasEmitListeners)}});function i(o){var s;const a=gg(o);return!!((s=n?.vnode.props)==null?void 0:s[a])}}function gg(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(o,s)=>s.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function xl(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:ds.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:sn.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:wt.Bezier,style:{}},connectionMode:pt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:oo()?"Meta":"Control",zoomActivationKeyCode:oo()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:fg(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const mg=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function vg(e,t,n){const i=cg(e),o=$=>{const N=$??[];e.hooks.updateNodeInternals.trigger(N)},s=$=>Ih($,e.nodes,e.edges),a=$=>$h($,e.nodes,e.edges),l=$=>ul($,e.edges),r=({id:$,type:N,nodeId:P})=>{var T;const Y=$?`-${N}-${$}`:`-${N}`;return Array.from(((T=e.connectionLookup.get(`${P}${Y}`))==null?void 0:T.values())??[])},u=$=>{if($)return t.value.get($)},c=$=>{if($)return n.value.get($)},d=($,N,P)=>{var T,Y;const ie=[];for(const se of $){const ae={id:se.id,type:"position",dragging:P,from:se.from};if(N&&(ae.position=se.position,se.parentNode)){const he=u(se.parentNode);ae.position={x:ae.position.x-(((T=he?.computedPosition)==null?void 0:T.x)??0),y:ae.position.y-(((Y=he?.computedPosition)==null?void 0:Y.y)??0)}}ie.push(ae)}ie?.length&&e.hooks.nodesChange.trigger(ie)},f=$=>{if(!e.vueFlowRef)return;const N=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!N)return;const P=window.getComputedStyle(N),{m22:T}=new window.DOMMatrixReadOnly(P.transform),Y=[];for(const ie of $){const se=ie,ae=u(se.id);if(ae){const he=mo(se.nodeElement);if(!!(he.width&&he.height&&(ae.dimensions.width!==he.width||ae.dimensions.height!==he.height||se.forceUpdate))){const xe=se.nodeElement.getBoundingClientRect();ae.dimensions=he,ae.handleBounds.source=ta("source",se.nodeElement,xe,T,ae.id),ae.handleBounds.target=ta("target",se.nodeElement,xe,T,ae.id),Y.push({id:ae.id,type:"dimensions",dimensions:he})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&i.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),Y.length&&e.hooks.nodesChange.trigger(Y)},h=($,N)=>{const P=new Set,T=new Set;for(const se of $)Mt(se)?P.add(se.id):yt(se)&&T.add(se.id);const Y=gt(t.value,P,!0),ie=gt(n.value,T);if(e.multiSelectionActive){for(const se of P)Y.push(ht(se,N));for(const se of T)ie.push(ht(se,N))}Y.length&&e.hooks.nodesChange.trigger(Y),ie.length&&e.hooks.edgesChange.trigger(ie)},g=$=>{if(e.multiSelectionActive){const N=$.map(P=>ht(P.id,!0));e.hooks.nodesChange.trigger(N);return}e.hooks.nodesChange.trigger(gt(t.value,new Set($.map(N=>N.id)),!0)),e.hooks.edgesChange.trigger(gt(n.value))},p=$=>{if(e.multiSelectionActive){const N=$.map(P=>ht(P.id,!0));e.hooks.edgesChange.trigger(N);return}e.hooks.edgesChange.trigger(gt(n.value,new Set($.map(N=>N.id)))),e.hooks.nodesChange.trigger(gt(t.value,new Set,!0))},m=$=>{h($,!0)},b=$=>{const P=($||e.nodes).map(T=>(T.selected=!1,ht(T.id,!1)));e.hooks.nodesChange.trigger(P)},y=$=>{const P=($||e.edges).map(T=>(T.selected=!1,ht(T.id,!1)));e.hooks.edgesChange.trigger(P)},v=$=>{if(!$||!$.length)return h([],!1);const N=$.reduce((P,T)=>{const Y=ht(T.id,!1);return Mt(T)?P.nodes.push(Y):P.edges.push(Y),P},{nodes:[],edges:[]});N.nodes.length&&e.hooks.nodesChange.trigger(N.nodes),N.edges.length&&e.hooks.edgesChange.trigger(N.edges)},w=$=>{var N;(N=e.d3Zoom)==null||N.scaleExtent([$,e.maxZoom]),e.minZoom=$},O=$=>{var N;(N=e.d3Zoom)==null||N.scaleExtent([e.minZoom,$]),e.maxZoom=$},L=$=>{var N;(N=e.d3Zoom)==null||N.translateExtent($),e.translateExtent=$},A=$=>{e.nodeExtent=$,o()},_=$=>{var N;(N=e.d3Zoom)==null||N.clickDistance($)},k=$=>{e.nodesDraggable=$,e.nodesConnectable=$,e.elementsSelectable=$},x=$=>{const N=$ instanceof Function?$(e.nodes):$;!e.initialized&&!N.length||(e.nodes=na(N,u,e.hooks.error.trigger))},I=$=>{const N=$ instanceof Function?$(e.edges):$;if(!e.initialized&&!N.length)return;const P=Oo(N,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Do(e.connectionLookup,n.value,P),e.edges=P},E=$=>{const N=$ instanceof Function?$([...e.nodes,...e.edges]):$;!e.initialized&&!N.length||(x(N.filter(Mt)),I(N.filter(yt)))},G=$=>{let N=$ instanceof Function?$(e.nodes):$;N=Array.isArray(N)?N:[N];const P=na(N,u,e.hooks.error.trigger),T=[];for(const Y of P)T.push(Us(Y));T.length&&e.hooks.nodesChange.trigger(T)},C=$=>{let N=$ instanceof Function?$(e.edges):$;N=Array.isArray(N)?N:[N];const P=Oo(N,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),T=[];for(const Y of P)T.push(Us(Y));T.length&&e.hooks.edgesChange.trigger(T)},H=($,N=!0,P=!1)=>{const T=$ instanceof Function?$(e.nodes):$,Y=Array.isArray(T)?T:[T],ie=[],se=[];function ae(we){const xe=l(we);for(const Me of xe)(!Oe(Me.deletable)||Me.deletable)&&se.push(Xs(Me.id,Me.source,Me.target,Me.sourceHandle,Me.targetHandle))}function he(we){const xe=[];for(const Me of e.nodes)Me.parentNode===we&&xe.push(Me);if(xe.length){for(const Me of xe)ie.push(js(Me.id));N&&ae(xe);for(const Me of xe)he(Me.id)}}for(const we of Y){const xe=typeof we=="string"?u(we):we;xe&&(Oe(xe.deletable)&&!xe.deletable||(ie.push(js(xe.id)),N&&ae([xe]),P&&he(xe.id)))}se.length&&e.hooks.edgesChange.trigger(se),ie.length&&e.hooks.nodesChange.trigger(ie)},V=$=>{const N=$ instanceof Function?$(e.edges):$,P=Array.isArray(N)?N:[N],T=[];for(const Y of P){const ie=typeof Y=="string"?c(Y):Y;ie&&(Oe(ie.deletable)&&!ie.deletable||T.push(Xs(typeof Y=="string"?Y:Y.id,ie.source,ie.target,ie.sourceHandle,ie.targetHandle)))}e.hooks.edgesChange.trigger(T)},W=($,N,P=!0)=>{const T=c($.id);if(!T)return!1;const Y=e.edges.indexOf(T),ie=Qh($,N,T,P,e.hooks.error.trigger);if(ie){const[se]=Oo([ie],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((ae,he)=>he===Y?se:ae),Do(e.connectionLookup,n.value,[se]),se}return!1},j=($,N,P={replace:!1})=>{const T=c($);if(!T)return;const Y=typeof N=="function"?N(T):N;T.data=P.replace?Y:{...T.data,...Y}},K=$=>Ws($,e.nodes),J=$=>{const N=Ws($,e.edges);return Do(e.connectionLookup,n.value,N),N},oe=($,N,P={replace:!1})=>{const T=u($);if(!T)return;const Y=typeof N=="function"?N(T):N;P.replace?e.nodes.splice(e.nodes.indexOf(T),1,Y):Object.assign(T,Y)},ge=($,N,P={replace:!1})=>{const T=u($);if(!T)return;const Y=typeof N=="function"?N(T):N;T.data=P.replace?Y:{...T.data,...Y}},B=($,N,P=!1)=>{P?e.connectionClickStartHandle=$:e.connectionStartHandle=$,e.connectionEndHandle=null,e.connectionStatus=null,N&&(e.connectionPosition=N)},z=($,N=null,P=null)=>{e.connectionStartHandle&&(e.connectionPosition=$,e.connectionEndHandle=N,e.connectionStatus=P)},F=($,N)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,N?e.connectionClickStartHandle=null:e.connectionStartHandle=null},q=$=>{const N=Mh($),P=N?null:tn($)?$:u($.id);return!N&&!P?[null,null,N]:[N?$:to(P),P,N]},Q=($,N=!0,P=e.nodes)=>{const[T,Y,ie]=q($);if(!T)return[];const se=[];for(const ae of P||e.nodes){if(!ie&&(ae.id===Y.id||!ae.computedPosition))continue;const he=to(ae),we=no(he,T);(N&&we>0||we>=he.width*he.height||we>=Number(T.width)*Number(T.height))&&se.push(ae)}return se},re=($,N,P=!0)=>{const[T]=q($);if(!T)return!1;const Y=no(T,N);return P&&Y>0||Y>=Number(T.width)*Number(T.height)},le=$=>{const{viewport:N,dimensions:P,d3Zoom:T,d3Selection:Y,translateExtent:ie}=e;if(!T||!Y||!$.x&&!$.y)return!1;const se=Ft.translate(N.x+$.x,N.y+$.y).scale(N.zoom),ae=[[0,0],[P.width,P.height]],he=T.constrain()(se,ae,ie),we=e.viewport.x!==he.x||e.viewport.y!==he.y||e.viewport.zoom!==he.k;return T.transform(Y,he),we},_e=$=>{const N=$ instanceof Function?$(e):$,P=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Oe(N.defaultEdgeOptions)&&(e.defaultEdgeOptions=N.defaultEdgeOptions);const T=N.modelValue||N.nodes||N.edges?[]:void 0;T&&(N.modelValue&&T.push(...N.modelValue),N.nodes&&T.push(...N.nodes),N.edges&&T.push(...N.edges),E(T));const Y=()=>{Oe(N.maxZoom)&&O(N.maxZoom),Oe(N.minZoom)&&w(N.minZoom),Oe(N.translateExtent)&&L(N.translateExtent)};for(const ie of Object.keys(N)){const se=ie,ae=N[se];![...mg,...P].includes(se)&&Oe(ae)&&(e[se]=ae)}Ri(()=>e.d3Zoom).not.toBeNull().then(Y),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:E,setNodes:x,setEdges:I,addNodes:G,addEdges:C,removeNodes:H,removeEdges:V,findNode:u,findEdge:c,updateEdge:W,updateEdgeData:j,updateNode:oe,updateNodeData:ge,applyEdgeChanges:J,applyNodeChanges:K,addSelectedElements:m,addSelectedNodes:g,addSelectedEdges:p,setMinZoom:w,setMaxZoom:O,setTranslateExtent:L,setNodeExtent:A,setPaneClickDistance:_,removeSelectedElements:v,removeSelectedNodes:b,removeSelectedEdges:y,startConnection:B,updateConnection:z,endConnection:F,setInteractive:k,setState:_e,getIntersectingNodes:Q,getIncomers:s,getOutgoers:a,getConnectedEdges:l,getHandleConnections:r,isNodeIntersecting:re,panBy:le,fitView:$=>i.value.fitView($),zoomIn:$=>i.value.zoomIn($),zoomOut:$=>i.value.zoomOut($),zoomTo:($,N)=>i.value.zoomTo($,N),setViewport:($,N)=>i.value.setViewport($,N),setTransform:($,N)=>i.value.setTransform($,N),getViewport:()=>i.value.getViewport(),getTransform:()=>i.value.getTransform(),setCenter:($,N,P)=>i.value.setCenter($,N,P),fitBounds:($,N)=>i.value.fitBounds($,N),project:$=>i.value.project($),screenToFlowCoordinate:$=>i.value.screenToFlowCoordinate($),flowToScreenCoordinate:$=>i.value.flowToScreenCoordinate($),toObject:()=>{const $=[],N=[];for(const P of e.nodes){const{computedPosition:T,handleBounds:Y,selected:ie,dimensions:se,isParent:ae,resizing:he,dragging:we,events:xe,...Me}=P;$.push(Me)}for(const P of e.edges){const{selected:T,sourceNode:Y,targetNode:ie,events:se,...ae}=P;N.push(ae)}return JSON.parse(JSON.stringify({nodes:$,edges:N,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:$=>new Promise(N=>{const{nodes:P,edges:T,position:Y,zoom:ie,viewport:se}=$;if(P&&x(P),T&&I(T),se?.x&&se?.y||Y){const ae=se?.x||Y[0],he=se?.y||Y[1],we=se?.zoom||ie||e.viewport.zoom;return Ri(()=>i.value.viewportInitialized).toBe(!0).then(()=>{i.value.setViewport({x:ae,y:he,zoom:we}).then(()=>{N(!0)})})}else N(!0)}),updateNodeInternals:o,viewportHelper:i,$reset:()=>{const $=xl();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const N=Ft.translate($.defaultViewport.x??0,$.defaultViewport.y??0).scale(It($.defaultViewport.zoom??1,$.minZoom,$.maxZoom)),P=e.viewportRef.getBoundingClientRect(),T=[[0,0],[P.width,P.height]],Y=e.d3Zoom.constrain()(N,T,$.translateExtent);e.d3Zoom.transform(e.d3Selection,Y)}_e($)},$destroy:()=>{}}}const pg=["data-id","data-handleid","data-nodeid","data-handlepos"],yg={name:"Handle",compatConfig:{MODE:3}},io=ue({...yg,props:{id:{default:null},type:{},position:{default:()=>ce.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=tu(e,["position","connectable","connectableStart","connectableEnd","id"]),i=Te(()=>n.type??"source"),o=Te(()=>n.isValidConnection??null),{id:s,connectionStartHandle:a,connectionClickStartHandle:l,connectionEndHandle:r,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=Ie(),{id:h,node:g,nodeEl:p,connectedEdges:m}=wl(),b=X(),y=Te(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),v=Te(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),w=Te(()=>{var I,E,G,C,H,V;return((I=a.value)==null?void 0:I.nodeId)===h&&((E=a.value)==null?void 0:E.id)===e.id&&((G=a.value)==null?void 0:G.type)===i.value||((C=r.value)==null?void 0:C.nodeId)===h&&((H=r.value)==null?void 0:H.id)===e.id&&((V=r.value)==null?void 0:V.type)===i.value}),O=Te(()=>{var I,E,G;return((I=l.value)==null?void 0:I.nodeId)===h&&((E=l.value)==null?void 0:E.id)===e.id&&((G=l.value)==null?void 0:G.type)===i.value}),{handlePointerDown:L,handleClick:A}=_l({nodeId:h,handleId:e.id,isValidConnection:o,type:i}),_=Z(()=>typeof e.connectable=="string"&&e.connectable==="single"?!m.value.some(I=>{const E=I[`${i.value}Handle`];return I[i.value]!==h?!1:E?E===e.id:!0}):typeof e.connectable=="number"?m.value.filter(I=>{const E=I[`${i.value}Handle`];return I[i.value]!==h?!1:E?E===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(g,m.value):Oe(e.connectable)?e.connectable:c.value);Ve(()=>{var I;if(!g.dimensions.width||!g.dimensions.height)return;const E=(I=g.handleBounds[i.value])==null?void 0:I.find(K=>K.id===e.id);if(!u.value||E)return;const G=u.value.querySelector(".vue-flow__transformationpane");if(!p.value||!b.value||!G||!e.id)return;const C=p.value.getBoundingClientRect(),H=b.value.getBoundingClientRect(),V=window.getComputedStyle(G),{m22:W}=new window.DOMMatrixReadOnly(V.transform),j={id:e.id,position:e.position,x:(H.left-C.left)/W,y:(H.top-C.top)/W,type:i.value,nodeId:h,...mo(b.value)};g.handleBounds[i.value]=[...g.handleBounds[i.value]??[],j]});function k(I){const E=hs(I);_.value&&y.value&&(E&&I.button===0||!E)&&L(I)}function x(I){!h||!l.value&&!y.value||_.value&&A(I)}return t({handleClick:A,handlePointerDown:L,onClick:x,onPointerDown:k}),(I,E)=>(S(),D("div",{ref_key:"handle",ref:b,"data-id":`${R(s)}-${R(h)}-${e.id}-${i.value}`,"data-handleid":e.id,"data-nodeid":R(h),"data-handlepos":I.position,class:Ee(["vue-flow__handle",[`vue-flow__handle-${I.position}`,`vue-flow__handle-${e.id}`,R(d),R(f),i.value,{connectable:_.value,connecting:O.value,connectablestart:y.value,connectableend:v.value,connectionindicator:_.value&&(y.value&&!w.value||v.value&&w.value)}]]),onMousedown:k,onTouchstartPassive:k,onClick:x},[De(I.$slots,"default",{id:I.id})],42,pg))}}),yo=function({sourcePosition:e=ce.Bottom,targetPosition:t=ce.Top,label:n,connectable:i=!0,isValidTargetPos:o,isValidSourcePos:s,data:a}){const l=a.label??n;return[Ce(io,{type:"target",position:t,connectable:i,isValidConnection:o}),typeof l!="string"&&l?Ce(l):Ce(pe,[l]),Ce(io,{type:"source",position:e,connectable:i,isValidConnection:s})]};yo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];yo.inheritAttrs=!1;yo.compatConfig={MODE:3};const _g=yo,_o=function({targetPosition:e=ce.Top,label:t,connectable:n=!0,isValidTargetPos:i,data:o}){const s=o.label??t;return[Ce(io,{type:"target",position:e,connectable:n,isValidConnection:i}),typeof s!="string"&&s?Ce(s):Ce(pe,[s])]};_o.props=["targetPosition","label","isValidTargetPos","connectable","data"];_o.inheritAttrs=!1;_o.compatConfig={MODE:3};const wg=_o,wo=function({sourcePosition:e=ce.Bottom,label:t,connectable:n=!0,isValidSourcePos:i,data:o}){const s=o.label??t;return[typeof s!="string"&&s?Ce(s):Ce(pe,[s]),Ce(io,{type:"source",position:e,connectable:n,isValidConnection:i})]};wo.props=["sourcePosition","label","isValidSourcePos","connectable","data"];wo.inheritAttrs=!1;wo.compatConfig={MODE:3};const bg=wo,xg=["transform"],Eg=["width","height","x","y","rx","ry"],Sg=["y"],kg={name:"EdgeText",compatConfig:{MODE:3}},Cg=ue({...kg,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=X({x:0,y:0,width:0,height:0}),n=X(null),i=Z(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Ve(o),ve([()=>e.x,()=>e.y,n,()=>e.label],o);function o(){if(!n.value)return;const s=n.value.getBBox();(s.width!==t.value.width||s.height!==t.value.height)&&(t.value=s)}return(s,a)=>(S(),D("g",{transform:i.value,class:"vue-flow__edge-textwrapper"},[s.labelShowBg?(S(),D("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*s.labelBgPadding[0]}px`,height:`${t.value.height+2*s.labelBgPadding[1]}px`,x:-s.labelBgPadding[0],y:-s.labelBgPadding[1],style:Fe(s.labelBgStyle),rx:s.labelBgBorderRadius,ry:s.labelBgBorderRadius},null,12,Eg)):U("",!0),M("text",pr(s.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:s.labelStyle}),[De(s.$slots,"default",{},()=>[typeof s.label!="string"?(S(),de(mt(s.label),{key:0})):(S(),D(pe,{key:1},[ye(ne(s.label),1)],64))])],16,Sg)],8,xg))}}),Mg=["id","d","marker-end","marker-start"],Ng=["d","stroke-width"],$g={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},bo=ue({...$g,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=X(null),i=X(null),o=X(null),s=eu();return t({pathEl:n,interactionEl:i,labelEl:o}),(a,l)=>(S(),D(pe,null,[M("path",pr(R(s),{id:a.id,ref_key:"pathEl",ref:n,d:a.path,class:"vue-flow__edge-path","marker-end":a.markerEnd,"marker-start":a.markerStart}),null,16,Mg),a.interactionWidth?(S(),D("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:a.path,"stroke-width":a.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Ng)):U("",!0),a.label&&a.labelX&&a.labelY?(S(),de(Cg,{key:1,ref_key:"labelEl",ref:o,x:a.labelX,y:a.labelY,label:a.label,"label-show-bg":a.labelShowBg,"label-bg-style":a.labelBgStyle,"label-bg-padding":a.labelBgPadding,"label-bg-border-radius":a.labelBgBorderRadius,"label-style":a.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):U("",!0)],64))}});function El({sourceX:e,sourceY:t,targetX:n,targetY:i}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,a=Math.abs(i-t)/2,l=i<t?i+a:i-a;return[s,l,o,a]}function Sl({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:a,targetControlY:l}){const r=e*.125+o*.375+a*.375+n*.125,u=t*.125+s*.375+l*.375+i*.125,c=Math.abs(r-e),d=Math.abs(u-t);return[r,u,c,d]}function Dn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function aa({pos:e,x1:t,y1:n,x2:i,y2:o,c:s}){let a,l;switch(e){case ce.Left:a=t-Dn(t-i,s),l=n;break;case ce.Right:a=t+Dn(i-t,s),l=n;break;case ce.Top:a=t,l=n-Dn(n-o,s);break;case ce.Bottom:a=t,l=n+Dn(o-n,s);break}return[a,l]}function kl(e){const{sourceX:t,sourceY:n,sourcePosition:i=ce.Bottom,targetX:o,targetY:s,targetPosition:a=ce.Top,curvature:l=.25}=e,[r,u]=aa({pos:i,x1:t,y1:n,x2:o,y2:s,c:l}),[c,d]=aa({pos:a,x1:o,y1:s,x2:t,y2:n,c:l}),[f,h,g,p]=Sl({sourceX:t,sourceY:n,targetX:o,targetY:s,sourceControlX:r,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${r},${u} ${c},${d} ${o},${s}`,f,h,g,p]}function ra({pos:e,x1:t,y1:n,x2:i,y2:o}){let s,a;switch(e){case ce.Left:case ce.Right:s=.5*(t+i),a=n;break;case ce.Top:case ce.Bottom:s=t,a=.5*(n+o);break}return[s,a]}function Cl(e){const{sourceX:t,sourceY:n,sourcePosition:i=ce.Bottom,targetX:o,targetY:s,targetPosition:a=ce.Top}=e,[l,r]=ra({pos:i,x1:t,y1:n,x2:o,y2:s}),[u,c]=ra({pos:a,x1:o,y1:s,x2:t,y2:n}),[d,f,h,g]=Sl({sourceX:t,sourceY:n,targetX:o,targetY:s,sourceControlX:l,sourceControlY:r,targetControlX:u,targetControlY:c});return[`M${t},${n} C${l},${r} ${u},${c} ${o},${s}`,d,f,h,g]}const la={[ce.Left]:{x:-1,y:0},[ce.Right]:{x:1,y:0},[ce.Top]:{x:0,y:-1},[ce.Bottom]:{x:0,y:1}};function Ig({source:e,sourcePosition:t=ce.Bottom,target:n}){return t===ce.Left||t===ce.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function ua(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Tg({source:e,sourcePosition:t=ce.Bottom,target:n,targetPosition:i=ce.Top,center:o,offset:s}){const a=la[t],l=la[i],r={x:e.x+a.x*s,y:e.y+a.y*s},u={x:n.x+l.x*s,y:n.y+l.y*s},c=Ig({source:r,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,g,p;const m={x:0,y:0},b={x:0,y:0},[y,v,w,O]=El({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){g=o.x??y,p=o.y??v;const A=[{x:g,y:r.y},{x:g,y:u.y}],_=[{x:r.x,y:p},{x:u.x,y:p}];a[d]===f?h=d==="x"?A:_:h=d==="x"?_:A}else{const A=[{x:r.x,y:u.y}],_=[{x:u.x,y:r.y}];if(d==="x"?h=a.x===f?_:A:h=a.y===f?A:_,t===i){const G=Math.abs(e[d]-n[d]);if(G<=s){const C=Math.min(s-1,s-G);a[d]===f?m[d]=(r[d]>e[d]?-1:1)*C:b[d]=(u[d]>n[d]?-1:1)*C}}if(t!==i){const G=d==="x"?"y":"x",C=a[d]===l[G],H=r[G]>u[G],V=r[G]<u[G];(a[d]===1&&(!C&&H||C&&V)||a[d]!==1&&(!C&&V||C&&H))&&(h=d==="x"?A:_)}const k={x:r.x+m.x,y:r.y+m.y},x={x:u.x+b.x,y:u.y+b.y},I=Math.max(Math.abs(k.x-h[0].x),Math.abs(x.x-h[0].x)),E=Math.max(Math.abs(k.y-h[0].y),Math.abs(x.y-h[0].y));I>=E?(g=(k.x+x.x)/2,p=h[0].y):(g=h[0].x,p=(k.y+x.y)/2)}return[[e,{x:r.x+m.x,y:r.y+m.y},...h,{x:u.x+b.x,y:u.y+b.y},n],g,p,w,O]}function Dg(e,t,n,i){const o=Math.min(ua(e,t)/2,ua(t,n)/2,i),{x:s,y:a}=t;if(e.x===s&&s===n.x||e.y===a&&a===n.y)return`L${s} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+o*u},${a}Q ${s},${a} ${s},${a+o*c}`}const l=e.x<n.x?1:-1,r=e.y<n.y?-1:1;return`L ${s},${a+o*r}Q ${s},${a} ${s+o*l},${a}`}function Ui(e){const{sourceX:t,sourceY:n,sourcePosition:i=ce.Bottom,targetX:o,targetY:s,targetPosition:a=ce.Top,borderRadius:l=5,centerX:r,centerY:u,offset:c=20}=e,[d,f,h,g,p]=Tg({source:{x:t,y:n},sourcePosition:i,target:{x:o,y:s},targetPosition:a,center:{x:r,y:u},offset:c});return[d.reduce((b,y,v)=>{let w;return v>0&&v<d.length-1?w=Dg(d[v-1],y,d[v+1],l):w=`${v===0?"M":"L"}${y.x} ${y.y}`,b+=w,b},""),f,h,g,p]}function Og(e){const{sourceX:t,sourceY:n,targetX:i,targetY:o}=e,[s,a,l,r]=El({sourceX:t,sourceY:n,targetX:i,targetY:o});return[`M ${t},${n}L ${i},${o}`,s,a,l,r]}const Pg=ue({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,i,o]=Og(e);return Ce(bo,{path:n,labelX:i,labelY:o,...t,...e})}}}),Rg=Pg,Lg=ue({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,i,o]=Ui({...e,sourcePosition:e.sourcePosition??ce.Bottom,targetPosition:e.targetPosition??ce.Top});return Ce(bo,{path:n,labelX:i,labelY:o,...t,...e})}}}),Ml=Lg,Ag=ue({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>Ce(Ml,{...e,...t,borderRadius:0})}}),zg=Ag,Vg=ue({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,i,o]=kl({...e,sourcePosition:e.sourcePosition??ce.Bottom,targetPosition:e.targetPosition??ce.Top});return Ce(bo,{path:n,labelX:i,labelY:o,...t,...e})}}}),Bg=Vg,Fg=ue({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,i,o]=Cl({...e,sourcePosition:e.sourcePosition??ce.Bottom,targetPosition:e.targetPosition??ce.Top});return Ce(bo,{path:n,labelX:i,labelY:o,...t,...e})}}}),Hg=Fg,Gg={input:bg,default:_g,output:wg},qg={default:Bg,straight:Rg,step:zg,smoothstep:Ml,simplebezier:Hg};function Yg(e,t,n){const i=Z(()=>p=>t.value.get(p)),o=Z(()=>p=>n.value.get(p)),s=Z(()=>{const p={...qg,...e.edgeTypes},m=Object.keys(p);for(const b of e.edges)b.type&&!m.includes(b.type)&&(p[b.type]=b.type);return p}),a=Z(()=>{const p={...Gg,...e.nodeTypes},m=Object.keys(p);for(const b of e.nodes)b.type&&!m.includes(b.type)&&(p[b.type]=b.type);return p}),l=Z(()=>e.onlyRenderVisibleElements?ll(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),r=Z(()=>{if(e.onlyRenderVisibleElements){const p=[];for(const m of e.edges){const b=t.value.get(m.source),y=t.value.get(m.target);Fh({sourcePos:b.computedPosition||{x:0,y:0},targetPos:y.computedPosition||{x:0,y:0},sourceWidth:b.dimensions.width,sourceHeight:b.dimensions.height,targetWidth:y.dimensions.width,targetHeight:y.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&p.push(m)}return p}return e.edges}),u=Z(()=>[...l.value,...r.value]),c=Z(()=>{const p=[];for(const m of e.nodes)m.selected&&p.push(m);return p}),d=Z(()=>{const p=[];for(const m of e.edges)m.selected&&p.push(m);return p}),f=Z(()=>[...c.value,...d.value]),h=Z(()=>{const p=[];for(const m of e.nodes)m.dimensions.width&&m.dimensions.height&&m.handleBounds!==void 0&&p.push(m);return p}),g=Z(()=>l.value.length>0&&h.value.length===l.value.length);return{getNode:i,getEdge:o,getElements:u,getEdgeTypes:s,getNodeTypes:a,getEdges:r,getNodes:l,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:g}}class bt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=qt())==null?void 0:t.appContext.app,i=n?.config.globalProperties.$vueFlowStorage??bt.instance;return bt.instance=i??new bt,n&&(n.config.globalProperties.$vueFlowStorage=bt.instance),bt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const i=xl(),o=Xl(i),s={};for(const[f,h]of Object.entries(o.hooks)){const g=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;s[g]=h.on}const a={};for(const[f,h]of Object.entries(o.hooks))a[f]=h.trigger;const l=Z(()=>{const f=new Map;for(const h of o.nodes)f.set(h.id,h);return f}),r=Z(()=>{const f=new Map;for(const h of o.edges)f.set(h.id,h);return f}),u=Yg(o,l,r),c=vg(o,l,r);c.setState({...o,...n});const d={...s,...u,...c,...Ru(o),nodeLookup:l,edgeLookup:r,emits:a,id:t,vueFlowVersion:"1.47.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Ie(e){const t=bt.getInstance(),n=gr(),i=typeof e=="object",o=i?e:{id:e},s=o.id,a=s??n?.vueFlowId;let l;if(n){const r=Gt(sa,null);typeof r<"u"&&r!==null&&(!a||r.id===a)&&(l=r)}if(l||a&&(l=t.get(a)),!l||a&&l.id!==a){const r=s??t.getId(),u=t.create(r,o);l=u,(n??mr(!0)).run(()=>{ve(u.applyDefault,(d,f,h)=>{const g=m=>{u.applyNodeChanges(m)},p=m=>{u.applyEdgeChanges(m)};d?(u.onNodesChange(g),u.onEdgesChange(p)):(u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(p)),h(()=>{u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(p)})},{immediate:!0}),cn(()=>{if(l){const d=t.get(l.id);d?d.$destroy():xn(`No store instance found for id ${l.id} in storage.`)}})})}else i&&l.setState(o);if(n&&(zt(sa,l),n.vueFlowId=l.id),i){const r=qt();r?.type.name!=="VueFlow"&&l.emits.error(new Ae(Pe.USEVUEFLOW_OPTIONS))}return l}function Wg(e){const{emits:t,dimensions:n}=Ie();let i;Ve(()=>{const o=()=>{var s,a;if(!e.value||!(((a=(s=e.value).checkVisibility)==null?void 0:a.call(s))??!0))return;const l=mo(e.value);(l.width===0||l.height===0)&&t.error(new Ae(Pe.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:l.width||500,height:l.height||500}};o(),window.addEventListener("resize",o),e.value&&(i=new ResizeObserver(()=>o()),i.observe(e.value)),ro(()=>{window.removeEventListener("resize",o),i&&e.value&&i.unobserve(e.value)})})}const Ug={name:"UserSelection",compatConfig:{MODE:3}},jg=ue({...Ug,props:{userSelectionRect:{}},setup(e){return(t,n)=>(S(),D("div",{class:"vue-flow__selection vue-flow__container",style:Fe({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Xg=["tabIndex"],Zg={name:"NodesSelection",compatConfig:{MODE:3}},Kg=ue({...Zg,setup(e){const{emits:t,viewport:n,getSelectedNodes:i,noPanClassName:o,disableKeyboardA11y:s,userSelectionActive:a}=Ie(),l=bl(),r=X(null),u=yl({el:r,onStart(g){t.selectionDragStart(g),t.nodeDragStart(g)},onDrag(g){t.selectionDrag(g),t.nodeDrag(g)},onStop(g){t.selectionDragStop(g),t.nodeDragStop(g)}});Ve(()=>{var g;s.value||(g=r.value)==null||g.focus({preventScroll:!0})});const c=Z(()=>rl(i.value)),d=Z(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(g){t.selectionContextMenu({event:g,nodes:i.value})}function h(g){s||Lt[g.key]&&(g.preventDefault(),l({x:Lt[g.key].x,y:Lt[g.key].y},g.shiftKey))}return(g,p)=>!R(a)&&c.value.width&&c.value.height?(S(),D("div",{key:0,class:Ee(["vue-flow__nodesselection vue-flow__container",R(o)]),style:Fe({transform:`translate(${R(n).x}px,${R(n).y}px) scale(${R(n).zoom})`})},[M("div",{ref_key:"el",ref:r,class:Ee([{dragging:R(u)},"vue-flow__nodesselection-rect"]),style:Fe(d.value),tabIndex:R(s)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,Xg)],6)):U("",!0)}});function Jg(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Qg={name:"Pane",compatConfig:{MODE:3}},em=ue({...Qg,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:i,emits:o,userSelectionActive:s,removeSelectedElements:a,userSelectionRect:l,elementsSelectable:r,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:d,removeNodes:f,removeEdges:h,selectionMode:g,deleteKeyCode:p,multiSelectionKeyCode:m,multiSelectionActive:b,edgeLookup:y,nodeLookup:v,connectionLookup:w,defaultEdgeOptions:O,connectionStartHandle:L}=Ie(),A=X(null),_=X(new Set),k=X(new Set),x=X(),I=Te(()=>r.value&&(e.isSelecting||s.value)),E=Te(()=>L.value!==null);let G=!1,C=!1;const H=an(p,{actInsideInputWithModifier:!1}),V=an(m);ve(H,z=>{z&&(f(d.value),h(c.value),u.value=!1)}),ve(V,z=>{b.value=z});function W(z,F){return q=>{q.target===F&&z?.(q)}}function j(z){if(G||E.value){G=!1;return}o.paneClick(z),a(),u.value=!1}function K(z){z.preventDefault(),z.stopPropagation(),o.paneContextMenu(z)}function J(z){o.paneScroll(z)}function oe(z){var F,q,Q;if(x.value=(F=t.value)==null?void 0:F.getBoundingClientRect(),!r.value||!e.isSelecting||z.button!==0||z.target!==A.value||!x.value)return;(Q=(q=z.target)==null?void 0:q.setPointerCapture)==null||Q.call(q,z.pointerId);const{x:re,y:le}=Jg(z,x.value);C=!0,G=!1,a(),l.value={width:0,height:0,startX:re,startY:le,x:re,y:le},o.selectionStart(z)}function ge(z){var F;if(!x.value||!l.value)return;G=!0;const{x:q,y:Q}=et(z,x.value),{startX:re=0,startY:le=0}=l.value,_e={startX:re,startY:le,x:q<re?q:re,y:Q<le?Q:le,width:Math.abs(q-re),height:Math.abs(Q-le)},Se=_.value,fe=k.value;_.value=new Set(ll(n.value,_e,i.value,g.value===ds.Partial,!0).map($=>$.id)),k.value=new Set;const me=((F=O.value)==null?void 0:F.selectable)??!0;for(const $ of _.value){const N=w.value.get($);if(N)for(const{edgeId:P}of N.values()){const T=y.value.get(P);T&&(T.selectable??me)&&k.value.add(P)}}if(!ia(Se,_.value)){const $=gt(v.value,_.value,!0);o.nodesChange($)}if(!ia(fe,k.value)){const $=gt(y.value,k.value);o.edgesChange($)}l.value=_e,s.value=!0,u.value=!1}function B(z){var F;z.button!==0||!C||((F=z.target)==null||F.releasePointerCapture(z.pointerId),!s.value&&l.value&&z.target===A.value&&j(z),s.value=!1,l.value=null,u.value=_.value.size>0,o.selectionEnd(z),e.selectionKeyPressed&&(G=!1),C=!1)}return(z,F)=>(S(),D("div",{ref_key:"container",ref:A,class:Ee(["vue-flow__pane vue-flow__container",{selection:z.isSelecting}]),onClick:F[0]||(F[0]=q=>I.value?void 0:W(j,A.value)(q)),onContextmenu:F[1]||(F[1]=q=>W(K,A.value)(q)),onWheelPassive:F[2]||(F[2]=q=>W(J,A.value)(q)),onPointerenter:F[3]||(F[3]=q=>I.value?void 0:R(o).paneMouseEnter(q)),onPointerdown:F[4]||(F[4]=q=>I.value?oe(q):R(o).paneMouseMove(q)),onPointermove:F[5]||(F[5]=q=>I.value?ge(q):R(o).paneMouseMove(q)),onPointerup:F[6]||(F[6]=q=>I.value?B(q):void 0),onPointerleave:F[7]||(F[7]=q=>R(o).paneMouseLeave(q))},[De(z.$slots,"default"),R(s)&&R(l)?(S(),de(jg,{key:0,"user-selection-rect":R(l)},null,8,["user-selection-rect"])):U("",!0),R(u)&&R(d).length?(S(),de(Kg,{key:1})):U("",!0)],34))}}),tm={name:"Transform",compatConfig:{MODE:3}},nm=ue({...tm,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:i}=Ie(),o=Z(()=>n.value?!i.value:!1),s=Z(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,l)=>(S(),D("div",{class:"vue-flow__transformationpane vue-flow__container",style:Fe({transform:s.value,opacity:o.value?0:void 0})},[De(a.$slots,"default")],4))}}),om={name:"Viewport",compatConfig:{MODE:3}},im=ue({...om,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:i,translateExtent:o,zoomActivationKeyCode:s,selectionKeyCode:a,panActivationKeyCode:l,panOnScroll:r,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:g,preventScrolling:p,noWheelClassName:m,noPanClassName:b,emits:y,connectionStartHandle:v,userSelectionActive:w,paneDragging:O,d3Zoom:L,d3Selection:A,d3ZoomHandler:_,viewport:k,viewportRef:x,paneClickDistance:I}=Ie();Wg(x);const E=rn(!1),G=rn(!1);let C=null,H=!1,V=0,W={x:0,y:0,zoom:0};const j=an(l),K=an(a),J=an(s),oe=Te(()=>(!K.value||K.value&&a.value===!0)&&(j.value||d.value)),ge=Te(()=>j.value||r.value),B=Te(()=>K.value||a.value===!0&&oe.value!==!0),z=Te(()=>v.value!==null);Ve(()=>{if(!x.value){xn("Viewport element is missing");return}const le=x.value,_e=le.getBoundingClientRect(),Se=wh().clickDistance(I.value).scaleExtent([t.value,n.value]).translateExtent(o.value),fe=We(le).call(Se),me=fe.on("wheel.zoom"),$=Ft.translate(i.value.x??0,i.value.y??0).scale(It(i.value.zoom??1,t.value,n.value)),N=[[0,0],[_e.width,_e.height]],P=Se.constrain()($,N,o.value);Se.transform(fe,P),Se.wheelDelta(qs),L.value=Se,A.value=fe,_.value=me,k.value={x:P.x,y:P.y,zoom:P.k},Se.on("start",T=>{var Y;if(!T.sourceEvent)return null;V=T.sourceEvent.button,E.value=!0;const ie=Q(T.transform);((Y=T.sourceEvent)==null?void 0:Y.type)==="mousedown"&&(O.value=!0),W=ie,y.viewportChangeStart(ie),y.moveStart({event:T,flowTransform:ie})}),Se.on("end",T=>{if(!T.sourceEvent)return null;if(E.value=!1,O.value=!1,F(oe.value,V??0)&&!H&&y.paneContextMenu(T.sourceEvent),H=!1,q(W,T.transform)){const Y=Q(T.transform);W=Y,y.viewportChangeEnd(Y),y.moveEnd({event:T,flowTransform:Y})}}),Se.filter(T=>{var Y;const ie=J.value||g.value,se=h.value&&T.ctrlKey,ae=T.button,he=T.type==="wheel";if(ae===1&&T.type==="mousedown"&&(re(T,"vue-flow__node")||re(T,"vue-flow__edge")))return!0;if(!oe.value&&!ie&&!ge.value&&!f.value&&!h.value||w.value||z.value&&!he||!f.value&&T.type==="dblclick"||re(T,m.value)&&he||re(T,b.value)&&(!he||ge.value&&he&&!J.value)||!h.value&&T.ctrlKey&&he||!ie&&!ge.value&&!se&&he)return!1;if(!h&&T.type==="touchstart"&&((Y=T.touches)==null?void 0:Y.length)>1)return T.preventDefault(),!1;if(!oe.value&&(T.type==="mousedown"||T.type==="touchstart")||a.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&ae===0||Array.isArray(d.value)&&!d.value.includes(ae)&&(T.type==="mousedown"||T.type==="touchstart"))return!1;const we=Array.isArray(d.value)&&d.value.includes(ae)||a.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!ae||ae<=1;return(!T.ctrlKey||j.value||he)&&we}),ve([w,oe],()=>{w.value&&!E.value?Se.on("zoom",null):w.value||Se.on("zoom",T=>{k.value={x:T.transform.x,y:T.transform.y,zoom:T.transform.k};const Y=Q(T.transform);H=F(oe.value,V??0),y.viewportChange(Y),y.move({event:T,flowTransform:Y})})},{immediate:!0}),ve([w,ge,u,J,h,p,m],()=>{ge.value&&!J.value&&!w.value?fe.on("wheel.zoom",T=>{if(re(T,m.value))return!1;const Y=J.value||g.value,ie=h.value&&T.ctrlKey;if(!(!p.value||ge.value||Y||ie))return!1;T.preventDefault(),T.stopImmediatePropagation();const ae=fe.property("__zoom").k||1,he=oo();if(!j.value&&T.ctrlKey&&h.value&&he){const Ut=Je(T),Wl=qs(T),Ul=ae*2**Wl;Se.scaleTo(fe,Ul,Ut,T);return}const we=T.deltaMode===1?20:1;let xe=u.value===sn.Vertical?0:T.deltaX*we,Me=u.value===sn.Horizontal?0:T.deltaY*we;!he&&T.shiftKey&&u.value!==sn.Vertical&&!xe&&Me&&(xe=Me,Me=0),Se.translateBy(fe,-(xe/ae)*c.value,-(Me/ae)*c.value);const Ke=Q(fe.property("__zoom"));C&&clearTimeout(C),G.value?(y.move({event:T,flowTransform:Ke}),y.viewportChange(Ke),C=setTimeout(()=>{y.moveEnd({event:T,flowTransform:Ke}),y.viewportChangeEnd(Ke),G.value=!1},150)):(G.value=!0,y.moveStart({event:T,flowTransform:Ke}),y.viewportChangeStart(Ke))},{passive:!1}):typeof me<"u"&&fe.on("wheel.zoom",function(T,Y){const ie=!p.value&&T.type==="wheel"&&!T.ctrlKey,se=J.value||g.value,ae=h.value&&T.ctrlKey;if(!se&&!r.value&&!ae&&T.type==="wheel"||ie||re(T,m.value))return null;T.preventDefault(),me.call(this,T,Y)},{passive:!1})},{immediate:!0})});function F(le,_e){return _e===2&&Array.isArray(le)&&le.includes(2)}function q(le,_e){return le.x!==_e.x&&!Number.isNaN(_e.x)||le.y!==_e.y&&!Number.isNaN(_e.y)||le.zoom!==_e.k&&!Number.isNaN(_e.k)}function Q(le){return{x:le.x,y:le.y,zoom:le.k}}function re(le,_e){return le.target.closest(`.${_e}`)}return(le,_e)=>(S(),D("div",{ref_key:"viewportRef",ref:x,class:"vue-flow__viewport vue-flow__container"},[ee(em,{"is-selecting":B.value,"selection-key-pressed":R(K),class:Ee({connecting:z.value,dragging:R(O),draggable:R(d)===!0||Array.isArray(R(d))&&R(d).includes(0)})},{default:ke(()=>[ee(nm,null,{default:ke(()=>[De(le.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),sm=["id"],am=["id"],rm=["id"],lm={name:"A11yDescriptions",compatConfig:{MODE:3}},um=ue({...lm,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:i}=Ie();return(o,s)=>(S(),D(pe,null,[M("div",{id:`${R(Qr)}-${R(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+ne(R(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,sm),M("div",{id:`${R(el)}-${R(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,am),R(n)?U("",!0):(S(),D("div",{key:0,id:`${R(Ch)}-${R(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},ne(R(i)),9,rm))],64))}});function cm(){const e=Ie();ve(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function dm(e,t,n){return n===ce.Left?e-t:n===ce.Right?e+t:e}function fm(e,t,n){return n===ce.Top?e-t:n===ce.Bottom?e+t:e}const gs=function({radius:e=10,centerX:t=0,centerY:n=0,position:i=ce.Top,type:o}){return Ce("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${o}`,cx:dm(t,e,i),cy:fm(n,e,i),r:e,stroke:"transparent",fill:"transparent"})};gs.props=["radius","centerX","centerY","position","type"];gs.compatConfig={MODE:3};const ca=gs,hm=ue({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:i,edgeUpdaterRadius:o,emits:s,nodesSelectionActive:a,noPanClassName:l,getEdgeTypes:r,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:g,elementsSelectable:p,edgesUpdatable:m,edgesFocusable:b,hooks:y}=Ie(),v=Z(()=>c(e.id)),{emit:w,on:O}=og(v.value,s),L=Gt(po),A=qt(),_=X(!1),k=X(!1),x=X(""),I=X(null),E=X("source"),G=X(null),C=Te(()=>typeof v.value.selectable>"u"?p.value:v.value.selectable),H=Te(()=>typeof v.value.updatable>"u"?m.value:v.value.updatable),V=Te(()=>typeof v.value.focusable>"u"?b.value:v.value.focusable);zt(eg,e.id),zt(tg,G);const W=Z(()=>v.value.class instanceof Function?v.value.class(v.value):v.value.class),j=Z(()=>v.value.style instanceof Function?v.value.style(v.value):v.value.style),K=Z(()=>{const N=v.value.type||"default",P=L?.[`edge-${N}`];if(P)return P;let T=v.value.template??r.value[N];if(typeof T=="string"&&A){const Y=Object.keys(A.appContext.components);Y&&Y.includes(N)&&(T=es(N,!1))}return T&&typeof T!="string"?T:(s.error(new Ae(Pe.EDGE_TYPE_MISSING,T)),!1)}),{handlePointerDown:J}=_l({nodeId:x,handleId:I,type:E,isValidConnection:f,edgeUpdaterType:E,onEdgeUpdate:B,onEdgeUpdateEnd:z});return()=>{const N=d(v.value.source),P=d(v.value.target),T="pathOptions"in v.value?v.value.pathOptions:{};if(!N&&!P)return s.error(new Ae(Pe.EDGE_SOURCE_TARGET_MISSING,v.value.id,v.value.source,v.value.target)),null;if(!N)return s.error(new Ae(Pe.EDGE_SOURCE_MISSING,v.value.id,v.value.source)),null;if(!P)return s.error(new Ae(Pe.EDGE_TARGET_MISSING,v.value.id,v.value.target)),null;if(!v.value||v.value.hidden||N.hidden||P.hidden)return null;let Y;i.value===pt.Strict?Y=N.handleBounds.source:Y=[...N.handleBounds.source||[],...N.handleBounds.target||[]];const ie=Js(Y,v.value.sourceHandle);let se;i.value===pt.Strict?se=P.handleBounds.target:se=[...P.handleBounds.target||[],...P.handleBounds.source||[]];const ae=Js(se,v.value.targetHandle),he=ie?.position||ce.Bottom,we=ae?.position||ce.Top,{x:xe,y:Me}=Ht(N,ie,he),{x:Ke,y:Ut}=Ht(P,ae,we);return v.value.sourceX=xe,v.value.sourceY=Me,v.value.targetX=Ke,v.value.targetY=Ut,Ce("g",{ref:G,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${K.value===!1?"default":v.value.type||"default"}`,l.value,W.value,{updating:_.value,selected:v.value.selected,animated:v.value.animated,inactive:!C.value&&!y.value.edgeClick.hasListeners()}],tabIndex:V.value?0:void 0,"aria-label":v.value.ariaLabel===null?void 0:v.value.ariaLabel??`Edge from ${v.value.source} to ${v.value.target}`,"aria-describedby":V.value?`${el}-${t}`:void 0,"aria-roledescription":"edge",role:V.value?"group":"img",...v.value.domAttributes,onClick:q,onContextmenu:Q,onDblclick:re,onMouseenter:le,onMousemove:_e,onMouseleave:Se,onKeyDown:V.value?$:void 0},[k.value?null:Ce(K.value===!1?r.value.default:K.value,{id:e.id,sourceNode:N,targetNode:P,source:v.value.source,target:v.value.target,type:v.value.type,updatable:H.value,selected:v.value.selected,animated:v.value.animated,label:v.value.label,labelStyle:v.value.labelStyle,labelShowBg:v.value.labelShowBg,labelBgStyle:v.value.labelBgStyle,labelBgPadding:v.value.labelBgPadding,labelBgBorderRadius:v.value.labelBgBorderRadius,data:v.value.data,events:{...v.value.events,...O},style:j.value,markerStart:`url('#${pn(v.value.markerStart,t)}')`,markerEnd:`url('#${pn(v.value.markerEnd,t)}')`,sourcePosition:he,targetPosition:we,sourceX:xe,sourceY:Me,targetX:Ke,targetY:Ut,sourceHandleId:v.value.sourceHandle,targetHandleId:v.value.targetHandle,interactionWidth:v.value.interactionWidth,...T}),[H.value==="source"||H.value===!0?[Ce("g",{onMousedown:fe,onMouseenter:oe,onMouseout:ge},Ce(ca,{position:he,centerX:xe,centerY:Me,radius:o.value,type:"source","data-type":"source"}))]:null,H.value==="target"||H.value===!0?[Ce("g",{onMousedown:me,onMouseenter:oe,onMouseout:ge},Ce(ca,{position:we,centerX:Ke,centerY:Ut,radius:o.value,type:"target","data-type":"target"}))]:null]])};function oe(){_.value=!0}function ge(){_.value=!1}function B(N,P){w.update({event:N,edge:v.value,connection:P})}function z(N){w.updateEnd({event:N,edge:v.value}),k.value=!1}function F(N,P){N.button===0&&(k.value=!0,x.value=P?v.value.target:v.value.source,I.value=(P?v.value.targetHandle:v.value.sourceHandle)??null,E.value=P?"target":"source",w.updateStart({event:N,edge:v.value}),J(N))}function q(N){var P;const T={event:N,edge:v.value};C.value&&(a.value=!1,v.value.selected&&h.value?(u([v.value]),(P=G.value)==null||P.blur()):n([v.value])),w.click(T)}function Q(N){w.contextMenu({event:N,edge:v.value})}function re(N){w.doubleClick({event:N,edge:v.value})}function le(N){w.mouseEnter({event:N,edge:v.value})}function _e(N){w.mouseMove({event:N,edge:v.value})}function Se(N){w.mouseLeave({event:N,edge:v.value})}function fe(N){F(N,!0)}function me(N){F(N,!1)}function $(N){var P;!g.value&&tl.includes(N.key)&&C.value&&(N.key==="Escape"?((P=G.value)==null||P.blur(),u([c(e.id)])):n([c(e.id)]))}}}),gm=hm,mm=ue({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:i,connectionEndHandle:o,connectionPosition:s,connectionLineType:a,connectionLineStyle:l,connectionLineOptions:r,connectionStatus:u,viewport:c,findNode:d}=Ie(),f=(e=Gt(po))==null?void 0:e["connection-line"],h=Z(()=>{var y;return d((y=i.value)==null?void 0:y.nodeId)}),g=Z(()=>{var y;return d((y=o.value)==null?void 0:y.nodeId)??null}),p=Z(()=>({x:(s.value.x-c.value.x)/c.value.zoom,y:(s.value.y-c.value.y)/c.value.zoom})),m=Z(()=>r.value.markerStart?`url(#${pn(r.value.markerStart,t)})`:""),b=Z(()=>r.value.markerEnd?`url(#${pn(r.value.markerEnd,t)})`:"");return()=>{var y,v,w;if(!h.value||!i.value)return null;const O=i.value.id,L=i.value.type,A=h.value.handleBounds;let _=A?.[L]??[];if(n.value===pt.Loose){const j=A?.[L==="source"?"target":"source"]??[];_=[..._,...j]}if(!_)return null;const k=(O?_.find(j=>j.id===O):_[0])??null,x=k?.position??ce.Top,{x:I,y:E}=Ht(h.value,k,x);let G=null;g.value&&(n.value===pt.Strict?G=((y=g.value.handleBounds[L==="source"?"target":"source"])==null?void 0:y.find(j=>{var K;return j.id===((K=o.value)==null?void 0:K.id)}))||null:G=((v=[...g.value.handleBounds.source??[],...g.value.handleBounds.target??[]])==null?void 0:v.find(j=>{var K;return j.id===((K=o.value)==null?void 0:K.id)}))||null);const C=((w=o.value)==null?void 0:w.position)??(x?Yi[x]:null);if(!x||!C)return null;const H=a.value??r.value.type??wt.Bezier;let V="";const W={sourceX:I,sourceY:E,sourcePosition:x,targetX:p.value.x,targetY:p.value.y,targetPosition:C};return H===wt.Bezier?[V]=kl(W):H===wt.Step?[V]=Ui({...W,borderRadius:0}):H===wt.SmoothStep?[V]=Ui(W):H===wt.SimpleBezier?[V]=Cl(W):V=`M${I},${E} ${p.value.x},${p.value.y}`,Ce("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Ce("g",{class:"vue-flow__connection"},f?Ce(f,{sourceX:I,sourceY:E,sourcePosition:x,targetX:p.value.x,targetY:p.value.y,targetPosition:C,sourceNode:h.value,sourceHandle:k,targetNode:g.value,targetHandle:G,markerEnd:b.value,markerStart:m.value,connectionStatus:u.value}):Ce("path",{d:V,class:[r.value.class,u.value,"vue-flow__connection-path"],style:{...l.value,...r.value.style},"marker-end":b.value,"marker-start":m.value})))}}}),vm=mm,pm=["id","markerWidth","markerHeight","markerUnits","orient"],ym={name:"MarkerType",compatConfig:{MODE:3}},_m=ue({...ym,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(S(),D("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===R(eo).ArrowClosed?(S(),D("polyline",{key:0,style:Fe({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):U("",!0),t.type===R(eo).Arrow?(S(),D("polyline",{key:1,style:Fe({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):U("",!0)],8,pm))}}),wm={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},bm={name:"MarkerDefinitions",compatConfig:{MODE:3}},xm=ue({...bm,setup(e){const{id:t,edges:n,connectionLineOptions:i,defaultMarkerColor:o}=Ie(),s=Z(()=>{const a=new Set,l=[],r=u=>{if(u){const c=pn(u,t);a.has(c)||(typeof u=="object"?l.push({...u,id:c,color:u.color||o.value}):l.push({id:c,color:o.value,type:u}),a.add(c))}};for(const u of[i.value.markerEnd,i.value.markerStart])r(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])r(c);return l.sort((u,c)=>u.id.localeCompare(c.id))});return(a,l)=>(S(),D("svg",wm,[M("defs",null,[(S(!0),D(pe,null,ze(s.value,r=>(S(),de(_m,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,"stroke-width":r.strokeWidth,orient:r.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Em={name:"Edges",compatConfig:{MODE:3}},Sm=ue({...Em,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:i}=Ie();return(o,s)=>(S(),D(pe,null,[ee(xm),(S(!0),D(pe,null,ze(R(n),a=>(S(),D("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:Fe({zIndex:R(Hh)(a,R(t),R(i))})},[ee(R(gm),{id:a.id},null,8,["id"])],4))),128)),ee(R(vm))],64))}}),km=ue({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:i,nodesSelectionActive:o,multiSelectionActive:s,emits:a,removeSelectedNodes:l,addSelectedNodes:r,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:g,ariaLiveMessage:p,snapToGrid:m,snapGrid:b,nodeDragThreshold:y,nodesDraggable:v,elementsSelectable:w,nodesConnectable:O,nodesFocusable:L,hooks:A}=Ie(),_=X(null);zt(pl,_),zt(vl,e.id);const k=Gt(po),x=qt(),I=bl(),{node:E,parentNode:G}=wl(e.id),{emit:C,on:H}=rg(E,a),V=Te(()=>typeof E.draggable>"u"?v.value:E.draggable),W=Te(()=>typeof E.selectable>"u"?w.value:E.selectable),j=Te(()=>typeof E.connectable>"u"?O.value:E.connectable),K=Te(()=>typeof E.focusable>"u"?L.value:E.focusable),J=Z(()=>W.value||V.value||A.value.nodeClick.hasListeners()||A.value.nodeDoubleClick.hasListeners()||A.value.nodeMouseEnter.hasListeners()||A.value.nodeMouseMove.hasListeners()||A.value.nodeMouseLeave.hasListeners()),oe=Te(()=>!!E.dimensions.width&&!!E.dimensions.height),ge=Z(()=>{const P=E.type||"default",T=k?.[`node-${P}`];if(T)return T;let Y=E.template||d.value[P];if(typeof Y=="string"&&x){const ie=Object.keys(x.appContext.components);ie&&ie.includes(P)&&(Y=es(P,!1))}return Y&&typeof Y!="string"?Y:(a.error(new Ae(Pe.NODE_TYPE_MISSING,Y)),!1)}),B=yl({id:e.id,el:_,disabled:()=>!V.value,selectable:W,dragHandle:()=>E.dragHandle,onStart(P){C.dragStart(P)},onDrag(P){C.drag(P)},onStop(P){C.dragStop(P)},onClick(P){$(P)}}),z=Z(()=>E.class instanceof Function?E.class(E):E.class),F=Z(()=>{const P=(E.style instanceof Function?E.style(E):E.style)||{},T=E.width instanceof Function?E.width(E):E.width,Y=E.height instanceof Function?E.height(E):E.height;return!P.width&&T&&(P.width=typeof T=="string"?T:`${T}px`),!P.height&&Y&&(P.height=typeof Y=="string"?Y:`${Y}px`),P}),q=Te(()=>Number(E.zIndex??F.value.zIndex??0));return c(P=>{(P.includes(e.id)||!P.length)&&re()}),Ve(()=>{ve(()=>E.hidden,(P=!1,T,Y)=>{!P&&_.value&&(e.resizeObserver.observe(_.value),Y(()=>{_.value&&e.resizeObserver.unobserve(_.value)}))},{immediate:!0,flush:"post"})}),ve([()=>E.type,()=>E.sourcePosition,()=>E.targetPosition],()=>{nt(()=>{u([{id:e.id,nodeElement:_.value,forceUpdate:!0}])})}),ve([()=>E.position.x,()=>E.position.y,()=>{var P;return(P=G.value)==null?void 0:P.computedPosition.x},()=>{var P;return(P=G.value)==null?void 0:P.computedPosition.y},()=>{var P;return(P=G.value)==null?void 0:P.computedPosition.z},q,()=>E.selected,()=>E.dimensions.height,()=>E.dimensions.width,()=>{var P;return(P=G.value)==null?void 0:P.dimensions.height},()=>{var P;return(P=G.value)==null?void 0:P.dimensions.width}],([P,T,Y,ie,se,ae])=>{const he={x:P,y:T,z:ae+(h.value&&E.selected?1e3:0)};typeof Y<"u"&&typeof ie<"u"?E.computedPosition=Lh({x:Y,y:ie,z:se},he):E.computedPosition=he},{flush:"post",immediate:!0}),ve([()=>E.extent,f],([P,T],[Y,ie])=>{(P!==Y||T!==ie)&&Q()}),E.extent==="parent"||typeof E.extent=="object"&&"range"in E.extent&&E.extent.range==="parent"?Ri(()=>oe).toBe(!0).then(Q):Q(),()=>E.hidden?null:Ce("div",{ref:_,"data-id":E.id,class:["vue-flow__node",`vue-flow__node-${ge.value===!1?"default":E.type||"default"}`,{[n.value]:V.value,dragging:B?.value,draggable:V.value,selected:E.selected,selectable:W.value,parent:E.isParent},z.value],style:{visibility:oe.value?"visible":"hidden",zIndex:E.computedPosition.z??q.value,transform:`translate(${E.computedPosition.x}px,${E.computedPosition.y}px)`,pointerEvents:J.value?"all":"none",...F.value},tabIndex:K.value?0:void 0,role:K.value?"group":void 0,"aria-describedby":g.value?void 0:`${Qr}-${t}`,"aria-label":E.ariaLabel,"aria-roledescription":"node",...E.domAttributes,onMouseenter:le,onMousemove:_e,onMouseleave:Se,onContextmenu:fe,onClick:$,onDblclick:me,onKeydown:N},[Ce(ge.value===!1?d.value.default:ge.value,{id:E.id,type:E.type,data:E.data,events:{...E.events,...H},selected:E.selected,resizing:E.resizing,dragging:B.value,connectable:j.value,position:E.computedPosition,dimensions:E.dimensions,isValidTargetPos:E.isValidTargetPos,isValidSourcePos:E.isValidSourcePos,parent:E.parentNode,parentNodeId:E.parentNode,zIndex:E.computedPosition.z??q.value,targetPosition:E.targetPosition,sourcePosition:E.sourcePosition,label:E.label,dragHandle:E.dragHandle,onUpdateNodeInternals:re})]);function Q(){const P=E.computedPosition,{computedPosition:T,position:Y}=fs(E,m.value?vo(P,b.value):P,a.error,f.value,G.value);(E.computedPosition.x!==T.x||E.computedPosition.y!==T.y)&&(E.computedPosition={...E.computedPosition,...T}),(E.position.x!==Y.x||E.position.y!==Y.y)&&(E.position=Y)}function re(){_.value&&u([{id:e.id,nodeElement:_.value,forceUpdate:!0}])}function le(P){B?.value||C.mouseEnter({event:P,node:E})}function _e(P){B?.value||C.mouseMove({event:P,node:E})}function Se(P){B?.value||C.mouseLeave({event:P,node:E})}function fe(P){return C.contextMenu({event:P,node:E})}function me(P){return C.doubleClick({event:P,node:E})}function $(P){W.value&&(!i.value||!V.value||y.value>0)&&Wi(E,s.value,r,l,o,!1,_.value),C.click({event:P,node:E})}function N(P){if(!(qi(P)||g.value))if(tl.includes(P.key)&&W.value){const T=P.key==="Escape";Wi(E,s.value,r,l,o,T,_.value)}else V.value&&E.selected&&Lt[P.key]&&(P.preventDefault(),p.value=`Moved selected node ${P.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~E.position.x}, y: ${~~E.position.y}`,I({x:Lt[P.key].x,y:Lt[P.key].y},P.shiftKey))}}}),Cm=km;function Mm(e={includeHiddenNodes:!1}){const{nodes:t}=Ie();return Z(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(n?.handleBounds===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const Nm={class:"vue-flow__nodes vue-flow__container"},$m={name:"Nodes",compatConfig:{MODE:3}},Im=ue({...$m,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:i}=Ie(),o=Mm(),s=X();return ve(o,a=>{a&&nt(()=>{i.nodesInitialized(t.value)})},{immediate:!0}),Ve(()=>{s.value=new ResizeObserver(a=>{const l=a.map(r=>({id:r.target.getAttribute("data-id"),nodeElement:r.target,forceUpdate:!0}));nt(()=>n(l))})}),ro(()=>{var a;return(a=s.value)==null?void 0:a.disconnect()}),(a,l)=>(S(),D("div",Nm,[s.value?(S(!0),D(pe,{key:0},ze(R(t),(r,u,c,d)=>{const f=[r.id];if(d&&d.key===r.id&&Kl(d,f))return d;const h=(S(),de(R(Cm),{id:r.id,key:r.id,"resize-observer":s.value},null,8,["id","resize-observer"]));return h.memo=f,h},l,0),128)):U("",!0)]))}});function Tm(){const{emits:e}=Ie();Ve(()=>{if(ml()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Ae(Pe.MISSING_STYLES))}})}const Dm=M("div",{class:"vue-flow__edge-labels"},null,-1),Om={name:"VueFlow",compatConfig:{MODE:3}},Pm=ue({...Om,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const i=e,o=jl(),s=So(i,"modelValue",n),a=So(i,"nodes",n),l=So(i,"edges",n),r=Ie(i),u=dg({modelValue:s,nodes:a,edges:l},i,r);return hg(n,r.hooks),cm(),Tm(),zt(po,o),vr(u),t(r),(c,d)=>(S(),D("div",{ref:R(r).vueFlowRef,class:"vue-flow"},[ee(im,null,{default:ke(()=>[ee(Sm),Dm,ee(Im),De(c.$slots,"zoom-pane")]),_:3}),De(c.$slots,"default"),ee(um)],512))}}),Rm={name:"Panel",compatConfig:{MODE:3}},Lm=ue({...Rm,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Ie(),i=Z(()=>`${t.position}`.split("-"));return(o,s)=>(S(),D("div",{class:Ee(["vue-flow__panel",i.value]),style:Fe({pointerEvents:R(n)?"none":"all"})},[De(o.$slots,"default")],6))}});var tt=(e=>(e.HttpFrom="NServiceBus.From",e.HttpTo="NServiceBus.To",e.RouteTo="NServiceBus.Header.RouteTo",e.DestinationSites="NServiceBus.DestinationSites",e.OriginatingSite="NServiceBus.OriginatingSite",e.SagaId="NServiceBus.SagaId",e.MessageId="NServiceBus.MessageId",e.CorrelationId="NServiceBus.CorrelationId",e.ReplyToAddress="NServiceBus.ReplyToAddress",e.NServiceBusVersion="NServiceBus.Version",e.ReturnMessageErrorCodeHeader="NServiceBus.ReturnMessage.ErrorCode",e.ControlMessageHeader="NServiceBus.ControlMessage",e.SagaType="NServiceBus.SagaType",e.OriginatingSagaId="NServiceBus.OriginatingSagaId",e.OriginatingSagaType="NServiceBus.OriginatingSagaType",e.DelayedRetries="NServiceBus.Retries",e.DelayedRetriesTimestamp="NServiceBus.Retries.Timestamp",e.ImmediateRetries="NServiceBus.FLRetries",e.ProcessingStarted="NServiceBus.ProcessingStarted",e.ProcessingEnded="NServiceBus.ProcessingEnded",e.TimeSent="NServiceBus.TimeSent",e.DeliverAt="NServiceBus.DeliverAt",e.RelatedTo="NServiceBus.RelatedTo",e.EnclosedMessageTypes="NServiceBus.EnclosedMessageTypes",e.ContentType="NServiceBus.ContentType",e.SubscriptionMessageType="SubscriptionMessageType",e.SubscriberTransportAddress="NServiceBus.SubscriberAddress",e.SubscriberEndpoint="NServiceBus.SubscriberEndpoint",e.IsSagaTimeoutMessage="NServiceBus.IsSagaTimeoutMessage",e.IsDeferredMessage="NServiceBus.IsDeferredMessage",e.OriginatingEndpoint="NServiceBus.OriginatingEndpoint",e.OriginatingMachine="NServiceBus.OriginatingMachine",e.OriginatingHostId="$.diagnostics.originating.hostid",e.ProcessingEndpoint="NServiceBus.ProcessingEndpoint",e.ProcessingMachine="NServiceBus.ProcessingMachine",e.HostDisplayName="$.diagnostics.hostdisplayname",e.HostId="$.diagnostics.hostid",e.HasLicenseExpired="$.diagnostics.license.expired",e.OriginatingAddress="NServiceBus.OriginatingAddress",e.ConversationId="NServiceBus.ConversationId",e.PreviousConversationId="NServiceBus.PreviousConversationId",e.MessageIntent="NServiceBus.MessageIntent",e.NonDurableMessage="NServiceBus.NonDurableMessage",e.TimeToBeReceived="NServiceBus.TimeToBeReceived",e.DiagnosticsTraceParent="traceparent",e.DiagnosticsTraceState="tracestate",e.DiagnosticsBaggage="baggage",e.DataBusConfigContentType="NServiceBus.DataBusConfig.ContentType",e.ExceptionInfoExceptionType="NServiceBus.ExceptionInfo.ExceptionType",e))(tt||{});const Am={name:"ControlButton",compatConfig:{MODE:3}},zm=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n},Vm={type:"button",class:"vue-flow__controls-button"};function Bm(e,t,n,i,o,s){return S(),D("button",Vm,[De(e.$slots,"default")])}const On=zm(Am,[["render",Bm]]),Fm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Hm=M("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Gm=[Hm];function qm(e,t){return S(),D("svg",Fm,Gm)}const Ym={render:qm},Wm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Um=M("path",{d:"M0 0h32v4.2H0z"},null,-1),jm=[Um];function Xm(e,t){return S(),D("svg",Wm,jm)}const Zm={render:Xm},Km={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Jm=M("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Qm=[Jm];function ev(e,t){return S(),D("svg",Km,Qm)}const tv={render:ev},nv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ov=M("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),iv=[ov];function sv(e,t){return S(),D("svg",nv,iv)}const av={render:sv},rv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lv=M("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),uv=[lv];function cv(e,t){return S(),D("svg",rv,uv)}const dv={render:cv},fv={name:"Controls",compatConfig:{MODE:3}},hv=ue({...fv,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Jr.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:i,elementsSelectable:o,setInteractive:s,zoomIn:a,zoomOut:l,fitView:r,viewport:u,minZoom:c,maxZoom:d}=Ie(),f=Te(()=>n.value||i.value||o.value),h=Te(()=>u.value.zoom<=c.value),g=Te(()=>u.value.zoom>=d.value);function p(){a(),t("zoomIn")}function m(){l(),t("zoomOut")}function b(){r(e.fitViewParams),t("fitView")}function y(){s(!f.value),t("interactionChange",!f.value)}return(v,w)=>(S(),de(R(Lm),{class:"vue-flow__controls",position:v.position},{default:ke(()=>[De(v.$slots,"top"),v.showZoom?(S(),D(pe,{key:0},[De(v.$slots,"control-zoom-in",{},()=>[ee(On,{class:"vue-flow__controls-zoomin",disabled:g.value,onClick:p},{default:ke(()=>[De(v.$slots,"icon-zoom-in",{},()=>[(S(),de(mt(R(Ym))))])]),_:3},8,["disabled"])]),De(v.$slots,"control-zoom-out",{},()=>[ee(On,{class:"vue-flow__controls-zoomout",disabled:h.value,onClick:m},{default:ke(()=>[De(v.$slots,"icon-zoom-out",{},()=>[(S(),de(mt(R(Zm))))])]),_:3},8,["disabled"])])],64)):U("",!0),v.showFitView?De(v.$slots,"control-fit-view",{key:1},()=>[ee(On,{class:"vue-flow__controls-fitview",onClick:b},{default:ke(()=>[De(v.$slots,"icon-fit-view",{},()=>[(S(),de(mt(R(tv))))])]),_:3})]):U("",!0),v.showInteractive?De(v.$slots,"control-interactive",{key:2},()=>[v.showInteractive?(S(),de(On,{key:0,class:"vue-flow__controls-interactive",onClick:y},{default:ke(()=>[f.value?De(v.$slots,"icon-unlock",{key:0},()=>[(S(),de(mt(R(dv))))]):U("",!0),f.value?U("",!0):De(v.$slots,"icon-lock",{key:1},()=>[(S(),de(mt(R(av))))])]),_:3})):U("",!0)]):U("",!0),De(v.$slots,"default")]),_:3},8,["position"]))}}),gv=ue({__name:"TextEllipses",props:{text:{},ellipsesStyle:{default:"RightSide"}},setup(e){const t=e,n=X(null),i=X(""),o=()=>{n.value&&(i.value=n.value.scrollWidth>n.value.clientWidth&&n.value.textContent||"")};return Ve(()=>{o()}),ve([()=>t.text],()=>{o()}),(s,a)=>{const l=ut("tippy");return Ne((S(),D("div",{ref_key:"textContainer",ref:n,title:"",class:Ee(["text-container hackToPreventSafariFromShowingTooltip",{"left-side-ellipsis":e.ellipsesStyle==="LeftSide"}])},[ye(ne(e.text),1)],2)),[[l,{content:i.value,maxWidth:"none"}]])}}}),nn=$e(gv,[["__scopeId","data-v-bf0d93c4"]]),mv=["title"],vv=ue({__name:"TypeNameDisplay",props:{typeName:{},maxWidth:{default:"auto"},ellipsesStyle:{default:"RightSide"},showRawType:{type:Boolean,default:!1}},setup(e){const t=e,n=Z(()=>t.showRawType?t.typeName:Ii(t.typeName)),i=Z(()=>t.showRawType?Ii(t.typeName):t.typeName);return(o,s)=>(S(),D("div",{class:"type-name-display",style:Fe({width:e.maxWidth}),title:i.value},[ee(nn,{text:n.value,"ellipses-style":e.ellipsesStyle},null,8,["text","ellipses-style"])],12,mv))}}),pv=$e(vv,[["__scopeId","data-v-009ff060"]]),yv=ue({__name:"SagaName",props:{sagaType:{},maxWidth:{default:"182px"},ellipsesStyle:{default:"LeftSide"},showTitle:{type:Boolean,default:!1},titleLevel:{default:"div"},cssClass:{default:"sagaName"}},setup(e){return(t,n)=>(S(),de(mt(e.showTitle?e.titleLevel:"div"),{class:Ee(e.cssClass),"aria-label":e.showTitle?"saga name":void 0},{default:ke(()=>[ee(pv,{"type-name":e.sagaType,"max-width":e.maxWidth,"ellipses-style":e.ellipsesStyle},null,8,["type-name","max-width","ellipses-style"])]),_:1},8,["class","aria-label"]))}}),_v=$e(yv,[["__scopeId","data-v-a50b1584"]]);var Ro,da;function ms(){if(da)return Ro;da=1;var e="\0",t="\0",n="";class i{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(c){c&&(this._isDirected=Object.hasOwn(c,"directed")?c.directed:!0,this._isMultigraph=Object.hasOwn(c,"multigraph")?c.multigraph:!1,this._isCompound=Object.hasOwn(c,"compound")?c.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[t]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(c){return this._label=c,this}graph(){return this._label}setDefaultNodeLabel(c){return this._defaultNodeLabelFn=c,typeof c!="function"&&(this._defaultNodeLabelFn=()=>c),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var c=this;return this.nodes().filter(d=>Object.keys(c._in[d]).length===0)}sinks(){var c=this;return this.nodes().filter(d=>Object.keys(c._out[d]).length===0)}setNodes(c,d){var f=arguments,h=this;return c.forEach(function(g){f.length>1?h.setNode(g,d):h.setNode(g)}),this}setNode(c,d){return Object.hasOwn(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)}node(c){return this._nodes[c]}hasNode(c){return Object.hasOwn(this._nodes,c)}removeNode(c){var d=this;if(Object.hasOwn(this._nodes,c)){var f=h=>d.removeEdge(d._edgeObjs[h]);delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],this.children(c).forEach(function(h){d.setParent(h)}),delete this._children[c]),Object.keys(this._in[c]).forEach(f),delete this._in[c],delete this._preds[c],Object.keys(this._out[c]).forEach(f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this}setParent(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(d===void 0)d=t;else{d+="";for(var f=d;f!==void 0;f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this}_removeFromParentsChildList(c){delete this._children[this._parent[c]][c]}parent(c){if(this._isCompound){var d=this._parent[c];if(d!==t)return d}}children(c=t){if(this._isCompound){var d=this._children[c];if(d)return Object.keys(d)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}}predecessors(c){var d=this._preds[c];if(d)return Object.keys(d)}successors(c){var d=this._sucs[c];if(d)return Object.keys(d)}neighbors(c){var d=this.predecessors(c);if(d){const h=new Set(d);for(var f of this.successors(c))h.add(f);return Array.from(h.values())}}isLeaf(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0}filterNodes(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;Object.entries(this._nodes).forEach(function([p,m]){c(p)&&d.setNode(p,m)}),Object.values(this._edgeObjs).forEach(function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,f.edge(p))});var h={};function g(p){var m=f.parent(p);return m===void 0||d.hasNode(m)?(h[p]=m,m):m in h?h[m]:g(m)}return this._isCompound&&d.nodes().forEach(p=>d.setParent(p,g(p))),d}setDefaultEdgeLabel(c){return this._defaultEdgeLabelFn=c,typeof c!="function"&&(this._defaultEdgeLabelFn=()=>c),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(c,d){var f=this,h=arguments;return c.reduce(function(g,p){return h.length>1?f.setEdge(g,p,d):f.setEdge(g,p),p}),this}setEdge(){var c,d,f,h,g=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,f=p.name,arguments.length===2&&(h=arguments[1],g=!0)):(c=p,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],g=!0)),c=""+c,d=""+d,f!==void 0&&(f=""+f);var m=a(this._isDirected,c,d,f);if(Object.hasOwn(this._edgeLabels,m))return g&&(this._edgeLabels[m]=h),this;if(f!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[m]=g?h:this._defaultEdgeLabelFn(c,d,f);var b=l(this._isDirected,c,d,f);return c=b.v,d=b.w,Object.freeze(b),this._edgeObjs[m]=b,o(this._preds[d],c),o(this._sucs[c],d),this._in[d][m]=b,this._out[c][m]=b,this._edgeCount++,this}edge(c,d,f){var h=arguments.length===1?r(this._isDirected,arguments[0]):a(this._isDirected,c,d,f);return this._edgeLabels[h]}edgeAsObj(){const c=this.edge(...arguments);return typeof c!="object"?{label:c}:c}hasEdge(c,d,f){var h=arguments.length===1?r(this._isDirected,arguments[0]):a(this._isDirected,c,d,f);return Object.hasOwn(this._edgeLabels,h)}removeEdge(c,d,f){var h=arguments.length===1?r(this._isDirected,arguments[0]):a(this._isDirected,c,d,f),g=this._edgeObjs[h];return g&&(c=g.v,d=g.w,delete this._edgeLabels[h],delete this._edgeObjs[h],s(this._preds[d],c),s(this._sucs[c],d),delete this._in[d][h],delete this._out[c][h],this._edgeCount--),this}inEdges(c,d){var f=this._in[c];if(f){var h=Object.values(f);return d?h.filter(g=>g.v===d):h}}outEdges(c,d){var f=this._out[c];if(f){var h=Object.values(f);return d?h.filter(g=>g.w===d):h}}nodeEdges(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))}}function o(u,c){u[c]?u[c]++:u[c]=1}function s(u,c){--u[c]||delete u[c]}function a(u,c,d,f){var h=""+c,g=""+d;if(!u&&h>g){var p=h;h=g,g=p}return h+n+g+n+(f===void 0?e:f)}function l(u,c,d,f){var h=""+c,g=""+d;if(!u&&h>g){var p=h;h=g,g=p}var m={v:h,w:g};return f&&(m.name=f),m}function r(u,c){return a(u,c.v,c.w,c.name)}return Ro=i,Ro}var Lo,fa;function wv(){return fa||(fa=1,Lo="2.2.4"),Lo}var Ao,ha;function bv(){return ha||(ha=1,Ao={Graph:ms(),version:wv()}),Ao}var zo,ga;function xv(){if(ga)return zo;ga=1;var e=ms();zo={write:t,read:o};function t(s){var a={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:i(s)};return s.graph()!==void 0&&(a.value=structuredClone(s.graph())),a}function n(s){return s.nodes().map(function(a){var l=s.node(a),r=s.parent(a),u={v:a};return l!==void 0&&(u.value=l),r!==void 0&&(u.parent=r),u})}function i(s){return s.edges().map(function(a){var l=s.edge(a),r={v:a.v,w:a.w};return a.name!==void 0&&(r.name=a.name),l!==void 0&&(r.value=l),r})}function o(s){var a=new e(s.options).setGraph(s.value);return s.nodes.forEach(function(l){a.setNode(l.v,l.value),l.parent&&a.setParent(l.v,l.parent)}),s.edges.forEach(function(l){a.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),a}return zo}var Vo,ma;function Ev(){if(ma)return Vo;ma=1,Vo=e;function e(t){var n={},i=[],o;function s(a){Object.hasOwn(n,a)||(n[a]=!0,o.push(a),t.successors(a).forEach(s),t.predecessors(a).forEach(s))}return t.nodes().forEach(function(a){o=[],s(a),o.length&&i.push(o)}),i}return Vo}var Bo,va;function Nl(){if(va)return Bo;va=1;class e{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,i){var o=this._keyIndices;if(n=String(n),!Object.hasOwn(o,n)){var s=this._arr,a=s.length;return o[n]=a,s.push({key:n,priority:i}),this._decrease(a),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,i){var o=this._keyIndices[n];if(i>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+i);this._arr[o].priority=i,this._decrease(o)}_heapify(n){var i=this._arr,o=2*n,s=o+1,a=n;o<i.length&&(a=i[o].priority<i[a].priority?o:a,s<i.length&&(a=i[s].priority<i[a].priority?s:a),a!==n&&(this._swap(n,a),this._heapify(a)))}_decrease(n){for(var i=this._arr,o=i[n].priority,s;n!==0&&(s=n>>1,!(i[s].priority<o));)this._swap(n,s),n=s}_swap(n,i){var o=this._arr,s=this._keyIndices,a=o[n],l=o[i];o[n]=l,o[i]=a,s[l.key]=n,s[a.key]=i}}return Bo=e,Bo}var Fo,pa;function $l(){if(pa)return Fo;pa=1;var e=Nl();Fo=n;var t=()=>1;function n(o,s,a,l){return i(o,String(s),a||t,l||function(r){return o.outEdges(r)})}function i(o,s,a,l){var r={},u=new e,c,d,f=function(h){var g=h.v!==c?h.v:h.w,p=r[g],m=a(h),b=d.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+m);b<p.distance&&(p.distance=b,p.predecessor=c,u.decrease(g,b))};for(o.nodes().forEach(function(h){var g=h===s?0:Number.POSITIVE_INFINITY;r[h]={distance:g},u.add(h,g)});u.size()>0&&(c=u.removeMin(),d=r[c],d.distance!==Number.POSITIVE_INFINITY);)l(c).forEach(f);return r}return Fo}var Ho,ya;function Sv(){if(ya)return Ho;ya=1;var e=$l();Ho=t;function t(n,i,o){return n.nodes().reduce(function(s,a){return s[a]=e(n,a,i,o),s},{})}return Ho}var Go,_a;function Il(){if(_a)return Go;_a=1,Go=e;function e(t){var n=0,i=[],o={},s=[];function a(l){var r=o[l]={onStack:!0,lowlink:n,index:n++};if(i.push(l),t.successors(l).forEach(function(d){Object.hasOwn(o,d)?o[d].onStack&&(r.lowlink=Math.min(r.lowlink,o[d].index)):(a(d),r.lowlink=Math.min(r.lowlink,o[d].lowlink))}),r.lowlink===r.index){var u=[],c;do c=i.pop(),o[c].onStack=!1,u.push(c);while(l!==c);s.push(u)}}return t.nodes().forEach(function(l){Object.hasOwn(o,l)||a(l)}),s}return Go}var qo,wa;function kv(){if(wa)return qo;wa=1;var e=Il();qo=t;function t(n){return e(n).filter(function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return qo}var Yo,ba;function Cv(){if(ba)return Yo;ba=1,Yo=t;var e=()=>1;function t(i,o,s){return n(i,o||e,s||function(a){return i.outEdges(a)})}function n(i,o,s){var a={},l=i.nodes();return l.forEach(function(r){a[r]={},a[r][r]={distance:0},l.forEach(function(u){r!==u&&(a[r][u]={distance:Number.POSITIVE_INFINITY})}),s(r).forEach(function(u){var c=u.v===r?u.w:u.v,d=o(u);a[r][c]={distance:d,predecessor:r}})}),l.forEach(function(r){var u=a[r];l.forEach(function(c){var d=a[c];l.forEach(function(f){var h=d[r],g=u[f],p=d[f],m=h.distance+g.distance;m<p.distance&&(p.distance=m,p.predecessor=g.predecessor)})})}),a}return Yo}var Wo,xa;function Tl(){if(xa)return Wo;xa=1;function e(n){var i={},o={},s=[];function a(l){if(Object.hasOwn(o,l))throw new t;Object.hasOwn(i,l)||(o[l]=!0,i[l]=!0,n.predecessors(l).forEach(a),delete o[l],s.push(l))}if(n.sinks().forEach(a),Object.keys(i).length!==n.nodeCount())throw new t;return s}class t extends Error{constructor(){super(...arguments)}}return Wo=e,e.CycleException=t,Wo}var Uo,Ea;function Mv(){if(Ea)return Uo;Ea=1;var e=Tl();Uo=t;function t(n){try{e(n)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Uo}var jo,Sa;function Dl(){if(Sa)return jo;Sa=1,jo=e;function e(o,s,a){Array.isArray(s)||(s=[s]);var l=o.isDirected()?d=>o.successors(d):d=>o.neighbors(d),r=a==="post"?t:n,u=[],c={};return s.forEach(d=>{if(!o.hasNode(d))throw new Error("Graph does not have node: "+d);r(d,l,c,u)}),u}function t(o,s,a,l){for(var r=[[o,!1]];r.length>0;){var u=r.pop();u[1]?l.push(u[0]):Object.hasOwn(a,u[0])||(a[u[0]]=!0,r.push([u[0],!0]),i(s(u[0]),c=>r.push([c,!1])))}}function n(o,s,a,l){for(var r=[o];r.length>0;){var u=r.pop();Object.hasOwn(a,u)||(a[u]=!0,l.push(u),i(s(u),c=>r.push(c)))}}function i(o,s){for(var a=o.length;a--;)s(o[a],a,o);return o}return jo}var Xo,ka;function Nv(){if(ka)return Xo;ka=1;var e=Dl();Xo=t;function t(n,i){return e(n,i,"post")}return Xo}var Zo,Ca;function $v(){if(Ca)return Zo;Ca=1;var e=Dl();Zo=t;function t(n,i){return e(n,i,"pre")}return Zo}var Ko,Ma;function Iv(){if(Ma)return Ko;Ma=1;var e=ms(),t=Nl();Ko=n;function n(i,o){var s=new e,a={},l=new t,r;function u(d){var f=d.v===r?d.w:d.v,h=l.priority(f);if(h!==void 0){var g=o(d);g<h&&(a[f]=r,l.decrease(f,g))}}if(i.nodeCount()===0)return s;i.nodes().forEach(function(d){l.add(d,Number.POSITIVE_INFINITY),s.setNode(d)}),l.decrease(i.nodes()[0],0);for(var c=!1;l.size()>0;){if(r=l.removeMin(),Object.hasOwn(a,r))s.setEdge(r,a[r]);else{if(c)throw new Error("Input graph is not connected: "+i);c=!0}i.nodeEdges(r).forEach(u)}return s}return Ko}var Jo,Na;function Tv(){return Na||(Na=1,Jo={components:Ev(),dijkstra:$l(),dijkstraAll:Sv(),findCycles:kv(),floydWarshall:Cv(),isAcyclic:Mv(),postorder:Nv(),preorder:$v(),prim:Iv(),tarjan:Il(),topsort:Tl()}),Jo}var Qo,$a;function Xe(){if($a)return Qo;$a=1;var e=bv();return Qo={Graph:e.Graph,json:xv(),alg:Tv(),version:e.version},Qo}var ei,Ia;function Dv(){if(Ia)return ei;Ia=1;class e{constructor(){let o={};o._next=o._prev=o,this._sentinel=o}dequeue(){let o=this._sentinel,s=o._prev;if(s!==o)return t(s),s}enqueue(o){let s=this._sentinel;o._prev&&o._next&&t(o),o._next=s._next,s._next._prev=o,s._next=o,o._prev=s}toString(){let o=[],s=this._sentinel,a=s._prev;for(;a!==s;)o.push(JSON.stringify(a,n)),a=a._prev;return"["+o.join(", ")+"]"}}function t(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function n(i,o){if(i!=="_next"&&i!=="_prev")return o}return ei=e,ei}var ti,Ta;function Ov(){if(Ta)return ti;Ta=1;let e=Xe().Graph,t=Dv();ti=i;let n=()=>1;function i(u,c){if(u.nodeCount()<=1)return[];let d=a(u,c||n);return o(d.graph,d.buckets,d.zeroIdx).flatMap(h=>u.outEdges(h.v,h.w))}function o(u,c,d){let f=[],h=c[c.length-1],g=c[0],p;for(;u.nodeCount();){for(;p=g.dequeue();)s(u,c,d,p);for(;p=h.dequeue();)s(u,c,d,p);if(u.nodeCount()){for(let m=c.length-2;m>0;--m)if(p=c[m].dequeue(),p){f=f.concat(s(u,c,d,p,!0));break}}}return f}function s(u,c,d,f,h){let g=h?[]:void 0;return u.inEdges(f.v).forEach(p=>{let m=u.edge(p),b=u.node(p.v);h&&g.push({v:p.v,w:p.w}),b.out-=m,l(c,d,b)}),u.outEdges(f.v).forEach(p=>{let m=u.edge(p),b=p.w,y=u.node(b);y.in-=m,l(c,d,y)}),u.removeNode(f.v),g}function a(u,c){let d=new e,f=0,h=0;u.nodes().forEach(m=>{d.setNode(m,{v:m,in:0,out:0})}),u.edges().forEach(m=>{let b=d.edge(m.v,m.w)||0,y=c(m),v=b+y;d.setEdge(m.v,m.w,v),h=Math.max(h,d.node(m.v).out+=y),f=Math.max(f,d.node(m.w).in+=y)});let g=r(h+f+3).map(()=>new t),p=f+1;return d.nodes().forEach(m=>{l(g,p,d.node(m))}),{graph:d,buckets:g,zeroIdx:p}}function l(u,c,d){d.out?d.in?u[d.out-d.in+c].enqueue(d):u[u.length-1].enqueue(d):u[0].enqueue(d)}function r(u){const c=[];for(let d=0;d<u;d++)c.push(d);return c}return ti}var ni,Da;function Re(){if(Da)return ni;Da=1;let e=Xe().Graph;ni={addBorderNode:c,addDummyNode:t,applyWithChunking:h,asNonCompoundGraph:i,buildLayerMatrix:l,intersectRect:a,mapValues:L,maxRank:g,normalizeRanks:r,notime:b,partition:p,pick:O,predecessorWeights:s,range:w,removeEmptyRanks:u,simplify:n,successorWeights:o,time:m,uniqueId:v,zipObject:A};function t(_,k,x,I){for(var E=I;_.hasNode(E);)E=v(I);return x.dummy=k,_.setNode(E,x),E}function n(_){let k=new e().setGraph(_.graph());return _.nodes().forEach(x=>k.setNode(x,_.node(x))),_.edges().forEach(x=>{let I=k.edge(x.v,x.w)||{weight:0,minlen:1},E=_.edge(x);k.setEdge(x.v,x.w,{weight:I.weight+E.weight,minlen:Math.max(I.minlen,E.minlen)})}),k}function i(_){let k=new e({multigraph:_.isMultigraph()}).setGraph(_.graph());return _.nodes().forEach(x=>{_.children(x).length||k.setNode(x,_.node(x))}),_.edges().forEach(x=>{k.setEdge(x,_.edge(x))}),k}function o(_){let k=_.nodes().map(x=>{let I={};return _.outEdges(x).forEach(E=>{I[E.w]=(I[E.w]||0)+_.edge(E).weight}),I});return A(_.nodes(),k)}function s(_){let k=_.nodes().map(x=>{let I={};return _.inEdges(x).forEach(E=>{I[E.v]=(I[E.v]||0)+_.edge(E).weight}),I});return A(_.nodes(),k)}function a(_,k){let x=_.x,I=_.y,E=k.x-x,G=k.y-I,C=_.width/2,H=_.height/2;if(!E&&!G)throw new Error("Not possible to find intersection inside of the rectangle");let V,W;return Math.abs(G)*C>Math.abs(E)*H?(G<0&&(H=-H),V=H*E/G,W=H):(E<0&&(C=-C),V=C,W=C*G/E),{x:x+V,y:I+W}}function l(_){let k=w(g(_)+1).map(()=>[]);return _.nodes().forEach(x=>{let I=_.node(x),E=I.rank;E!==void 0&&(k[E][I.order]=x)}),k}function r(_){let k=_.nodes().map(I=>{let E=_.node(I).rank;return E===void 0?Number.MAX_VALUE:E}),x=h(Math.min,k);_.nodes().forEach(I=>{let E=_.node(I);Object.hasOwn(E,"rank")&&(E.rank-=x)})}function u(_){let k=_.nodes().map(C=>_.node(C).rank),x=h(Math.min,k),I=[];_.nodes().forEach(C=>{let H=_.node(C).rank-x;I[H]||(I[H]=[]),I[H].push(C)});let E=0,G=_.graph().nodeRankFactor;Array.from(I).forEach((C,H)=>{C===void 0&&H%G!==0?--E:C!==void 0&&E&&C.forEach(V=>_.node(V).rank+=E)})}function c(_,k,x,I){let E={width:0,height:0};return arguments.length>=4&&(E.rank=x,E.order=I),t(_,"border",E,k)}function d(_,k=f){const x=[];for(let I=0;I<_.length;I+=k){const E=_.slice(I,I+k);x.push(E)}return x}const f=65535;function h(_,k){if(k.length>f){const x=d(k);return _.apply(null,x.map(I=>_.apply(null,I)))}else return _.apply(null,k)}function g(_){const x=_.nodes().map(I=>{let E=_.node(I).rank;return E===void 0?Number.MIN_VALUE:E});return h(Math.max,x)}function p(_,k){let x={lhs:[],rhs:[]};return _.forEach(I=>{k(I)?x.lhs.push(I):x.rhs.push(I)}),x}function m(_,k){let x=Date.now();try{return k()}finally{console.log(_+" time: "+(Date.now()-x)+"ms")}}function b(_,k){return k()}let y=0;function v(_){var k=++y;return _+(""+k)}function w(_,k,x=1){k==null&&(k=_,_=0);let I=G=>G<k;x<0&&(I=G=>k<G);const E=[];for(let G=_;I(G);G+=x)E.push(G);return E}function O(_,k){const x={};for(const I of k)_[I]!==void 0&&(x[I]=_[I]);return x}function L(_,k){let x=k;return typeof k=="string"&&(x=I=>I[k]),Object.entries(_).reduce((I,[E,G])=>(I[E]=x(G,E),I),{})}function A(_,k){return _.reduce((x,I,E)=>(x[I]=k[E],x),{})}return ni}var oi,Oa;function Pv(){if(Oa)return oi;Oa=1;let e=Ov(),t=Re().uniqueId;oi={run:n,undo:o};function n(s){(s.graph().acyclicer==="greedy"?e(s,l(s)):i(s)).forEach(r=>{let u=s.edge(r);s.removeEdge(r),u.forwardName=r.name,u.reversed=!0,s.setEdge(r.w,r.v,u,t("rev"))});function l(r){return u=>r.edge(u).weight}}function i(s){let a=[],l={},r={};function u(c){Object.hasOwn(r,c)||(r[c]=!0,l[c]=!0,s.outEdges(c).forEach(d=>{Object.hasOwn(l,d.w)?a.push(d):u(d.w)}),delete l[c])}return s.nodes().forEach(u),a}function o(s){s.edges().forEach(a=>{let l=s.edge(a);if(l.reversed){s.removeEdge(a);let r=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(a.w,a.v,l,r)}})}return oi}var ii,Pa;function Rv(){if(Pa)return ii;Pa=1;let e=Re();ii={run:t,undo:i};function t(o){o.graph().dummyChains=[],o.edges().forEach(s=>n(o,s))}function n(o,s){let a=s.v,l=o.node(a).rank,r=s.w,u=o.node(r).rank,c=s.name,d=o.edge(s),f=d.labelRank;if(u===l+1)return;o.removeEdge(s);let h,g,p;for(p=0,++l;l<u;++p,++l)d.points=[],g={width:0,height:0,edgeLabel:d,edgeObj:s,rank:l},h=e.addDummyNode(o,"edge",g,"_d"),l===f&&(g.width=d.width,g.height=d.height,g.dummy="edge-label",g.labelpos=d.labelpos),o.setEdge(a,h,{weight:d.weight},c),p===0&&o.graph().dummyChains.push(h),a=h;o.setEdge(a,r,{weight:d.weight},c)}function i(o){o.graph().dummyChains.forEach(s=>{let a=o.node(s),l=a.edgeLabel,r;for(o.setEdge(a.edgeObj,l);a.dummy;)r=o.successors(s)[0],o.removeNode(s),l.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(l.x=a.x,l.y=a.y,l.width=a.width,l.height=a.height),s=r,a=o.node(s)})}return ii}var si,Ra;function so(){if(Ra)return si;Ra=1;const{applyWithChunking:e}=Re();si={longestPath:t,slack:n};function t(i){var o={};function s(a){var l=i.node(a);if(Object.hasOwn(o,a))return l.rank;o[a]=!0;let r=i.outEdges(a).map(c=>c==null?Number.POSITIVE_INFINITY:s(c.w)-i.edge(c).minlen);var u=e(Math.min,r);return u===Number.POSITIVE_INFINITY&&(u=0),l.rank=u}i.sources().forEach(s)}function n(i,o){return i.node(o.w).rank-i.node(o.v).rank-i.edge(o).minlen}return si}var ai,La;function Ol(){if(La)return ai;La=1;var e=Xe().Graph,t=so().slack;ai=n;function n(a){var l=new e({directed:!1}),r=a.nodes()[0],u=a.nodeCount();l.setNode(r,{});for(var c,d;i(l,a)<u;)c=o(l,a),d=l.hasNode(c.v)?t(a,c):-t(a,c),s(l,a,d);return l}function i(a,l){function r(u){l.nodeEdges(u).forEach(c=>{var d=c.v,f=u===d?c.w:d;!a.hasNode(f)&&!t(l,c)&&(a.setNode(f,{}),a.setEdge(u,f,{}),r(f))})}return a.nodes().forEach(r),a.nodeCount()}function o(a,l){return l.edges().reduce((u,c)=>{let d=Number.POSITIVE_INFINITY;return a.hasNode(c.v)!==a.hasNode(c.w)&&(d=t(l,c)),d<u[0]?[d,c]:u},[Number.POSITIVE_INFINITY,null])[1]}function s(a,l,r){a.nodes().forEach(u=>l.node(u).rank+=r)}return ai}var ri,Aa;function Lv(){if(Aa)return ri;Aa=1;var e=Ol(),t=so().slack,n=so().longestPath,i=Xe().alg.preorder,o=Xe().alg.postorder,s=Re().simplify;ri=a,a.initLowLimValues=c,a.initCutValues=l,a.calcCutValue=u,a.leaveEdge=f,a.enterEdge=h,a.exchangeEdges=g;function a(y){y=s(y),n(y);var v=e(y);c(v),l(v,y);for(var w,O;w=f(v);)O=h(v,y,w),g(v,y,w,O)}function l(y,v){var w=o(y,y.nodes());w=w.slice(0,w.length-1),w.forEach(O=>r(y,v,O))}function r(y,v,w){var O=y.node(w),L=O.parent;y.edge(w,L).cutvalue=u(y,v,w)}function u(y,v,w){var O=y.node(w),L=O.parent,A=!0,_=v.edge(w,L),k=0;return _||(A=!1,_=v.edge(L,w)),k=_.weight,v.nodeEdges(w).forEach(x=>{var I=x.v===w,E=I?x.w:x.v;if(E!==L){var G=I===A,C=v.edge(x).weight;if(k+=G?C:-C,m(y,w,E)){var H=y.edge(w,E).cutvalue;k+=G?-H:H}}}),k}function c(y,v){arguments.length<2&&(v=y.nodes()[0]),d(y,{},1,v)}function d(y,v,w,O,L){var A=w,_=y.node(O);return v[O]=!0,y.neighbors(O).forEach(k=>{Object.hasOwn(v,k)||(w=d(y,v,w,k,O))}),_.low=A,_.lim=w++,L?_.parent=L:delete _.parent,w}function f(y){return y.edges().find(v=>y.edge(v).cutvalue<0)}function h(y,v,w){var O=w.v,L=w.w;v.hasEdge(O,L)||(O=w.w,L=w.v);var A=y.node(O),_=y.node(L),k=A,x=!1;A.lim>_.lim&&(k=_,x=!0);var I=v.edges().filter(E=>x===b(y,y.node(E.v),k)&&x!==b(y,y.node(E.w),k));return I.reduce((E,G)=>t(v,G)<t(v,E)?G:E)}function g(y,v,w,O){var L=w.v,A=w.w;y.removeEdge(L,A),y.setEdge(O.v,O.w,{}),c(y),l(y,v),p(y,v)}function p(y,v){var w=y.nodes().find(L=>!v.node(L).parent),O=i(y,w);O=O.slice(1),O.forEach(L=>{var A=y.node(L).parent,_=v.edge(L,A),k=!1;_||(_=v.edge(A,L),k=!0),v.node(L).rank=v.node(A).rank+(k?_.minlen:-_.minlen)})}function m(y,v,w){return y.hasEdge(v,w)}function b(y,v,w){return w.low<=v.lim&&v.lim<=w.lim}return ri}var li,za;function Av(){if(za)return li;za=1;var e=so(),t=e.longestPath,n=Ol(),i=Lv();li=o;function o(r){var u=r.graph().ranker;if(u instanceof Function)return u(r);switch(r.graph().ranker){case"network-simplex":l(r);break;case"tight-tree":a(r);break;case"longest-path":s(r);break;case"none":break;default:l(r)}}var s=t;function a(r){t(r),n(r)}function l(r){i(r)}return li}var ui,Va;function zv(){if(Va)return ui;Va=1,ui=e;function e(i){let o=n(i);i.graph().dummyChains.forEach(s=>{let a=i.node(s),l=a.edgeObj,r=t(i,o,l.v,l.w),u=r.path,c=r.lca,d=0,f=u[d],h=!0;for(;s!==l.w;){if(a=i.node(s),h){for(;(f=u[d])!==c&&i.node(f).maxRank<a.rank;)d++;f===c&&(h=!1)}if(!h){for(;d<u.length-1&&i.node(f=u[d+1]).minRank<=a.rank;)d++;f=u[d]}i.setParent(s,f),s=i.successors(s)[0]}})}function t(i,o,s,a){let l=[],r=[],u=Math.min(o[s].low,o[a].low),c=Math.max(o[s].lim,o[a].lim),d,f;d=s;do d=i.parent(d),l.push(d);while(d&&(o[d].low>u||c>o[d].lim));for(f=d,d=a;(d=i.parent(d))!==f;)r.push(d);return{path:l.concat(r.reverse()),lca:f}}function n(i){let o={},s=0;function a(l){let r=s;i.children(l).forEach(a),o[l]={low:r,lim:s++}}return i.children().forEach(a),o}return ui}var ci,Ba;function Vv(){if(Ba)return ci;Ba=1;let e=Re();ci={run:t,cleanup:s};function t(a){let l=e.addDummyNode(a,"root",{},"_root"),r=i(a),u=Object.values(r),c=e.applyWithChunking(Math.max,u)-1,d=2*c+1;a.graph().nestingRoot=l,a.edges().forEach(h=>a.edge(h).minlen*=d);let f=o(a)+1;a.children().forEach(h=>n(a,l,d,f,c,r,h)),a.graph().nodeRankFactor=d}function n(a,l,r,u,c,d,f){let h=a.children(f);if(!h.length){f!==l&&a.setEdge(l,f,{weight:0,minlen:r});return}let g=e.addBorderNode(a,"_bt"),p=e.addBorderNode(a,"_bb"),m=a.node(f);a.setParent(g,f),m.borderTop=g,a.setParent(p,f),m.borderBottom=p,h.forEach(b=>{n(a,l,r,u,c,d,b);let y=a.node(b),v=y.borderTop?y.borderTop:b,w=y.borderBottom?y.borderBottom:b,O=y.borderTop?u:2*u,L=v!==w?1:c-d[f]+1;a.setEdge(g,v,{weight:O,minlen:L,nestingEdge:!0}),a.setEdge(w,p,{weight:O,minlen:L,nestingEdge:!0})}),a.parent(f)||a.setEdge(l,g,{weight:0,minlen:c+d[f]})}function i(a){var l={};function r(u,c){var d=a.children(u);d&&d.length&&d.forEach(f=>r(f,c+1)),l[u]=c}return a.children().forEach(u=>r(u,1)),l}function o(a){return a.edges().reduce((l,r)=>l+a.edge(r).weight,0)}function s(a){var l=a.graph();a.removeNode(l.nestingRoot),delete l.nestingRoot,a.edges().forEach(r=>{var u=a.edge(r);u.nestingEdge&&a.removeEdge(r)})}return ci}var di,Fa;function Bv(){if(Fa)return di;Fa=1;let e=Re();di=t;function t(i){function o(s){let a=i.children(s),l=i.node(s);if(a.length&&a.forEach(o),Object.hasOwn(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(let r=l.minRank,u=l.maxRank+1;r<u;++r)n(i,"borderLeft","_bl",s,l,r),n(i,"borderRight","_br",s,l,r)}}i.children().forEach(o)}function n(i,o,s,a,l,r){let u={width:0,height:0,rank:r,borderType:o},c=l[o][r-1],d=e.addDummyNode(i,"border",u,s);l[o][r]=d,i.setParent(d,a),c&&i.setEdge(c,d,{weight:1})}return di}var fi,Ha;function Fv(){if(Ha)return fi;Ha=1,fi={adjust:e,undo:t};function e(r){let u=r.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&n(r)}function t(r){let u=r.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&o(r),(u==="lr"||u==="rl")&&(a(r),n(r))}function n(r){r.nodes().forEach(u=>i(r.node(u))),r.edges().forEach(u=>i(r.edge(u)))}function i(r){let u=r.width;r.width=r.height,r.height=u}function o(r){r.nodes().forEach(u=>s(r.node(u))),r.edges().forEach(u=>{let c=r.edge(u);c.points.forEach(s),Object.hasOwn(c,"y")&&s(c)})}function s(r){r.y=-r.y}function a(r){r.nodes().forEach(u=>l(r.node(u))),r.edges().forEach(u=>{let c=r.edge(u);c.points.forEach(l),Object.hasOwn(c,"x")&&l(c)})}function l(r){let u=r.x;r.x=r.y,r.y=u}return fi}var hi,Ga;function Hv(){if(Ga)return hi;Ga=1;let e=Re();hi=t;function t(n){let i={},o=n.nodes().filter(c=>!n.children(c).length),s=o.map(c=>n.node(c).rank),a=e.applyWithChunking(Math.max,s),l=e.range(a+1).map(()=>[]);function r(c){if(i[c])return;i[c]=!0;let d=n.node(c);l[d.rank].push(c),n.successors(c).forEach(r)}return o.sort((c,d)=>n.node(c).rank-n.node(d).rank).forEach(r),l}return hi}var gi,qa;function Gv(){if(qa)return gi;qa=1;let e=Re().zipObject;gi=t;function t(i,o){let s=0;for(let a=1;a<o.length;++a)s+=n(i,o[a-1],o[a]);return s}function n(i,o,s){let a=e(s,s.map((f,h)=>h)),l=o.flatMap(f=>i.outEdges(f).map(h=>({pos:a[h.w],weight:i.edge(h).weight})).sort((h,g)=>h.pos-g.pos)),r=1;for(;r<s.length;)r<<=1;let u=2*r-1;r-=1;let c=new Array(u).fill(0),d=0;return l.forEach(f=>{let h=f.pos+r;c[h]+=f.weight;let g=0;for(;h>0;)h%2&&(g+=c[h+1]),h=h-1>>1,c[h]+=f.weight;d+=f.weight*g}),d}return gi}var mi,Ya;function qv(){if(Ya)return mi;Ya=1,mi=e;function e(t,n=[]){return n.map(i=>{let o=t.inEdges(i);if(o.length){let s=o.reduce((a,l)=>{let r=t.edge(l),u=t.node(l.v);return{sum:a.sum+r.weight*u.order,weight:a.weight+r.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return mi}var vi,Wa;function Yv(){if(Wa)return vi;Wa=1;let e=Re();vi=t;function t(o,s){let a={};o.forEach((r,u)=>{let c=a[r.v]={indegree:0,in:[],out:[],vs:[r.v],i:u};r.barycenter!==void 0&&(c.barycenter=r.barycenter,c.weight=r.weight)}),s.edges().forEach(r=>{let u=a[r.v],c=a[r.w];u!==void 0&&c!==void 0&&(c.indegree++,u.out.push(a[r.w]))});let l=Object.values(a).filter(r=>!r.indegree);return n(l)}function n(o){let s=[];function a(r){return u=>{u.merged||(u.barycenter===void 0||r.barycenter===void 0||u.barycenter>=r.barycenter)&&i(r,u)}}function l(r){return u=>{u.in.push(r),--u.indegree===0&&o.push(u)}}for(;o.length;){let r=o.pop();s.push(r),r.in.reverse().forEach(a(r)),r.out.forEach(l(r))}return s.filter(r=>!r.merged).map(r=>e.pick(r,["vs","i","barycenter","weight"]))}function i(o,s){let a=0,l=0;o.weight&&(a+=o.barycenter*o.weight,l+=o.weight),s.weight&&(a+=s.barycenter*s.weight,l+=s.weight),o.vs=s.vs.concat(o.vs),o.barycenter=a/l,o.weight=l,o.i=Math.min(s.i,o.i),s.merged=!0}return vi}var pi,Ua;function Wv(){if(Ua)return pi;Ua=1;let e=Re();pi=t;function t(o,s){let a=e.partition(o,g=>Object.hasOwn(g,"barycenter")),l=a.lhs,r=a.rhs.sort((g,p)=>p.i-g.i),u=[],c=0,d=0,f=0;l.sort(i(!!s)),f=n(u,r,f),l.forEach(g=>{f+=g.vs.length,u.push(g.vs),c+=g.barycenter*g.weight,d+=g.weight,f=n(u,r,f)});let h={vs:u.flat(!0)};return d&&(h.barycenter=c/d,h.weight=d),h}function n(o,s,a){let l;for(;s.length&&(l=s[s.length-1]).i<=a;)s.pop(),o.push(l.vs),a++;return a}function i(o){return(s,a)=>s.barycenter<a.barycenter?-1:s.barycenter>a.barycenter?1:o?a.i-s.i:s.i-a.i}return pi}var yi,ja;function Uv(){if(ja)return yi;ja=1;let e=qv(),t=Yv(),n=Wv();yi=i;function i(a,l,r,u){let c=a.children(l),d=a.node(l),f=d?d.borderLeft:void 0,h=d?d.borderRight:void 0,g={};f&&(c=c.filter(y=>y!==f&&y!==h));let p=e(a,c);p.forEach(y=>{if(a.children(y.v).length){let v=i(a,y.v,r,u);g[y.v]=v,Object.hasOwn(v,"barycenter")&&s(y,v)}});let m=t(p,r);o(m,g);let b=n(m,u);if(f&&(b.vs=[f,b.vs,h].flat(!0),a.predecessors(f).length)){let y=a.node(a.predecessors(f)[0]),v=a.node(a.predecessors(h)[0]);Object.hasOwn(b,"barycenter")||(b.barycenter=0,b.weight=0),b.barycenter=(b.barycenter*b.weight+y.order+v.order)/(b.weight+2),b.weight+=2}return b}function o(a,l){a.forEach(r=>{r.vs=r.vs.flatMap(u=>l[u]?l[u].vs:u)})}function s(a,l){a.barycenter!==void 0?(a.barycenter=(a.barycenter*a.weight+l.barycenter*l.weight)/(a.weight+l.weight),a.weight+=l.weight):(a.barycenter=l.barycenter,a.weight=l.weight)}return yi}var _i,Xa;function jv(){if(Xa)return _i;Xa=1;let e=Xe().Graph,t=Re();_i=n;function n(o,s,a,l){l||(l=o.nodes());let r=i(o),u=new e({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(c=>o.node(c));return l.forEach(c=>{let d=o.node(c),f=o.parent(c);(d.rank===s||d.minRank<=s&&s<=d.maxRank)&&(u.setNode(c),u.setParent(c,f||r),o[a](c).forEach(h=>{let g=h.v===c?h.w:h.v,p=u.edge(g,c),m=p!==void 0?p.weight:0;u.setEdge(g,c,{weight:o.edge(h).weight+m})}),Object.hasOwn(d,"minRank")&&u.setNode(c,{borderLeft:d.borderLeft[s],borderRight:d.borderRight[s]}))}),u}function i(o){for(var s;o.hasNode(s=t.uniqueId("_root")););return s}return _i}var wi,Za;function Xv(){if(Za)return wi;Za=1,wi=e;function e(t,n,i){let o={},s;i.forEach(a=>{let l=t.parent(a),r,u;for(;l;){if(r=t.parent(l),r?(u=o[r],o[r]=l):(u=s,s=l),u&&u!==l){n.setEdge(u,l);return}l=r}})}return wi}var bi,Ka;function Zv(){if(Ka)return bi;Ka=1;let e=Hv(),t=Gv(),n=Uv(),i=jv(),o=Xv(),s=Xe().Graph,a=Re();bi=l;function l(d,f){if(f&&typeof f.customOrder=="function"){f.customOrder(d,l);return}let h=a.maxRank(d),g=r(d,a.range(1,h+1),"inEdges"),p=r(d,a.range(h-1,-1,-1),"outEdges"),m=e(d);if(c(d,m),f&&f.disableOptimalOrderHeuristic)return;let b=Number.POSITIVE_INFINITY,y;for(let v=0,w=0;w<4;++v,++w){u(v%2?g:p,v%4>=2),m=a.buildLayerMatrix(d);let O=t(d,m);O<b&&(w=0,y=Object.assign({},m),b=O)}c(d,y)}function r(d,f,h){const g=new Map,p=(m,b)=>{g.has(m)||g.set(m,[]),g.get(m).push(b)};for(const m of d.nodes()){const b=d.node(m);if(typeof b.rank=="number"&&p(b.rank,m),typeof b.minRank=="number"&&typeof b.maxRank=="number")for(let y=b.minRank;y<=b.maxRank;y++)y!==b.rank&&p(y,m)}return f.map(function(m){return i(d,m,h,g.get(m)||[])})}function u(d,f){let h=new s;d.forEach(function(g){let p=g.graph().root,m=n(g,p,h,f);m.vs.forEach((b,y)=>g.node(b).order=y),o(g,h,m.vs)})}function c(d,f){Object.values(f).forEach(h=>h.forEach((g,p)=>d.node(g).order=p))}return bi}var xi,Ja;function Kv(){if(Ja)return xi;Ja=1;let e=Xe().Graph,t=Re();xi={positionX:h,findType1Conflicts:n,findType2Conflicts:i,addConflict:s,hasConflict:a,verticalAlignment:l,horizontalCompaction:r,alignCoordinates:d,findSmallestWidthAlignment:c,balance:f};function n(m,b){let y={};function v(w,O){let L=0,A=0,_=w.length,k=O[O.length-1];return O.forEach((x,I)=>{let E=o(m,x),G=E?m.node(E).order:_;(E||x===k)&&(O.slice(A,I+1).forEach(C=>{m.predecessors(C).forEach(H=>{let V=m.node(H),W=V.order;(W<L||G<W)&&!(V.dummy&&m.node(C).dummy)&&s(y,H,C)})}),A=I+1,L=G)}),O}return b.length&&b.reduce(v),y}function i(m,b){let y={};function v(O,L,A,_,k){let x;t.range(L,A).forEach(I=>{x=O[I],m.node(x).dummy&&m.predecessors(x).forEach(E=>{let G=m.node(E);G.dummy&&(G.order<_||G.order>k)&&s(y,E,x)})})}function w(O,L){let A=-1,_,k=0;return L.forEach((x,I)=>{if(m.node(x).dummy==="border"){let E=m.predecessors(x);E.length&&(_=m.node(E[0]).order,v(L,k,I,A,_),k=I,A=_)}v(L,k,L.length,_,O.length)}),L}return b.length&&b.reduce(w),y}function o(m,b){if(m.node(b).dummy)return m.predecessors(b).find(y=>m.node(y).dummy)}function s(m,b,y){if(b>y){let w=b;b=y,y=w}let v=m[b];v||(m[b]=v={}),v[y]=!0}function a(m,b,y){if(b>y){let v=b;b=y,y=v}return!!m[b]&&Object.hasOwn(m[b],y)}function l(m,b,y,v){let w={},O={},L={};return b.forEach(A=>{A.forEach((_,k)=>{w[_]=_,O[_]=_,L[_]=k})}),b.forEach(A=>{let _=-1;A.forEach(k=>{let x=v(k);if(x.length){x=x.sort((E,G)=>L[E]-L[G]);let I=(x.length-1)/2;for(let E=Math.floor(I),G=Math.ceil(I);E<=G;++E){let C=x[E];O[k]===k&&_<L[C]&&!a(y,k,C)&&(O[C]=k,O[k]=w[k]=w[C],_=L[C])}}})}),{root:w,align:O}}function r(m,b,y,v,w){let O={},L=u(m,b,y,w),A=w?"borderLeft":"borderRight";function _(I,E){let G=L.nodes(),C=G.pop(),H={};for(;C;)H[C]?I(C):(H[C]=!0,G.push(C),G=G.concat(E(C))),C=G.pop()}function k(I){O[I]=L.inEdges(I).reduce((E,G)=>Math.max(E,O[G.v]+L.edge(G)),0)}function x(I){let E=L.outEdges(I).reduce((C,H)=>Math.min(C,O[H.w]-L.edge(H)),Number.POSITIVE_INFINITY),G=m.node(I);E!==Number.POSITIVE_INFINITY&&G.borderType!==A&&(O[I]=Math.max(O[I],E))}return _(k,L.predecessors.bind(L)),_(x,L.successors.bind(L)),Object.keys(v).forEach(I=>O[I]=O[y[I]]),O}function u(m,b,y,v){let w=new e,O=m.graph(),L=g(O.nodesep,O.edgesep,v);return b.forEach(A=>{let _;A.forEach(k=>{let x=y[k];if(w.setNode(x),_){var I=y[_],E=w.edge(I,x);w.setEdge(I,x,Math.max(L(m,k,_),E||0))}_=k})}),w}function c(m,b){return Object.values(b).reduce((y,v)=>{let w=Number.NEGATIVE_INFINITY,O=Number.POSITIVE_INFINITY;Object.entries(v).forEach(([A,_])=>{let k=p(m,A)/2;w=Math.max(_+k,w),O=Math.min(_-k,O)});const L=w-O;return L<y[0]&&(y=[L,v]),y},[Number.POSITIVE_INFINITY,null])[1]}function d(m,b){let y=Object.values(b),v=t.applyWithChunking(Math.min,y),w=t.applyWithChunking(Math.max,y);["u","d"].forEach(O=>{["l","r"].forEach(L=>{let A=O+L,_=m[A];if(_===b)return;let k=Object.values(_),x=v-t.applyWithChunking(Math.min,k);L!=="l"&&(x=w-t.applyWithChunking(Math.max,k)),x&&(m[A]=t.mapValues(_,I=>I+x))})})}function f(m,b){return t.mapValues(m.ul,(y,v)=>{if(b)return m[b.toLowerCase()][v];{let w=Object.values(m).map(O=>O[v]).sort((O,L)=>O-L);return(w[1]+w[2])/2}})}function h(m){let b=t.buildLayerMatrix(m),y=Object.assign(n(m,b),i(m,b)),v={},w;["u","d"].forEach(L=>{w=L==="u"?b:Object.values(b).reverse(),["l","r"].forEach(A=>{A==="r"&&(w=w.map(I=>Object.values(I).reverse()));let _=(L==="u"?m.predecessors:m.successors).bind(m),k=l(m,w,y,_),x=r(m,w,k.root,k.align,A==="r");A==="r"&&(x=t.mapValues(x,I=>-I)),v[L+A]=x})});let O=c(m,v);return d(v,O),f(v,m.graph().align)}function g(m,b,y){return(v,w,O)=>{let L=v.node(w),A=v.node(O),_=0,k;if(_+=L.width/2,Object.hasOwn(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":k=-L.width/2;break;case"r":k=L.width/2;break}if(k&&(_+=y?k:-k),k=0,_+=(L.dummy?b:m)/2,_+=(A.dummy?b:m)/2,_+=A.width/2,Object.hasOwn(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":k=A.width/2;break;case"r":k=-A.width/2;break}return k&&(_+=y?k:-k),k=0,_}}function p(m,b){return m.node(b).width}return xi}var Ei,Qa;function Jv(){if(Qa)return Ei;Qa=1;let e=Re(),t=Kv().positionX;Ei=n;function n(o){o=e.asNonCompoundGraph(o),i(o),Object.entries(t(o)).forEach(([s,a])=>o.node(s).x=a)}function i(o){let s=e.buildLayerMatrix(o),a=o.graph().ranksep,l=0;s.forEach(r=>{const u=r.reduce((c,d)=>{const f=o.node(d).height;return c>f?c:f},0);r.forEach(c=>o.node(c).y=l+u/2),l+=u+a})}return Ei}var Si,er;function Qv(){if(er)return Si;er=1;let e=Pv(),t=Rv(),n=Av(),i=Re().normalizeRanks,o=zv(),s=Re().removeEmptyRanks,a=Vv(),l=Bv(),r=Fv(),u=Zv(),c=Jv(),d=Re(),f=Xe().Graph;Si=h;function h(B,z){let F=z&&z.debugTiming?d.time:d.notime;F("layout",()=>{let q=F("  buildLayoutGraph",()=>_(B));F("  runLayout",()=>g(q,F,z)),F("  updateInputGraph",()=>p(B,q))})}function g(B,z,F){z("    makeSpaceForEdgeLabels",()=>k(B)),z("    removeSelfEdges",()=>j(B)),z("    acyclic",()=>e.run(B)),z("    nestingGraph.run",()=>a.run(B)),z("    rank",()=>n(d.asNonCompoundGraph(B))),z("    injectEdgeLabelProxies",()=>x(B)),z("    removeEmptyRanks",()=>s(B)),z("    nestingGraph.cleanup",()=>a.cleanup(B)),z("    normalizeRanks",()=>i(B)),z("    assignRankMinMax",()=>I(B)),z("    removeEdgeLabelProxies",()=>E(B)),z("    normalize.run",()=>t.run(B)),z("    parentDummyChains",()=>o(B)),z("    addBorderSegments",()=>l(B)),z("    order",()=>u(B,F)),z("    insertSelfEdges",()=>K(B)),z("    adjustCoordinateSystem",()=>r.adjust(B)),z("    position",()=>c(B)),z("    positionSelfEdges",()=>J(B)),z("    removeBorderNodes",()=>W(B)),z("    normalize.undo",()=>t.undo(B)),z("    fixupEdgeLabelCoords",()=>H(B)),z("    undoCoordinateSystem",()=>r.undo(B)),z("    translateGraph",()=>G(B)),z("    assignNodeIntersects",()=>C(B)),z("    reversePoints",()=>V(B)),z("    acyclic.undo",()=>e.undo(B))}function p(B,z){B.nodes().forEach(F=>{let q=B.node(F),Q=z.node(F);q&&(q.x=Q.x,q.y=Q.y,q.rank=Q.rank,z.children(F).length&&(q.width=Q.width,q.height=Q.height))}),B.edges().forEach(F=>{let q=B.edge(F),Q=z.edge(F);q.points=Q.points,Object.hasOwn(Q,"x")&&(q.x=Q.x,q.y=Q.y)}),B.graph().width=z.graph().width,B.graph().height=z.graph().height}let m=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],v=["width","height","rank"],w={width:0,height:0},O=["minlen","weight","width","height","labeloffset"],L={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"];function _(B){let z=new f({multigraph:!0,compound:!0}),F=ge(B.graph());return z.setGraph(Object.assign({},b,oe(F,m),d.pick(F,y))),B.nodes().forEach(q=>{let Q=ge(B.node(q));const re=oe(Q,v);Object.keys(w).forEach(le=>{re[le]===void 0&&(re[le]=w[le])}),z.setNode(q,re),z.setParent(q,B.parent(q))}),B.edges().forEach(q=>{let Q=ge(B.edge(q));z.setEdge(q,Object.assign({},L,oe(Q,O),d.pick(Q,A)))}),z}function k(B){let z=B.graph();z.ranksep/=2,B.edges().forEach(F=>{let q=B.edge(F);q.minlen*=2,q.labelpos.toLowerCase()!=="c"&&(z.rankdir==="TB"||z.rankdir==="BT"?q.width+=q.labeloffset:q.height+=q.labeloffset)})}function x(B){B.edges().forEach(z=>{let F=B.edge(z);if(F.width&&F.height){let q=B.node(z.v),re={rank:(B.node(z.w).rank-q.rank)/2+q.rank,e:z};d.addDummyNode(B,"edge-proxy",re,"_ep")}})}function I(B){let z=0;B.nodes().forEach(F=>{let q=B.node(F);q.borderTop&&(q.minRank=B.node(q.borderTop).rank,q.maxRank=B.node(q.borderBottom).rank,z=Math.max(z,q.maxRank))}),B.graph().maxRank=z}function E(B){B.nodes().forEach(z=>{let F=B.node(z);F.dummy==="edge-proxy"&&(B.edge(F.e).labelRank=F.rank,B.removeNode(z))})}function G(B){let z=Number.POSITIVE_INFINITY,F=0,q=Number.POSITIVE_INFINITY,Q=0,re=B.graph(),le=re.marginx||0,_e=re.marginy||0;function Se(fe){let me=fe.x,$=fe.y,N=fe.width,P=fe.height;z=Math.min(z,me-N/2),F=Math.max(F,me+N/2),q=Math.min(q,$-P/2),Q=Math.max(Q,$+P/2)}B.nodes().forEach(fe=>Se(B.node(fe))),B.edges().forEach(fe=>{let me=B.edge(fe);Object.hasOwn(me,"x")&&Se(me)}),z-=le,q-=_e,B.nodes().forEach(fe=>{let me=B.node(fe);me.x-=z,me.y-=q}),B.edges().forEach(fe=>{let me=B.edge(fe);me.points.forEach($=>{$.x-=z,$.y-=q}),Object.hasOwn(me,"x")&&(me.x-=z),Object.hasOwn(me,"y")&&(me.y-=q)}),re.width=F-z+le,re.height=Q-q+_e}function C(B){B.edges().forEach(z=>{let F=B.edge(z),q=B.node(z.v),Q=B.node(z.w),re,le;F.points?(re=F.points[0],le=F.points[F.points.length-1]):(F.points=[],re=Q,le=q),F.points.unshift(d.intersectRect(q,re)),F.points.push(d.intersectRect(Q,le))})}function H(B){B.edges().forEach(z=>{let F=B.edge(z);if(Object.hasOwn(F,"x"))switch((F.labelpos==="l"||F.labelpos==="r")&&(F.width-=F.labeloffset),F.labelpos){case"l":F.x-=F.width/2+F.labeloffset;break;case"r":F.x+=F.width/2+F.labeloffset;break}})}function V(B){B.edges().forEach(z=>{let F=B.edge(z);F.reversed&&F.points.reverse()})}function W(B){B.nodes().forEach(z=>{if(B.children(z).length){let F=B.node(z),q=B.node(F.borderTop),Q=B.node(F.borderBottom),re=B.node(F.borderLeft[F.borderLeft.length-1]),le=B.node(F.borderRight[F.borderRight.length-1]);F.width=Math.abs(le.x-re.x),F.height=Math.abs(Q.y-q.y),F.x=re.x+F.width/2,F.y=q.y+F.height/2}}),B.nodes().forEach(z=>{B.node(z).dummy==="border"&&B.removeNode(z)})}function j(B){B.edges().forEach(z=>{if(z.v===z.w){var F=B.node(z.v);F.selfEdges||(F.selfEdges=[]),F.selfEdges.push({e:z,label:B.edge(z)}),B.removeEdge(z)}})}function K(B){var z=d.buildLayerMatrix(B);z.forEach(F=>{var q=0;F.forEach((Q,re)=>{var le=B.node(Q);le.order=re+q,(le.selfEdges||[]).forEach(_e=>{d.addDummyNode(B,"selfedge",{width:_e.label.width,height:_e.label.height,rank:le.rank,order:re+ ++q,e:_e.e,label:_e.label},"_se")}),delete le.selfEdges})})}function J(B){B.nodes().forEach(z=>{var F=B.node(z);if(F.dummy==="selfedge"){var q=B.node(F.e.v),Q=q.x+q.width/2,re=q.y,le=F.x-Q,_e=q.height/2;B.setEdge(F.e,F.label),B.removeNode(z),F.label.points=[{x:Q+2*le/3,y:re-_e},{x:Q+5*le/6,y:re-_e},{x:Q+le,y:re},{x:Q+5*le/6,y:re+_e},{x:Q+2*le/3,y:re+_e}],F.label.x=F.x,F.label.y=F.y}})}function oe(B,z){return d.mapValues(d.pick(B,z),Number)}function ge(B){var z={};return B&&Object.entries(B).forEach(([F,q])=>{typeof F=="string"&&(F=F.toLowerCase()),z[F]=q}),z}return Si}var ki,tr;function ep(){if(tr)return ki;tr=1;let e=Re(),t=Xe().Graph;ki={debugOrdering:n};function n(i){let o=e.buildLayerMatrix(i),s=new t({compound:!0,multigraph:!0}).setGraph({});return i.nodes().forEach(a=>{s.setNode(a,{label:a}),s.setParent(a,"layer"+i.node(a).rank)}),i.edges().forEach(a=>s.setEdge(a.v,a.w,{},a.name)),o.forEach((a,l)=>{let r="layer"+l;s.setNode(r,{rank:"same"}),a.reduce((u,c)=>(s.setEdge(u,c,{style:"invis"}),c))}),s}return ki}var Ci,nr;function tp(){return nr||(nr=1,Ci="1.1.8"),Ci}var Mi,or;function np(){return or||(or=1,Mi={graphlib:Xe(),layout:Qv(),debug:ep(),util:{time:Re().time,notime:Re().notime},version:tp()}),Mi}var op=np();const Ni=Su(op);function ip(){const{findNode:e}=Ie(),t=X(new Ni.graphlib.Graph);function n(i,o){const s=new Ni.graphlib.Graph;t.value=s,s.setDefaultEdgeLabel(()=>({})),s.setGraph({rankdir:"TB"});for(const a of i){const l=e(a.id);l!==void 0&&s.setNode(a.id,{width:l.dimensions.width||250,height:l.dimensions.height||55})}for(const a of o)s.setEdge(a.source,a.target);return Ni.layout(s),i.map(a=>{const l=s.node(a.id);return{...a,targetPosition:ce.Top,sourcePosition:ce.Bottom,position:{x:l.x,y:l.y}}})}return{graph:t,layout:n}}const sp={class:"gap"},ap={key:0,class:"alert alert-info"},rp={key:2,id:"tree-container"},lp={class:"node-text"},up={class:"typeName"},cp={class:"time-sent"},dp={key:1,class:"sagas"},fp=ue({__name:"FlowDiagram",setup(e){const t=He(),{state:n,conversationData:i}=Le(t);async function o(v){return await t.loadConversation(v),i.value.data}class s{id;sagaType;isSagaCompleted;isSagaInitiated;constructor(w,O){const L=r(O,tt.SagaId),A=r(O,tt.OriginatingSagaId);this.id=w.saga_id,this.sagaType=Ii(w.saga_type),this.isSagaCompleted=w.change_status==="Completed",this.isSagaInitiated=L===void 0&&A!==void 0}}class a{id;type;data;position;draggable;constructor(w){this.id=w.id,this.type="message",this.position={x:0,y:0},this.draggable=!1;const O=w.message_intent===Di.Publish,L=r(w,tt.IsSagaTimeoutMessage)?.toLowerCase()==="true",A=w.invoked_sagas??[];w.originates_from_saga&&A.push(w.originates_from_saga),this.data={label:w.message_type,timeSent:w.time_sent,messageId:w.message_id,sendingEndpoint:w.sending_endpoint,receivingEndpoint:w.receiving_endpoint,isError:w.status!==je.Successful&&w.status!==je.ResolvedSuccessfully,sagaInvocations:A.map(_=>new s(_,w)),isPublished:O,isTimeout:L,isEvent:O&&!L,isCommand:!O&&!L,message:w,type:O?"Event message":L?"Timeout message":"Command message"}}}function l(v){const w=new Map;return v.forEach(O=>{w.has(O.id)||w.set(O.id,new a(O))}),Array.from(w.values())}function r(v,w){return v.headers.find(O=>O.key===w)?.value}function u(v){const w=[];for(const O of v){const L=O.data?.message;if(L===void 0)continue;const A=r(L,tt.RelatedTo);if(!A&&A!==L.message_id)continue;let _=v.filter(k=>{const x=k.data?.message;return x===void 0?!1:x.receiving_endpoint!==void 0&&x.sending_endpoint!==void 0&&x.message_id===A&&x.receiving_endpoint.name===L.sending_endpoint.name});switch(_.length===0&&(_=v.filter(k=>{const x=k.data?.message;return x===void 0?!1:x.receiving_endpoint!==void 0&&x.sending_endpoint!==void 0&&x.message_id===A&&x.message_intent!==Di.Publish}),_.length===0&&console.debug(`Fall back to match only on RelatedToMessageId for message with Id '${L.message_id}' matched but link could be invalid.`)),_.length){case 0:console.warn(`No parent could be resolved for the message with Id '${L.message_id}' which has RelatedToMessageId set. This can happen if the parent has been purged due to retention expiration, an ServiceControl node to be unavailable, or because the parent message not been stored (yet).`);break;case 1:break;default:console.warn(`Multiple parents matched for message id '${L.message_id}' possibly due to more-than-once processing, linking to all as it is unknown which processing attempt generated the message.`);break}for(const k of _)w.push(c(k,O))}return w}function c(v,w){return{id:`${v.id}##${w.id}`,source:`${v.id}`,target:`${w.id}`,markerEnd:eo.ArrowClosed,style:{strokeDasharray:w.data?.isPublished?"5, 3":"",strokeWidth:2}}}const d=X([]),f=X([]),{layout:h}=ip(),{fitView:g}=Ie(),p=X(kt.failedMessage.failedMessages.link);Ve(async()=>{const v=yr().currentRoute.value.query.back;if(v&&(p.value=v),!n.value.data.conversation_id)return;const w=await o(n.value.data.conversation_id);d.value=l(w),f.value=u(d.value)});async function m(){d.value=h(d.value,f.value),await nt(()=>{t.state.data.id&&g({nodes:[t.state.data.id],maxZoom:.9})})}const b=Ti("#be514a").filter,y=Ti("#e8e6e8").filter;return(v,w)=>{const O=es("RouterLink"),L=ut("tippy");return S(),D("div",sp,[R(t).conversationData.failed_to_load?(S(),D("div",ap,"FlowDiagram data is unavailable.")):R(t).conversationData.loading?(S(),de(Tt,{key:1})):(S(),D("div",rp,[ee(R(Pm),{nodes:d.value,edges:f.value,"min-zoom":.1,"max-zoom":1.2,"only-render-visible-elements":!0,onNodesInitialized:m},{"node-message":ke(({id:A,data:_})=>[ee(nn,{class:"address",text:`${_.sendingEndpoint.name}@${_.sendingEndpoint.host}`},null,8,["text"]),M("div",{class:Ee(["node",{error:_.isError,"current-message":A===R(t).state.data.id}])},[M("div",lp,[Ne(M("i",{class:Ee(["fa",{"pa-flow-timeout":_.isTimeout,"pa-flow-command":_.isCommand,"pa-flow-event":_.isEvent}]),style:Fe(_.isError&&A===R(t).state.data.id?{filter:R(y)}:{})},null,6),[[L,_.type]]),M("div",up,[_.isError?(S(),de(O,{key:0,to:{path:R(kt).messages.failedMessage.link(A),query:{back:p.value}}},{default:ke(()=>[ee(nn,{style:{width:"204px"},text:_.label,"ellipses-style":"LeftSide"},null,8,["text"])]),_:2},1032,["to"])):(S(),de(O,{key:1,to:{path:R(kt).messages.successMessage.link(_.messageId,A),query:{back:p.value}}},{default:ke(()=>[ee(nn,{style:{width:"204px"},text:_.label,"ellipses-style":"LeftSide"},null,8,["text"])]),_:2},1032,["to"]))]),_.isError?(S(),D("i",{key:0,class:"fa pa-flow-failed",style:Fe(A!==R(t).state.data.id?{filter:R(b)}:{filter:R(y)})},null,4)):U("",!0),M("div",cp,[ee(Jt,{class:"time-since","date-utc":_.timeSent},null,8,["date-utc"])]),_.sagaInvocations.length>0?(S(),D("div",dp,[(S(!0),D(pe,null,ze(_.sagaInvocations,k=>(S(),D("div",{class:"saga",key:k.id},[Ne(M("i",{class:Ee(["fa",{"pa-flow-saga-initiated":k.isSagaInitiated,"pa-flow-saga-completed":!k.isSagaInitiated&&k.isSagaCompleted,"pa-flow-saga-trigger":!k.isSagaInitiated&&!k.isSagaCompleted}])},null,2),[[L,k.isSagaInitiated?"Saga Initiated / Updated":!k.isSagaInitiated&&k.isSagaCompleted?"Saga Completed":"Message originated from Saga"]]),ee(_v,{"saga-type":k.sagaType},null,8,["saga-type"])]))),128))])):U("",!0)])],2),ee(nn,{class:"address",text:`${_.receivingEndpoint.name}@${_.receivingEndpoint.host}`},null,8,["text"])]),default:ke(()=>[ee(R(hv),{"show-interactive":!1,position:"top-left",class:"controls"})]),_:1},8,["nodes","edges"])]))])}}}),hp=$e(fp,[["__scopeId","data-v-21a8bbe8"]]);var vt=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(vt||{}),xt=(e=>(e[e.Event=0]="Event",e[e.Command=1]="Command",e[e.Local=2]="Local",e[e.Timeout=3]="Timeout",e))(xt||{});function gp(e,t){return new vp(e,t)}function mp(e){const t=new pp(e);return e.message_intent===Di.Publish?t.type=0:(e.headers.find(o=>o.key===tt.IsSagaTimeoutMessage)?.value?.toLowerCase()??"")==="true"?t.type=3:e.receiving_endpoint.host_id===e.sending_endpoint.host_id&&e.receiving_endpoint.name===e.sending_endpoint.name?t.type=2:t.type=1,t}class vp{name;_fromRoutedMessage;processingHandler;uiRef;constructor(t,n){this._fromRoutedMessage=t,this.processingHandler=n,t&&this.processingHandler&&(this.name=`${n?.name}(${t.id})`),t&&(t.route=this),n&&(n.route=this)}get fromRoutedMessage(){return this._fromRoutedMessage}}class pp{selectedMessage;name;fromHandler;toHandler;route;direction=0;type=1;constructor(t){this.selectedMessage=t,this.name=Xi(t.message_type)??""}get id(){return this.selectedMessage.id}get receiving(){return this.selectedMessage.receiving_endpoint}get sending(){return this.selectedMessage.sending_endpoint}get sentTime(){return this.selectedMessage.time_sent?new Date(this.selectedMessage.time_sent):void 0}get messageId(){return this.selectedMessage.message_id}get status(){return this.selectedMessage.status}}function ir(e){return new Pl(e.receiving_endpoint.name,e.receiving_endpoint.host,e.receiving_endpoint.host_id,e.receiving_endpoint.name===e.sending_endpoint.name&&e.receiving_endpoint.host===e.sending_endpoint.host?e.headers.find(t=>t.key===tt.NServiceBusVersion)?.value:void 0)}function sr(e){return new Pl(e.sending_endpoint.name,e.sending_endpoint.host,e.sending_endpoint.host_id,e.headers.find(t=>t.key===tt.NServiceBusVersion)?.value)}class yp{#e=new Map;register(t){let n=this.#e.get(t.name);n||(n=t,this.#e.set(n.name,n)),t.hosts.forEach(i=>n.addHost(i))}get(t){return this.#e.get(t.name)}}class Pl{_hosts;_name;_handlers=[];uiRef;constructor(t,n,i,o){const s=new _p(n,i,o);this._hosts=new Map([[s.equatableKey,s]]),this._name=t}get name(){return this._name}get hosts(){return[...this._hosts].map(([,t])=>t)}get host(){return[...this._hosts].map(([,t])=>t.host).join(",")}get hostId(){return[...this._hosts].map(([,t])=>t.hostId).join(",")}get handlers(){return[...this._handlers]}get version(){return[...this._hosts].flatMap(([,t])=>t.versions).join(",")}addHost(t){this._hosts.has(t.equatableKey)?this._hosts.get(t.equatableKey).addVersions(t.versions):this._hosts.set(t.equatableKey,t)}addHandler(t){this._handlers.push(t)}}class _p{_host;_hostId;_versions;constructor(t,n,i){this._host=t,this._hostId=n,this._versions=new Set,this.addVersions([i])}get host(){return this._host}get hostId(){return this._hostId}get versions(){return[...this._versions]}get equatableKey(){return`${this._hostId}###${this._host}`}addVersions(t){t.filter(n=>n).forEach(n=>this._versions.add(n.toLowerCase()))}}var St=(e=>(e[e.Fail=0]="Fail",e[e.Success=1]="Success",e[e.Unknown=2]="Unknown",e))(St||{});const ji="First";function wp(e,t){return new Ll(e.headers.find(n=>n.key===tt.RelatedTo)?.value??ji,t)}function bp(e,t){const n=new Ll(e.message_id,t);return Rl(n,e),n}class xp{#e=new Map;storeKey=(t,n)=>`${t}###${n}`;register(t){const n=this.#e.get(this.storeKey(t.id,t.endpoint.name));return n?{handler:n,isNew:!1}:(this.#e.set(this.storeKey(t.id,t.endpoint.name),t),{handler:t,isNew:!0})}}function Rl(e,t){e.processedAt=new Date(t.processed_at);const[n,i,o]=t.processing_time.split(":");switch(e.processingTime=((parseInt(n)*60+parseInt(i))*60+parseFloat(o))*1e3,e.name=t.message_type,e.friendlyName=Xi(t.message_type),(t.invoked_sagas?.length??0)>0&&(e.partOfSaga=t.invoked_sagas.map(s=>Xi(s.saga_type)).join(", ")),t.status){case je.ArchivedFailure:case je.Failed:case je.RepeatedFailure:e.state=0;break;default:e.state=1}}class Ll{_id;_endpoint;_processedAtGuess;_outMessages;name;partOfSaga;inMessage;state=2;processedAt;processingTime;route;uiRef;constructor(t,n){this._id=t,this._endpoint=n,this._outMessages=[]}get id(){return this._id}get endpoint(){return this._endpoint}get isPartOfSaga(){return this.partOfSaga!=null}get handledAt(){return this.processedAt??this._processedAtGuess}get selectedMessage(){return this.route?.fromRoutedMessage?.selectedMessage}get outMessages(){return[...this._outMessages]}get direction(){return this.outMessages[0]?.direction??vt.Right}updateProcessedAt(t){(!this._processedAtGuess||this._processedAtGuess.getTime()>t.getTime())&&(this._processedAtGuess=t)}addOutMessage(t){this._outMessages=[t,...this._outMessages].sort((n,i)=>(n.sentTime?.getTime()??0)-(i.sentTime?.getTime()??0))}}function Xi(e){return e?.split(",")[0].split(".").reverse()[0].replace(/\+/g,".")}class Ep{#e;#n;#t;constructor(t){this.#e=[],this.#t=[];const n=new yp,i=new xp,o=[],s=vs.createTree(t).flatMap(r=>r.walk());for(const r of s)n.register(sr(r));for(const r of s)n.register(ir(r));for(const r of s){const u=n.get(sr(r));this.#e.find(m=>m.name===u?.name)||this.#e.push(u);const c=n.get(ir(r));this.#e.find(m=>m.name===c?.name)||this.#e.push(c);const{handler:d,isNew:f}=i.register(wp(r,u));f&&(o.push(d),u.addHandler(d)),d.updateProcessedAt(new Date(r.time_sent));const{handler:h,isNew:g}=i.register(bp(r,c));g?(o.push(h),c.addHandler(h)):Rl(h,r);const p=mp(r);p.toHandler=h,p.fromHandler=d,this.#t.push(gp(p,h)),h.inMessage=p,d.addOutMessage(p)}const a=o.filter(r=>r.id===ji),l=o.filter(r=>r.id!==ji).sort((r,u)=>(r.handledAt?.getTime()??0)-(u.handledAt?.getTime()??0));this.#n=[...a,...l]}get endpoints(){return[...this.#e]}get handlers(){return[...this.#n]}get routes(){return[...this.#t]}}class vs{#e;#n;#t;static createTree(t){const n=t.map(s=>new vs(s)),i=[],o=new Map(n.map(s=>[s.id,s]));for(const s of n){const a=o.get(s.parent??"");a&&(a.addChild(s),i.push(s))}return n.filter(s=>!i.includes(s))}constructor(t){this.#e=t,this.#n=t.headers.find(n=>n.key===tt.RelatedTo)?.value,this.#t=[]}get id(){return this.#e.message_id}get parent(){return this.#n}get message(){return this.#e}get children(){return[...this.#t]}addChild(t){this.#t.push(t)}walk(){return[this.#e,...this.children.sort((t,n)=>new Date(t.message.processed_at).getTime()-new Date(n.message.processed_at).getTime()).flatMap(t=>t.walk())]}}const At=260,Yt=_r("SequenceDiagramStore",()=>{const e=He(),{state:t,conversationData:n}=Le(e),i=yr(),o=X(At/2),s=X([]),a=X([]),l=X([]),r=X([]),u=X(150),c=X(150),d=X([]),f=X(),h=Z(()=>n.value.loading),g=Z(()=>`${t.value.data.message_type??""}(${t.value.data.id})`);ve(()=>n.value.data,A=>{if(A.length){o.value=At/2;const _=new Ep(A);s.value=_.endpoints,a.value=_.handlers,l.value=_.routes}},{immediate:!0});function p(A){const _=Math.max(A+At/2,o.value);_!==o.value&&(o.value=_)}function m(A){u.value=A}function b(A){c.value=A}function y(A){r.value=A}function v(A){d.value=A}function w(A){f.value=A}function O(){e.state.data.conversation_id&&e.loadConversation(e.state.data.conversation_id)}function L(A,_,k){A!=null&&(!k&&_==null||i.push({path:k?kt.messages.failedMessage.link(A):kt.messages.successMessage.link(_,A)}))}return{startX:o,endpoints:s,handlers:a,routes:l,endpointCentrePoints:r,maxWidth:u,maxHeight:c,handlerLocations:d,highlightId:f,selectedId:g,isLoading:h,setStartX:p,setMaxWidth:m,setMaxHeight:b,setEndpointCentrePoints:y,setHandlerLocations:v,setHighlightId:w,refreshConversation:O,navigateTo:L}}),Sp=["transform"],kp=["transform"],Cp=["transform"],Mp=["width"],Np={class:"endpoint-name"},$p=30,ar=20,Ip=ue({__name:"EndpointsComponent",props:{yOffset:{}},setup(e){const t=Yt(),{startX:n,endpoints:i}=Le(t),o=X([]),s=Z(()=>i.value.map((l,r)=>{const u=l,c=o.value[r];if(c){const d=c.getBoundingClientRect(),f=r>0?s.value[r-1]:void 0;u.width=Math.max(At,d.width),u.textWidth=d.width,u.x=(f?.x??n.value)+(f?.width??0)+$p,u.height=d.height,u.uiRef=c}return u}));ve(s,()=>{t.setEndpointCentrePoints(s.value.map(r=>({name:r.name,centre:r.x??0,top:(r.height??0)+15})));const l=s.value[s.value.length-1];t.setMaxWidth((l.x??0)+l.width)}),ve(n,()=>{o.value=[]});function a(l,r){l&&(o.value[r]=l)}return(l,r)=>(S(),D(pe,null,[M("rect",{width:"100%",height:"15",transform:`translate(0,${e.yOffset})`,fill:"white"},null,8,Sp),(S(!0),D(pe,null,ze(s.value,(u,c)=>(S(),D("g",{key:u.name,transform:`translate(0,${e.yOffset+5})`,style:{outline:"none"}},[M("g",{transform:`translate(${(u.x??R(At)/2)-((u.textWidth??0)+ar)/2}, 0)`},[(S(),D("foreignObject",{x:ar,y:"10",width:R(At),height:"100%",style:{"pointer-events":"none"}},[M("div",{class:"endpoint-surround",ref_for:!0,ref:d=>a(d,c)},[r[0]||(r[0]=M("i",{class:"endpoint-icon"},null,-1)),M("div",Np,ne(u.name),1)],512)],8,Mp))],8,Cp)],8,kp))),128))],64))}}),Tp=$e(Ip,[["__scopeId","data-v-633c7d74"]]),Dp=["d"],Op=ue({__name:"TimelineComponent",setup(e){const t=Yt(),{endpointCentrePoints:n,maxHeight:i}=Le(t);return(o,s)=>(S(!0),D(pe,null,ze(R(n),a=>(S(),D("g",{key:a.name},[a.centre?(S(),D("path",{key:0,d:`M${a.centre} ${a.top} v0 ${R(i)-a.top}`,stroke:"var(--gray90)","stroke-width":"2"},null,8,Dp)):U("",!0)]))),128))}}),Pp=["transform"],Rp=["height","fill","onMouseover","onClick"],Lp=["d","transform"],Ap=["transform","onMouseover","onClick"],zp=40,rr=20,Pn=14,Vp=ue({__name:"HandlersComponent",setup(e){const t=Yt(),{handlers:n,endpointCentrePoints:i,highlightId:o,selectedId:s}=Le(t),a=X([]),l=X(!1),r=X();ou(()=>{l.value=!1,r.value&&d(r.value,s.value)}),ve(s,()=>r.value=void 0);const u=Z(()=>{let f=0;const h=n.value.map((g,p)=>{const m=i.value.find(I=>I.name===g.endpoint.name),b=a.value[p],y=g.outMessages.length,v=(y===0?1:y)*zp;f===0&&(f+=rr+Math.max(0,...i.value.map(I=>I.top)));const w=f;f+=v+rr;const O=g.id==="First"?"black":g.state===St.Fail?"var(--error)":g.route&&g.route.name===s.value?"var(--highlight)":g.route&&g.route.name===o.value?"var(--highlight-background)":"var(--gray60)",L=g.id==="First"?"M0,0L8,4 0,8z":g.state===St.Fail?"M6,0L0,6 6,12 12,6 6,0z M7,9L5,9 5,8 7,8 7,9z M5,7L5,3 7,3 7,7 5,7z":null,A=g.id==="First"?8:g.state===St.Fail?12:0,_=g.direction===vt.Right?((b?.getBBox().width??0)+24)*-1:20,k=(m?.centre??t.startX)-Pn/2,x=(m?.centre??t.startX)+Pn/2;return m?.centre&&k+_<0&&t.setStartX(-1*(k+_)+20),{id:g.id,messageId:{id:g.selectedMessage?.message_id,uniqueId:g.selectedMessage?.id},isError:g.state===St.Fail,endpointName:g.endpoint.name,incomingId:g.route?.name,left:k,right:x,y:w,height:v,fill:O,icon:L,iconSize:A,messageType:g.friendlyName,messageTypeOffset:_,messageTypeHighlight:g.route?.name===o.value,messageTypeSelected:g.route?.name===s.value,setUIRef:I=>g.uiRef=I}});return t.setMaxHeight(f),t.setHandlerLocations(h.map(g=>({id:g.id,endpointName:g.endpointName,left:g.left,right:g.right,y:g.y,height:g.height}))),h});function c(f,h){f&&(a.value[h]=f)}function d(f,h){!l.value&&f&&h===s.value&&(l.value=!0,r.value=f,setTimeout(()=>r.value.scrollIntoView(!1),30))}return(f,h)=>(S(!0),D(pe,null,ze(u.value,(g,p)=>(S(),D("g",{key:`${g.id}###${g.endpointName}`,ref_for:!0,ref:m=>d(m,g.incomingId),transform:`translate(${g.left}, ${g.y})`},[M("g",{ref_for:!0,ref:m=>g.setUIRef(m),class:"activation-box"},[M("rect",{width:Pn,height:g.height,class:Ee({clickable:g.incomingId&&!g.messageTypeSelected}),fill:g.fill,onMouseover:()=>R(t).setHighlightId(g.incomingId),onMouseleave:h[0]||(h[0]=()=>R(t).setHighlightId()),onClick:m=>g.incomingId&&!g.messageTypeSelected&&R(t).navigateTo(g.messageId.uniqueId,g.messageId.id,g.isError)},null,42,Rp),g.icon?(S(),D("path",{key:0,d:g.icon,fill:"white",transform:`translate(${Pn/2-g.iconSize/2}, ${g.height/2-g.iconSize/2})`},null,8,Lp)):U("",!0)],512),g.messageType?(S(),D("g",{key:0,transform:`translate(${g.messageTypeOffset}, 4)`,class:Ee({clickable:!g.messageTypeSelected,"message-type":!0,highlight:g.messageTypeHighlight||g.messageTypeSelected}),onMouseover:()=>R(t).setHighlightId(g.incomingId),onMouseleave:h[1]||(h[1]=()=>R(t).setHighlightId()),onClick:m=>g.incomingId&&!g.messageTypeSelected&&R(t).navigateTo(g.messageId.uniqueId,g.messageId.id,g.isError)},[h[2]||(h[2]=M("path",{d:"M9,3L9,3 9,0 0,0 0,3 4,3 4,6 0,6 0,9 4,9 4,12 0,12 0,15 9,15 9,12 5,12 5,9 9,9 9,6 5,6 5,3z"},null,-1)),M("text",{x:"14",y:"0","dominant-baseline":"text-before-edge",ref_for:!0,ref:m=>c(m,p)},ne(g.messageType),513)],42,Ap)):U("",!0)],8,Pp))),128))}}),Bp=$e(Vp,[["__scopeId","data-v-ca20b396"]]),Fp={key:0},Hp=["d","stroke-dasharray"],Gp=["d"],qp=["d"],Yp=["transform"],Wp=["d"],Up=["d"],jp=["transform","onMouseover","onClick"],Xp=["width","height"],Zp={key:0,d:"M21.8 18.5H14V10h2.5v6h5.3L21.8 18.5L21.8 18.5z M25.1 24.4c2-2.2 3.2-5.1 3.2-8.3  c0-6.8-5.5-12.3-12.3-12.3C9.2 3.7 3.7 9.2 3.7 16.1c0 3.2 1.2 6.1 3.2 8.3c-0.6 1.5-1.4 3.6-2 4.9c-0.1 0.2 0 0.4 0.2 0.6  c0.2 0.1 0.4 0.2 0.6 0c1.3-0.8 3.1-2.1 4.5-3c1.7 0.9 3.7 1.5 5.9 1.5s4.1-0.5 5.9-1.5l4.5 3c0.2 0.1 0.4 0.1 0.6 0  c0.2-0.1 0.2-0.4 0.2-0.6L25.1 24.4z M16 25.3c-5.1 0-9.3-4.1-9.3-9.3c0-5.1 4.1-9.3 9.3-9.3c5.1 0 9.3 4.1 9.3 9.3  C25.3 21.2 21.1 25.3 16 25.3z M10.5 2.8C9.6 2.3 8.6 2 7.6 2C4.5 2 2 4.5 2 7.6c0 1 0.3 2 0.8 2.8C4.2 7 7 4.2 10.5 2.8z   M29.2 10.4C29.7 9.6 30 8.6 30 7.6C30 4.5 27.5 2 24.4 2c-1 0-2 0.3-2.9 0.8C25 4.2 27.8 7 29.2 10.4z"},Kp={key:1,d:"M 0 2 M 27.8 29.8 M 0 15.9 A 5.2 5.2 90 1 1 10.4 15.9 A 5.2 5.2 90 1 1 0 15.9 M 12.1 13.3 v 5.2 h 8.7 v 1.8 L 27.8 15.9 L 20.8 11.6 v 1.8 M 11.9 19 L 8.3 22.6 L 14.3 28.8 L 13.1 30 L 21.2 31.9 L 19.3 23.9 L 18.1 25.1 M 8.3 9.1 L 11.9 12.9 L 18.1 6.7 L 19.3 7.9 L 21.2 0 L 13.1 1.9 L 14.3 3.1"},Jp={key:2,d:"M 0,0 M 32,32 M 0,16 A 6,6 0 1 1 12,16 A 6,6 0 1 1 0,16   M 14,13 v6 h10 v2 L32,16 L24,11 v2 z"},Qp={key:3,d:"M 32 6 h -14 v 4 h 10 v 14 H 16 V 19.6 L 4 26 l 12 6.4 V 28 h 16 V 6 z M 16 8.2 C 16 11.4 13.4 14 10 14 S 4 11.4 4 8.2 S 6.6 2 10 2 S 16 4.8 16 8 z"},e0=["x"],$i=10,Ye=4,t0=ue({__name:"RoutesComponent",setup(e){const t=Yt(),{selectedId:n,routes:i,handlerLocations:o,highlightId:s}=Le(t),a=X([]),l=Z(()=>i.value.map((u,c)=>{if(!u.name)return;const d=u.fromRoutedMessage?.fromHandler;if(!d)return;const f=o.value.find(A=>A.id===d.id&&A.endpointName===d.endpoint.name);if(!f)return;const h=o.value.find(A=>A.id===u.fromRoutedMessage?.toHandler?.id&&A.endpointName===u.fromRoutedMessage?.receiving.name);if(!h)return;const p=a.value[c]?.getBBox(),m=d.outMessages.findIndex(A=>u.fromRoutedMessage?.messageId===A.messageId&&u.fromRoutedMessage?.receiving.name===A.receiving.name)+1,b=f.y+f.height/(d.outMessages.length+1)*m,y=h.left+(h.right-h.left)/2,[v,w,O,L]=f.left===h.left?[vt.Right,15+$i,f.right,y+45]:f.left<h.left?[vt.Right,y-f.right-$i-1,f.right,y+3]:[vt.Left,y-f.left+$i+1,f.left,y-((p?.width??0)+15+Ye*3+3)];return u.fromRoutedMessage.direction=v,L<0&&t.setStartX(-1*L+20),{id:u.name,selected:u.name===n.value,messageId:{uniqueId:u.fromRoutedMessage.selectedMessage.id,id:u.fromRoutedMessage.selectedMessage.message_id},isHandlerError:u.processingHandler?.state===St.Fail,fromX:O,y:b,direction:v,width:w,toHandlerCentre:y,height:Math.abs(b-h.y),type:u.fromRoutedMessage.type,messageType:u.fromRoutedMessage.name,messageTypeOffset:L,highlight:s.value===u.name,highlightTextWidth:p?.width,highlightTextHeight:p?.height,setUIRef:A=>u.uiRef=A}}));function r(u,c){u&&(a.value[c]=u)}return(u,c)=>(S(!0),D(pe,null,ze(l.value,(d,f)=>(S(),D(pe,{key:d?.id},[d!=null?(S(),D("g",Fp,[M("g",null,[M("path",{d:`M${d.fromX} ${d.y} h${d.width}`,"stroke-width":"3.5",stroke:"black","stroke-dasharray":d.type===R(xt).Event?"12 8":void 0},null,8,Hp),d.direction===R(vt).Right?(S(),D("path",{key:0,d:`M${d.fromX+d.width} ${d.y-7.5} l10 7.5 -10,7.5z`,fill:"black"},null,8,Gp)):U("",!0),d.direction===R(vt).Left?(S(),D("path",{key:1,d:`M${d.toHandlerCentre+1} ${d.y} l10,-7.5 0,15z`,fill:"black"},null,8,qp)):U("",!0)]),d.highlight||d.selected?(S(),D("g",{key:0,transform:`translate(${d.toHandlerCentre},${d.y})`,stroke:"var(--highlight)",fill:"var(--highlight)"},[M("path",{d:`M0 0 v${d.height-6}`,"stroke-width":"2"},null,8,Wp),M("path",{d:`M0 ${d.height} l-3,-6 6,0z`},null,8,Up)],8,Yp)):U("",!0),M("g",{class:Ee({clickable:!d.selected,"message-type":!0,highlight:d.highlight,selected:d.selected}),transform:`translate(${d.messageTypeOffset}, ${d.y-7.5-Ye})`,onMouseover:()=>R(t).setHighlightId(d.id),onMouseleave:c[0]||(c[0]=()=>R(t).setHighlightId()),onClick:h=>!d.selected&&R(t).navigateTo(d.messageId.uniqueId,d.messageId.id,d.isHandlerError),ref_for:!0,ref:h=>d.setUIRef(h)},[(d.highlight||d.selected)&&d.messageTypeOffset?(S(),D("rect",{key:0,width:(d.highlightTextWidth??0)+19+Ye+Ye,height:(d.highlightTextHeight??0)+Ye+Ye,class:"border"},null,8,Xp)):U("",!0),(S(),D("svg",{x:Ye,y:Ye,width:"15",height:"15",viewBox:"0 0 32 32"},[d.type===R(xt).Timeout?(S(),D("path",Zp)):d.type===R(xt).Event?(S(),D("path",Kp)):d.type===R(xt).Command?(S(),D("path",Jp)):d.type===R(xt).Local?(S(),D("path",Qp)):U("",!0)])),M("text",{x:15+Ye+Ye,y:Ye,"dominant-baseline":"text-before-edge",ref_for:!0,ref:h=>r(h,f)},ne(d.messageType),9,e0)],42,jp)])):U("",!0)],64))),128))}}),n0=$e(t0,[["__scopeId","data-v-a6abb6dc"]]),o0={class:"endpoint-tooltip"},i0=ue({__name:"EndpointTooltip",props:{endpoint:{}},setup(e){return(t,n)=>(S(),D("div",o0,[n[0]||(n[0]=M("label",null,"Name:",-1)),M("span",null,ne(e.endpoint.name),1),n[1]||(n[1]=M("label",null,"NSB Version:",-1)),M("span",null,ne(e.endpoint.version),1),n[2]||(n[2]=M("label",null,"Host:",-1)),M("span",null,ne(e.endpoint.host),1)]))}}),s0={key:0},a0={key:1,class:"handler-tooltip"},r0={class:"details"},l0={key:0},u0={key:1},c0=ue({__name:"HandlerTooltip",props:{handler:{}},setup(e){function t(n){const i=iu(n);return`${i.value} ${i.unit}`}return(n,i)=>e.handler.id==="First"?(S(),D("div",s0,"Start of Conversation")):(S(),D("div",a0,[i[2]||(i[2]=M("div",{class:"title"},"Processing of Message",-1)),M("div",r0,[i[0]||(i[0]=M("label",null,"Processing Time:",-1)),M("span",null,ne(t(e.handler.processingTime??0)),1),i[1]||(i[1]=M("label",null,"Processing Of:",-1)),M("span",null,ne(e.handler.friendlyName),1),e.handler.partOfSaga?(S(),D("label",l0,"Sagas Invoked:")):U("",!0),e.handler.partOfSaga?(S(),D("span",u0,ne(e.handler.partOfSaga),1)):U("",!0)])]))}}),d0={class:"route-tooltip"},f0={class:"title"},h0={class:"details"},g0=ue({__name:"RouteTooltip",props:{routedMessage:{}},setup(e){return(t,n)=>(S(),D("div",d0,[M("div",f0,ne(R(xt)[e.routedMessage.type]),1),M("div",h0,[n[0]||(n[0]=M("label",null,"Message Type:",-1)),M("span",null,ne(e.routedMessage.name),1),n[1]||(n[1]=M("label",null,"Message Id:",-1)),M("span",null,ne(e.routedMessage.messageId),1),n[2]||(n[2]=M("label",null,"Sent From:",-1)),M("span",null,ne(`${e.routedMessage.sending.name}@${e.routedMessage.sending.host}`),1),n[3]||(n[3]=M("label",null,"Sent To:",-1)),M("span",null,ne(`${e.routedMessage.receiving.name}@${e.routedMessage.receiving.host}`),1)])]))}});function m0(){const e=Yt(),{endpoints:t,handlers:n,routes:i}=Le(e);ve(()=>t.value.map(o=>o.uiRef),()=>t.value.filter(o=>o.uiRef).forEach(o=>xo(o.uiRef,{interactive:!0,appendTo:()=>document.body,content:Ce(i0,{endpoint:o}),placement:"bottom",delay:[800,null]}))),ve(()=>n.value.map(o=>o.uiRef),()=>n.value.filter(o=>o.uiRef&&o.state!==St.Unknown).forEach(o=>xo(o.uiRef,{interactive:!0,appendTo:()=>document.body,content:Ce(c0,{handler:o}),delay:[800,null]}))),ve(()=>i.value.map(o=>o.uiRef),()=>i.value.filter(o=>o.uiRef&&o.fromRoutedMessage).forEach(o=>xo(o.uiRef,{interactive:!0,appendTo:()=>document.body,content:Ce(g0,{routedMessage:o.fromRoutedMessage}),delay:[800,null],maxWidth:400})))}const v0={class:"wrapper"},p0={class:"toolbar"},y0={class:"help-link",target:"_blank",href:"https://docs.particular.net/servicepulse/sequence-diagram"},_0=["height"],w0=ue({__name:"SequenceDiagram",setup(e){const t=Yt(),{maxWidth:n,maxHeight:i,isLoading:o}=Le(t),s=X(0);return m0(),Ve(()=>t.refreshConversation()),(a,l)=>(S(),D("div",v0,[M("div",p0,[M("a",y0,[ee(Ge,{icon:R(su)},null,8,["icon"]),l[1]||(l[1]=ye(" Sequence Diagram Help",-1))])]),R(o)?(S(),de(Tt,{key:0})):U("",!0),M("div",{class:"outer",onScroll:l[0]||(l[0]=r=>s.value=r.target.scrollTop)},[(S(),D("svg",{class:"sequence-diagram",style:Fe({width:`max(100%, ${isNaN(R(n))?0:R(n)}px)`}),height:R(i)+20},[ee(Op),ee(Bp),ee(n0),ee(Tp,{yOffset:s.value},null,8,["yOffset"])],12,_0))],32)]))}}),b0=$e(w0,[["__scopeId","data-v-08fe5d80"]]);function ps(e){if(e===void 0)return{isSupported:!1};if(e=e.split(";")[0].trim(),e==="application/json")return{isSupported:!0,language:"json"};if(e==="text/xml")return{isSupported:!0,language:"xml"};if(e.startsWith("text/"))return{isSupported:!0};if(e==="application/xml")return{isSupported:!0,language:"xml"};if(e.startsWith("application/")){if(e.endsWith("+json"))return{isSupported:!0,language:"json"};if(e.endsWith("+xml"))return{isSupported:!0,language:"xml"}}return{isSupported:!1}}const x0={class:"gap"},E0={key:0,class:"alert alert-info"},S0={key:1,class:"alert alert-info"},k0={key:3,class:"alert alert-info"},C0={key:5,class:"alert alert-warning"},M0=ue({__name:"BodyView",setup(e){const t=He(),{body:n,state:i}=Le(t);ve(()=>i.value.data.body_url,async()=>{await t.downloadBody()},{immediate:!0});const o=Z(()=>ps(n.value.data.content_type)),s=Z(()=>n.value.data.value);return(a,l)=>(S(),D("div",x0,[R(n).not_found?(S(),D("div",E0,"Could not find the message body. This could be because the message URL is invalid or the corresponding message was processed and is no longer tracked by ServiceControl.")):R(n).failed_to_load?(S(),D("div",S0,"Message body unavailable.")):R(n).loading?(S(),de(Tt,{key:2})):R(n).data.no_content?(S(),D("div",k0,[...l[0]||(l[0]=[ye(" Body was too large and not stored. Edit ",-1),M("a",{href:"https://docs.particular.net/servicecontrol/audit-instances/configuration#performance-tuning-servicecontrol-auditmaxbodysizetostore"},"ServiceControl/MaxBodySizeToStore",-1),ye(" to be larger in the ServiceControl configuration. ",-1)])])):s.value!==void 0&&o.value.isSupported?(S(),de(Wn,{key:4,"model-value":s.value,language:o.value.language,"read-only":!0,"show-gutter":!0},null,8,["model-value","language"])):s.value&&!o.value.isSupported?(S(),D("div",C0,'Message body cannot be displayed because content type "'+ne(R(n).data.content_type)+'" is not supported.',1)):U("",!0)]))}}),N0=$e(M0,[["__scopeId","data-v-56356db9"]]),$0={class:"wrapper"},I0={class:"filters"},T0={class:"text-search-container"},D0={class:"text-search"},O0={key:0,class:"header-list"},P0={class:"header-key"},R0=["onMouseover","onMouseleave"],L0={class:"removeBootStrap"},A0={class:"clippy-button"},z0={key:0,class:"alert alert-warning"},V0={key:1,class:"alert alert-info"},B0=ue({__name:"HeadersView",setup(e){const{headers:t}=Le(He()),n=X({}),i=X(""),o=(a,l)=>{n.value[a]=l},s=Z(()=>i.value?t.value.data.filter(a=>a.key.toLowerCase().includes(i.value.toLowerCase())||a.value?.toLowerCase().includes(i.value.toLowerCase())):t.value.data);return(a,l)=>(S(),D(pe,null,[M("div",$0,[M("div",I0,[M("div",T0,[M("div",D0,[ee(au,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=r=>i.value=r),"aria-label":"Search for a header key or value",placeholder:"Search for a header key or value..."},null,8,["modelValue"])])])]),s.value.length>0&&!R(t).not_found?(S(),D("div",O0,[(S(!0),D(pe,null,ze(s.value,(r,u)=>(S(),D(pe,{key:u},[M("div",P0,ne(r.key),1),M("div",{class:"header-value",onMouseover:c=>o(u,!0),onMouseleave:c=>o(u,!1)},[M("pre",L0,ne(r.value),1),M("div",A0,[r.value&&n.value[u]?(S(),de(os,{key:0,value:r.value,isIconOnly:!0},null,8,["value"])):U("",!0)])],40,R0)],64))),128))])):U("",!0)]),s.value.length<=0&&!R(t).not_found?(S(),D("div",z0,"No headers found matching the search term.")):U("",!0),R(t).not_found?(S(),D("div",V0,"Could not find message headers. This could be because the message URL is invalid or the corresponding message was processed and is no longer tracked by ServiceControl.")):U("",!0)],64))}}),F0=$e(B0,[["__scopeId","data-v-32199ab1"]]),H0={class:"stack-trace-container"},G0={key:0},q0={key:1},Y0={key:0},W0=ue({__name:"StacktraceFormatter",props:{stackTrace:{},options:{default:()=>({frame:"st-frame",type:"st-type",method:"st-method",paramsList:"st-frame-params",paramType:"st-param-type",paramName:"st-param-name",file:"st-file",line:"st-line"})}},setup(e){const t=e,n=[{name:"english",at:"at",in:"in",line:"line"},{name:"danish",at:"ved",in:"i",line:"linje"},{name:"german",at:"bei",in:"in",line:"Zeile"},{name:"spanish",at:"en",in:"en",line:"lnea"},{name:"russian",at:"",in:"",line:""},{name:"chinese",at:"",in:"",line:""}],i=X([]),o=X(n[0]),s=r=>{const u={english:/\s+at .*?\)/g,danish:/\s+ved .*?\)/g,german:/\s+bei .*?\)/g,spanish:/\s+en .*?\)/g,russian:/\s+ .*?\)/g,chinese:/\s+ .*?\)/g},c=[];for(const d in u)if(u[d].test(r)){const f=n.find(h=>h.name===d);f&&c.push(f)}return c},a=(r,u)=>{const c=r.split(`
`),d=new RegExp(`${u.in} (.+):${u.line} (\\d+)`),f=new RegExp(`(\\s*)(${u.at}) (.+?)\\((.*?)\\)`);return c.map(h=>{const g=h.match(f);if(g){const[,p,,m,b]=g,[y,v]=(()=>{const _=m.split("."),k=_.pop()??"";return[_.join("."),k]})(),w=b.split(", ").map(_=>{const[k,x]=_.split(" ");return{name:x,type:k}}),O=h.match(d);let L,A;return O&&([,L,A]=O),{method:v,type:y,params:w,file:L,lineNumber:A,spaces:p}}else return h})},l=()=>{const r=t.stackTrace,u=s(r);if(!u.length){i.value=[r];return}o.value=u[0],i.value=a(r,o.value)};return ve(()=>t.stackTrace,()=>{l()},{immediate:!0}),(r,u)=>(S(),D("div",H0,[(S(!0),D(pe,null,ze(i.value,c=>(S(),D(pe,{key:c},[typeof c=="string"?(S(),D("span",G0,ne(c),1)):(S(),D("div",q0,[ye(ne(c.spaces)+ne(o.value.at)+" ",1),M("span",{class:Ee(t.options.frame)},[M("span",{class:Ee(t.options.type)},ne(c.type),3),u[1]||(u[1]=ye(".",-1)),M("span",{class:Ee(t.options.method)},ne(c.method),3),u[2]||(u[2]=ye("(",-1)),M("span",{class:Ee(t.options.paramsList)},[(S(!0),D(pe,null,ze(c.params,(d,f)=>(S(),D(pe,{key:d.name},[M("span",{class:Ee(t.options.paramType)},ne(d.type),3),u[0]||(u[0]=ye()),M("span",{class:Ee(t.options.paramName)},ne(d.name),3),f!==c.params.length-1?(S(),D("span",Y0,", ")):U("",!0)],64))),128))],2),u[3]||(u[3]=ye(") ",-1))],2),c.file?(S(),D(pe,{key:0},[ye(ne(o.value.in)+" ",1),M("span",{class:Ee(t.options.file)},ne(c.file),3),ye(":"+ne(o.value.line)+" ",1),M("span",{class:Ee(t.options.line)},ne(c.lineNumber),3)],64)):U("",!0)]))],64))),128))]))}}),U0=$e(W0,[["__scopeId","data-v-6c9404a0"]]),j0={key:0,class:"alert alert-info"},X0={key:2,class:"wrapper"},Z0={class:"toolbar"},K0=ue({__name:"StacktraceView",setup(e){const{state:t}=Le(He());return(n,i)=>R(t).failed_to_load?(S(),D("div",j0,"Stacktrace not available.")):R(t).loading?(S(),de(Tt,{key:1})):(S(),D("div",X0,[M("div",Z0,[ee(os,{class:"clipboard",value:R(t).data.failure_metadata.exception?.stack_trace},null,8,["value"])]),ee(U0,{"stack-trace":R(t).data.failure_metadata.exception?.stack_trace},null,8,["stack-trace"])]))}}),J0=$e(K0,[["__scopeId","data-v-02973870"]]),Q0=ue({__name:"DeleteMessageButton",setup(e){const t=He(),{state:n}=Le(t),i=X(!1),o=Z(()=>n.value.data.failure_status),s=Z(()=>o.value.retried||o.value.resolved),a=Z(()=>!o.value.archived&&n.value.data.status!==je.Successful&&n.value.data.status!==je.ResolvedSuccessfully),l=async()=>{i.value=!1;const r=`Deleting the message ${n.value.data.id} ...`;await uo(t.archiveMessage,_n.INFO,"Info",r),await t.pollForNextUpdate(ln.Archived)};return(r,u)=>a.value?(S(),D(pe,{key:0},[ee(yn,{icon:R(Yn),disabled:s.value,onClick:u[0]||(u[0]=c=>i.value=!0)},{default:ke(()=>[...u[2]||(u[2]=[ye("Delete message",-1)])]),_:1},8,["icon","disabled"]),(S(),de(lo,{to:"#modalDisplay"},[i.value?(S(),de(ts,{key:0,onCancel:u[1]||(u[1]=c=>i.value=!1),onConfirm:l,heading:"Are you sure you want to delete this message?",body:"If it is deleted, this message won't be available for retrying unless it is later restored."})):U("",!0)]))],64)):U("",!0)}}),ey=ue({__name:"RestoreMessageButton",setup(e){const t=He(),{state:n}=Le(t),i=X(!1),o=Z(()=>n.value.data.failure_status.archived),s=async()=>{i.value=!1;const a=`Restoring the message ${n.value.data.id} ...`;await uo(t.restoreMessage,_n.INFO,"Info",a),await t.pollForNextUpdate(ln.Unresolved)};return(a,l)=>o.value?(S(),D(pe,{key:0},[ee(yn,{icon:R(ns),onClick:l[0]||(l[0]=r=>i.value=!0)},{default:ke(()=>[...l[2]||(l[2]=[ye("Restore",-1)])]),_:1},8,["icon"]),(S(),de(lo,{to:"#modalDisplay"},[i.value?(S(),de(ts,{key:0,onCancel:l[1]||(l[1]=r=>i.value=!1),onConfirm:s,heading:"Are you sure you want to restore this message?",body:"The restored message will be moved back to the list of failed messages."})):U("",!0)]))],64)):U("",!0)}}),ty=ue({__name:"RetryMessageButton",setup(e){const t=He(),{state:n}=Le(t),i=X(!1),o=Z(()=>n.value.data.failure_status),s=Z(()=>o.value.retried||o.value.archived||o.value.resolved),a=Z(()=>n.value.data.status!==je.Successful&&n.value.data.status!==je.ResolvedSuccessfully),l=async()=>{i.value=!1;const r=`Retrying the message ${n.value.data.id} ...`;await uo(t.retryMessage,_n.INFO,"Info",r),await t.pollForNextUpdate(ln.Resolved)};return(r,u)=>a.value?(S(),D(pe,{key:0},[ee(yn,{icon:R(ru),disabled:s.value,onClick:u[0]||(u[0]=c=>i.value=!0)},{default:ke(()=>[...u[2]||(u[2]=[ye("Retry message",-1)])]),_:1},8,["icon","disabled"]),(S(),de(lo,{to:"#modalDisplay"},[i.value?(S(),de(ts,{key:0,onCancel:u[1]||(u[1]=c=>i.value=!1),onConfirm:l,heading:"Retry Message",body:"Are you sure you want to retry this message?"})):U("",!0)]))],64)):U("",!0)}}),ny={nowrap:"nowrap"},oy=["disabled"],iy={class:"actions"},sy=ue({__name:"EditMessageHeader",props:{header:{}},setup(e){const t=e;let n;const i=X(t.header),o=Z(()=>t.header.value);ve(o,l=>{i.value.isChanged=l!==n});function s(){i.value.value=n,i.value.isMarkedAsRemoved=!1,i.value.isChanged=!1}function a(){i.value.isMarkedAsRemoved=!0,i.value.isChanged=!0}return Ve(()=>{n=t.header.value}),(l,r)=>{const u=ut("tippy");return S(),D(pe,null,[M("td",ny,[M("span",{class:Ee({"header-removed":i.value.isMarkedAsRemoved})},ne(t.header.key),3),i.value.isLocked?Ne((S(),de(Ge,{key:0,icon:R(lu),class:"icon"},null,8,["icon"])),[[u,"Protected system header"]]):U("",!0),(i.value.isChanged||i.value.isMarkedAsRemoved)&&i.value.isSensitive?Ne((S(),de(Ge,{key:1,icon:R(Oi),class:"icon warning",size:"lg"},null,8,["icon"])),[[u,"This is a sensitive message header that if changed can the system behavior. Proceed with caution."]]):U("",!0),i.value.isChanged?Ne((S(),de(Ge,{key:2,icon:R(wr),class:"icon edit"},null,8,["icon"])),[[u,"Edited"]]):U("",!0)]),M("td",null,[Ne(M("input",{class:Ee([{"header-removed":i.value.isMarkedAsRemoved},"form-control"]),disabled:i.value.isLocked,"onUpdate:modelValue":r[0]||(r[0]=c=>i.value.value=c)},null,10,oy),[[uu,i.value.value]])]),M("td",null,[M("div",iy,[!i.value.isLocked&&!i.value.isMarkedAsRemoved?(S(),D("a",{key:0,onClick:r[1]||(r[1]=c=>a())},[Ne(ee(Ge,{icon:R(Yn),class:"remove"},null,8,["icon"]),[[u,"Remove header"]])])):U("",!0),i.value.isChanged?(S(),D("a",{key:1,onClick:r[2]||(r[2]=c=>s())},[Ne(ee(Ge,{icon:R(ns),class:"undo"},null,8,["icon"]),[[u,"Reset changes"]])])):U("",!0)])])],64)}}}),ay=$e(sy,[["__scopeId","data-v-666f7d52"]]),ry={name:"failed_message_editor"},ly={class:"model modal-msg-editor",style:{"z-index":"1050",display:"block"},role:"dialog","aria-label":"edit and retry message"},uy={class:"modal-mask"},cy={class:"modal-dialog"},dy={class:"modal-content"},fy={class:"modal-body"},hy={class:"row"},gy={class:"col-sm-12"},my={class:"row msg-editor-tabs"},vy={class:"col-sm-12 no-side-padding"},py={role:"tablist",class:"tabs msg-tabs"},yy={class:"row msg-editor-content"},_y={class:"col-sm-12 no-side-padding"},wy={key:0,class:"alert alert-warning"},by={class:"col-sm-12"},xy={key:1,class:"alert alert-warning"},Ey={role:"status","aria-label":"cannot edit message body",class:"col-sm-12"},Sy={key:2,class:"row alert alert-danger"},ky={class:"col-sm-12"},Cy={key:3,role:"tabpanel",class:"table"},My={key:0,role:"tabpanel"},Ny={style:{"margin-top":"1.25rem"}},$y={key:0,class:"empty-error"},Iy={key:1,role:"tabpanel",class:"alert alert-info"},Ty={key:0,class:"modal-footer"},Dy=["disabled"],Oy={key:1,class:"modal-footer cancel-confirmation"},Py={key:2,class:"modal-footer edit-retry-confirmation"},Ry=ue({__name:"EditRetryDialog",emits:["cancel","confirm"],setup(e,{emit:t}){const n=t,i=X(0),o=X({isBodyChanged:!1,isBodyEmpty:!1,isContentTypeSupported:!1,bodyContentType:void 0,bodyUnavailable:!1,isEvent:!1,retried:!1,headers:[],messageBody:""}),s=X(!1),a=X(!1),l=X(!1),r=He(),{state:u,headers:c,body:d,edit_and_retry_config:f}=Le(r),h=Z(()=>u.value.data.id??""),g=Z(()=>d.value.data.value??""),p=new RegExp(/[\n\r]*/,"g"),m=cu(k=>{const x=k.replaceAll(p,"");o.value.isBodyChanged=x!==g.value.replaceAll(p,""),o.value.isBodyEmpty=x===""},100);ve(()=>o.value.messageBody,k=>{m(k)});function b(){n("cancel")}function y(){s.value=!0}function v(){if(o.value.isBodyChanged){a.value=!0;return}if(o.value.headers.some(k=>k.isChanged)){a.value=!0;return}b()}function w(){o.value.messageBody=g.value,o.value.isBodyChanged=!1}function O(){o.value.headers=o.value.headers.filter(k=>!k.isMarkedAsRemoved)}async function L(){O();try{return await r.retryEditedMessage(h.value,o),o.value.retried=!0,n("confirm")}catch{s.value=!1,l.value=!0}}function A(){function k(C){return x.headers.find(V=>V.key===C)?.value}const x={isBodyChanged:!1,isBodyEmpty:!1,isContentTypeSupported:!1,bodyContentType:void 0,bodyUnavailable:d.value.not_found??!1,isEvent:!1,retried:u.value.data.failure_status.retried??!1,headers:c.value.data.map(C=>({...C})),messageBody:d.value.data.value??""},I=k("NServiceBus.ContentType");x.bodyContentType=I;const E=ps(I);x.isContentTypeSupported=E.isSupported,x.language=E.language;const G=k("NServiceBus.MessageIntent");x.isEvent=G==="Publish";for(let C=0;C<c.value.data.length;C++){const H=c.value.data[C];H.isLocked=!1,H.isSensitive=!1,H.isMarkedAsRemoved=!1,H.isChanged=!1,f.value.locked_headers.includes(H.key)?H.isLocked=!0:f.value.sensitive_headers.includes(H.key)&&(H.isSensitive=!0),x.headers[C]=H}o.value=x}function _(k){i.value=k}return Ve(()=>{_(1),A()}),(k,x)=>(S(),D("section",ry,[M("div",ly,[M("div",uy,[M("div",cy,[M("div",dy,[x[17]||(x[17]=M("div",{class:"modal-header"},[M("div",{class:"modal-title"},[M("h3",null,"Edit and retry message")])],-1)),M("div",fy,[M("div",hy,[M("div",gy,[M("div",my,[M("div",vy,[M("div",py,[M("h5",{role:"tab",class:Ee([{active:i.value===1},"nav-item"]),onClick:x[0]||(x[0]=un(I=>_(1),["prevent"]))},[...x[9]||(x[9]=[M("a",{href:"#"},"Headers",-1)])],2),M("h5",{role:"tab",class:Ee([{active:i.value===2},"nav-item"]),onClick:x[1]||(x[1]=un(I=>_(2),["prevent"]))},[...x[10]||(x[10]=[M("a",{href:"#"},"Message body",-1)])],2)])])]),M("div",yy,[M("div",_y,[o.value.isEvent?(S(),D("div",wy,[M("div",by,[ee(Ge,{icon:R(_s)},null,8,["icon"]),x[11]||(x[11]=ye(" This message is an event. If it was already successfully handled by other subscribers, editing it now has the risk of changing the semantic meaning of the event and may result in altering the system behavior. ",-1))])])):U("",!0),!o.value.isContentTypeSupported||o.value.bodyUnavailable?(S(),D("div",xy,[M("div",Ey,[ee(Ge,{icon:R(_s)},null,8,["icon"]),ye(' Message body cannot be edited because content type "'+ne(o.value.bodyContentType)+'" is not supported. Only messages with content types "application/json" and "text/xml" can be edited. ',1)])])):U("",!0),l.value?(S(),D("div",Sy,[M("div",ky,[ee(Ge,{icon:R(Oi),class:"error"},null,8,["icon"]),x[12]||(x[12]=ye(" An error occurred while retrying the message, please check the ServiceControl logs for more details on the failure.",-1))])])):U("",!0),i.value===1?(S(),D("table",Cy,[M("tbody",null,[(S(!0),D(pe,null,ze(o.value.headers,I=>(S(),D("tr",{class:"interactiveList",key:I.key},[ee(ay,{header:I},null,8,["header"])]))),128))])])):U("",!0),i.value===2?(S(),D(pe,{key:4},[o.value.bodyUnavailable?(S(),D("div",Iy,ne(o.value.bodyUnavailable),1)):(S(),D("div",My,[M("div",Ny,[R(d).loading?(S(),de(Tt,{key:0})):(S(),de(Wn,{key:1,"aria-label":"message body","read-only":!o.value.isContentTypeSupported,modelValue:o.value.messageBody,"onUpdate:modelValue":x[2]||(x[2]=I=>o.value.messageBody=I),language:o.value.language,"show-gutter":!0},{toolbarLeft:ke(()=>[o.value.isBodyEmpty?(S(),D("span",$y,[ee(Ge,{icon:R(Oi),class:"error"},null,8,["icon"]),x[13]||(x[13]=ye(" Message body cannot be empty",-1))])):U("",!0)]),toolbarRight:ke(()=>[o.value.isBodyChanged?(S(),D("button",{key:0,type:"button",class:"btn btn-secondary btn-sm",onClick:w},[ee(Ge,{icon:R(ns)},null,8,["icon"]),x[14]||(x[14]=ye(" Reset changes",-1))])):U("",!0)]),_:1},8,["read-only","modelValue","language"]))])]))],64)):U("",!0)])])])])]),!s.value&&!a.value?(S(),D("div",Ty,[M("button",{class:"btn btn-default",onClick:x[3]||(x[3]=I=>v())},"Cancel"),M("button",{class:"btn btn-primary",disabled:o.value.isBodyEmpty||o.value.bodyUnavailable,onClick:x[4]||(x[4]=I=>y())},"Retry",8,Dy)])):U("",!0),a.value?(S(),D("div",Oy,[x[15]||(x[15]=M("div",null,"Are you sure you want to cancel? Any changes you made will be lost.",-1)),M("button",{class:"btn btn-default",onClick:x[5]||(x[5]=I=>b())},"Yes"),M("button",{class:"btn btn-primary",onClick:x[6]||(x[6]=I=>a.value=!1)},"No")])):U("",!0),s.value?(S(),D("div",Py,[x[16]||(x[16]=M("div",null,"Are you sure you want to continue? If you edited the message, it may cause unexpected consequences in the system.",-1)),M("button",{class:"btn btn-default",onClick:x[7]||(x[7]=I=>L())},"Yes"),M("button",{class:"btn btn-primary",onClick:x[8]||(x[8]=I=>s.value=!1)},"No")])):U("",!0)])])])])]))}}),Ly=$e(Ry,[["__scopeId","data-v-8abe1e84"]]),Ay={name:"edit_ignored_dialog"},zy={class:"modal",style:{"z-index":"1050",display:"block"},role:"dialog","aria-label":"edit ignored"},Vy={class:"modal-mask"},By={class:"modal-dialog"},Fy={class:"modal-content"},Hy={class:"modal-footer"},Gy=ue({__name:"EditIgnoredDialog",emits:["close"],setup(e,{emit:t}){const n=t;function i(){n("close")}return(o,s)=>(S(),D("section",Ay,[M("div",zy,[M("div",Vy,[M("div",By,[M("div",Fy,[s[1]||(s[1]=M("div",{class:"modal-header"},[M("div",{class:"modal-title"},[M("h3",null,"Edit Ignored")])],-1)),s[2]||(s[2]=M("div",{class:"modal-body"},[M("p",null,"This retry was ignored because another edit had already been processed.")],-1)),M("div",Hy,[M("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=a=>i())},"Ok")])])])])])]))}}),qy=$e(Gy,[["__scopeId","data-v-a672f00a"]]),Yy=ue({__name:"EditAndRetryButton",setup(e){const t=He(),{state:n,edit_and_retry_config:i,editRetryResponse:o}=Le(t),s=X(!1),a=X(!1),l=Z(()=>n.value.data.failure_status),r=Z(()=>l.value.retried||l.value.archived||l.value.resolved),u=Z(()=>i.value.enabled&&n.value.data.status!==je.Successful&&n.value.data.status!==je.ResolvedSuccessfully),c=async()=>{a.value=!1,await t.pollForNextUpdate(ln.Resolved)},d=async()=>{if(s.value=!1,o.value?.edit_ignored)a.value=!0;else{const h=`Retrying the edited message ${n.value.data.id} ...`;du(_n.INFO,"Info",h),await t.pollForNextUpdate(ln.Resolved)}};async function f(){await t.downloadBody(),s.value=!0}return(h,g)=>u.value?(S(),D(pe,{key:0},[ee(yn,{icon:R(wr),"aria-label":"Edit & retry",disabled:r.value,onClick:f},{default:ke(()=>[...g[1]||(g[1]=[ye("Edit & retry",-1)])]),_:1},8,["icon","disabled"]),(S(),de(lo,{to:"#modalDisplay"},[s.value?(S(),de(Ly,{key:0,onCancel:g[0]||(g[0]=p=>s.value=!1),onConfirm:d})):U("",!0),a.value?(S(),de(qy,{key:1,onClose:c})):U("",!0)]))],64)):U("",!0)}}),Wy=ue({__name:"ExportMessageButton",setup(e){const t=He(),n=X(!1);async function i(){n.value=!0,await uo(async()=>{const o=await t.exportMessage();hu(o,"text/txt","message.txt")},_n.INFO,"Info","Message export completed."),n.value=!1}return(o,s)=>(S(),de(yn,{icon:R(fu),loading:n.value,onClick:i},{default:ke(()=>[...s[0]||(s[0]=[ye("Export message",-1)])]),_:1},8,["icon","loading"]))}}),Uy={class:"nav tabs msg-tabs"},jy=["onClick"],Xy={href:"#"},Zy=ue({__name:"TabsLayout",props:{tabs:{}},setup(e){const t=e,n=X(t.tabs[0].text),i=rn(t.tabs[0].component);function o(s){n.value=s,i.value=t.tabs.find(a=>a.text===s).component}return ve(()=>t.tabs,s=>{s.find(a=>a.text===n.value)||o(s[0].text)}),(s,a)=>(S(),D(pe,null,[M("div",Uy,[(S(!0),D(pe,null,ze(t.tabs,l=>(S(),D("h5",{class:Ee([{active:n.value===l.text},"nav-item"]),onClick:un(r=>o(l.text),["prevent"]),key:l.text},[M("a",Xy,ne(l.text),1)],10,jy))),128))]),(S(),de(gu,null,[(S(),de(mt(i.value)))],1024))],64))}}),dt=ue({__name:"MetadataLabel",props:{tooltip:{},type:{},text:{}},setup(e){const t=e;return(n,i)=>{const o=ut("tippy");return Ne((S(),D("span",{class:Ee(["label sidebar-label metadata-label",`label-${t.type}`])},[ye(ne(t.text),1)],2)),[[o,t.tooltip]])}}}),En=_r("SagaDiagramStore",()=>{const e=X(null),t=X(null),n=X(!1),i=X(!1),o=X(null),s=X(!1),a=X(new Set),l=X([]),r=X(null),u=X(!1),c=X(!1),d="messages/{0}/body",f=He(),h=mu();ve(()=>f.state.data.message_id,_=>{_&&A(_)},{immediate:!0}),ve(t,async _=>{_?await p(_):v()}),ve([s,e],async([_,k])=>{_&&k&&await L(k)});function g(_){t.value=_}async function p(_){if(_){n.value=!0,o.value=null;try{const k=await h.fetchFromServiceControl(`sagas/${_}`);if(k.status===404)e.value=null,o.value="Saga history not found";else if(!k.ok)e.value=null,o.value="Failed to fetch saga history";else{const x=await k.json();e.value=x}}catch(k){o.value=k instanceof Error?k.message:"Unknown error occurred",e.value=null}finally{n.value=!1}}}async function m(_){const k=(_.body_url??w(d,_.message_id)).replace(/^\//,""),x={message_id:_.message_id,body:{data:{}}};x.body.loading=!0,x.body.failed_to_load=!1;try{const I=await h.fetchFromServiceControl(k);if(I.status===404)return x.body.not_found=!0,x;if(I.status===204)return x.body.data.no_content=!0,x;const E=I.headers.get("content-type");if(x.body.data.content_type=E??"text/plain",x.body.data.value=await I.text(),E==="application/json"&&x.body.data.value)x.body.data.value=x.body.data.value!=="{}"?Vn(br(x.body.data.value),null,2)??x.body.data.value:"";else if(E==="text/xml"&&x.body.data.value){const G=b(x.body.data.value);x.body.data.value=G?ku(x.body.data.value,{indentation:"  ",collapseContent:!0}):""}}catch{x.body.failed_to_load=!0}finally{x.body.loading=!1}return x}function b(_){const I=new DOMParser().parseFromString(_,"text/xml").documentElement;if(I){const E=I.textContent;if(E)return E}return""}async function y(_){try{const k=await h.fetchFromServiceControl(`messages/search?q=${_}`);if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);return await k.json()}catch(k){return console.error("Error fetching audit messages:",k),{result:[]}}}function v(){e.value=null,t.value=null,o.value=null,a.value.clear(),l.value=[],r.value=null,u.value=!1}function w(_,k){return _.replace("{0}",k)}function O(){s.value=!s.value}async function L(_){i.value=!0,o.value=null;try{const k=_.changes.flatMap(G=>{const C=[];return G.initiating_message&&!a.value.has(G.initiating_message.message_id)&&C.push(G.initiating_message),G.outgoing_messages&&C.push(...G.outgoing_messages.filter(H=>!a.value.has(H.message_id))),C});if(k.every(G=>!G.body_url)&&k.length>0){const G=await y(t.value);k.forEach(C=>{const H=G.find(V=>V.message_id===C.message_id);H&&(C.body_url=H.body_url)})}const I=k.map(async G=>{const C=await m(G);return a.value.add(G.message_id),C}),E=await Promise.all(I);l.value=[...l.value,...E]}catch(k){o.value=k instanceof Error?k.message:"Unknown error occurred"}finally{i.value=!1}}function A(_){r.value=_}return{sagaHistory:e,sagaId:t,loading:n,messageDataLoading:i,error:o,showMessageData:s,messagesData:l,selectedMessageId:r,scrollToTimeoutRequest:u,scrollToTimeout:c,setSagaId:g,clearSagaHistory:v,toggleMessageData:O,setSelectedMessageId:A}});function Zi(e){if(!e)return null;let n=e.split(",")[0].split(".").pop()||"";return n=n.replace(/\+/g,"."),n}function Ky(e){const t=e.split(".");let n=0,i=e;t.length>1&&(n=parseInt(t[0],10),i=t[1]);const[o,s,a]=i.split(":").map(Number);return{days:n,hours:o,minutes:s,seconds:a}}function Rn(e,t){return e>0?`${e}${t}`:""}function Jy(e){const{days:t,hours:n,minutes:i,seconds:o}=Ky(e);return`${Rn(t,"d")}${Rn(n,"h")}${Rn(i,"m")}${Rn(o,"s")}`}function Qy(e,t){if(!e||!e.changes||!e.changes.length)return[];const n=new Set;e.changes.forEach(o=>{o.outgoing_messages&&o.outgoing_messages.forEach(s=>{(s.delivery_delay||"00:00:00")!=="00:00:00"&&n.add(s.message_id)})});const i=e.changes.map(o=>{const s=new Date(o.start_time),a=new Date(o.finish_time),l=new Date(o.initiating_message?.time_sent||Date.now()),r=o.initiating_message?lr(t,o.initiating_message.message_id):Al(),u=o.outgoing_messages.map(g=>{const p=g.delivery_delay||"00:00:00",m=new Date(g.time_sent),b=!!p&&p!=="00:00:00",y=p.split(":")[2]||"0",v=g.intent==="Publish",w=lr(t,g.message_id);return{MessageType:g.message_type||"",MessageId:g.message_id,FormattedTimeSent:m.toLocaleString(),HasTimeout:b,TimeoutSeconds:y,TimeoutFriendly:Jy(p),FriendlyTypeName:Zi(g.message_type||""),Data:w,IsEventMessage:v,IsCommandMessage:!v}}),c=u.filter(g=>g.HasTimeout).map(g=>{const p=e.changes.some(m=>m.initiating_message?.message_id===g.MessageId);return{...g,TimeoutFriendly:`${g.TimeoutFriendly}`,HasBeenProcessed:p}}),d=u.filter(g=>!g.HasTimeout),f=c.length>0,h=o.initiating_message?.is_saga_timeout_message&&n.has(o.initiating_message?.message_id);return{MessageId:o.initiating_message?.message_id||"",StartTime:s,FinishTime:a,FormattedStartTime:s.toLocaleString(),Status:o.status,StatusDisplay:o.status==="new"?"Saga Initiated":"Saga Updated",InitiatingMessage:{FriendlyTypeName:Zi(o.initiating_message?.message_type||"Unknown Message")||"",MessageId:o.initiating_message?.message_id||"",FormattedMessageTimestamp:l.toLocaleString(),MessageData:r,IsEventMessage:o.initiating_message?.intent==="Publish",IsSagaTimeoutMessage:o.initiating_message?.is_saga_timeout_message||!1,HasRelatedTimeoutRequest:h},HasTimeout:f,IsFirstNode:o.status==="new",OutgoingTimeoutMessages:c,OutgoingMessages:d,HasOutgoingMessages:d.length>0,HasOutgoingTimeoutMessages:c.length>0,showUpdatedPropertiesOnly:!0,stateAfterChange:o.state_after_change||"{}"}}).sort((o,s)=>o.StartTime.getTime()-s.StartTime.getTime()).sort((o,s)=>o.FinishTime.getTime()-s.FinishTime.getTime());for(let o=1;o<i.length;o++)i[o].previousStateAfterChange=i[o-1].stateAfterChange;return i}function lr(e,t){return e.find(i=>i.message_id===t)||Al()}function Al(){return{message_id:"",body:{data:{},loading:!1,failed_to_load:!1,not_found:!1}}}const zl="data:image/svg+xml,%3csvg%20width='128'%20height='128'%20viewBox='0%200%20128%20128'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M44%2042.9C29.7%2037.2%2019.1%2027.3%2019.1%200h-16c0%2040.7%2020.6%2053.3%2040.9%2059.9V42.9z'%20fill='%23D3D3D3'%20fill-rule='nonzero'%20/%3e%3cpath%20d='M114.3%2097C110.1%2067.7%2093%2057.7%2075%2052.1V69c12%204.5%2020.4%2012%2023.3%2029.1l-9.4%200.2l18.5%2029.7L124%2097H114.3z'%20fill='%23D3D3D3'%20fill-rule='nonzero'%20/%3e%3cpolygon%20points='68,98%2068,0%2051,0%2051,98%2041.6,98%2059.1,128%2076.7,98'%20fill='%23E4E4E4'%20fill-rule='nonzero'%20/%3e%3c/svg%3e",e1={class:"body"},t1={class:"saga-message"},n1={class:"saga-message-container"},o1=["src"],i1=ue({__name:"NoSagaData",setup(e){return(t,n)=>(S(),D("div",e1,[M("div",t1,[M("div",n1,[M("img",{class:"saga-message-image",src:R(zl),alt:"No saga data found"},null,8,o1),n[0]||(n[0]=M("h1",{role:"status","aria-label":"message-not-involved-in-saga",class:"saga-message-title"},"This message is not part of any saga",-1))])])]))}}),s1=$e(i1,[["__scopeId","data-v-0ed3d8f7"]]),a1={class:"body",role:"status","aria-label":"saga-plugin-needed"},r1={class:"saga-message"},l1={class:"saga-message-container"},u1=["src"],c1={class:"saga-message-box"},d1={class:"clippy-button"},f1=ue({__name:"SagaPluginNeeded",setup(e){return(t,n)=>(S(),D("div",a1,[M("div",r1,[M("div",l1,[M("img",{class:"saga-message-image",src:R(zl),alt:"Saga plugin required"},null,8,u1),n[2]||(n[2]=M("h1",{class:"saga-message-title"},"Saga audit plugin needed to visualize saga",-1)),M("div",c1,[n[0]||(n[0]=M("p",{class:"saga-message-text"},"To visualize your saga, please install the appropriate nuget package in your endpoint",-1)),n[1]||(n[1]=M("a",{href:"https://www.nuget.org/packages/NServiceBus.SagaAudit",class:"saga-message-link"},"install-package NServiceBus.SagaAudit",-1)),M("span",d1,[ee(os,{value:"install-package NServiceBus.SagaAudit",isIconOnly:!0})])])])])]))}}),h1=$e(f1,[["__scopeId","data-v-34c42948"]]),g1={class:"block"},m1={class:"row row--center"},v1={class:"cell cell--center"},p1={class:"cell-inner cell-inner-center"},y1={"aria-label":"saga name",class:"main-title"},_1={role:"note","aria-label":"saga guid"},w1=ue({__name:"SagaHeader",props:{sagaTitle:{},sagaGuid:{}},setup(e){return(t,n)=>(S(),D("div",g1,[M("div",m1,[M("div",v1,[M("div",p1,[M("h1",y1,ne(e.sagaTitle),1),M("div",null,[n[0]||(n[0]=M("b",null,"guid",-1)),n[1]||(n[1]=ye()),M("span",_1,ne(e.sagaGuid),1)])])])])]))}}),b1=$e(w1,[["__scopeId","data-v-61fa72c6"]]),Vl="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%203V9H5V5H9V3H3ZM3%2021H9V19H5V15H3V21ZM21%203H15V5H19V9H21V3ZM15%2021H21V15H19V19H15V21Z'%20fill='currentColor'/%3e%3c/svg%3e",Bl="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18%206L6%2018M6%206L18%2018'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",x1={class:"editor-container"},E1=["src"],S1={key:0,class:"maximize-modal"},k1={class:"maximize-modal-content"},C1={class:"maximize-modal-toolbar"},M1={class:"maximize-modal-title"},N1=["src"],$1={class:"maximize-modal-body"},I1=ue({__name:"MaximizableCodeEditor",props:vu({language:{},readOnly:{type:Boolean,default:!1},showGutter:{type:Boolean,default:!1},ariaLabel:{},extensions:{default:()=>[]},modalTitle:{default:"Code View"}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=pu(e,"modelValue"),n=X(!1),i=X(!1),o=()=>{n.value=!n.value},s=()=>{i.value=!0},a=()=>{i.value=!1},l=r=>{r.key==="Escape"&&n.value&&(n.value=!1)};return Ve(()=>{window.addEventListener("keydown",l)}),ro(()=>{window.removeEventListener("keydown",l)}),(r,u)=>{const c=ut("tippy");return S(),D("div",{class:"code-editor-wrapper",onMouseenter:s,onMouseleave:a},[M("div",x1,[ee(Wn,{class:"maximazable-code-editor--inline-instance",modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=d=>t.value=d),language:e.language,"read-only":e.readOnly,"show-gutter":e.showGutter,"show-copy-to-clipboard":!1,"aria-label":e.ariaLabel,extensions:e.extensions},{toolbarLeft:ke(()=>[De(r.$slots,"toolbarLeft",{},void 0,!0)]),toolbarRight:ke(()=>[De(r.$slots,"toolbarRight",{},()=>[i.value?Ne((S(),D("button",{key:0,onClick:o,class:"maximize-button"},[M("img",{src:R(Vl),alt:"Maximize",width:"14",height:"14"},null,8,E1)])),[[c,"Maximize view"]]):U("",!0)],!0)]),_:3},8,["modelValue","language","read-only","show-gutter","aria-label","extensions"])]),n.value?(S(),D("div",S1,[M("div",k1,[M("div",C1,[M("span",M1,ne(e.modalTitle),1),Ne((S(),D("button",{onClick:o,class:"maximize-modal-close"},[M("img",{src:R(Bl),alt:"Close",width:"16",height:"16"},null,8,N1)])),[[c,"Close"]])]),M("div",$1,[ee(Wn,{class:"maximazable-code-editor--pop-up-instance",modelValue:t.value,"onUpdate:modelValue":u[1]||(u[1]=d=>t.value=d),language:e.language,"read-only":e.readOnly,"show-copy-to-clipboard":!0,"show-gutter":!0,"aria-label":e.ariaLabel,extensions:[]},null,8,["modelValue","language","read-only","aria-label"])])])])):U("",!0)],32)}}}),Fl=$e(I1,[["__scopeId","data-v-1bfbcffa"]]),T1={key:0,class:"message-data-loading"},D1={key:1,class:"message-data-box message-data-box-error"},O1={key:2,class:"message-data-box"},P1={key:3,class:"message-data-box message-data-box-content"},R1={key:4,class:"message-data-box message-data-box-error"},L1={class:"message-data-box-text--unsupported"},A1=ue({__name:"MessageDataBox",props:{messageData:{},maximizedTitle:{}},setup(e){const t=e,n=Z(()=>t.maximizedTitle?`Message Data - ${t.maximizedTitle}`:"Message Data"),i=En(),{messageDataLoading:o}=Le(i),s=Z(()=>ps(t.messageData.body.data.content_type)),a=Z(()=>t.messageData.body.data.value||"");return(l,r)=>R(o)?(S(),D("div",T1,[ee(Tt)])):e.messageData.body.failed_to_load?(S(),D("div",D1,[...r[0]||(r[0]=[M("span",{class:"message-data-box-text--error"},"Failed to load message data, there might be a connection issue or the message may no longer be available.",-1)])])):!R(o)&&(!e.messageData.body.data.value||e.messageData.body.not_found||e.messageData.body.data.no_content)?(S(),D("div",O1,[...r[1]||(r[1]=[M("span",{class:"message-data-box-text--empty"},"No message body data available",-1)])])):s.value.isSupported?(S(),D("div",P1,[ee(Fl,{"model-value":a.value,language:s.value.language,readOnly:!0,showGutter:!1,modalTitle:n.value},null,8,["model-value","language","modalTitle"])])):(S(),D("div",R1,[M("span",L1,'Message body cannot be displayed because content type "'+ne(e.messageData.body.data.content_type)+'" is not supported.',1)]))}}),ys=$e(A1,[["__scopeId","data-v-6bd93047"]]),z1="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.8%2018.5H14V10h2.5v6h5.3L21.8%2018.5L21.8%2018.5z%20M25.1%2024.4c2-2.2%203.2-5.1%203.2-8.3%20c0-6.8-5.5-12.3-12.3-12.3C9.2%203.7%203.7%209.2%203.7%2016.1c0%203.2%201.2%206.1%203.2%208.3c-0.6%201.5-1.4%203.6-2%204.9c-0.1%200.2%200%200.4%200.2%200.6%20c0.2%200.1%200.4%200.2%200.6%200c1.3-0.8%203.1-2.1%204.5-3c1.7%200.9%203.7%201.5%205.9%201.5s4.1-0.5%205.9-1.5l4.5%203c0.2%200.1%200.4%200.1%200.6%200%20c0.2-0.1%200.2-0.4%200.2-0.6L25.1%2024.4z%20M16%2025.3c-5.1%200-9.3-4.1-9.3-9.3c0-5.1%204.1-9.3%209.3-9.3c5.1%200%209.3%204.1%209.3%209.3%20C25.3%2021.2%2021.1%2025.3%2016%2025.3z%20M10.5%202.8C9.6%202.3%208.6%202%207.6%202C4.5%202%202%204.5%202%207.6c0%201%200.3%202%200.8%202.8C4.2%207%207%204.2%2010.5%202.8z%20M29.2%2010.4C29.7%209.6%2030%208.6%2030%207.6C30%204.5%2027.5%202%2024.4%202c-1%200-2%200.3-2.9%200.8C25%204.2%2027.8%207%2029.2%2010.4z'%20fill='currentColor'%20fill-rule='nonzero'%20/%3e%3c/svg%3e",Hl="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0'%20y='0'%20width='15'%20height='15'%20fill='%23333333'%20/%3e%3cpath%20d='M10.986%208h-4V4h1v3h3V8z%20M7.486%203.201c-2.376%200-4.299%201.923-4.299%204.299%20c0%202.376%201.923%204.299%204.299%204.299c2.376%200%204.299-1.923%204.299-4.299C11.784%205.124%209.861%203.201%207.486%203.201%20M7.486%202%20c3.038%200%205.5%202.462%205.5%205.5s-2.462%205.5-5.5%205.5s-5.5-2.462-5.5-5.5S4.448%202%207.486%202z'%20fill='%23CCCCCC'%20fill-rule='nonzero'%20/%3e%3c/svg%3e",V1={class:"row row--right"},B1={class:"cell cell--center"},F1={class:"cell-inner cell-inner-line"},H1=["src"],G1={key:1,class:"timeout-status","aria-label":"timeout requested"},q1={class:"cell cell--center cell--top-border"},Y1={key:0,class:"cell-inner cell-inner-line"},W1={class:"cell cell--side"},U1=["src"],j1={class:"message-title","aria-label":"timeout message type"},X1={class:"timestamp","aria-label":"timeout message timestamp"},Z1={key:0,class:"message-data message-data--active"},K1=ue({__name:"SagaOutgoingTimeoutMessage",props:{message:{},isLastMessage:{type:Boolean},showMessageData:{type:Boolean}},setup(e){const t=e,n=En(),i=X(null),o=Z(()=>n.selectedMessageId===t.message.MessageId),s=()=>{n.setSelectedMessageId(t.message.MessageId),n.scrollToTimeout=!0};return ve([()=>n.scrollToTimeoutRequest,()=>o.value,()=>i.value!==null],([a,l,r])=>{a&&l&&r&&i.value&&(i.value.scrollIntoView({behavior:"smooth",block:"center"}),n.scrollToTimeoutRequest=!1)},{immediate:!0}),(a,l)=>{const r=ut("tippy");return S(),D("div",V1,[M("div",B1,[M("div",F1,[M("img",{class:"saga-icon saga-icon--center-cell saga-icon--overlap",src:R(Hl),alt:"Timeout Request"},null,8,H1),e.message.HasBeenProcessed?Ne((S(),D("a",{key:0,class:"timeout-status",href:"#",onClick:un(s,["prevent"]),"aria-label":"timeout requested"},[ye("Timeout Requested = "+ne(e.message.TimeoutFriendly),1)])),[[r,"View timeout processing details"]]):Ne((S(),D("span",G1,[ye("Timeout Requested = "+ne(e.message.TimeoutFriendly),1)])),[[r,"This timeout has been requested but not yet processed"]])])]),l[2]||(l[2]=M("div",{class:"cell cell--side"},null,-1)),M("div",q1,[l[0]||(l[0]=M("div",{class:"cell-inner cell-inner-top"},null,-1)),e.isLastMessage?U("",!0):(S(),D("div",Y1))]),M("div",W1,[l[1]||(l[1]=M("div",{class:"cell-inner cell-inner-right"},null,-1)),M("div",{ref_key:"timeoutMessageRef",ref:i,class:Ee({"cell-inner":!0,"cell-inner-side":!0,"cell-inner-side--active":o.value})},[Ne(M("img",{class:"saga-icon saga-icon--side-cell",src:R(z1),alt:""},null,8,U1),[[r,"Timeout Message"]]),Ne((S(),D("h2",j1,[ye(ne(e.message.FriendlyTypeName),1)])),[[r,e.message.FriendlyTypeName]]),Ne((S(),D("div",X1,[ye(ne(e.message.FormattedTimeSent),1)])),[[r,`Sent at: ${e.message.FormattedTimeSent}`]])],2),e.showMessageData?(S(),D("div",Z1,[ee(ys,{messageData:e.message.Data,maximizedTitle:e.message.FriendlyTypeName},null,8,["messageData","maximizedTitle"])])):U("",!0)])])}}}),J1=$e(K1,[["__scopeId","data-v-05d3dc12"]]),Gl="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2015%206'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-540,-191)'%3e%3cg%20id='command'%3e%3cg%20transform='matrix(0,1,-1,0,542.944,197)'%3e%3cpath%20d='M-2.944,-3.056C-1.318,-3.056%20-0,-1.713%20-0,-0.056C-0,1.601%20-1.318,2.944%20-2.944,2.944C-4.57,2.944%20-6,1.601%20-6,-0.056C-6,-1.713%20-4.57,-3.056%20-2.944,-3.056'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3cg%20transform='matrix(1,0,0,-1,555,194)'%3e%3cpath%20d='M0,0L-4,3L-4,1L-8,1L-8,-1L-4,-1L-4,-3L0,0Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ql="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2016%2016'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-1268,-330)'%3e%3cg%20id='event'%3e%3cg%20transform='matrix(0,1,-1,0,1271.05,341)'%3e%3cpath%20d='M-3,-3C-1.374,-3%200,-1.657%200,0C0,1.657%20-1.374,3%20-3,3C-4.626,3%20-6,1.657%20-6,0C-6,-1.657%20-4.626,-3%20-3,-3'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3cg%20transform='matrix(1,0,0,-1,1283.05,338)'%3e%3cpath%20d='M0,0L-4,3L-4,1L-8,1L-8,-1L-4,-1L-4,-3L0,0Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3cg%20transform='matrix(1,0,0,-1,1279.05,335.879)'%3e%3cpath%20d='M0,5.879L-4,5.879L-3.05,4.243L-5.878,1.415L-4.464,0L-1.323,3.016L0,1.879L0,5.879Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3cg%20transform='matrix(1,0,0,-1,1279.05,340.121)'%3e%3cpath%20d='M0,-5.879L0,-1.879L-1.636,-2.829L-4.465,0L-5.879,-1.414L-3.05,-4.243L-4,-5.879L0,-5.879Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Q1=["src","alt"],e_={class:"message-title"},t_={class:"timestamp"},n_={key:0,class:"message-data message-data--active"},o_=ue({__name:"SagaOutgoingMessage",props:{message:{},showMessageData:{type:Boolean}},setup(e){const t=Z(()=>n.selectedMessageId===i.message.MessageId),n=En(),i=e;return(o,s)=>{const a=ut("tippy");return S(),D(pe,null,[M("div",{class:Ee({"cell-inner":!0,"cell-inner-side":!0,"cell-inner-side--active":t.value})},[Ne(M("img",{class:"saga-icon saga-icon--side-cell",src:e.message.IsEventMessage?R(ql):R(Gl),alt:e.message.IsEventMessage?"Event":"Command"},null,8,Q1),[[a,e.message.IsEventMessage?"Event Message":"Command Message"]]),Ne((S(),D("h2",e_,[ye(ne(e.message.FriendlyTypeName),1)])),[[a,e.message.FriendlyTypeName]]),Ne((S(),D("div",t_,[ye(ne(e.message.FormattedTimeSent),1)])),[[a,`Sent at: ${e.message.FormattedTimeSent}`]])],2),e.showMessageData?(S(),D("div",n_,[ee(ys,{messageData:e.message.Data,maximizedTitle:e.message.FriendlyTypeName},null,8,["messageData","maximizedTitle"])])):U("",!0)],64)}}}),i_=$e(o_,[["__scopeId","data-v-5488ea1a"]]);class Wt{diff(t,n,i={}){let o;typeof i=="function"?(o=i,i={}):"callback"in i&&(o=i.callback);const s=this.castInput(t,i),a=this.castInput(n,i),l=this.removeEmpty(this.tokenize(s,i)),r=this.removeEmpty(this.tokenize(a,i));return this.diffWithOptionsObj(l,r,i,o)}diffWithOptionsObj(t,n,i,o){var s;const a=y=>{if(y=this.postProcess(y,i),o){setTimeout(function(){o(y)},0);return}else return y},l=n.length,r=t.length;let u=1,c=l+r;i.maxEditLength!=null&&(c=Math.min(c,i.maxEditLength));const d=(s=i.timeout)!==null&&s!==void 0?s:1/0,f=Date.now()+d,h=[{oldPos:-1,lastComponent:void 0}];let g=this.extractCommon(h[0],n,t,0,i);if(h[0].oldPos+1>=r&&g+1>=l)return a(this.buildValues(h[0].lastComponent,n,t));let p=-1/0,m=1/0;const b=()=>{for(let y=Math.max(p,-u);y<=Math.min(m,u);y+=2){let v;const w=h[y-1],O=h[y+1];w&&(h[y-1]=void 0);let L=!1;if(O){const _=O.oldPos-y;L=O&&0<=_&&_<l}const A=w&&w.oldPos+1<r;if(!L&&!A){h[y]=void 0;continue}if(!A||L&&w.oldPos<O.oldPos?v=this.addToPath(O,!0,!1,0,i):v=this.addToPath(w,!1,!0,1,i),g=this.extractCommon(v,n,t,y,i),v.oldPos+1>=r&&g+1>=l)return a(this.buildValues(v.lastComponent,n,t))||!0;h[y]=v,v.oldPos+1>=r&&(m=Math.min(m,y-1)),g+1>=l&&(p=Math.max(p,y+1))}u++};if(o)(function y(){setTimeout(function(){if(u>c||Date.now()>f)return o(void 0);b()||y()},0)})();else for(;u<=c&&Date.now()<=f;){const y=b();if(y)return y}}addToPath(t,n,i,o,s){const a=t.lastComponent;return a&&!s.oneChangePerToken&&a.added===n&&a.removed===i?{oldPos:t.oldPos+o,lastComponent:{count:a.count+1,added:n,removed:i,previousComponent:a.previousComponent}}:{oldPos:t.oldPos+o,lastComponent:{count:1,added:n,removed:i,previousComponent:a}}}extractCommon(t,n,i,o,s){const a=n.length,l=i.length;let r=t.oldPos,u=r-o,c=0;for(;u+1<a&&r+1<l&&this.equals(i[r+1],n[u+1],s);)u++,r++,c++,s.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return c&&!s.oneChangePerToken&&(t.lastComponent={count:c,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=r,u}equals(t,n,i){return i.comparator?i.comparator(t,n):t===n||!!i.ignoreCase&&t.toLowerCase()===n.toLowerCase()}removeEmpty(t){const n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(t[i]);return n}castInput(t,n){return t}tokenize(t,n){return Array.from(t)}join(t){return t.join("")}postProcess(t,n){return t}get useLongestToken(){return!1}buildValues(t,n,i){const o=[];let s;for(;t;)o.push(t),s=t.previousComponent,delete t.previousComponent,t=s;o.reverse();const a=o.length;let l=0,r=0,u=0;for(;l<a;l++){const c=o[l];if(c.removed)c.value=this.join(i.slice(u,u+c.count)),u+=c.count;else{if(!c.added&&this.useLongestToken){let d=n.slice(r,r+c.count);d=d.map(function(f,h){const g=i[u+h];return g.length>f.length?g:f}),c.value=this.join(d)}else c.value=this.join(n.slice(r,r+c.count));r+=c.count,c.added||(u+=c.count)}}return o}}class s_ extends Wt{}const a_=new s_;function r_(e,t,n){return a_.diff(e,t,n)}function ur(e,t){let n;for(n=0;n<e.length&&n<t.length;n++)if(e[n]!=t[n])return e.slice(0,n);return e.slice(0,n)}function cr(e,t){let n;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(n=0;n<e.length&&n<t.length;n++)if(e[e.length-(n+1)]!=t[t.length-(n+1)])return e.slice(-n);return e.slice(-n)}function Ki(e,t,n){if(e.slice(0,t.length)!=t)throw Error(`string ${JSON.stringify(e)} doesn't start with prefix ${JSON.stringify(t)}; this is a bug`);return n+e.slice(t.length)}function Ji(e,t,n){if(!t)return e+n;if(e.slice(-t.length)!=t)throw Error(`string ${JSON.stringify(e)} doesn't end with suffix ${JSON.stringify(t)}; this is a bug`);return e.slice(0,-t.length)+n}function Zt(e,t){return Ki(e,t,"")}function Ln(e,t){return Ji(e,t,"")}function dr(e,t){return t.slice(0,l_(e,t))}function l_(e,t){let n=0;e.length>t.length&&(n=e.length-t.length);let i=t.length;e.length<t.length&&(i=e.length);const o=Array(i);let s=0;o[0]=0;for(let a=1;a<i;a++){for(t[a]==t[s]?o[a]=o[s]:o[a]=s;s>0&&t[a]!=t[s];)s=o[s];t[a]==t[s]&&s++}s=0;for(let a=n;a<e.length;a++){for(;s>0&&e[a]!=t[s];)s=o[s];e[a]==t[s]&&s++}return s}function Kt(e){let t;for(t=e.length-1;t>=0&&e[t].match(/\s/);t--);return e.substring(t+1)}function ft(e){const t=e.match(/^\s*/);return t?t[0]:""}const ao="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",u_=new RegExp(`[${ao}]+|\\s+|[^${ao}]`,"ug");class c_ extends Wt{equals(t,n,i){return i.ignoreCase&&(t=t.toLowerCase(),n=n.toLowerCase()),t.trim()===n.trim()}tokenize(t,n={}){let i;if(n.intlSegmenter){const a=n.intlSegmenter;if(a.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');i=Array.from(a.segment(t),l=>l.segment)}else i=t.match(u_)||[];const o=[];let s=null;return i.forEach(a=>{/\s/.test(a)?s==null?o.push(a):o.push(o.pop()+a):s!=null&&/\s/.test(s)?o[o.length-1]==s?o.push(o.pop()+a):o.push(s+a):o.push(a),s=a}),o}join(t){return t.map((n,i)=>i==0?n:n.replace(/^\s+/,"")).join("")}postProcess(t,n){if(!t||n.oneChangePerToken)return t;let i=null,o=null,s=null;return t.forEach(a=>{a.added?o=a:a.removed?s=a:((o||s)&&fr(i,s,o,a),i=a,o=null,s=null)}),(o||s)&&fr(i,s,o,null),t}}const d_=new c_;function f_(e,t,n){return d_.diff(e,t,n)}function fr(e,t,n,i){if(t&&n){const o=ft(t.value),s=Kt(t.value),a=ft(n.value),l=Kt(n.value);if(e){const r=ur(o,a);e.value=Ji(e.value,a,r),t.value=Zt(t.value,r),n.value=Zt(n.value,r)}if(i){const r=cr(s,l);i.value=Ki(i.value,l,r),t.value=Ln(t.value,r),n.value=Ln(n.value,r)}}else if(n){if(e){const o=ft(n.value);n.value=n.value.substring(o.length)}if(i){const o=ft(i.value);i.value=i.value.substring(o.length)}}else if(e&&i){const o=ft(i.value),s=ft(t.value),a=Kt(t.value),l=ur(o,s);t.value=Zt(t.value,l);const r=cr(Zt(o,l),a);t.value=Ln(t.value,r),i.value=Ki(i.value,o,r),e.value=Ji(e.value,o,o.slice(0,o.length-r.length))}else if(i){const o=ft(i.value),s=Kt(t.value),a=dr(s,o);t.value=Ln(t.value,a)}else if(e){const o=Kt(e.value),s=ft(t.value),a=dr(o,s);t.value=Zt(t.value,a)}}class h_ extends Wt{tokenize(t){const n=new RegExp(`(\\r?\\n)|[${ao}]+|[^\\S\\n\\r]+|[^${ao}]`,"ug");return t.match(n)||[]}}const g_=new h_;function m_(e,t,n){return g_.diff(e,t,n)}function v_(e,t){if(typeof e=="function")t.callback=e;else if(e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}class p_ extends Wt{constructor(){super(...arguments),this.tokenize=w_}equals(t,n,i){return i.ignoreWhitespace?((!i.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!i.newlineIsToken||!n.includes(`
`))&&(n=n.trim())):i.ignoreNewlineAtEof&&!i.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),n.endsWith(`
`)&&(n=n.slice(0,-1))),super.equals(t,n,i)}}const Yl=new p_;function y_(e,t,n){return Yl.diff(e,t,n)}function __(e,t,n){return n=v_(n,{ignoreWhitespace:!0}),Yl.diff(e,t,n)}function w_(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));const n=[],i=e.split(/(\n|\r\n)/);i[i.length-1]||i.pop();for(let o=0;o<i.length;o++){const s=i[o];o%2&&!t.newlineIsToken?n[n.length-1]+=s:n.push(s)}return n}function b_(e){return e=="."||e=="!"||e=="?"}class x_ extends Wt{tokenize(t){var n;const i=[];let o=0;for(let s=0;s<t.length;s++){if(s==t.length-1){i.push(t.slice(o));break}if(b_(t[s])&&t[s+1].match(/\s/)){for(i.push(t.slice(o,s+1)),s=o=s+1;!((n=t[s+1])===null||n===void 0)&&n.match(/\s/);)s++;i.push(t.slice(o,s+1)),o=s+1}}return i}}const E_=new x_;function S_(e,t,n){return E_.diff(e,t,n)}class k_ extends Wt{tokenize(t){return t.split(/([{}:;,]|\s+)/)}}const C_=new k_;function M_(e,t,n){return C_.diff(e,t,n)}const N_={key:0,class:"diff-headers"},$_={class:"diff-header"},I_={key:0,class:"diff-header"},T_={class:"diff-content"},D_={key:0,class:"diff-column"},O_={class:"diff-lines"},P_={key:0,class:"diff-fold"},R_=["onClick"],L_={key:0,class:"diff-line-number"},A_={class:"diff-line-content"},z_={class:"diff-column"},V_={class:"diff-lines"},B_={key:0,class:"diff-fold"},F_=["onClick"],H_={key:0,class:"diff-line-number"},G_={class:"diff-line-content"},q_=ue({__name:"DiffContent",props:{oldValue:{},newValue:{},splitView:{type:Boolean,default:!0},hideLineNumbers:{type:Boolean,default:!1},showDiffOnly:{type:Boolean,default:!1},extraLinesSurroundingDiff:{default:3},leftTitle:{default:"Previous"},rightTitle:{default:"Current"},compareMethod:{default:"diffLines"}},setup(e){const t=e,n=X([]),i=X([]),o=X([]),s=()=>{const{oldValue:r,newValue:u,compareMethod:c}=t;if(r===u){const b=u.split(`
`);b[b.length-1]===""&&b.pop();const y=[];let v=1;b.forEach(w=>{y.push({left:{value:w,lineNumber:v,type:0},right:{value:w,lineNumber:v++,type:0}})}),n.value=y,i.value=[];return}let d;switch(c){case"diffChars":d=r_(r,u);break;case"diffWords":d=f_(r,u);break;case"diffWordsWithSpace":d=m_(r,u);break;case"diffTrimmedLines":d=__(r,u);break;case"diffSentences":d=S_(r,u);break;case"diffCss":d=M_(r,u);break;case"diffLines":default:d=y_(r,u);break}const f=[],h=[];let g=1,p=1,m=0;d.forEach(b=>{const y=b.value.split(`
`);y[y.length-1]===""&&y.pop(),!b.added&&!b.removed?y.forEach(v=>{f.push({left:{value:v,lineNumber:g++,type:0},right:{value:v,lineNumber:p++,type:0}}),m++}):b.removed?y.forEach(v=>{h.push(m),f.push({left:{value:v,lineNumber:g++,type:2},right:{value:"",type:0}}),m++}):b.added&&y.forEach(v=>{h.push(m),f.push({left:{value:"",type:0},right:{value:v,lineNumber:p++,type:1}}),m++})}),n.value=f,i.value=h,o.value=[]},a=r=>{o.value.includes(r)||o.value.push(r)},l=Z(()=>{if(!n.value.length)return[];const{showDiffOnly:r,extraLinesSurroundingDiff:u}=t,c=u<0?0:u;let d=[];const f=[],h=[...i.value];return n.value.forEach((g,p)=>{const m=h[0],b=m!==void 0?m-p:void 0;if(r&&(b===-c&&(d=[],h.shift()),g.left.type===0&&(b!==void 0&&b>c||typeof m>"u")&&!o.value.includes(m))){d.push(p+1),p===n.value.length-1&&d.length>1&&f.push({type:"fold",count:d.length,blockNumber:m,leftLineNumber:g.left.lineNumber,rightLineNumber:g.right.lineNumber});return}if(b===c&&d.length>0){const y=d.length;d=[],f.push({type:"fold",count:y,blockNumber:m,leftLineNumber:g.left.lineNumber,rightLineNumber:g.right.lineNumber})}f.push({type:"line",lineInfo:g,index:p})}),f});return ve(()=>[t.oldValue,t.newValue,t.compareMethod,t.showDiffOnly,t.extraLinesSurroundingDiff],()=>{s()},{immediate:!0}),(r,u)=>(S(),D("div",{class:Ee(["diff-container",{"split-view":e.splitView}])},[e.leftTitle||e.rightTitle?(S(),D("div",N_,[M("div",$_,ne(e.leftTitle),1),e.splitView?(S(),D("div",I_,ne(e.rightTitle),1)):U("",!0)])):U("",!0),M("div",T_,[e.splitView?(S(),D("div",D_,[M("div",O_,[(S(!0),D(pe,null,ze(l.value,(c,d)=>(S(),D(pe,{key:`diff-left-${d}`},[c.type==="fold"?(S(),D("div",P_,[M("button",{onClick:f=>a(c.blockNumber),class:"diff-fold-button"},ne(` Expand ${c.count} lines... `),9,R_)])):c.type==="line"?(S(),D("div",{key:1,class:Ee(["diff-line",{"diff-line-removed":c.lineInfo.left.type===2}])},[e.hideLineNumbers?U("",!0):(S(),D("span",L_,ne(c.lineInfo.left.lineNumber),1)),M("span",A_,ne(c.lineInfo.left.value),1)],2)):U("",!0)],64))),128))])])):U("",!0),M("div",z_,[M("div",V_,[(S(!0),D(pe,null,ze(l.value,(c,d)=>(S(),D(pe,{key:`diff-right-${d}`},[c.type==="fold"?(S(),D("div",B_,[M("button",{onClick:f=>a(c.blockNumber),class:"diff-fold-button"},ne(` Expand ${c.count} lines... `),9,F_)])):c.type==="line"?(S(),D("div",{key:1,class:Ee(["diff-line",{"diff-line-added":c.lineInfo.right.type===1}])},[e.hideLineNumbers?U("",!0):(S(),D("span",H_,ne(c.lineInfo.right.lineNumber),1)),M("span",G_,ne(c.lineInfo.right.value),1)],2)):U("",!0)],64))),128))])])])],2))}}),hr=$e(q_,[["__scopeId","data-v-3ad2f991"]]),Y_={class:"diff-wrapper"},W_=["src"],U_={key:0,class:"maximize-modal"},j_={class:"maximize-modal-content"},X_={class:"maximize-modal-toolbar"},Z_={class:"maximize-modal-title"},K_=["src"],J_={class:"maximize-modal-body"},Q_=ue({__name:"DiffViewer",props:{oldValue:{},newValue:{},splitView:{type:Boolean,default:!0},hideLineNumbers:{type:Boolean,default:!1},showDiffOnly:{type:Boolean,default:!1},extraLinesSurroundingDiff:{default:3},leftTitle:{default:"Previous"},rightTitle:{default:"Current"},compareMethod:{default:"diffLines"},showMaximizeIcon:{type:Boolean,default:!1}},setup(e){const t=e,n=X(!1),i=X(!1),o=()=>{n.value=!n.value},s=r=>{r.key==="Escape"&&n.value&&(n.value=!1)},a=()=>{t.showMaximizeIcon&&(i.value=!0)},l=()=>{i.value=!1};return Ve(()=>{t.showMaximizeIcon&&window.addEventListener("keydown",s)}),ro(()=>{window.removeEventListener("keydown",s)}),(r,u)=>(S(),D("div",{class:"diff-viewer",onMouseenter:a,onMouseleave:l},[M("div",Y_,[e.showMaximizeIcon&&i.value?(S(),D("button",{key:0,onClick:o,class:"maximize-button",title:"Maximize diff view"},[M("img",{src:R(Vl),alt:"Maximize",width:"14",height:"14"},null,8,W_)])):U("",!0),ee(hr,{"old-value":e.oldValue,"new-value":e.newValue,"split-view":e.splitView,"hide-line-numbers":e.hideLineNumbers,"show-diff-only":e.showDiffOnly,"extra-lines-surrounding-diff":e.extraLinesSurroundingDiff,"left-title":e.leftTitle,"right-title":e.rightTitle,"compare-method":e.compareMethod},null,8,["old-value","new-value","split-view","hide-line-numbers","show-diff-only","extra-lines-surrounding-diff","left-title","right-title","compare-method"])]),n.value?(S(),D("div",U_,[M("div",j_,[M("div",X_,[M("span",Z_,ne(e.leftTitle)+" vs "+ne(e.rightTitle),1),M("button",{onClick:o,class:"maximize-modal-close",title:"Close"},[M("img",{src:R(Bl),alt:"Close",width:"16",height:"16"},null,8,K_)])]),M("div",J_,[ee(hr,{"old-value":e.oldValue,"new-value":e.newValue,"split-view":e.splitView,"hide-line-numbers":e.hideLineNumbers,"show-diff-only":e.showDiffOnly,"extra-lines-surrounding-diff":e.extraLinesSurroundingDiff,"left-title":e.leftTitle,"right-title":e.rightTitle,"compare-method":e.compareMethod},null,8,["old-value","new-value","split-view","hide-line-numbers","show-diff-only","extra-lines-surrounding-diff","left-title","right-title","compare-method"])])])])):U("",!0)],32))}}),ew=$e(Q_,[["__scopeId","data-v-e25c6c52"]]),tw="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='15'%20height='15'%20fill='%23333333'%20/%3e%3cpolygon%20points='4.986,4%2011.048,7.5%204.986,11'%20fill='%23CCCCCC'%20fill-rule='nonzero'%20/%3e%3c/svg%3e",nw="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='15'%20height='15'%20fill='%23333333'%20/%3e%3cpath%20fill='%23CCCCCC'%20fill-rule='nonzero'%20d='M3.612%205.274l2.74%200.885V3H8.62v3.159l2.74-0.885l0.616%201.953L9.183%208.086l1.822%202.609l-1.678%201.193L7.51%209.423l-1.879%202.464l-1.678-1.193l1.835-2.609L2.996%207.228L3.612%205.274z'%20/%3e%3c/svg%3e",ow="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2016%2016'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-581,-742)'%3e%3cg%20id='timeout'%20transform='matrix(1,0,0,1,596.565,753.212)'%3e%3cpath%20d='M0,-6.402C0.276,-6.875%200.435,-7.425%200.435,-8.013C0.435,-9.78%20-0.997,-11.212%20-2.764,-11.212C-3.361,-11.212%20-3.919,-11.048%20-4.397,-10.764C-2.425,-9.938%20-0.841,-8.366%200,-6.402M-10.728,-10.764C-11.206,-11.048%20-11.764,-11.212%20-12.36,-11.212C-14.127,-11.212%20-15.56,-9.78%20-15.56,-8.013C-15.56,-7.425%20-15.401,-6.875%20-15.125,-6.402C-14.284,-8.366%20-12.699,-9.938%20-10.728,-10.764M-7.562,2.12C-10.489,2.12%20-12.858,-0.248%20-12.858,-3.176C-12.858,-6.103%20-10.49,-8.472%20-7.562,-8.472C-4.636,-8.472%20-2.266,-6.103%20-2.266,-3.176C-2.266,-0.249%20-4.635,2.12%20-7.562,2.12M-2.357,1.581C-1.211,0.327%20-0.511,-1.342%20-0.511,-3.176C-0.511,-7.07%20-3.668,-10.227%20-7.562,-10.227C-11.457,-10.227%20-14.614,-7.07%20-14.614,-3.176C-14.614,-1.342%20-13.914,0.327%20-12.767,1.581C-13.12,2.46%20-13.583,3.612%20-13.896,4.391C-13.944,4.508%20-13.909,4.643%20-13.81,4.723C-13.712,4.803%20-13.573,4.809%20-13.468,4.739C-12.75,4.259%20-11.683,3.545%20-10.913,3.03C-9.917,3.569%20-8.775,3.876%20-7.562,3.876C-6.349,3.876%20-5.208,3.569%20-4.211,3.03L-1.657,4.739C-1.552,4.81%20-1.413,4.803%20-1.314,4.723C-1.216,4.643%20-1.181,4.509%20-1.228,4.391L-2.357,1.581ZM-4.27,-1.802L-8.687,-1.802L-8.687,-6.655L-7.282,-6.655L-7.282,-3.206L-4.27,-3.206L-4.27,-1.802Z'%20style='fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",iw={class:"block",role:"row"},sw={class:"row"},aw={class:"cell cell--side"},rw=["data-message-id"],lw=["src"],uw={class:"message-title","aria-label":"initiating message type"},cw={class:"timestamp","aria-label":"initiating message timestamp"},dw={class:"cell cell--center cell-flex"},fw={class:"cell-inner cell-inner-center cell-inner--align-bottom"},hw=["src"],gw={key:1,class:"saga-status-title saga-status-title--inline timeout-status","aria-label":"timeout invoked"},mw=["src"],vw={class:"saga-status-title saga-status-title--inline"},pw={class:"timestamp timestamp--inline","aria-label":"time stamp"},yw={class:"row"},_w={class:"cell cell--side cell--left-border cell--aling-top"},ww={key:0,class:"message-data message-data--active"},bw={class:"cell cell--center cell--center--border"},xw={class:"saga-state-container"},Ew={key:0,class:"saga-state-title"},Sw={key:1,class:"saga-state-title"},kw={key:2,class:"json-container"},Cw={key:3,class:"json-container json-container--first-node"},Mw={key:4,class:"json-container"},Nw={key:5},$w={key:0,class:"cell cell--side cell--aling-top"},Iw=ue({__name:"SagaUpdateNode",props:{update:{},showMessageData:{type:Boolean}},setup(e){const t=Cu.baseTheme({".maximazable-code-editor--inline-instance .cm-editor":{fontFamily:"monospace",fontSize:"0.75rem",backgroundColor:"#f2f2f2"},".maximazable-code-editor--inline-instance .cm-scroller":{backgroundColor:"#f2f2f2"}}),n=e,i=En(),o=X(null),s=X(!1),a=Z(()=>i.selectedMessageId===n.update.MessageId),l=()=>{i.setSelectedMessageId(n.update.InitiatingMessage.MessageId),i.scrollToTimeoutRequest=!0};ve([()=>i.scrollToTimeout,()=>a.value,()=>o.value!==null],([f,h,g])=>{f&&h&&g&&o.value&&(o.value.scrollIntoView({behavior:"smooth",block:"center"}),i.scrollToTimeout=!1)},{immediate:!0});const r=f=>f==null?"null":typeof f=="object"?Vn(f,null,2)||"{}":String(f),u=f=>{if(!f)return{};let h;try{h=br(f)}catch(p){return console.error("Error parsing state:",p),s.value=!0,{}}return["$type","Id","Originator","OriginalMessageId"].forEach(p=>{p in h&&delete h[p]}),h},c=Z(()=>{const f=u(n.update.stateAfterChange),h=u(n.update.previousStateAfterChange),g=n.update.IsFirstNode,p=r(f);return g?{formattedState:p,previousFormatted:"",currentFormatted:p}:{previousFormatted:r(h),currentFormatted:p}}),d=Z(()=>{if(n.update.IsFirstNode)return!0;const f=u(n.update.stateAfterChange),h=u(n.update.previousStateAfterChange);return Vn(f)!==Vn(h)});return(f,h)=>{const g=ut("tippy");return S(),D("div",iw,[M("div",sw,[M("div",aw,[M("div",{ref_key:"initiatingMessageRef",ref:o,class:Ee({"cell-inner":!0,"cell-inner-side":!0,"cell-inner-side--active":a.value||e.update.InitiatingMessage.IsSagaTimeoutMessage&&e.update.MessageId===R(i).selectedMessageId}),"data-message-id":e.update.InitiatingMessage.IsSagaTimeoutMessage?e.update.MessageId:""},[Ne(M("img",{class:"saga-icon saga-icon--side-cell",src:e.update.InitiatingMessage.IsSagaTimeoutMessage?R(ow):e.update.InitiatingMessage.IsEventMessage?R(ql):R(Gl),alt:""},null,8,lw),[[g,e.update.InitiatingMessage.IsSagaTimeoutMessage?"Timeout Message":e.update.InitiatingMessage.IsEventMessage?"Event Message":"Command Message"]]),Ne((S(),D("h2",uw,[ye(ne(e.update.InitiatingMessage.FriendlyTypeName),1)])),[[g,e.update.InitiatingMessage.FriendlyTypeName]]),Ne((S(),D("div",cw,[ye(ne(e.update.InitiatingMessage.FormattedMessageTimestamp),1)])),[[g,`Received at: ${e.update.InitiatingMessage.FormattedMessageTimestamp}`]])],10,rw)]),M("div",dw,[M("div",fw,[e.update.InitiatingMessage.IsSagaTimeoutMessage?(S(),D(pe,{key:0},[Ne(M("img",{class:"saga-icon saga-icon--center-cell",src:R(Hl),alt:""},null,8,hw),[[g,"Saga Timeout"]]),e.update.InitiatingMessage.HasRelatedTimeoutRequest?Ne((S(),D("a",{key:0,href:"#",onClick:un(l,["prevent"]),class:"saga-status-title saga-status-title--inline timeout-status","aria-label":"timeout invoked"},[...h[0]||(h[0]=[ye(" Timeout Invoked ",-1)])])),[[g,"View original timeout request"]]):(S(),D("h2",gw,"Timeout Invoked")),h[1]||(h[1]=M("br",null,null,-1))],64)):U("",!0),Ne(M("img",{class:"saga-icon saga-icon--center-cell",src:e.update.IsFirstNode?R(tw):R(nw),alt:""},null,8,mw),[[g,e.update.IsFirstNode?"Saga Initiated":"Saga Updated"]]),M("h2",vw,ne(e.update.StatusDisplay),1),Ne((S(),D("div",pw,[ye(ne(e.update.FormattedStartTime),1)])),[[g,`Update time: ${e.update.FormattedStartTime}`]])])])]),M("div",yw,[M("div",_w,[e.showMessageData?(S(),D("div",ww,[e.update.InitiatingMessage?(S(),de(ys,{key:0,messageData:e.update.InitiatingMessage.MessageData,maximizedTitle:e.update.InitiatingMessage.FriendlyTypeName},null,8,["messageData","maximizedTitle"])):U("",!0)])):U("",!0)]),M("div",bw,[M("div",{class:Ee({"cell-inner":!0,"cell-inner-line":e.update.HasTimeout,"cell-inner-center":!e.update.HasTimeout})},[M("div",xw,[e.update.IsFirstNode?(S(),D("h3",Ew,"Initial Saga State")):(S(),D("h3",Sw,"State Changes")),s.value?(S(),D("div",kw,[...h[2]||(h[2]=[M("div",{class:"parsing-error-message"},"An error occurred while parsing and displaying the saga state for this update",-1)])])):e.update.IsFirstNode?(S(),D("div",Cw,[ee(Fl,{"model-value":c.value.formattedState||"",language:"json",showGutter:!1,modalTitle:"Initial Saga State",extensions:[R(t)]},null,8,["model-value","extensions"])])):d.value?d.value&&!e.update.IsFirstNode?(S(),D("div",Nw,[ee(ew,{"hide-line-numbers":!0,showDiffOnly:!0,oldValue:c.value.previousFormatted,newValue:c.value.currentFormatted,leftTitle:"Previous State",rightTitle:"Updated State",showMaximizeIcon:!0},null,8,["oldValue","newValue"])])):U("",!0):(S(),D("div",Mw,[...h[3]||(h[3]=[M("div",{class:"no-changes-message"},"No state changes in this update",-1)])]))])],2)]),e.update.HasOutgoingMessages?(S(),D("div",$w,[h[4]||(h[4]=M("div",{class:"cell-inner cell-inner-right"},null,-1)),(S(!0),D(pe,null,ze(e.update.OutgoingMessages,(p,m)=>(S(),de(i_,{key:m,message:p,showMessageData:e.showMessageData},null,8,["message","showMessageData"]))),128))])):U("",!0)]),(S(!0),D(pe,null,ze(e.update.OutgoingTimeoutMessages,(p,m)=>(S(),de(J1,{key:"timeout-"+m,message:p,isLastMessage:m===e.update.OutgoingTimeoutMessages.length-1,showMessageData:e.showMessageData},null,8,["message","isLastMessage","showMessageData"]))),128))])}}}),Tw=$e(Iw,[["__scopeId","data-v-cf0ddcb3"]]),Dw="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0'%20y='0'%20width='15'%20height='15'%20fill='%23333333'%20/%3e%3crect%20x='4'%20y='4'%20width='7'%20height='7'%20fill='%23CCCCCC'%20/%3e%3c/svg%3e",Ow={class:"block"},Pw={class:"row row--center"},Rw={class:"cell cell--center cell--inverted"},Lw={class:"cell-inner cell-inner-center"},Aw=["src"],zw={class:"saga-status-title saga-status-title--inline"},Vw={class:"timestamp"},Bw=ue({__name:"SagaCompletedNode",props:{completionTime:{}},setup(e){return(t,n)=>{const i=ut("tippy");return S(),D("div",Ow,[M("div",Pw,[M("div",Rw,[M("div",Lw,[M("img",{class:"saga-icon saga-icon--center-cell",src:R(Dw),alt:"Saga Completed"},null,8,Aw),Ne((S(),D("h2",zw,[...n[0]||(n[0]=[ye("Saga Completed",-1)])])),[[i,"The saga has completed its lifecycle"]]),Ne((S(),D("div",Vw,[ye(ne(e.completionTime),1)])),[[i,`Completion timestamp: ${e.completionTime}`]])])])])])}}}),Fw=$e(Bw,[["__scopeId","data-v-e59a0d99"]]),Hw={class:"saga-container"},Gw={key:0,class:"toolbar"},qw={key:1,class:"loading-container"},Yw={key:4,role:"table","aria-label":"saga-sequence-list",class:"body",style:{display:"flex"}},Ww={class:"container"},Uw=ue({__name:"SagaDiagram",setup(e){const t=En(),{showMessageData:n,loading:i}=Le(t),o=He();ve(()=>o.state.data.invoked_saga?.has_saga,a=>{const l=o.state.data.invoked_saga;a&&l?.saga_id?t.setSagaId(l.saga_id):t.clearSagaHistory()},{immediate:!0}),vr(()=>{t.clearSagaHistory()});const s=Z(()=>{const a=t.sagaHistory?.changes.find(d=>d.status==="completed"),l=a?new Date(a.finish_time):null,{data:r}=o.state,{invoked_saga:u}=r,c=t.sagaHistory;return{SagaTitle:Zi(u.saga_type)||"Unknown saga",SagaGuid:u.saga_id||"Missing guid",ParticipatedInSaga:u.has_saga||!1,HasSagaData:!!c,ShowNoPluginActiveLegend:!c&&u.has_saga||!1,SagaCompleted:!!a,FormattedCompletionTime:l?l.toLocaleString():"",SagaUpdates:Qy(c,t.messagesData),ShowMessageData:n.value}});return(a,l)=>(S(),D("div",Hw,[s.value.HasSagaData?(S(),D("div",Gw,[M("button",{type:"button",class:"btn btn-secondary btn-sm","aria-label":"show-message-data-button",onClick:l[0]||(l[0]=(...r)=>R(t).toggleMessageData&&R(t).toggleMessageData(...r))},[ee(Ge,{icon:R(yu)},null,8,["icon"]),ye(" "+ne(s.value.ShowMessageData?"Hide Message Data":"Show Message Data"),1)])])):U("",!0),R(i)?(S(),D("div",qw,[ee(Tt)])):s.value.ParticipatedInSaga?s.value.ShowNoPluginActiveLegend?(S(),de(h1,{key:3})):s.value.HasSagaData?(S(),D("div",Yw,[M("div",Ww,[ee(b1,{"saga-title":s.value.SagaTitle,"saga-guid":s.value.SagaGuid},null,8,["saga-title","saga-guid"]),(S(!0),D(pe,null,ze(s.value.SagaUpdates,(r,u)=>(S(),de(Tw,{key:u,update:r,"show-message-data":s.value.ShowMessageData},null,8,["update","show-message-data"]))),128)),s.value.SagaCompleted?(S(),de(Fw,{key:0,"completion-time":s.value.FormattedCompletionTime},null,8,["completion-time"])):U("",!0)])])):U("",!0):(S(),de(s1,{key:2}))]))}}),jw=$e(Uw,[["__scopeId","data-v-8800f933"]]),Xw={class:"container"},Zw={class:"row"},Kw={class:"col-sm-12 no-side-padding"},Jw={class:"active break group-title"},Qw={class:"message-type-title"},eb={class:"row"},tb={class:"col-sm-12 no-side-padding"},nb={class:"metadata group-message-count message-metadata"},ob={class:"metadata"},ib={key:11,class:"metadata"},sb={class:"row"},ab={class:"col-sm-12 no-side-padding"},rb={class:"btn-toolbar message-toolbar"},lb={class:"row"},ub={class:"col-sm-12 no-side-padding"},cb=ue({__name:"MessageView",setup(e){const t=_u(),n=Z(()=>t.params.id),i=Z(()=>t.params.messageId),o=Z(()=>i.value===void 0),s=X({path:kt.failedMessage.failedMessages.link}),a=wu(),{isMassTransitConnected:l}=Le(a),r=He(),{state:u}=Le(r),c=Z(()=>r.state.data.invoked_saga?.has_saga),d=Z(()=>{const h=[{text:"Message body",component:N0},{text:"Headers",component:F0}];return o.value&&h.unshift({text:"Stacktrace",component:J0}),l.value||(h.push({text:"Flow Diagram",component:hp}),h.push({text:"Sequence Diagram",component:b0}),c?.value&&h.push({text:"Saga Diagram",component:jw})),h});ve([n,i],async([h,g],[p,m])=>{(h!==p||g!==m)&&r.reset(),g!==void 0?await r.loadMessage(g,h):await r.loadFailedMessage(h)},{immediate:!0});const f=Ti("#929E9E").filter;return Ve(()=>{const{back:h,...g}=t.query;h&&(s.value={path:h.toString(),query:g})}),(h,g)=>(S(),D("div",Xw,[M("section",null,[R(u).not_found?(S(),de(bs,{key:0,title:"message failures",message:"Could not find message. This could be because the message URL is invalid or the corresponding message was processed and is no longer tracked by ServiceControl."})):R(u).failed_to_load?(S(),de(bs,{key:1,title:"message failures",message:"An error occurred while trying to load the message. Please check the ServiceControl logs to learn what the issue is."})):(S(),D(pe,{key:2},[M("div",Zw,[M("div",Kw,[ee(R(ws),{to:s.value},{default:ke(()=>[ee(Ge,{icon:R(bu),size:"sm"},null,8,["icon"]),g[0]||(g[0]=ye(" Back",-1))]),_:1},8,["to"]),M("div",Jw,[M("h1",Qw,ne(R(u).data.message_type),1)])])]),M("div",eb,[M("div",tb,[M("div",nb,[R(u).data.failure_status.retry_in_progress?(S(),de(dt,{key:0,tooltip:"Message is being added to the retries queue",type:"info",text:"Requesting retry..."})):U("",!0),R(u).data.failure_status.retried?(S(),de(dt,{key:1,tooltip:"Message is enqueued to be retried",type:"info",text:"Waiting for retry"})):U("",!0),R(u).data.failure_status.restoring?(S(),de(dt,{key:2,tooltip:"Message is being restored",type:"info",text:"Restoring..."})):U("",!0),R(u).data.failure_status.archiving?(S(),de(dt,{key:3,tooltip:"Message is being deleted",type:"info",text:"Deleting..."})):U("",!0),R(u).data.failure_status.archived?(S(),de(dt,{key:4,tooltip:"Message is deleted",type:"warning",text:"Deleted"})):U("",!0),R(u).data.failure_status.resolved?(S(),de(dt,{key:5,tooltip:"Message was processed successfully",type:"warning",text:"Processed"})):U("",!0),R(u).data.failure_metadata.number_of_processing_attempts!==void 0&&R(u).data.failure_metadata.number_of_processing_attempts>1?(S(),de(dt,{key:6,tooltip:`This message has already failed ${R(u).data.failure_metadata.number_of_processing_attempts} times`,type:"important",text:`${(R(u).data.failure_metadata.number_of_processing_attempts??0)-1} Retry Failures`},null,8,["tooltip","text"])):U("",!0),R(u).data.failure_metadata.edited?(S(),D(pe,{key:7},[ee(dt,{tooltip:"Message was edited",type:"info",text:"Edited"}),R(u).data.failure_metadata.edit_of?(S(),de(_t,{key:0,icon:R(xu),class:"metadata-link"},{default:ke(()=>[ee(R(ws),{to:{path:R(kt).messages.failedMessage.link(R(u).data.failure_metadata.edit_of),query:R(t).query}},{default:ke(()=>[...g[1]||(g[1]=[ye("View previous version",-1)])]),_:1},8,["to"])]),_:1},8,["icon"])):U("",!0)],64)):U("",!0),R(u).data.failure_metadata.time_of_failure?(S(),de(_t,{key:8,icon:R(Eo)},{default:ke(()=>[g[2]||(g[2]=ye("Failed: ",-1)),ee(Jt,{"date-utc":R(u).data.failure_metadata.time_of_failure},null,8,["date-utc"])]),_:1},8,["icon"])):(S(),de(_t,{key:9,icon:R(Eo)},{default:ke(()=>[g[3]||(g[3]=ye("Processed at: ",-1)),ee(Jt,{"date-utc":R(u).data.processed_at},null,8,["date-utc"])]),_:1},8,["icon"])),R(u).data.receiving_endpoint?(S(),D(pe,{key:10},[M("span",ob,[M("i",{class:"fa pa-endpoint",style:Fe({filter:R(f)})},null,4),ye(" Endpoint: "+ne(R(u).data.receiving_endpoint.name),1)]),ee(_t,{icon:R(Eu)},{default:ke(()=>[ye("Machine: "+ne(R(u).data.receiving_endpoint.host),1)]),_:1},8,["icon"])],64)):U("",!0),R(u).data.failure_metadata.redirect?(S(),D("span",ib,[g[4]||(g[4]=M("i",{class:"fa pa-redirect-source pa-redirect-small"},null,-1)),ye(" Redirect: "+ne(R(u).data.failure_metadata.redirect),1)])):U("",!0),R(u).data.failure_status.archived?(S(),D(pe,{key:12},[ee(_t,{icon:R(Eo)},{default:ke(()=>[g[5]||(g[5]=ye("Deleted: ",-1)),ee(Jt,{"date-utc":R(u).data.failure_metadata.last_modified},null,8,["date-utc"])]),_:1},8,["icon"]),R(u).data.failure_status.delete_soon?(S(),de(_t,{key:0,icon:R(Yn),class:"danger"},{default:ke(()=>[...g[6]||(g[6]=[ye("Scheduled for permanent deletion: immediately",-1)])]),_:1},8,["icon"])):(S(),de(_t,{key:1,icon:R(Yn),class:"danger"},{default:ke(()=>[g[7]||(g[7]=ye("Scheduled for permanent deletion: ",-1)),ee(Jt,{"date-utc":R(u).data.failure_metadata.deleted_in},null,8,["date-utc"])]),_:1},8,["icon"]))],64)):U("",!0)])])]),M("div",sb,[M("div",ab,[M("div",rb,[ee(Q0),ee(ey),ee(ty),ee(Yy),ee(Wy)])])]),M("div",lb,[M("div",ub,[ee(Zy,{tabs:d.value},null,8,["tabs"])])])],64))])]))}}),mb=$e(cb,[["__scopeId","data-v-384d40d9"]]);export{mb as default};
//# sourceMappingURL=MessageView-Be3gR6Ui.js.map
